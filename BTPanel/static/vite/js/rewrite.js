import{_ as e}from"./index95.js?v=1741416570306";import{bO as t,b as a,m as s,j as l,G as r}from"./page_layout.js?v=1741416570306";import{s as n}from"./file.js?v=1741416570306";import{_ as o}from"./index.vue_vue_type_script_setup_true_lang15.js?v=1741416570306";import{cL as u,ch as i,bO as p,T as c}from"./naive.js?v=1741416570306";import{d as m,r as f,P as v,Q as d,N as _,$ as h,R as w,S as j,ae as b,c as g}from"./vue.js?v=1741416570306";import"./common.js?v=1741416570306";import"./__commonjsHelpers__.js?v=1741416570306";import"./public.js?v=1741416570306";import"./theme-chrome.js?v=1741416570306";const x={class:"p-20px"},y={class:"w-160px"},C=m({__name:"rewrite",props:{fileContent:{default:""},filename:{default:""},rlist:{default:()=>[]}},emits:["close"],setup(m,{emit:C}){const k=m,R=C,{filename:U,rlist:N,fileContent:O}=k,P=t(),S=f(null),T=f(null),A=f([]),G=f(""),H=f(O),I=e=>{if("0.default"===e||"0.Current"===e)return U;{const{webserver:e}=P;return"/www/server/panel/rewrite/".concat("openlitespeed"===e?"apache":e,"/").concat(T.value,".conf")}},L=async()=>{const{message:e}=await n({path:U,data:H.value,encoding:"utf-8"});a(e)&&s.success(e.msg),R("close")},Q=e=>{var t;G.value=I(e),null==(t=S.value)||t.getContent()};return(()=>{const e=r(N)?N:[];A.value=u(e).map((e=>({label:e,value:e}))),e.length&&(T.value=e[0],G.value=I(e[0]))})(),(t,a)=>{const s=i,r=l,n=p,u=c,m=e;return v(),d("div",x,[_(n,{class:"items-center mb-12px"},{default:h((()=>[w("div",y,[_(s,{value:j(T),"onUpdate:value":[a[0]||(a[0]=e=>b(T)?T.value=e:null),Q],options:j(A)},null,8,["value","options"])]),w("div",null,[a[4]||(a[4]=w("span",null,"Rewrite rule converter: ",-1)),_(r,{href:"https://www.bt.cn/Tools",target:"_blank"},{default:h((()=>a[3]||(a[3]=[g("Apache to Nginx")]))),_:1})])])),_:1}),_(o,{ref_key:"configRef",ref:S,path:j(G),"onUpdate:path":a[1]||(a[1]=e=>b(G)?G.value=e:null),value:j(H),"onUpdate:value":a[2]||(a[2]=e=>b(H)?H.value=e:null),height:350,"show-tips":!1},null,8,["path","value"]),_(n,{class:"items-center mt-12px"},{default:h((()=>[_(u,{type:"primary",onClick:L},{default:h((()=>a[5]||(a[5]=[g("Save")]))),_:1})])),_:1}),_(m,{class:"mt-24px"},{default:h((()=>a[6]||(a[6]=[w("li",null,"Please select your application.",-1),w("li",null," If the site cannot be accessed after the rewrite rules set, please try to reset to default. ",-1),w("li",null,"You are able to modify rewrite rules, just save it after modification.",-1)]))),_:1})])}}});export{C as default};
