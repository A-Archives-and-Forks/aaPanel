import{_ as e}from"./public.js?v=1749179669910";import{cs as a,c as t,m as s,o as l,N as r}from"./page_layout.js?v=1749179669910";import{s as n}from"./file.js?v=1749179669910";import{_ as o}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1749179669910";import{cS as u,cp as i,bU as p,T as c}from"./naive.js?v=1749179669910";import{d as m,r as f,R as v,S as d,P as _,a1 as h,U as w,V as j,aj as g,c as b}from"./vue.js?v=1749179669910";import"./common.js?v=1749179669910";import"./__commonjsHelpers__.js?v=1749179669910";import"./theme-chrome.js?v=1749179669910";const y={class:"p-20px"},x={class:"w-160px"},C=m({__name:"rewrite",props:{fileContent:{default:""},filename:{default:""},rlist:{default:()=>[]}},emits:["close"],setup(m,{emit:C}){const U=m,k=C,{filename:R,rlist:S,fileContent:N}=U,P=a(),T=f(null),A=f(null),H=f([]),I=f(""),V=f(N),Y=e=>{if("0.default"===e||"0.Current"===e)return R;{const{webserver:e}=P;return"/www/server/panel/rewrite/".concat("openlitespeed"===e?"apache":e,"/").concat(A.value,".conf")}},q=async()=>{const{message:e}=await n({path:R,data:V.value,encoding:"utf-8"});t(e)&&s.success(e.msg),k("close")},z=e=>{var a;I.value=Y(e),null==(a=T.value)||a.getContent()};return(()=>{const e=r(S)?S:[];H.value=u(e).map((e=>({label:e,value:e}))),e.length&&(A.value=e[0],I.value=Y(e[0]))})(),(a,t)=>{const s=i,r=l,n=p,u=c,m=e;return v(),d("div",y,[_(n,{class:"items-center mb-12px"},{default:h((()=>[w("div",x,[_(s,{value:j(A),"onUpdate:value":[t[0]||(t[0]=e=>g(A)?A.value=e:null),z],options:j(H)},null,8,["value","options"])]),w("div",null,[t[4]||(t[4]=w("span",null,"Rewrite rule converter: ",-1)),_(r,{href:"https://www.bt.cn/Tools",target:"_blank"},{default:h((()=>t[3]||(t[3]=[b("Apache to Nginx")]))),_:1})])])),_:1}),_(o,{ref_key:"configRef",ref:T,path:j(I),"onUpdate:path":t[1]||(t[1]=e=>g(I)?I.value=e:null),value:j(V),"onUpdate:value":t[2]||(t[2]=e=>g(V)?V.value=e:null),height:350,"show-tips":!1},null,8,["path","value"]),_(n,{class:"items-center mt-12px"},{default:h((()=>[_(u,{type:"primary",onClick:q},{default:h((()=>t[5]||(t[5]=[b("Save")]))),_:1})])),_:1}),_(m,{class:"mt-24px"},{default:h((()=>t[6]||(t[6]=[w("li",null,"Please select your application.",-1),w("li",null," If the site cannot be accessed after the rewrite rules set, please try to reset to default. ",-1),w("li",null,"You are able to modify rewrite rules, just save it after modification.",-1)]))),_:1})])}}});export{C as default};
