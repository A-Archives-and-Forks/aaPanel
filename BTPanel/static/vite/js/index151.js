import{_ as e}from"./index237.js?v=1753954525509";import{_ as a,a as t}from"./index.vue_vue_type_script_setup_true_lang20.js?v=1753954525509";import{_ as n}from"./index.vue_vue_type_script_setup_true_lang21.js?v=1753954525509";import{_ as s}from"./index127.js?v=1753954525509";import{_ as l}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1753954525509";import{b as o,h as i,q as u,c as r,f as d,_ as p}from"./public.js?v=1753954525509";import{k as _,P as c,r as m,U as v,a1 as g,a2 as x,j as f,a3 as y,Q as b,X as h,ah as j,at as w,c as k,V as P,F as D,O as B,W as U,al as M}from"./vue.js?v=1753954525509";import{p as C}from"./soft.js?v=1753954525509";import{n as S,ee as O,ef as $,c as z,m as F,eg as L,bi as H,eh as I,ei as q,O as N,e as K,ej as Q}from"./page_layout.js?v=1753954525509";import{aq as T,ay as V,bY as W,c5 as X}from"./naive.js?v=1753954525509";import{_ as Y}from"./index96.js?v=1753954525509";import{_ as A}from"./index101.js?v=1753954525509";import"./php.js?v=1753954525509";import"./alarm.js?v=1753954525509";import"./index.vue_vue_type_script_setup_true_lang.js?v=1753954525509";import"./index.vue_vue_type_script_setup_true_lang10.js?v=1753954525509";import"./index.vue_vue_type_script_setup_true_lang14.js?v=1753954525509";import"./theme-chrome.js?v=1753954525509";import"./__commonjsHelpers__.js?v=1753954525509";import"./file2.js?v=1753954525509";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1753954525509";import"./common.js?v=1753954525509";const E=_({__name:"index",setup(e,{expose:a}){const{t:t}=c(),n=m(""),{table:p,columns:_}=o([{key:"name",title:t("Database.index_12")},{key:"sizeOnDisk",title:t("Site.DelSite.index_8"),render:e=>S(e.sizeOnDisk)},i({options:e=>[{label:t("Public.Btn.Del"),onClick:()=>{u({title:t("Database.index_30"),content:t("Plugin.MongoDB.index_8",[e.name]),onConfirm:async()=>{await O("mongodb",{name:e.name,id:e.id}),B()}})}}]})]),k=async()=>{n.value?(await L("mongodb",{sid:0,name:n.value,db_user:n.value,password:H(16),active:!1,ssl:"",ps:n.value}),B()):F.error(t("Database.form.index_15"))},{loading:P,setLoading:D}=r(),B=async()=>{if(C.s_status)try{D(!0);const{message:e}=await $();z(e)&&(p.data=e.databases)}finally{D(!1)}};return B(),a({init:B}),(e,a)=>{const t=T,o=V,i=W,u=d,r=l,c=s;return v(),g(c,{install:h(C).s_status},{desc:x((()=>[f(y(e.$t("Plugin.MongoDB.index_7")),1)])),default:x((()=>[b(r,null,{toolsLeft:x((()=>[b(i,{class:"flex-nowrap!"},{default:x((()=>[b(t,{value:h(n),"onUpdate:value":a[0]||(a[0]=e=>j(n)?n.value=e:null),placeholder:e.$t("Database.index_12"),onKeyup:w(k,["enter"])},null,8,["value","placeholder"]),b(o,{type:"primary",onClick:k},{default:x((()=>[f(y(e.$t("Database.mongo.index_4")),1)])),_:1})])),_:1})])),table:x((()=>[b(u,{data:h(p).data,columns:h(_),loading:h(P),"max-height":400},null,8,["data","columns","loading"])])),_:1})])),_:1},8,["install"])}}}),G={class:"w-100px! text-right"},J={class:"w-150px! color-#666"},R={class:"w-100px! text-right"},Z={class:"text-center my-10px"},ee=K(_({__name:"index",setup(e,{expose:a}){const{t:t}=c(),n={bindIp:t("Plugin.MongoDB.index_2"),dbPath:t("Plugin.MongoDB.index_3"),path:t("Plugin.MongoDB.index_4"),pidFilePath:t("Plugin.MongoDB.index_5"),port:t("Plugin.MongoDB.index_6")},s=m(),l=async()=>{const e=s.value.reduce(((e,a)=>(e[a.name]=a.value,e)),{});await I(e)},o=k((()=>{const e=s.value.find((e=>"authorization"===e.name));return!!e&&"enabled"===e.value})),i=()=>{const e=s.value.find((e=>"pwd"===e.name));e&&(e.value=H(16))},{loading:u,setLoading:d}=r(),_=async()=>{try{d(!0);const{message:e}=await q();z(e)&&(s.value=Object.entries(e).map((([e,a])=>({name:e,value:a,ps:n[e]}))))}finally{d(!1)}};return _(),a({init:_}),(e,a)=>{const t=T,n=X,r=W,d=Y,_=V,c=p,m=N;return v(),g(m,{show:h(u)},{default:x((()=>[(v(!0),P(D,null,B(h(s),((e,a)=>(v(),P("div",{key:a},["pwd"!==e.name?(v(),g(r,{key:0,class:"list_box"},{default:x((()=>[U("div",G,y(e.name),1),"authorization"!==e.name?(v(),g(t,{key:0,class:"w-300px!",value:e.value,"onUpdate:value":a=>e.value=a},null,8,["value","onUpdate:value"])):(v(),g(n,{key:1,value:e.value,"onUpdate:value":a=>e.value=a,"checked-value":"enabled","unchecked-value":"disabled"},null,8,["value","onUpdate:value"])),U("div",J,y(e.ps),1)])),_:2},1024)):M("",!0),"pwd"===e.name&&h(o)?(v(),g(r,{key:1,class:"list_box"},{default:x((()=>[U("div",R,y(e.name),1),b(d,{"icon-name":"refresh",value:e.value,"onUpdate:value":a=>e.value=a,class:"w-300px!",onClick:i,placeholder:"Please enter root password"},null,8,["value","onUpdate:value"])])),_:2},1024)):M("",!0)])))),128)),U("div",Z,[b(_,{type:"primary",onClick:l},{default:x((()=>[f(y(e.$t("Public.Btn.Save")),1)])),_:1})]),b(c,null,{default:x((()=>[U("li",null,y(e.$t("Plugin.MongoDB.index_1")),1)])),_:1})])),_:1},8,["show"])}}}),[["__scopeId","data-v-872a97b6"]]),ae=_({__name:"index",setup(e,{expose:a}){const t=m("None"),{loading:n,setLoading:s}=r(),l=async()=>{try{s(!0);const{message:e}=await Q();z(e)&&(t.value=e.result?e.result:"None")}finally{s(!1)}};return l(),a({init:l}),(e,a)=>{const s=A,l=N;return v(),g(l,{class:"h-610px",show:h(n)},{default:x((()=>[b(s,{log:h(t)},null,8,["log"])])),_:1},8,["show"])}}}),te=_({__name:"index",setup(s){const{t:l}=c(),o=m("service"),i=[{key:"service",label:l("Security.History.Index_10"),component:a},{key:"version",label:l("Plugin.Ftp.index_9"),component:n},{key:"database",label:l("Site.PHP.add_site_16"),component:E},{key:"config",label:l("Public.Btn.Config"),component:ee},{key:"file",label:l("Site.Config.index_15"),data:{path:"/www/server/mongodb/config.conf"},component:t},{key:"log",label:l("Ftp.Table.index_15"),component:ae}];return(a,t)=>{const n=e;return v(),g(n,{value:h(o),"onUpdate:value":t[0]||(t[0]=e=>j(o)?o.value=e:null),data:i},null,8,["value"])}}});export{te as default};
