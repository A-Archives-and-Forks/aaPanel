import{_ as a}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1756367574781";import{_ as e}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1756367574781";import{c as t,f as s,a as i,d as n,h as o}from"./public.js?v=1756367574781";import{bh as l,n as p,e$ as d,be as r,f0 as m,f1 as _,d as c,w as u,x as f,bk as b}from"./page_layout.js?v=1756367574781";import{aC as g}from"./naive.js?v=1756367574781";import{k as x,P as y,e as h,N as w,R as j,V as k,W as v,a3 as C,U as R,j as D,a4 as z}from"./vue.js?v=1756367574781";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1756367574781";import"./common.js?v=1756367574781";import"./__commonjsHelpers__.js?v=1756367574781";const S={class:"p-20px"},U=x({__name:"index",props:{data:{}},setup(x){const{t:U}=y(),L=x,{row:B}=L.data,F=l(),P=async()=>{await b(F.type,{id:B.id}),W(),F.setRefresh(!0)},T=h({p:1,limit:10,search:B.id}),{table:$,columns:H}=t([{key:"filename",title:U("Component.UploadFile.index_3"),ellipsis:{tooltip:{width:"trigger"}}},{key:"size",title:U("Site.TableRow.index_23"),width:90,render:a=>p(a.size)},{key:"addtime",title:U("Site.TableRow.index_25"),width:146},s({width:180,options:a=>[{label:U("Database.tools.index_3"),onClick:()=>{i({title:U("Database.tools.index_17"),content:U("Database.tools.index_18"),onConfirm:async({hide:e})=>{await d(F.type,{file:a.filename,name:B.name}),F.setRefresh(!0),e()}})}},{label:U("Ftp.Label.index_11"),onClick:()=>{r(a.filename,a.name)}},{label:U("Public.Btn.Del"),onClick:()=>{i({title:U("Site.Batch.index_18"),content:U("Database.tools.index_19"),onConfirm:async({hide:e})=>{await m({id:a.id}),W(),F.setRefresh(!0),e()}})}}]})]),{loading:N,setLoading:V}=n(),W=async()=>{try{V(!0);const{message:a}=await _(w(T));c(a)?($.data=u(a.data)?a.data:[],$.total=f(a.page)):($.data=[],$.total=0),B.backup_count=$.total}finally{V(!1)}};return W(),(t,s)=>{const i=g,n=o,l=e,p=a;return k(),j("div",S,[v(p,null,{toolsLeft:C(()=>[v(i,{class:"backup-btn",type:"primary",onClick:P},{default:C(()=>[D(z(t.$t("Database.index_16")),1)]),_:1})]),table:C(()=>[v(n,{loading:R(N),"loading-num":6,data:R($).data,columns:R(H)},null,8,["loading","data","columns"])]),pageRight:C(()=>[v(l,{page:R(T).p,"onUpdate:page":s[0]||(s[0]=a=>R(T).p=a),"page-size":R(T).limit,"onUpdate:pageSize":s[1]||(s[1]=a=>R(T).limit=a),"item-count":R($).total,onRefresh:W},null,8,["page","page-size","item-count"])]),_:1})])}}});export{U as default};
