import{_ as e}from"./public.js?v=1749179669910";import{_ as a}from"./index.vue_vue_type_script_setup_true_lang.js?v=1749179669910";import{b7 as l,f4 as s,m as d}from"./page_layout.js?v=1749179669910";import{d as t,O as i,r,j as u,R as n,S as o,P as b,a1 as v,U as p,V as _,c as m,a2 as x,M as c}from"./vue.js?v=1749179669910";import{cp as D,cj as f,_ as B,bY as h,cs as w,y as j}from"./naive.js?v=1749179669910";import"./common.js?v=1749179669910";import"./__commonjsHelpers__.js?v=1749179669910";const g={class:"py-20px"},$={class:"w-260px"},y={class:"w-260px"},R={class:"w-260px"},U={class:"w-260px"},P=t({__name:"index",props:{data:{}},setup(t,{expose:P}){const{t:k}=i(),q=t,{row:E,sid:H,dbIdx:I,isEdit:S}=q.data,z=l(),A=r(null),C=u({db_idx:0,name:"",val:"",endtime:void 0}),M=r([{label:"DB0",value:0},{label:"DB1",value:1},{label:"DB2",value:2},{label:"DB3",value:3},{label:"DB4",value:4},{label:"DB5",value:5},{label:"DB6",value:6},{label:"DB7",value:7},{label:"DB8",value:8},{label:"DB9",value:9},{label:"DB10",value:10},{label:"DB11",value:11},{label:"DB12",value:12},{label:"DB13",value:13},{label:"DB14",value:14},{label:"DB15",value:15}]),O={name:{required:!0,message:k("Database.redis.index_1"),trigger:"blur"},val:{required:!0,message:k("Database.redis.index_4"),trigger:"blur"}};return-1!==I&&(C.db_idx=I),S&&E&&(C.name=E.name,C.val=E.val,C.endtime=E.endtime?E.endtime:void 0),P({onConfirm:async()=>{var e;await(null==(e=A.value)?void 0:e.validate());const a=(()=>{if(null===H)throw d.error(k("Database.redis.index_8")),new Error(k("Database.redis.index_9"));const e={...c(C),sid:H};return void 0===e.endtime&&delete e.endtime,e})();await s(a),z.setRefresh(!0),z.setAddRedisId(a.db_idx)}}),(l,s)=>{const d=D,t=f,i=B,r=h,u=w,c=j,P=a,k=e;return n(),o("div",g,[b(P,{ref_key:"formRef",ref:A,model:_(C),rules:O},{default:v((()=>[b(t,{label:l.$t("Site.PHP.add_site_16"),path:"db_idx"},{default:v((()=>[p("div",$,[b(d,{value:_(C).db_idx,"onUpdate:value":s[0]||(s[0]=e=>_(C).db_idx=e),options:_(M),disabled:_(S)},null,8,["value","options","disabled"])])])),_:1},8,["label"]),b(t,{label:l.$t("Database.redis.index_2"),path:"name"},{default:v((()=>[p("div",y,[b(i,{value:_(C).name,"onUpdate:value":s[1]||(s[1]=e=>_(C).name=e),disabled:_(S),placeholder:l.$t("Database.redis.index_1")},null,8,["value","disabled","placeholder"])])])),_:1},8,["label"]),b(t,{label:l.$t("Database.redis.index_3"),path:"val"},{default:v((()=>[p("div",R,[b(i,{value:_(C).val,"onUpdate:value":s[2]||(s[2]=e=>_(C).val=e),type:"textarea",autosize:{minRows:4,maxRows:4},placeholder:l.$t("Database.redis.index_4")},null,8,["value","placeholder"])])])),_:1},8,["label"]),b(t,{label:l.$t("Database.redis.index_5"),"show-feedback":!1},{default:v((()=>[p("div",U,[b(c,null,{default:v((()=>[b(r,{value:_(C).endtime,"onUpdate:value":s[3]||(s[3]=e=>_(C).endtime=e),class:"flex-1",min:0,"show-button":!1,placeholder:l.$t("Database.redis.index_6")},null,8,["value","placeholder"]),b(u,null,{default:v((()=>s[4]||(s[4]=[m("sec")]))),_:1})])),_:1})])])),_:1},8,["label"])])),_:1},8,["model"]),b(k,{class:"mt-24px px-20px"},{default:v((()=>[p("li",null,x(l.$t("Database.redis.index_7")),1)])),_:1})])}}});export{P as default};
