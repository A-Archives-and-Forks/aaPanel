System.register(["./page_layout-legacy.js?v=1753954525509","./index-legacy127.js?v=1753954525509","./index-legacy.js?v=1753954525509","./public-legacy.js?v=1753954525509","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1753954525509","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1753954525509","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1753954525509","./vue-legacy.js?v=1753954525509","./soft-legacy2.js?v=1753954525509","./useModal-legacy2.js?v=1753954525509","./site-legacy3.js?v=1753954525509","./index-legacy191.js?v=1753954525509","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1753954525509","./naive-legacy.js?v=1753954525509","./common-legacy.js?v=1753954525509","./__commonjsHelpers__-legacy.js?v=1753954525509","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1753954525509","./soft-legacy.js?v=1753954525509"],(function(e,t){"use strict";var i,a,l,n,s,o,c,d,u,r,p,x,m,_,f,h,v,y,W,w,g,S,b,R,$,j,k,U,P,C,N,q,z,E,O,V,D,F,L,A,T,B,H,J,M,Q,X,G,I,K,Y,Z,ee,te,ie,ae,le,ne,se,oe,ce,de,ue,re;return{setters:[e=>{i=e.c,a=e.bl,l=e.cS,n=e.x,s=e.a,o=e.w,c=e.m},e=>{d=e._},e=>{u=e._},e=>{r=e._,p=e.d,x=e.e,m=e.b,_=e.h,f=e.u,h=e.f},e=>{v=e._},e=>{y=e._},e=>{W=e._},e=>{w=e.k,g=e.t,S=e.P,b=e.e,R=e.U,$=e.V,j=e.Q,k=e.a2,U=e.j,P=e.W,C=e.X,N=e.l,q=e.v,z=e.a3,E=e.N,O=e.$,V=e.r,D=e.F,F=e.o,L=e.a1,A=e.u,T=e._},e=>{B=e.u},e=>{H=e.u},e=>{J=e.s,M=e.a,Q=e.g,X=e.b,G=e.c,I=e.d,K=e.e},e=>{Y=e._},e=>{Z=e._},e=>{ee=e.c5,te=e.cF,ie=e.cE,ae=e.aq,le=e.cA,ne=e.c$,se=e.d0,oe=e.c1,ce=e.c3,de=e._,ue=e.ay,re=e.cD},null,null,null,null],execute:function(){const pe={class:"p-20px"},xe={class:"flex-1"},me={class:"flex items-center h-32px"},_e={class:"flex items-center h-32px"},fe={class:"w-320px mt-6px"},he={class:"flex-1"},ve={class:"flex items-center h-32px"},ye={class:"flex items-center h-32px"},We={class:"w-320px mt-6px"},we={class:"text-error"},ge=w({__name:"index",props:{row:{},onRefresh:{}},setup(e,{expose:t}){const a=e,l=g(a,"row"),{t:n}=S(),s=b({html:!1,html_fast:!1,js:!1,picture:!1}),o=b({type:"default",text:""}),c=b({type:"default",text:""});(()=>{if(!l.value)return;const{crawler:e}=l.value;e&&(s.html=e.html,s.picture=e.picture,e.htmlnew&&(o.type=e.htmlnew.type,o.text=e.htmlnew.text),e.picturenew&&(c.type=e.picturenew.type,c.text=e.picturenew.text))})();const d=async()=>{const e=(()=>{const e={site:l.value.siteName,html:s.html,html_fast:!1,js:!1,picture:s.picture,htmlnew:E(o),picturenew:E(c)};return ne(l.value.crawler,e,((e,t)=>{if(i(e))return JSON.stringify(se(e,t))}))})();await J(e),a.onRefresh?.()};return t({onConfirm:async({hide:e})=>(s.html||s.picture?p({title:n("Public.Confirm.Title"),width:408,content:()=>j("div",{class:"relative pb-40px"},[j("div",null,[U("效果：每次访问网页内容随机加密、有效防止爬虫")]),j("div",null,[U("影响：开启后会导致比之前流量增加1倍")]),j("div",null,[U("建议：线上业务建议不要开启")]),j(r,{class:"absolute left-[-21px] bottom-0 mt-16px "},{default:()=>[j("li",{class:"text-error"},[U("当前的功能为测试功能建议不要在线上业务开启！！")])]})]),onConfirm:async({hide:t})=>{await d(),t(),e()}}):(await d(),e()),!1)}),(e,t)=>{const i=ee,a=te,l=ie,n=ae,d=le,u=Z;return R(),$("div",pe,[j(u,{"label-width":"160px"},{default:k((()=>[j(d,{label:e.$t("Waf.Site.ReptileProtection.index_1")},{default:k((()=>[P("div",xe,[P("div",me,[j(i,{value:C(s).html,"onUpdate:value":t[0]||(t[0]=e=>C(s).html=e)},null,8,["value"])]),N(P("div",_e,[j(l,{value:C(o).type,"onUpdate:value":t[1]||(t[1]=e=>C(o).type=e)},{default:k((()=>[j(a,{value:"default"},{default:k((()=>[U(z(e.$t("Waf.Site.ReptileProtection.index_2")),1)])),_:1}),j(a,{value:"text"},{default:k((()=>[U(z(e.$t("Waf.Site.ReptileProtection.index_3")),1)])),_:1})])),_:1},8,["value"])],512),[[q,C(s).html]]),N(P("div",fe,[j(n,{value:C(o).text,"onUpdate:value":t[2]||(t[2]=e=>C(o).text=e),placeholder:e.$t("Waf.Site.ReptileProtection.index_4")},null,8,["value","placeholder"])],512),[[q,C(s).html&&"text"===C(o).type]])])])),_:1},8,["label"]),j(d,{label:e.$t("Waf.Site.ReptileProtection.index_5")},{default:k((()=>[P("div",he,[P("div",ve,[j(i,{value:C(s).picture,"onUpdate:value":t[3]||(t[3]=e=>C(s).picture=e)},null,8,["value"])]),N(P("div",ye,[j(l,{value:C(c).type,"onUpdate:value":t[4]||(t[4]=e=>C(c).type=e)},{default:k((()=>[j(a,{value:"default"},{default:k((()=>[U(z(e.$t("Waf.Site.ReptileProtection.index_6")),1)])),_:1}),j(a,{value:"text"},{default:k((()=>[U(z(e.$t("Waf.Site.ReptileProtection.index_7")),1)])),_:1})])),_:1},8,["value"])],512),[[q,C(s).picture]]),N(P("div",We,[j(n,{value:C(c).text,"onUpdate:value":t[5]||(t[5]=e=>C(c).text=e),placeholder:e.$t("Waf.Site.ReptileProtection.index_8")},null,8,["value","placeholder"])],512),[[q,C(s).picture&&"text"===C(c).type]])])])),_:1},8,["label"])])),_:1}),j(r,{class:"mt-16px"},{default:k((()=>[P("li",we,z(e.$t("Waf.Site.ReptileProtection.index_9")),1),P("li",null,[P("b",null,z(e.$t("Waf.Site.ReptileProtection.index_10")),1),U(z(e.$t("Waf.Site.ReptileProtection.index_11")),1)]),P("li",null,[P("b",null,z(e.$t("Waf.Site.ReptileProtection.index_12")),1),U(z(e.$t("Waf.Site.ReptileProtection.index_13")),1)]),P("li",null,[P("b",null,z(e.$t("Waf.Site.ReptileProtection.index_14")),1),U(z(e.$t("Waf.Site.ReptileProtection.index_15")),1)])])),_:1})])}}}),Se={class:"p-20px"},be={class:"w-40px"},Re={class:"mx-8px"},$e={class:"w-40px"},je={class:"mx-8px"},ke={class:"w-40px"},Ue={class:"ml-8px"},Pe={class:"flex-1"},Ce={class:"flex items-center h-32px"},Ne={class:"w-320px mt-6px"},qe={class:"text-error"},ze=w({__name:"index",props:{row:{},onRefresh:{}},setup(e,{expose:t}){const i=e,l=g(i,"row"),n=b({open:!1,user:50,time:10,qps:1,identity:{type:"default",text:""}});return(()=>{if(!l.value)return;const{limiting:e}=l.value;if(!e)return;const{timeout:t}=e;t&&(n.open=t.open,n.user=t.user,n.time=t.time,n.qps=t.qps,n.identity.type=t.identity.type,n.identity.text=t.identity.text)})(),t({onConfirm:async()=>{await M({site:l.value.siteName,limiting:{open:n.open,user:n.user,time:n.time,qps:n.qps,identity:{type:n.identity.type,text:n.identity.text}}}),i.onRefresh?.()}}),(e,t)=>{const i=ee,l=le,s=oe,o=te,c=ie,d=ae,u=a,p=Z,x=r;return R(),$("div",Se,[j(p,{"label-width":"160px"},{default:k((()=>[j(l,{label:e.$t("Waf.Site.WaitingRoom.index_1")},{default:k((()=>[j(i,{value:C(n).open,"onUpdate:value":t[0]||(t[0]=e=>C(n).open=e)},null,8,["value"])])),_:1},8,["label"]),j(u,{show:C(n).open},{default:k((()=>[j(l,{label:e.$t("Waf.Site.WaitingRoom.index_2")},{default:k((()=>[P("div",be,[j(s,{value:C(n).user,"onUpdate:value":t[1]||(t[1]=e=>C(n).user=e),min:0,"show-button":!1,placeholder:""},null,8,["value"])]),P("div",Re,z(e.$t("Waf.Site.WaitingRoom.index_3")),1),P("div",$e,[j(s,{value:C(n).time,"onUpdate:value":t[2]||(t[2]=e=>C(n).time=e),min:0,"show-button":!1,placeholder:""},null,8,["value"])]),P("div",je,z(e.$t("Waf.Site.WaitingRoom.index_4")),1),P("div",ke,[j(s,{value:C(n).qps,"onUpdate:value":t[3]||(t[3]=e=>C(n).qps=e),min:0,"show-button":!1,placeholder:""},null,8,["value"])]),P("div",Ue,z(e.$t("Waf.Site.WaitingRoom.index_5")),1)])),_:1},8,["label"]),j(l,{label:e.$t("Waf.Site.WaitingRoom.index_6")},{default:k((()=>[P("div",Pe,[P("div",Ce,[j(c,{value:C(n).identity.type,"onUpdate:value":t[4]||(t[4]=e=>C(n).identity.type=e)},{default:k((()=>[j(o,{value:"default"},{default:k((()=>[U(z(e.$t("Waf.Site.WaitingRoom.index_7")),1)])),_:1}),j(o,{value:"text"},{default:k((()=>[U(z(e.$t("Waf.Site.WaitingRoom.index_8")),1)])),_:1})])),_:1},8,["value"])]),N(P("div",Ne,[j(d,{value:C(n).identity.text,"onUpdate:value":t[5]||(t[5]=e=>C(n).identity.text=e),placeholder:e.$t("Waf.Site.WaitingRoom.index_9")},null,8,["value","placeholder"])],512),[[q,"text"===C(n).identity.type]])])])),_:1},8,["label"])])),_:1},8,["show"])])),_:1}),j(x,{class:"mt-16px"},{default:k((()=>[P("li",qe,z(e.$t("Waf.Site.WaitingRoom.index_10")),1),P("li",null,[P("b",null,z(e.$t("Waf.Site.WaitingRoom.index_11")),1),U(z(e.$t("Waf.Site.WaitingRoom.index_12")),1)]),P("li",null,[P("b",null,z(e.$t("Waf.Site.WaitingRoom.index_13")),1),U(z(e.$t("Waf.Site.WaitingRoom.index_14")),1)]),P("li",null,[P("b",null,z(e.$t("Waf.Site.WaitingRoom.index_15")),1),U(z(e.$t("Waf.Site.WaitingRoom.index_16")),1)]),P("li",null,[P("b",null,z(e.$t("Waf.Site.WaitingRoom.index_17")),1),U(z(e.$t("Waf.Site.WaitingRoom.index_18")),1)]),P("li",null,z(e.$t("Waf.Site.WaitingRoom.index_19")),1)])),_:1})])}}}),Ee={class:"mr-8px"},Oe={class:"cursor-pointer"};function Ve(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!A(e)}e("default",w({__name:"index",setup(e){const a=T((()=>s((()=>t.import("./count-legacy.js?v=1753954525509")),void 0))),w=T((()=>s((()=>t.import("./record-legacy.js?v=1753954525509")),void 0))),{t:g}=S(),$=l(),{isNewVersion:N,version:q,lastVersion:A}=O($),J=()=>{B("btwaf",(()=>{window.location.reload()}))},M=V(!1),Z=async e=>{await I({obj:"malicious_ip"}),M.value=e},te=b({p:1,limit:10,search:""}),ie=x(""),ae=x(""),le=async(e,t)=>{await X({siteName:e.siteName,obj:t})},{table:ne,columns:se,setLoading:oe}=m([{key:"siteName",title:g("Waf.Site.index_8"),minWidth:150,ellipsis:{tooltip:!0},render:e=>j("a",{class:"bt-link",href:"javascript:;",onClick:()=>{H({row:e,onRefresh:_e})}},[e.siteName])},{key:"total",title:g("Waf.Site.index_9"),width:"10%",minWidth:140,render:e=>{let t=0;return e.total.forEach((e=>{t+=e.value})),j(ce,{placement:"bottom-start","arrow-point-to-center":!0},{trigger:()=>j(D,null,[t>0?j("a",{class:"bt-link error",href:"javascript:;",onClick:()=>{(e=>{ie.data.list=e.total,ie.title=g("Waf.Site.index_5",[e.siteName]),ie.show=!0})(e)}},[t]):t]),default:()=>j("div",null,[e.total.map((e=>j("div",{class:"leading-18px"},[e.name,U(": "),e.value,g("Waf.Site.index_35")])))])})}},{key:"not_spider",width:"12%",minWidth:120,title:()=>{let e;return j(D,null,[j("span",{class:"mr-6px"},[g("Waf.Site.index_36")]),j(Y,null,Ve(e=g("Waf.Site.index_37"))?e:{default:()=>[e]})])},render:e=>j(de,{checked:e.not_spider,onUpdateChecked:async t=>{await le(e,"not_spider"),e.not_spider=t}},null)},{key:"cdn",width:"12%",minWidth:120,title:()=>{let e;return j(D,null,[j("span",{class:"mr-6px"},[g("Waf.Site.index_38")]),j(Y,null,Ve(e=g("Waf.Site.index_39"))?e:{default:()=>[e]})])},render:e=>j(de,{checked:e.cdn,onUpdateChecked:async t=>{await le(e,"cdn"),e.cdn=t}},null)},{key:"smart_cc",width:"14%",minWidth:140,title:()=>j(D,null,[j("span",{class:"mr-6px"},[g("Waf.Site.index_40")]),j(Y,null,{default:()=>[j("div",{class:"w-500px"},[g("Waf.Site.index_41")])]})]),render:e=>j("div",{class:"inline-flex items-center"},[j(de,{class:"mr-6px",checked:e.smart_cc.open,onUpdateChecked:async t=>{t?p({title:g("Public.Confirm.Title"),content:g("Waf.Site.index_10"),onConfirm:async()=>{await le(e,"smart_cc"),e.smart_cc.open=t}}):(await le(e,"smart_cc"),e.smart_cc.open=t)}},null),j(ce,{placement:"bottom-start","arrow-point-to-center":!0},{trigger:()=>j("span",{class:"text-desc text-13px"},[e.total[9].value]),default:()=>j(D,null,[g("Waf.Site.index_42",[e.total[9].value])])})])},{key:"crawler",title:g("Waf.Site.index_43"),width:"9%",minWidth:100,render:e=>{const t=(e.crawler?Object.entries(e.crawler):[]).some((([e,t])=>t&&"picturenew"!==e&&"htmlnew"!==e));return j("a",{class:["bt-link",t?"":"error"],href:"javascript:;",onClick:()=>{pe(e)}},[g(t?"Public.Status.Enable":"Public.Status.Disable")])}},{key:"limiting",title:g("Waf.Site.index_44"),width:"10%",minWidth:170,render:e=>j("a",{class:["bt-link",e?.limiting?.timeout?.open?"":"error"],href:"javascript:;",onClick:()=>{xe(e)}},[g(e?.limiting?.timeout?.open?"Public.Status.Enable":"Public.Status.Disable")])},{key:"cc",width:"8%",minWidth:100,title:g("Waf.Site.index_11"),render:e=>j("div",{class:"inline-flex items-center"},[j(de,{class:"mr-6px",checked:e.cc.open,onUpdateChecked:async t=>{await le(e,"cc"),e.cc.open=t}},null),j(ce,{placement:"bottom-start","arrow-point-to-center":!0},{trigger:()=>j("span",{class:"text-desc text-13px"},[e.total[2].value]),default:()=>j(D,null,[g("Waf.Site.index_42",[e.total[2].value])])})])},{key:"open",width:"6%",minWidth:70,title:g("Waf.Site.index_12"),render:e=>j(ee,{size:"small",value:e.open,onUpdateValue:async t=>{await le(e,"open"),e.open=t}},null)},_({width:100,options:e=>[{label:g("Waf.Site.index_13"),onClick:()=>{(async e=>{const{message:t}=await K({siteName:e.siteName});o(t)&&t.length>0?(ae.data.timeList=t,ae.data.siteName=e.siteName,ae.title=g("Waf.Site.index_6",[e.siteName]),ae.show=!0):c.success(g("Waf.Site.index_7"))})(e)}},{label:g("Public.Btn.Set"),onClick:()=>{H({row:e,onRefresh:_e})}}]})]),pe=e=>{f({title:g("Waf.Site.index_45",[e.siteName]),width:620,footer:!0,data:{row:e,onRefresh:_e},component:ge})},xe=e=>{f({title:g("Waf.Site.index_46",[e.siteName]),width:700,footer:!0,data:{row:e,onRefresh:_e},component:ze})},me=()=>{te.p=1,_e()},_e=async()=>{try{oe(!0);const{message:e}=await Q(E(te));i(e)&&(ne.data=e.data,ne.total=n(e.page))}finally{oe(!1)}};return(async()=>{const{message:e}=await G();i(e)&&(M.value=e.malicious_ip)})(),F((()=>{_e()})),(e,t)=>{const i=ue,l=W,n=h,s=y,o=v,c=r,p=u,x=re,m=d;return R(),L(m,{install:C(N)},{desc:k((()=>[P("span",Ee," Current Nginx WAF version is v"+z(C(q))+", latest is v"+z(C(A))+". Please update. ",1),j(i,{class:"px-8px h-24px",type:"primary",size:"small",onClick:J},{default:k((()=>t[6]||(t[6]=[U(" Upgrade ")]))),_:1,__:[6]})])),default:k((()=>[j(x,{class:"p-16px"},{default:k((()=>[j(o,null,{toolsLeft:k((()=>[P("div",Oe,[P("span",{class:"mr-8px text-desc",onClick:t[0]||(t[0]=e=>Z(!C(M)))},z(e.$t("Waf.Site.index_1")),1),j(C(de),{checked:C(M),"onUpdate:checked":Z},null,8,["checked"])])])),toolsRight:k((()=>[j(l,{value:C(te).search,"onUpdate:value":t[1]||(t[1]=e=>C(te).search=e),placeholder:e.$t("Waf.Site.index_2"),onSearch:me},null,8,["value","placeholder"])])),table:k((()=>[j(n,{loading:C(ne).loading,data:C(ne).data,columns:C(se)},null,8,["loading","data","columns"])])),pageRight:k((()=>[j(s,{page:C(te).p,"onUpdate:page":t[2]||(t[2]=e=>C(te).p=e),"page-size":C(te).limit,"onUpdate:pageSize":t[3]||(t[3]=e=>C(te).limit=e),"item-count":C(ne).total,"store-key":"waf-site",onRefresh:_e},null,8,["page","page-size","item-count"])])),_:1}),j(c,{class:"mt-16px"},{default:k((()=>[P("li",null,z(e.$t("Waf.Site.index_3")),1),P("li",null,z(e.$t("Waf.Site.index_4")),1)])),_:1}),j(p,{show:C(ie).show,"onUpdate:show":t[4]||(t[4]=e=>C(ie).show=e),title:C(ie).title,width:480,"min-height":688,data:C(ie).data,component:C(a)},null,8,["show","title","data","component"]),j(p,{show:C(ae).show,"onUpdate:show":t[5]||(t[5]=e=>C(ae).show=e),title:C(ae).title,data:C(ae).data,width:1e3,"min-height":552,component:C(w)},null,8,["show","title","data","component"])])),_:1})])),_:1},8,["install"])}}}))}}}));
