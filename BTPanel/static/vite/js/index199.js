import{_ as e}from"./index95.js?v=1741416570306";import{_ as a}from"./index.vue_vue_type_script_setup_true_lang.js?v=1741416570306";import{d as i,M as l,ar as t,r as n,P as c,Q as s,R as o,N as d,S as _,$ as u,a0 as p,F as r,k as f,v as x,c as m,t as v,e as b,j as g,a1 as S}from"./vue.js?v=1741416570306";import{b as C,m as W,G as y}from"./page_layout.js?v=1741416570306";import{a as $}from"./public.js?v=1741416570306";import{d as w}from"./setting.js?v=1741416570306";import{i as h,j,k as U,l as k}from"./site3.js?v=1741416570306";import{_ as P}from"./index197.js?v=1741416570306";import{ch as E,bS as M,a2 as N,cb as T,T as D,cs as R}from"./naive.js?v=1741416570306";import"./__commonjsHelpers__.js?v=1741416570306";import"./common.js?v=1741416570306";const B={class:"w-160px"},J={class:"ml-8px"},O={class:"w-300px text-#666 leading-18px"},q={class:"mb-4px"},A={class:"mb-10px"},F={class:"mb-4px"},G={class:"mb-10px"},H={class:"mb-4px"},I={class:"mb-10px"},Q={class:"mb-4px"},z=i({__name:"RequestType",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const{t:a}=l(),i=t(e,"value"),f=n([{label:a("Waf.Site.Config.index_40"),value:1},{label:a("Waf.Site.Config.index_41"),value:2},{label:a("Waf.Site.Config.index_42"),value:3},{label:a("Waf.Site.Config.index_43"),value:4}]);return(e,a)=>{const l=E,t=P;return c(),s(r,null,[o("div",B,[d(l,{value:i.value,"onUpdate:value":a[0]||(a[0]=e=>i.value=e),options:_(f)},null,8,["value","options"])]),o("div",J,[d(t,null,{default:u((()=>[o("div",O,[o("div",q,[o("b",null,p(e.$t("Waf.Site.Config.desc_1")),1)]),o("div",A,p(e.$t("Waf.Site.Config.desc_2")),1),o("div",F,[o("b",null,p(e.$t("Waf.Site.Config.desc_3")),1)]),o("div",G,p(e.$t("Waf.Site.Config.desc_4")),1),o("div",H,[o("b",null,p(e.$t("Waf.Site.Config.desc_5")),1)]),o("div",I,p(e.$t("Waf.Site.Config.desc_6")),1),o("div",Q,[o("b",null,p(e.$t("Waf.Site.Config.desc_7")),1)]),o("div",null,p(e.$t("Waf.Site.Config.desc_8")),1)])])),_:1})])],64)}}}),K={class:"w-100px"},L={class:"ml-8px"},V={class:"w-300px text-#666 leading-18px"},X={class:"mb-4px"},Y={class:"mb-10px"},Z={class:"mb-4px"},ee=i({__name:"UrlDefense",props:{url:{},urlModifiers:{}},emits:["update:url"],setup(e){const{t:a}=l(),i=t(e,"url"),f=n([{label:a("Public.Status.Enable"),value:1},{label:a("Public.Status.Disable"),value:0}]);return(e,a)=>{const l=E,t=P;return c(),s(r,null,[o("div",K,[d(l,{value:i.value,"onUpdate:value":a[0]||(a[0]=e=>i.value=e),options:_(f)},null,8,["value","options"])]),o("div",L,[d(t,null,{default:u((()=>[o("div",V,[o("div",X,[o("b",null,p(e.$t("Waf.Site.Config.index_104")),1)]),o("div",Y,p(e.$t("Waf.Site.Config.index_107")),1),o("div",Z,[o("b",null,p(e.$t("Waf.Site.Config.index_105")),1)]),o("div",null,p(e.$t("Waf.Site.Config.index_106")),1)])])),_:1})])],64)}}}),ae={class:"flex-1"},ie={class:"flex items-center"},le={class:"w-100px"},te={class:"ml-8px"},ne={class:"w-300px text-#666 leading-18px"},ce={class:"mb-4px"},se={class:"mb-10px"},oe={class:"mb-4px"},de={class:"w-80px ml-12px"},_e={class:"ml-12px"},ue=i({__name:"IpDefense",props:{open:{},openModifiers:{},max:{},maxModifiers:{},contain:{type:Boolean},containModifiers:{}},emits:["update:open","update:max","update:contain"],setup(e){const{t:a}=l(),i=t(e,"open"),r=n([{label:a("Public.Status.Enable"),value:1},{label:a("Public.Status.Disable"),value:0}]),v=t(e,"max"),b=t(e,"contain");return(e,a)=>{const l=E,t=P,n=M,g=N;return c(),s("div",ae,[o("div",ie,[o("div",le,[d(l,{value:i.value,"onUpdate:value":a[0]||(a[0]=e=>i.value=e),options:_(r)},null,8,["value","options"])]),o("div",te,[d(t,null,{default:u((()=>[o("div",ne,[o("div",ce,[o("b",null,p(e.$t("Waf.Site.Config.index_104")),1)]),o("div",se,p(e.$t("Waf.Site.Config.index_108")),1),o("div",oe,[o("b",null,p(e.$t("Waf.Site.Config.index_105")),1)]),o("div",null,p(e.$t("Waf.Site.Config.index_106")),1)])])),_:1})]),f(o("div",de,[d(n,{value:v.value,"onUpdate:value":a[1]||(a[1]=e=>v.value=e),placeholder:"","show-button":!1},null,8,["value"])],512),[[x,1===i.value]]),f(o("div",{class:"ml-8px text-desc"},p(e.$t("Public.Unit.Time",v.value||0)),513),[[x,1===i.value]]),f(o("div",_e,[d(g,{checked:b.value,"onUpdate:checked":a[2]||(a[2]=e=>b.value=e)},{default:u((()=>[m(p(e.$t("Waf.Site.Config.index_110")),1)])),_:1},8,["checked"])],512),[[x,1===i.value]])]),f(o("div",{class:"mt-12px text-error"},p(e.$t("Waf.Site.Config.index_111")),513),[[x,!v.value||v.value<5e3]])])}}}),pe={class:"p-20px"},re={class:"flex-1"},fe={class:"w-160px"},xe={class:"w-160px mr-8px"},me={class:"text-desc"},ve={class:"w-160px mr-8px"},be={class:"text-desc"},ge={class:"w-160px mr-8px"},Se={class:"text-desc"},Ce={class:"w-320px"},We={class:"flex-1"},ye={class:"w-160px"},$e={class:"text-error"},we={class:"text-error"},he={class:"text-error"},je={class:"text-error"},Ue={class:"text-error"},ke={class:"text-error"},Pe={class:"text-error"},Ee=i({__name:"index",props:{siteName:{},config:{}},emits:["refresh"],setup(i,{expose:t,emit:P}){const N=i,B=P,{t:J}=l(),O=v(N,"siteName"),q=n(null),A=b((()=>void 0===O.value)),F=g({cc_mode:1,cc_type_status:2,cycle:60,limit:120,endtime:1800,is_cc_url:1,cc_enhance_mode:1,increase_wu_heng:1,country:[],cc_increase_type:"js",cc_ip_max:{open:0,ip_max:1e4,static:!1}}),G={cycle:{trigger:["blur","input"],validator:()=>F.cycle?!(F.cycle<30)||new Error(J("Waf.Site.Config.index_35")):new Error(J("Waf.Site.Config.index_34"))},limit:{trigger:["blur","input"],validator:()=>F.limit?!(F.limit<30)||new Error(J("Waf.Site.Config.index_35")):new Error(J("Waf.Site.Config.index_36"))},endtime:{trigger:["blur","input"],validator:()=>!!F.endtime||new Error(J("Waf.Site.Config.index_37"))}},H=[{label:J("Waf.Site.Config.index_38"),value:1},{label:J("Waf.Site.Config.index_39"),value:2}],I=n([{label:J("Waf.Site.Config.index_46"),value:"browser"},{label:J("Waf.Site.Config.index_47"),value:"js"},{label:J("Waf.Site.Config.index_48"),value:"code"},{label:J("Waf.Site.Config.index_49"),value:"renji"},{label:J("Waf.Site.Config.index_50"),value:"huadong"}]),Q=n([]),K=()=>{F.country=Q.value.map((e=>"".concat(e.value)))},L=()=>{F.country=[]};let V=!1;const X=async e=>{if("renji"===e&&!V){const{message:e}=await h();V=!0,C(e)&&e.result&&(F.cc_increase_type="js",I.value[3].disabled=!0,I.value[4].disabled=!0,W.error(J("Waf.Site.Config.index_51")))}},Y=async()=>{const{close:e}=W.loading(J("Waf.Site.Config.index_52",[A.value?J("Waf.Site.Config.index_99"):J("Waf.Site.Config.index_100")]));try{const e=(()=>{const e=1===F.cc_mode?{country:F.country.join(","),is_cc_url:F.is_cc_url}:{};return{cc_mode:1===F.cc_mode?1:F.cc_enhance_mode?3:4,cycle:F.cycle,limit:F.limit,endtime:F.endtime,is_open_global:void 0===O.value?1:0,increase:0===F.cc_enhance_mode?0:1,increase_wu_heng:F.increase_wu_heng,cc_increase_type:F.cc_increase_type,cc_type_status:F.cc_type_status,...e,cc_ip_max:JSON.stringify({open:1===F.cc_ip_max.open,ip_max:F.cc_ip_max.ip_max,static:F.cc_ip_max.static})}})();3!==e.cc_mode&&await U(),A.value?await w(e):await k({...e,siteName:O.value||""}),B("refresh")}finally{e()}};return(async()=>{const{message:e}=await j();y(e)&&(Q.value=e.map((e=>({label:e,value:e}))))})(),(()=>{const{config:e}=N;e&&(F.cc_mode=e.cc_mode<=1?1:2,F.cc_type_status=e.cc_type_status,F.cycle=e.cc.cycle,F.limit=e.cc.limit,F.endtime=e.cc.endtime,F.is_cc_url=e.cc.is_cc_url?1:0,F.cc_increase_type=e.cc.cc_increase_type||"js",F.country=Object.keys(e.cc.countrys),e.cc.cc_ip_max&&(F.cc_ip_max.open=e.cc.cc_ip_max.open?1:0,F.cc_ip_max.ip_max=e.cc.cc_ip_max.ip_max,F.cc_ip_max.static=e.cc.cc_ip_max.static))})(),t({onConfirm:async({hide:e})=>{var a;if(await(null==(a=q.value)?void 0:a.validate()),2===F.cc_mode)return $({title:J("Public.Confirm.Title"),content:()=>d(r,null,[J("Waf.Site.Config.desc_9"),d("br",null,null),J("Waf.Site.Config.desc_10"),d("br",null,null),J("Waf.Site.Config.desc_11")]),onConfirm:async({hide:a})=>(await Y(),a(),e(),!1)}),!1;await Y()}}),(i,l)=>{const t=E,n=T,r=M,v=D,b=R,g=a,C=S("i18n-t"),W=e;return c(),s("div",pe,[d(g,{ref_key:"formRef",ref:q,model:_(F),rules:G,"label-width":"160"},{default:u((()=>[d(n,{label:i.$t("Waf.Site.Config.index_11")},{default:u((()=>[o("div",re,[o("div",fe,[d(t,{value:_(F).cc_mode,"onUpdate:value":l[0]||(l[0]=e=>_(F).cc_mode=e),options:H},null,8,["value"])]),f(o("div",{class:"w-320px mt-6px text-desc leading-20px"},p(i.$t("Waf.Site.Config.index_12")),513),[[x,2===_(F).cc_mode]])])])),_:1},8,["label"]),d(n,{label:i.$t("Waf.Site.Config.index_13")},{default:u((()=>[d(z,{value:_(F).cc_type_status,"onUpdate:value":l[1]||(l[1]=e=>_(F).cc_type_status=e)},null,8,["value"])])),_:1},8,["label"]),d(n,{label:i.$t("Waf.Site.Config.index_14"),path:"cycle"},{default:u((()=>[o("div",xe,[d(r,{value:_(F).cycle,"onUpdate:value":l[2]||(l[2]=e=>_(F).cycle=e),min:30,"show-button":!1},null,8,["value"])]),o("span",me,p(i.$t("Public.Unit.Second",_(F).cycle)),1)])),_:1},8,["label"]),d(n,{label:i.$t("Waf.Site.Config.index_16"),path:"limit"},{default:u((()=>[o("div",ve,[d(r,{value:_(F).limit,"onUpdate:value":l[3]||(l[3]=e=>_(F).limit=e),min:30,"show-button":!1},null,8,["value"])]),o("span",be,p(i.$t("Public.Unit.Time",_(F).limit)),1)])),_:1},8,["label"]),d(n,{label:i.$t("Waf.Site.Config.index_18"),path:"endtime"},{default:u((()=>[o("div",ge,[d(r,{value:_(F).endtime,"onUpdate:value":l[4]||(l[4]=e=>_(F).endtime=e),min:1,"show-button":!1},null,8,["value"])]),o("span",Se,p(i.$t("Public.Unit.Second",_(F).endtime)),1)])),_:1},8,["label"]),f(d(n,{label:i.$t("Waf.Site.Config.index_19")},{default:u((()=>[d(ee,{url:_(F).is_cc_url,"onUpdate:url":l[5]||(l[5]=e=>_(F).is_cc_url=e)},null,8,["url"])])),_:1},8,["label"]),[[x,1===_(F).cc_mode]]),d(n,{label:i.$t("Waf.Site.Config.index_109")},{default:u((()=>[d(ue,{open:_(F).cc_ip_max.open,"onUpdate:open":l[6]||(l[6]=e=>_(F).cc_ip_max.open=e),max:_(F).cc_ip_max.ip_max,"onUpdate:max":l[7]||(l[7]=e=>_(F).cc_ip_max.ip_max=e),contain:_(F).cc_ip_max.static,"onUpdate:contain":l[8]||(l[8]=e=>_(F).cc_ip_max.static=e)},null,8,["open","max","contain"])])),_:1},8,["label"]),f(d(n,{label:i.$t("Waf.Site.Config.index_20"),"show-feedback":!1},{default:u((()=>[o("div",Ce,[d(t,{value:_(F).country,"onUpdate:value":l[9]||(l[9]=e=>_(F).country=e),options:_(Q),multiple:!0,filterable:!0,"max-tag-count":"responsive",":placeholder":i.$t("Waf.Site.Config.index_21")},{header:u((()=>[d(b,{class:"w-full"},{default:u((()=>[d(v,{class:"flex-1",onClick:K},{default:u((()=>[m(p(i.$t("Public.All")),1)])),_:1}),d(v,{class:"flex-1",onClick:L},{default:u((()=>[m(p(i.$t("Public.Btn.Cancel")),1)])),_:1})])),_:1})])),_:1},8,["value","options",":placeholder"])])])),_:1},8,["label"]),[[x,1===_(F).cc_mode]]),f(d(n,{label:i.$t("Waf.Site.Config.index_22"),"show-feedback":!1},{default:u((()=>[o("div",We,[o("div",ye,[d(t,{value:_(F).cc_increase_type,"onUpdate:value":[l[10]||(l[10]=e=>_(F).cc_increase_type=e),X],options:_(I)},null,8,["value","options"])]),f(o("div",{class:"mt-6px text-error"},p(i.$t("Waf.Site.Config.index_23")),513),[[x,"code"===_(F).cc_increase_type]])])])),_:1},8,["label"]),[[x,2===_(F).cc_mode]])])),_:1},8,["model"]),d(W,{class:"mt-20px"},{default:u((()=>[o("li",$e,p(i.$t("Waf.Site.Config.index_24")),1),f(o("li",{class:"text-error"},p(i.$t("Waf.Site.Config.index_102")),513),[[x,2===_(F).cc_mode]]),d(C,{tag:"li",keypath:"Waf.Site.Config.index_97",scope:"global"},{index_1:u((()=>[o("span",we,p(_(F).limit),1)])),index_2:u((()=>[o("span",he,p(_(F).cycle),1)])),index_3:u((()=>[o("span",je,p(_(F).endtime),1)])),_:1}),f(o("li",{class:"text-error"},p(i.$t("Waf.Site.Config.index_29")),513),[[x,1===_(F).cc_mode]]),d(C,{tag:"li",keypath:"Waf.Site.Config.index_98",scope:"global"},{index_1:u((()=>l[11]||(l[11]=[o("span",{class:"text-error"},"JS",-1)]))),index_2:u((()=>[o("span",Ue,p(_(F).cycle),1)])),index_3:u((()=>[o("span",ke,p(i.config.retry),1)])),index_4:u((()=>[o("span",Pe,p(_(F).endtime),1)])),_:1})])),_:1})])}}});export{Ee as default};
