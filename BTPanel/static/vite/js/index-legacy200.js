System.register(["./index-legacy226.js?v=1744703330658","./page_layout-legacy.js?v=1744703330658","./index-legacy95.js?v=1744703330658","./ssl-legacy.js?v=1744703330658","./public-legacy.js?v=1744703330658","./vue-legacy.js?v=1744703330658","./naive-legacy.js?v=1744703330658","./common-legacy.js?v=1744703330658","./__commonjsHelpers__-legacy.js?v=1744703330658"],(function(e,a){"use strict";var t,l,s,n,i,o,c,r,u,d,p,m,f,h,v,_,y,x,S,g,w,b,k,j,L,C,$,z,R,A,N,U,D,T,V,F,H,O;return{setters:[e=>{t=e._},e=>{l=e.d,s=e._,n=e.m,i=e.eN,o=e.K,c=e.l,r=e.k,u=e.dc},e=>{d=e._},e=>{p=e.y,m=e.z,f=e.A},e=>{h=e.a},e=>{v=e.r,_=e.d,y=e.O,x=e.at,S=e.j,g=e.e,w=e.a3,b=e.R,k=e.S,j=e.U,L=e.P,C=e.a0,$=e.V,z=e.a1,R=e.ap,A=e.c,N=e.af,U=e.$},e=>{D=e.bU,T=e.a2,V=e.cR,F=e.cj,H=e.T,O=e.cq},null,null],execute:function(){var a=document.createElement("style");a.textContent=":deep(.n-tabs-tab__label){height:24px}:deep(.n-tabs-tab--active){color:#20a53a!important}.icon-box[data-v-82432f85]{rotate:-90deg;transform-origin:center;display:flex;justify-content:center;align-items:center;color:#666;background-color:#def7e8;border-radius:50%;width:50px;height:50px;margin:10px auto}\n",document.head.appendChild(a);const P=v(!1),q=v({}),E=async e=>{try{P.value=!0;const{message:a}=await p({hash:e});l(a)&&(q.value=a)}finally{P.value=!1}},I={key:0,class:"text-#20a53a"},J={class:"mt-16px"},K=_({__name:"index",props:{row:{},onRefresh:{type:Function}},setup(e){const{t:a}=y(),t=e,{row:c}=x(t),r=v("all"),u=S({domains:c.value.use_for.sites,is_remove:0}),p=v([]),f=v([]),_=g((()=>"matched"===r.value?f.value:p.value)),U=({option:e})=>{const a=e.match?"ssl-lock":"ssl-unlock",t=e.match?"text-#20a53a":"text-error";return L(D,{size:5,class:"items-center flex-nowrap!"},{default:()=>[L(s,{name:a,class:t,size:18},null),L("div",{class:"truncate w-full"},[e.label])]})},O=()=>{h({title:"Deploy SSL Certificate",content:()=>L(D,{class:"flex-col!"},{default:()=>[L("div",null,[u.domains.length?"Are you sure you want to deploy this certificate?":"Are you sure you want to cancel the deployment"]),L(T,{checkedValue:1,uncheckedValue:0,checked:u.is_remove,"onUpdate:checked":e=>u.is_remove=e},{default:()=>[A("Delete remote data")]})]}),onConfirm:async()=>{try{const{message:e}=await m({hash:c.value.hash,domains:JSON.stringify(u.domains),remove:u.is_remove});l(e)&&(e.faild?n.error(`${a("SSL.index_31")}（${e.faildList.map((e=>e.siteName)).join(",")}）`):n.success(a("SSL.index_32")),t.onRefresh())}finally{u.is_remove=0}}})},K=e=>e.map((e=>({label:e.name,value:e.name,match:e.match})));return(async()=>{await E(c.value.hash);const e=q.value.sites.filter((e=>e.match)),a=q.value.sites.filter((e=>!e.match));p.value=K([...e,...a]),f.value=K(e)})(),(e,a)=>{const t=w("i18n-t"),l=V,n=F,p=i,m=o,f=H,h=s,v=d;return b(),k("div",null,[j("div",null,[L(t,{keypath:"SSL.index_26",tag:"span",scope:"global"},{a:C((()=>[$(c).verify_domains.length?(b(),k("span",I,z($(c).verify_domains.join(",")),1)):R("",!0)])),_:1}),a[2]||(a[2]=j("span",null," site",-1))]),L(n,{type:"segment",animated:"",value:$(r),"onUpdate:value":a[0]||(a[0]=e=>N(r)?r.value=e:null),class:"my-10px"},{default:C((()=>[L(l,{name:"all"},{default:C((()=>[A(z(e.$t("SSL.index_28")),1)])),_:1}),L(l,{name:"matched"},{default:C((()=>[A(z(e.$t("SSL.index_27")),1)])),_:1})])),_:1},8,["value"]),L(m,{show:$(P)},{default:C((()=>[L(p,{"render-source-label":U,"render-target-label":U,value:$(u).domains,"onUpdate:value":a[1]||(a[1]=e=>$(u).domains=e),options:$(_),"source-filterable":"","virtual-scroll":""},null,8,["value","options"])])),_:1},8,["show"]),j("div",J,[L(f,{type:"primary",onClick:O},{default:C((()=>[A(z(e.$t("SSL.index_29")),1)])),_:1})]),L(v,{class:"mt-20px"},{default:C((()=>[j("li",null,[L(h,{name:"ssl-lock",class:"text-#20a53a",size:18}),a[3]||(a[3]=j("span",{class:"ml-8px"},"This SSL is applicable to the this domain",-1))]),j("li",null,[L(h,{name:"ssl-unlock",class:"text-error",size:18}),a[4]||(a[4]=j("span",{class:"ml-8px"},'After using this SSL, accessing the domain will show a "Not Secure" warning',-1))])])),_:1})])}}}),B={key:0,class:"text-#20a53a"},G={class:"icon-box"},M=r(_({__name:"index",props:{row:{},onRefresh:{type:Function}},setup(e){const a=e,{row:t}=x(a),l=S({domains:"",issuer:"",end_date:"",is_match:!0}),n=e=>{h({title:"Deploy SSL Certificate",content:0===e?"Are you sure to deploy this SSL certificate to the panel?":"Are you sure you want to restore it?",onConfirm:async()=>{await f({hash:t.value.hash,recover:e}),a.onRefresh()}})};return(async()=>{await E(t.value.hash),l.is_match=!1,l.domains=q.value.panel[0].info.subject,l.issuer=q.value.panel[0].info.issuer,l.end_date=q.value.panel[0].info.notAfter})(),(e,a)=>{const i=w("i18n-t"),r=s,u=c,p=D,m=O,f=o,h=H,v=d;return b(),k("div",null,[j("div",null,[L(i,{keypath:"SSL.index_26",tag:"span",scope:"global"},{a:C((()=>[$(t).verify_domains.length?(b(),k("span",B,z($(t).verify_domains.join(",")),1)):R("",!0)])),_:1}),a[2]||(a[2]=j("span",null," panel",-1))]),L(f,{show:$(P),class:"my-16px"},{default:C((()=>[L(m,{type:"info","show-icon":!1},{default:C((()=>[L(p,{class:"py-2px text-12px items-center flex-nowrap!"},{default:C((()=>[a[3]||(a[3]=j("b",{class:"text-nowrap!"},"Current SSL",-1)),L(r,{name:"ssl-lock",class:"text-#20a53a",size:18}),L(u,{vertical:""}),j("div",null,[j("div",null,[A(z(e.$t("Config.Safe.index_37")),1),j("b",null,z($(l).domains),1)]),j("div",null,[A(z(e.$t("Config.Safe.index_38")),1),j("b",null,z($(l).issuer),1)]),j("div",null,[A(z(e.$t("Config.Safe.index_39")),1),j("b",null,z($(l).end_date),1)])])])),_:1})])),_:1}),j("div",G,[L(r,{name:"file-back",size:40,color:"#0a8c46"})]),L(m,{type:"success","show-icon":!1},{default:C((()=>[L(p,{class:"py-2px text-12px items-center flex-nowrap! text-primary"},{default:C((()=>[a[4]||(a[4]=j("b",{class:"text-nowrap!"},"New SSL",-1)),$(l).is_match?(b(),U(r,{key:0,name:"ssl-lock",class:"text-#20a53a",size:18})):(b(),U(r,{key:1,name:"ssl-unlock",class:"text-error",size:18})),L(u,{vertical:""}),j("div",null,[j("div",null,[A(z(e.$t("Config.Safe.index_37")),1),j("b",null,z($(t).verify_domains.join(",")),1)]),j("div",null,[A(z(e.$t("Config.Safe.index_38")),1),j("b",null,z($(t).provider+" "+$(t).issuer),1)]),j("div",null,[A(z(e.$t("Config.Safe.index_39")),1),j("b",null,z($(t).end_date),1)])])])),_:1})])),_:1})])),_:1},8,["show"]),j("div",null,[L(h,{type:"primary",onClick:a[0]||(a[0]=e=>n(0))},{default:C((()=>[A(z(e.$t("SSL.index_29")),1)])),_:1})]),L(u,{class:"my-16px!"}),L(p,{class:"items-center"},{default:C((()=>[a[6]||(a[6]=j("span",{class:"text-desc"},"Restore to panel self-signed certificate?",-1)),L(h,{type:"primary",ghost:"",onClick:a[1]||(a[1]=e=>n(1))},{default:C((()=>a[5]||(a[5]=[A("Restore")]))),_:1})])),_:1}),L(v,{class:"mt-20px"},{default:C((()=>[j("li",null,[L(r,{name:"ssl-lock",class:"text-#20a53a",size:18}),a[7]||(a[7]=j("span",{class:"ml-8px"},"This SSL is applicable to the this domain",-1))]),j("li",null,[L(r,{name:"ssl-unlock",class:"text-error",size:18}),a[8]||(a[8]=j("span",{class:"ml-8px"},'After using this SSL, accessing the domain will show a "Not Secure" warning',-1))])])),_:1})])}}}),[["__scopeId","data-v-82432f85"]]);e("default",_({__name:"index",props:{data:{}},setup(e){const{t:a}=y(),l=e,{row:s,onRefresh:n,menu:i}=l.data,o=v("site"),c=[{key:"site",label:a("Home.index_68"),component:K,data:{row:s,onRefresh:n}},{key:"panel",label:"Panel",component:M,show:u,data:{row:s,onRefresh:n}}];return o.value=i||"site",(e,a)=>{const l=t;return b(),U(l,{value:$(o),"onUpdate:value":a[0]||(a[0]=e=>N(o)?o.value=e:null),data:c},null,8,["value"])}}}))}}}));
