System.register(["./page_layout-legacy.js?v=1756367574781","./vue-legacy.js?v=1756367574781","./public-legacy.js?v=1756367574781","./index-legacy.js?v=1756367574781","./common-legacy.js?v=1756367574781","./soft-legacy2.js?v=1756367574781","./naive-legacy.js?v=1756367574781","./soft-legacy.js?v=1756367574781","./file-legacy2.js?v=1756367574781","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1756367574781"],function(t,e){"use strict";var a,i,n,l,o,s,r,c,d,u,p,f,v,m,g,h,b,y,x,w,k,_,C,S,z,F,j,P,R,O,D,M,L,T,N,I,q,U,E,K,G,B,V,W,A,H,J,Y,X,Z,Q,tt,et,at,it,nt,lt,ot,st,rt,ct,dt,ut,pt,ft,vt,mt,gt,ht,bt,yt,xt,wt,kt,_t,Ct,St,zt,Ft,jt,Pt,Rt,Ot,Dt,Mt,Lt,Tt,Nt;return{setters:[t=>{a=t.v,i=t.r,n=t.t,l=t.x,o=t.i,s=t.w,r=t.a,c=t.m,d=t.d,u=t.be,p=t.p,f=t.cm,v=t._,m=t.h,g=t.n,h=t.a7,b=t.R,y=t.q,x=t.u,w=t.cn,k=t.co,_=t.cp},t=>{C=t.r,S=t.ak,z=t.aC,F=t.aD,j=t._,P=t.n,R=t.ap,O=t.W,D=t.F,M=t.k,L=t.c,T=t.R,N=t.V,I=t.H,q=t.U,U=t.i,E=t.a2,K=t.a3,G=t.S,B=t.I,V=t.O,W=t.j,A=t.a4,H=t.x,J=t.P,Y=t.f,X=t.ad,Z=t.ae,Q=t.o,tt=t.an,et=t.aw,at=t.G,it=t.l,nt=t.v,lt=t.aj,ot=t.av,st=t.w,rt=t.u,ct=t.b,dt=t.$,ut=t.h,pt=t.a7,ft=t.p,vt=t.a0,mt=t.a6},t=>{gt=t.b,ht=t.u,bt=t.a,yt=t.q},t=>{xt=t._},t=>{wt=t.a0},t=>{kt=t.c},t=>{_t=t._,Ct=t.dc,St=t.dl,zt=t.aC,Ft=t.di,jt=t.aX,Pt=t.au,Rt=t.av,Ot=t.dg,Dt=t.dh,Mt=t.dS},t=>{Lt=t.a},t=>{Tt=t.i},t=>{Nt=t._}],execute:function(){var $t=document.createElement("style");function It(t,e,a){i("FileEditorPath",a),openEditorView(t,e)}async function qt(){await async function(){await a("/static/vite/oldjs/jquery-2.2.4.min.js?v=1756367574781"),await a("/static/layer/layer.js?v=1756367574781"),await a("/static/vite/oldjs/jsencrypt.min.js?v=1756367574781"),await a("/static/language/English/lan.js?v=1756367574781"),await a("/static/ace/ace.js?v=1756367574781"),await a("/static/ace/ext-language_tools.js?v=1756367574781"),await a("/static/vite/oldjs/polyfill.min.js?v=1756367574781"),await a("/static/vite/oldjs/public.js?v=1756367574781"),await a("/static/vite/oldjs/public_backup.js?v=1756367574781")}(),window.usePay=gt,$("#file-main").append('\n\t\t<script type="text/template" id="aceTmplate">\n\t\t\t\t<div id="ace_conter">\n\t\t\t\t\t\t<div class="ace_header" style="top: 0">\n\t\t\t\t\t\t\t\t<span class="saveFile"><i class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></i><span>Save</span></span>\n\t\t\t\t\t\t\t\t<span class="saveFileAll"><i class="glyphicon glyphicon-duplicate" aria-hidden="true"></i><span>Save All</span></span>\n\t\t\t\t\t\t\t\t<span class="refreshs"><i class="glyphicon glyphicon-refresh" aria-hidden="true"></i><span>Refresh</span></span>\n\t\t\t\t\t\t\t\t<span class="searchs"><i class="glyphicon glyphicon-search" aria-hidden="true"></i><span>Search</span></span>\n\t\t\t\t\t\t\t\t<span class="replaces"><i class="glyphicon glyphicon-retweet" aria-hidden="true"></i><span>Replace</span></span>\n\t\t\t\t\t\t\t\t<span class="jumpLine"><i class="glyphicon glyphicon-pushpin" aria-hidden="true"></i><span>JumpLine</span></span>\n\t\t\t\t\t\t\t\t<span class="fontSize"><i class="glyphicon glyphicon-text-width" aria-hidden="true"></i><span>Font</span></span>\n\t\t\t\t\t\t\t\t<span class="themes"><i class="glyphicon glyphicon-magnet" aria-hidden="true"></i><span>Theme</span></span>\n\t\t\t\t\t\t\t\t<span class="setUp"><i class="glyphicon glyphicon-cog" aria-hidden="true"></i><span>Set</span></span>\n\t\t\t\t\t\t\t\t<span class="helps"><i class="glyphicon glyphicon-question-sign" aria-hidden="true"></i><span>Help</span></span>\n\t\t\t\t\t\t\t\t<div class="pull-down" title="Hide toolbar" style="top: 0"><i class="glyphicon glyphicon-menu-down" aria-hidden="true"></i></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="ace_overall" style="top: 35px;">\n\t\t\t\t\t\t\t\t\x3c!-- 编辑器目录 --\x3e\n\t\t\t\t\t\t\t\t<div class="ace_catalogue" style="left:0px">\n\t\t\t\t\t\t\t\t\t\t<div class="ace_catalogue_title">Directory<div class="dir-menu-right"><span class="glyphicon glyphicon-minus" aria-hidden="true"></span></div></div>\n\t\t\t\t\t\t\t\t\t<div class="ace_dir_tools">\n\t\t\t\t\t\t\t\t\t\t<div class="upper_level"  title="Return to parent directory">\n\t\t\t\t\t\t\t\t\t\t\t<i class="glyphicon glyphicon-share-alt" aria-hidden="true"></i>\n\t\t\t\t\t\t\t\t\t\t\t<span>Back</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="search_file" title="Search File">\n\t\t\t\t\t\t\t\t\t\t\t<i class="glyphicon glyphicon-search" aria-hidden="true"></i>\n\t\t\t\t\t\t\t\t\t\t\t<span>Search</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="new_folder" title="File/Folder">\n\t\t\t\t\t\t\t\t\t\t\t<i class="glyphicon glyphicon-plus"  aria-hidden="true"></i>\n\t\t\t\t\t\t\t\t\t\t\t<span>New</span>\n\t\t\t\t\t\t\t\t\t\t\t<ul class="folder_down_up">\n\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="2"><i class="folder-icon"></i>Folder</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="3"><i class="text-icon"></i>File</li>\n\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="refresh_dir" title="Refresh list">\n\t\t\t\t\t\t\t\t\t\t\t<span class="glyphicon glyphicon-refresh" aria-hidden="true"></span>\n\t\t\t\t\t\t\t\t\t\t\t<span>Refresh</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<span class="ace_editor_main_storey"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t<div class="ace_catalogue_list">\n\t\t\t\t\t\t\t\t\t\t\t\t<ul class="cd-accordion-menu"></ul>\n\t\t\t\t\t\t\t\t\t\t\t\t<ul class="ace_catalogue_menu">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="0"><i class="glyphicon glyphicon-refresh" aria-hidden="true"></i><span>Refresh</span></li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="1"><i class="glyphicon glyphicon-folder-open" aria-hidden="true"></i><span>Subdirectory</span></li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="2"><i class="folder-icon"></i><span>New Folder</span></li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="3"><i class="text-icon"></i><span>New File</span></li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="4"><i class="rename-icon img-icon"></i><span>Rename</span></li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="5"><i class="down-icon img-icon"></i><span>Download</span></li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="6"><i class="del-icon img-icon"></i><span>Delete</span></li>\n\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="ace_catalogue_drag_icon">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="drag_icon_conter"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="fold_icon_conter" title="Hide file directory"></span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\x3c!-- 编辑内容 --\x3e\n\t\t\t\t\t\t\t\t<div class="ace_editor_main">\n\t\t\t\t\t\t\t\t\t\t<ul class="ace_conter_menu"></ul>\n\t\t\t\t\t\t\t\t\t\t<div class="ace_conter_tips"><div class="tips"></div></div>\n\t\t\t\t\t\t\t\t\t\t<div class="ace_editor_main_storey"></div>\n\t\t\t\t\t\t\t\t\t\t<div class="ace_conter_editor"></div>\n\t\t\t\t\t\t\t\t\t\t<div class="ace_conter_toolbar">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="pull-left size_ellipsis">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span data-type="path" class="size_ellipsis"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="pull-right">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span data-type="cursor"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span data-type="history"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span data-type="tab"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span data-type="encoding"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span data-type="lang"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="ace_toolbar_menu" style="display: none;">\n\t\t\t\t\t\t\t\t\t\t<div class="menu-item menu-tabs" style="display: none;">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-title">Set tabs</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<ul class="tabsType">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-value="nbsp">Indent using spaces</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-value="tabs">Indent using "Tab"</li>\n\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-title" style="margin-top:15px">Set the tab length</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<ul class="tabsSize">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-value="1">1</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-value="2">2</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-value="3">3</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-value="4">4</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-value="5">5</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-value="6">6</li>\n\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="menu-item menu-encoding" style="display: none;">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-title">Set file save encoding format</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<ul></ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="menu-item menu-files" style="display: none;">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-conter">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" class="menu-input" placeholder="Input language mode">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-close" aria-hidden="true"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-title">Set file language association</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<ul></ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="menu-item menu-fontSize" style="display: none;">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-title">Set editor font size</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-conter">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="set_font_size">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="number" min="12" max="45"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="tips error">Font setting range 12-45</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button class="btn-save">Save</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="menu-item menu-jumpLine" style="display: none;">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-title">Jump to specified line</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-conter">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="set_jump_line">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="number" min="0"/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button class="btn-save">Jump</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="menu-item menu-themes" style="display: none;">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-title">Set editor theme</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<ul></ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="menu-item menu-history" style="display: none;">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="menu-title">History version</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<ul></ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="menu-item menu-setUp"  style="display: none;">\n\t\t\t\t\t\t\t\t\t\t\t<div class="menu-title">Editor setting [ Some settings need to be restart editor ]</div>\n\t\t\t\t\t\t\t\t\t\t\t<ul class="editor_menu">\n\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="wrap">Auto wrap</li>\n\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="enableLiveAutocompletion">Code autocomplete</li>\n\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="enableSnippets">Enable snippets</li>\n\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="showInvisibles">Show hidden characters</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li data-type="showLineNumbers">Show line numbers</li>\n\n\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t<\/script>\n\t')}function Ut(t,e,a){const i=C(!0),n=C(0),l=C(0),o=C(0),s=C(0),r=C(0),c=C(0),d=C(0),u=C(0);let p;S(t)?p=t.value:"string"==typeof t?p=document.querySelector(t):t instanceof Element&&(p=t);const f=function(){let t=null;return!!e&&(()=>{t||(t=setTimeout(()=>{e({m_flag:i,m_left:n,m_right:l,m_bottom:s,m_top:o,m_x:d,m_y:u,m_height:r,m_width:c}),clearTimeout(t),t=null},10))})}();function v(t){const{left:e,right:a,top:i,bottom:p,height:f,width:v,x:m,y:g}=t.getBoundingClientRect();n.value=e,l.value=a,o.value=i,s.value=p,r.value=f,c.value=v,d.value=m,u.value=g}const m=t=>{if(a&&a(t,{m_flag:i,m_left:n,m_right:l,m_bottom:s,m_top:o,m_x:d,m_y:u,m_height:r,m_width:c}),!i.value)return;const{left:e,right:m,top:g,bottom:h}=p.getBoundingClientRect(),b=document.createElement("div"),y=t.clientX,x=t.clientY;b.style.position="absolute",b.style.left=y-e+"px",b.style.top=x-g+"px",b.style.width="0px",b.style.height="0px",b.style.backgroundColor="rgba(135, 182, 130, 0.1)",b.classList.add("district-wrapper"),p.appendChild(b),t.preventDefault();const{pause:w,resume:k,isActive:_}=z(()=>{j.scrollTop>=j.scrollHeight-j.clientHeight?w():(b.style.height=b.offsetHeight+10+"px",b.style.marginTop=parseInt(getComputedStyle(b).marginTop)-10+"px",j.scrollTop+=10,P=j.scrollTop,v(b),f&&f())},{immediate:!1}),{pause:C,resume:S,isActive:F}=z(()=>{j.scrollTop<=0?C():(b.style.height=b.offsetHeight+10+"px",j.scrollTop-=10,R+=10,v(b),f&&f())},{immediate:!1}),j=p.querySelector(".n-scrollbar-container");let P=0,R=0;document.onmousemove=t=>{t.preventDefault(),_.value||F.value||(y<=t.clientX?b.style.width=t.clientX-y+"px":(b.style.width=y-t.clientX+"px",b.style.marginLeft=-(y-t.clientX)+"px"),x<=t.clientY?(b.style.height=t.clientY-x+P+"px",b.style.marginTop=-P+"px"):(b.style.height=x-t.clientY+R+"px",b.style.marginTop=-(x-t.clientY)+"px"),t.clientX<e&&(b.style.width=y-e+"px",b.style.marginLeft=-(y-e)+"px"),t.clientX>m&&(b.style.width=m-y+"px")),t.clientY>h&&k(),t.clientY<g&&S(),v(b),f&&f()},document.onmouseup=()=>{document.onmousemove=null,p.contains(b)&&p.removeChild(b)}};return p&&(p.onmousedown=m),{m_flag:i,m_x:d,m_y:u,m_left:n,m_right:l,m_top:o,m_bottom:s,m_height:r,m_width:c}}function Et(t,e){const a=F(t.m_left),i=F(t.m_right),n=F(t.m_top),l=F(t.m_bottom),o=F(e.left),s=F(e.right),r=F(e.top),c=F(e.bottom);return!(s<a||o>i||c<n||r>l)}function Kt(t){t.card_hover=!0}function Gt(t){t.card_hover=!1}$t.textContent='@charset "UTF-8";.files-icon[data-v-0a2d98fb]{display:inline-block;width:25px;height:25px;background-image:url(/static/vite/images/file_icon.png);background-repeat:no-repeat;background-size:25px;background-position:0px -375px}.files-icon.medium-icon.swf-icon[data-v-0a2d98fb]{background-position:0px 0px}.files-icon.medium-icon.webm-icon[data-v-0a2d98fb]{background-position:0px -25px}.files-icon.medium-icon.webp-icon[data-v-0a2d98fb]{background-position:0px -50px}.files-icon.medium-icon.wma-icon[data-v-0a2d98fb]{background-position:0px -75px}.files-icon.medium-icon.wmv-icon[data-v-0a2d98fb]{background-position:0px -100px}.files-icon.medium-icon.xls-icon[data-v-0a2d98fb]{background-position:0px -125px}.files-icon.medium-icon.xml-icon[data-v-0a2d98fb]{background-position:0px -150px}.files-icon.medium-icon.access-icon[data-v-0a2d98fb]{background-position:0px -175px}.files-icon.medium-icon.apk-icon[data-v-0a2d98fb]{background-position:0px -200px}.files-icon.medium-icon.avi-icon[data-v-0a2d98fb],.files-icon.medium-icon.bmp-icon[data-v-0a2d98fb]{background-position:0px -250px}.files-icon.medium-icon.cdr-icon[data-v-0a2d98fb]{background-position:0px -275px}.files-icon.medium-icon.compress-icon[data-v-0a2d98fb]{background-position:0px -300px}.files-icon.medium-icon.css-icon[data-v-0a2d98fb]{background-position:0px -325px}.files-icon.medium-icon.doc-icon[data-v-0a2d98fb]{background-position:0px -350px}.files-icon.medium-icon.file-icon[data-v-0a2d98fb]{background-position:0px -375px}.files-icon.medium-icon.folder-icon[data-v-0a2d98fb]{background-position:0px -400px}.files-icon.medium-icon.gif-icon[data-v-0a2d98fb]{background-position:0px -425px}.files-icon.medium-icon.html-icon[data-v-0a2d98fb]{background-position:0px -450px}.files-icon.medium-icon.ico-icon[data-v-0a2d98fb]{background-position:0px -475px}.files-icon.medium-icon.java-icon[data-v-0a2d98fb]{background-position:0px -500px}.files-icon.medium-icon.js-icon[data-v-0a2d98fb]{background-position:0px -525px}.files-icon.medium-icon.bt_split_json-icon[data-v-0a2d98fb]{background-position:0px -550px}.files-icon.medium-icon.jpeg-icon[data-v-0a2d98fb]{background-position:0px -575px}.files-icon.medium-icon.jpg-icon[data-v-0a2d98fb]{background-position:0px -600px}.files-icon.medium-icon.json-icon[data-v-0a2d98fb]{background-position:0px -625px}.files-icon.medium-icon.log-icon[data-v-0a2d98fb]{background-position:0px -650px}.files-icon.medium-icon.lua-icon[data-v-0a2d98fb]{background-position:0px -675px}.files-icon.medium-icon.mkv-icon[data-v-0a2d98fb]{background-position:0px -700px}.files-icon.medium-icon.mov-icon[data-v-0a2d98fb]{background-position:0px -725px}.files-icon.medium-icon.mp4-icon[data-v-0a2d98fb]{background-position:0px -750px}.files-icon.medium-icon.mpg-icon[data-v-0a2d98fb]{background-position:0px -775px}.files-icon.medium-icon.mpeg-icon[data-v-0a2d98fb]{background-position:0px -800px}.files-icon.medium-icon.pdf-icon[data-v-0a2d98fb]{background-position:0px -825px}.files-icon.medium-icon.php-icon[data-v-0a2d98fb]{background-position:0px -850px}.files-icon.medium-icon.png-icon[data-v-0a2d98fb]{background-position:0px -875px}.files-icon.medium-icon.ppt-icon[data-v-0a2d98fb]{background-position:0px -900px}.files-icon.medium-icon.py-icon[data-v-0a2d98fb]{background-position:0px -925px}.files-icon.medium-icon.rm-icon[data-v-0a2d98fb]{background-position:0px -950px}.files-icon.medium-icon.rmvb-icon[data-v-0a2d98fb]{background-position:0px -975px}.files-icon.medium-icon.sh-icon[data-v-0a2d98fb]{background-position:0px -1000px}.files-icon.medium-icon.bt_split-icon[data-v-0a2d98fb]{background-position:0px -1025px}.files-icon.medium-icon.sql-icon[data-v-0a2d98fb]{background-position:0px -1050px}.files-icon.large-icon[data-v-0a2d98fb]{width:50px;height:50px;background-size:50px;background-position:0px -750px}.files-icon.large-icon.swf-icon[data-v-0a2d98fb]{background-position:0px 0px}.files-icon.large-icon.webm-icon[data-v-0a2d98fb]{background-position:0px -50px}.files-icon.large-icon.webp-icon[data-v-0a2d98fb]{background-position:0px -100px}.files-icon.large-icon.wma-icon[data-v-0a2d98fb]{background-position:0px -150px}.files-icon.large-icon.wmv-icon[data-v-0a2d98fb]{background-position:0px -200px}.files-icon.large-icon.xls-icon[data-v-0a2d98fb]{background-position:0px -250px}.files-icon.large-icon.xml-icon[data-v-0a2d98fb]{background-position:0px -300px}.files-icon.large-icon.access-icon[data-v-0a2d98fb]{background-position:0px -350px}.files-icon.large-icon.apk-icon[data-v-0a2d98fb]{background-position:0px -400px}.files-icon.large-icon.avi-icon[data-v-0a2d98fb]{background-position:0px -450px}.files-icon.large-icon.bmp-icon[data-v-0a2d98fb]{background-position:0px -500px}.files-icon.large-icon.cdr-icon[data-v-0a2d98fb]{background-position:0px -550px}.files-icon.large-icon.compress-icon[data-v-0a2d98fb]{background-position:0px -600px}.files-icon.large-icon.css-icon[data-v-0a2d98fb]{background-position:0px -650px}.files-icon.large-icon.doc-icon[data-v-0a2d98fb]{background-position:0px -700px}.files-icon.large-icon.file-icon[data-v-0a2d98fb]{background-position:0px -750px}.files-icon.large-icon.folder-icon[data-v-0a2d98fb]{background-position:0px -800px}.files-icon.large-icon.gif-icon[data-v-0a2d98fb]{background-position:0px -850px}.files-icon.large-icon.html-icon[data-v-0a2d98fb]{background-position:0px -900px}.files-icon.large-icon.ico-icon[data-v-0a2d98fb]{background-position:0px -950px}.files-icon.large-icon.java-icon[data-v-0a2d98fb]{background-position:0px -1000px}.files-icon.large-icon.js-icon[data-v-0a2d98fb]{background-position:0px -1050px}.files-icon.large-icon.bt_split_json-icon[data-v-0a2d98fb]{background-position:0px -1100px}.files-icon.large-icon.jpeg-icon[data-v-0a2d98fb]{background-position:0px -1150px}.files-icon.large-icon.jpg-icon[data-v-0a2d98fb]{background-position:0px -1200px}.files-icon.large-icon.json-icon[data-v-0a2d98fb]{background-position:0px -1250px}.files-icon.large-icon.log-icon[data-v-0a2d98fb]{background-position:0px -1300px}.files-icon.large-icon.lua-icon[data-v-0a2d98fb]{background-position:0px -1350px}.files-icon.large-icon.mkv-icon[data-v-0a2d98fb]{background-position:0px -1400px}.files-icon.large-icon.mov-icon[data-v-0a2d98fb]{background-position:0px -1450px}.files-icon.large-icon.mp4-icon[data-v-0a2d98fb]{background-position:0px -1500px}.files-icon.large-icon.mpg-icon[data-v-0a2d98fb]{background-position:0px -1550px}.files-icon.large-icon.mpeg-icon[data-v-0a2d98fb]{background-position:0px -1600px}.files-icon.large-icon.pdf-icon[data-v-0a2d98fb]{background-position:0px -1650px}.files-icon.large-icon.php-icon[data-v-0a2d98fb]{background-position:0px -1700px}.files-icon.large-icon.png-icon[data-v-0a2d98fb]{background-position:0px -1750px}.files-icon.large-icon.ppt-icon[data-v-0a2d98fb]{background-position:0px -1800px}.files-icon.large-icon.py-icon[data-v-0a2d98fb]{background-position:0px -1850px}.files-icon.large-icon.rm-icon[data-v-0a2d98fb]{background-position:0px -1900px}.files-icon.large-icon.rmvb-icon[data-v-0a2d98fb]{background-position:0px -1950px}.files-icon.large-icon.sh-icon[data-v-0a2d98fb]{background-position:0px -2000px}.files-icon.large-icon.bt_split-icon[data-v-0a2d98fb]{background-position:0px -2050px}.files-icon.large-icon.sql-icon[data-v-0a2d98fb]{background-position:0px -2100px}.modal-footer-btns[data-v-6be9ab69]{display:flex;align-items:center;flex-direction:row;justify-content:end;gap:10px;padding:10px}.single-line-ellipsis[data-v-6be9ab69]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.video-container[data-v-6be9ab69]{display:grid;grid-template-columns:1fr 300px}.video-container .video-list[data-v-6be9ab69]{display:flex;align-items:center;flex-direction:column;justify-content:start;align-items:flex-start;padding:10px;box-sizing:border-box;background:var(--color-modal);width:100%;height:100%}.video-container .video-list .video-item[data-v-6be9ab69]{display:flex;align-items:center;flex-direction:row;justify-content:start;cursor:pointer;width:100%;padding:10px 10px 10px 0;border-radius:4px}.video-container .video-list .video-item[data-v-6be9ab69]:hover,.video-container .video-list .video-item.active[data-v-6be9ab69]{background:#5c5c5c;color:var(--color-text-1)}.modal-footer-btns[data-v-35fe8a60]{display:flex;align-items:center;flex-direction:row;justify-content:end;gap:10px;padding:10px}.single-line-ellipsis[data-v-35fe8a60]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.upload-area[data-v-35fe8a60]{width:100%;height:100vh;background:rgba(225,255,255,.3);display:flex;align-items:center;flex-direction:row;justify-content:center}.upload-area .tip[data-v-35fe8a60]{font-size:50px;color:#fff}.modal-footer-btns[data-v-7045f818]{display:flex;align-items:center;flex-direction:row;justify-content:end;gap:10px;padding:10px}.single-line-ellipsis[data-v-7045f818]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.img-wrapper[data-v-7045f818]{width:100%;height:100vh;position:relative}.img-wrapper img[data-v-7045f818]{width:60%;position:absolute;left:50%;top:50%;transition:all .2s ease-in-out;transform:translate(-50%,-50%)}.img-wrapper .tools[data-v-7045f818]{width:300px;padding:20px;display:flex;align-items:center;flex-direction:row;justify-content:space-between;position:absolute;left:50%;margin-left:-150px;bottom:130px;background:rgba(99,96,98,.6);border-radius:50px}.img-wrapper .close-icon[data-v-7045f818]{position:absolute;right:20px;top:20px}.modal-footer-btns[data-v-062d5ea2]{display:flex;align-items:center;flex-direction:row;justify-content:end;gap:10px;padding:10px}.single-line-ellipsis[data-v-062d5ea2]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.button-group[data-v-062d5ea2]{display:flex;align-items:center;flex-direction:row;justify-content:space-between;flex-wrap:wrap}.button-group .group-left[data-v-062d5ea2]{display:flex;align-items:center;flex-direction:row;justify-content:start;gap:8px}.button-group .group-left .divider[data-v-062d5ea2]{height:24px;width:1px;background:var(--color-border)}.button-group .group-right[data-v-062d5ea2]{display:flex;align-items:center;flex-direction:row;justify-content:start;gap:8px}.button-group .group-right .view-change[data-v-062d5ea2]{display:flex;align-items:center;flex-direction:row;gap:0;color:var(--color-text-2)}.button-group .group-right .view-change .card[data-v-062d5ea2],.button-group .group-right .view-change .list[data-v-062d5ea2]{width:32px;height:32px;border:1px solid var(--color-border);cursor:pointer;display:flex;align-items:center;flex-direction:row;justify-content:center}.button-group .group-right .view-change .active[data-v-062d5ea2]{box-shadow:inset 0 3px 5px rgba(0,0,0,.125);background:#e6e6e6;color:var(--color-text-3)}.button-group .group-right .view-change .card[data-v-062d5ea2]{border-right:none;border-radius:4px 0 0 4px}.button-group .group-right .view-change .list[data-v-062d5ea2]{border-radius:0 4px 4px 0}.button-group[data-v-062d5ea2] .n-button .n-button__content~.n-button__icon{margin-left:0}.button-group .btn-behavior[data-v-062d5ea2] .n-icon-slot{transition:.2s all ease-in-out;transform-origin:center center;transform:translateY(0);top:0}.button-group .btn-behavior[data-v-062d5ea2]:hover .n-icon-slot{transform:rotate(90deg)}.path-list[data-v-13ecd16b]{flex:1;display:flex;border-top:1px solid var(--color-border);border-bottom:1px solid var(--color-border);overflow:hidden;cursor:text}.path-list .path-item[data-v-13ecd16b]{display:flex;align-items:center;height:100%;white-space:nowrap;cursor:pointer;transition:background-color .3s cubic-bezier(.4,0,.2,1);flex-shrink:0}.path-list .path-item .path-dir[data-v-13ecd16b]{display:flex;align-items:center;height:100%;padding:0 6px;color:var(--color-text-2)}.path-list .path-item .path-arrow[data-v-13ecd16b]{display:flex;align-items:center;height:100%;padding:0 2px;border-left:1px solid transparent;border-right:1px solid transparent;font-size:14px;transition:border-color .3s cubic-bezier(.4,0,.2,1)}.path-list .path-item .path-arrow.reversal .svg-icon[data-v-13ecd16b]{transform:rotate(180deg)}.path-list .path-item[data-v-13ecd16b]:hover{background-color:var(--file-choose-hover-color)}.path-list .path-item:hover .path-arrow[data-v-13ecd16b]{border-left-color:var(--file-choose-hover-border-color);border-right-color:var(--file-choose-hover-border-color)}.modal-footer-btns[data-v-70ba294c]{display:flex;align-items:center;flex-direction:row;justify-content:end;gap:10px;padding:10px}.single-line-ellipsis[data-v-70ba294c]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.filter-tools[data-v-70ba294c]{display:flex;align-items:center;flex-direction:row;justify-content:space-between;gap:10px}.filter-tools .dir-address[data-v-70ba294c]{min-width:150px;max-width:600px}.filter-tools .dir-search[data-v-70ba294c]{min-width:120px;max-width:300px}.filter-tools .dir-search .__input-1cpbmap-m[data-v-70ba294c]{--n-border: 1px solid #2e9a8c;border-right:none}.modal-footer-btns[data-v-e47d1079]{display:flex;align-items:center;flex-direction:row;justify-content:end;gap:10px;padding:10px}.single-line-ellipsis[data-v-e47d1079]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.operation-wrapper[data-v-e47d1079]{display:flex;align-items:center;flex-direction:row;justify-content:end;display:inline-flex;gap:8px}.operation-wrapper span[data-v-e47d1079]{color:#36ad6a}.n-data-table[data-v-2f7fd2d3]{--n-merged-td-color-hover: var(--color-table-td-hover)}.n-data-table[data-v-2f7fd2d3] .active-row{background-color:var(--n-merged-td-color-hover)}.n-data-table[data-v-2f7fd2d3] .active-row>.n-data-table-td{background-color:var(--n-merged-td-color-hover)}.n-data-table[data-v-2f7fd2d3] .n-data-table-td{height:42px}.file-nm[data-v-2f7fd2d3]{cursor:pointer}.modal-footer-btns[data-v-ae5d241c]{display:flex;align-items:center;flex-direction:row;justify-content:end;gap:10px;padding:10px}.single-line-ellipsis[data-v-ae5d241c]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.card-list[data-v-ae5d241c]{display:flex;align-content:flex-start;justify-content:flex-start;flex-wrap:wrap;gap:10px;height:100%}.card-list .file-item[data-v-ae5d241c]{width:100px;height:100px;display:flex;align-items:center;flex-direction:column;justify-content:center;gap:10px;padding:10px;margin:5px;cursor:pointer;transition:.2s all;border-radius:3px}.card-list .file-item span[data-v-ae5d241c]{text-align:center;display:block;width:100%}.card-list .file-item[data-v-ae5d241c]:hover{box-shadow:0 0 5px rgba(0,0,0,.2)}.card-list .file-item.active[data-v-ae5d241c]{background:var(--file-card-hover-color)}.modal-footer-btns[data-v-7a85dcb9]{display:flex;align-items:center;flex-direction:row;justify-content:end;gap:10px;padding:10px}.single-line-ellipsis[data-v-7a85dcb9]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.tabs[data-v-7a85dcb9]{box-sizing:border-box;padding:16px 16px 0;overflow:hidden;width:100%}.tabs .tabs-scroll[data-v-7a85dcb9]{width:100%;overflow:hidden;position:relative}.tabs .tabs-scroll.has-scroll[data-v-7a85dcb9]{padding:0 40px;box-sizing:border-box}.tabs .tabs-scroll .left[data-v-7a85dcb9],.tabs .tabs-scroll .right[data-v-7a85dcb9]{height:28px;display:flex;align-items:center;flex-direction:row;justify-content:center;cursor:pointer;width:40px;background-color:var(--color-bg-3);position:absolute;top:1px}.tabs .tabs-scroll .left[data-v-7a85dcb9]{left:0;box-shadow:2px 0 15px rgba(0,0,0,.6)}.tabs .tabs-scroll .right[data-v-7a85dcb9]{right:0;box-shadow:-2px 0 15px rgba(0,0,0,.6)}.tabs .tabs-scroll .scroll-container[data-v-7a85dcb9]{width:100%;overflow:hidden}.tabs .tabs-scroll .scroll-container .tabs-wrapper[data-v-7a85dcb9]{height:100%;display:flex;align-items:center;flex-direction:row;justify-content:start;display:inline-flex}.tabs .tabs-scroll .scroll-container .tabs-wrapper .tab-item[data-v-7a85dcb9]{width:150px;height:30px;padding:0 10px;background-color:var(--color-bg-3);box-sizing:border-box;border:1px solid var(--color-border);border-right:none;cursor:pointer;display:flex;flex-direction:row;justify-content:space-between;align-items:center;gap:5px}.tabs .tabs-scroll .scroll-container .tabs-wrapper .tab-item.active[data-v-7a85dcb9]{background:var(--color-bg-2)}.tabs .tabs-scroll .scroll-container .tabs-wrapper .tab-item .tab-tit[data-v-7a85dcb9]{display:block;max-width:80px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.tabs .tabs-scroll .scroll-container .tabs-wrapper .add[data-v-7a85dcb9]{width:auto;border-right:1px solid var(--color-border)}\n/*$vite$:1*/',document.head.appendChild($t),t({B:Ne,a:de,b:Ye,c:Te,d:aa,e:ze,f:ea,g:Jt,h:Wt,i:Vt,j:async function(t,e){try{await n.post("/files?action=CreateLink",{sfile:t,dfile:e},{requestOptions:{loading:ue("file.buttonGroup.loading.creatingSoftlink"),successMessage:!0}})}catch(a){console.warn(a)}},k:async function(t,e,a,i){try{await n.post("/files?action=Zip",{sfile:t,dfile:e,z_type:a,path:i},{requestOptions:{loading:Me("file.contextMenu.loading.compressing"),successMessage:!0}})}catch(l){console.warn(l)}},l:async function(t){await n.post("/files?action=UnZip",t,{requestOptions:{loading:Me("file.contextMenu.loading.decompressing"),successMessage:!0}})},m:ce,n:async function(t){return n.post("/task?action=remove_task",{id:t},{requestOptions:{loading:Ht("file.tableController.deletingTask"),successMessage:!0}})},o:It,r:ta,s:async function(t,e,a){try{const i={path:t,p:1,showRow:5e3,sort:"name",reverse:!1,search:e};a&&(i.all=!0);const{message:l}=await n.post("/files?action=GetDirNew&tojs=GetFiles",i);let o=Ae({type:"dir",list:l.dir,path:t}),s=Ae({type:"file",list:l.files,path:t});return o=o.map((t,e)=>({...t,protected:l.tamper_data.dirs&&l.tamper_data.dirs[e]?Number(l.tamper_data.dirs[e].split(";")[0]):0,protected_rule:l.tamper_data.dirs&&l.tamper_data.dirs[e]?Number(l.tamper_data.dirs[e].split(";")[1]):0})),s=s.map((t,e)=>({...t,protected:l.tamper_data.files&&l.tamper_data.files[e]?Number(l.tamper_data.files[e].split(";")[0]):0,protected_rule:l.tamper_data.files&&l.tamper_data.files[e]?Number(l.tamper_data.files[e].split(";")[1]):0})),[...o,...s]}catch(i){return console.warn(i),[]}},u:async function(t,e,a,i,l,o,s=!1,r){const c=[],d=Math.ceil(t.size/a);console.log("总切片数：",d);for(let n=0;n<d;n++){const e=n*a,l=Math.min(e+a,t.size),o=t.slice(e,l),s=new FormData;s.append("f_path",i),s.append("f_name",t.name),s.append("f_size",`${t.size}`),s.append("f_start",`${e}`),s.append("blob",o),c.push(s)}try{for(let t=0;t<c.length;t++){const a=await n.post(e,c[t],{headers:{"Content-Type":"multipart/form-data"},requestOptions:{isOriginalResult:!0}});"number"==typeof a.message&&o&&o(a),l(Math.round(t/c.length*100),a)}l(100,null)}catch(u){return Promise.reject({msg:u.message})}}});const{t:Bt}=o.global;async function Vt(t){const{shareList:e,shareListPage:a,shareListTotal:i}=t;try{const t=await n.post("/files?action=get_download_url_list",{p:a.value,row:12});return e.value=t.message.data,i.value=l(t.message.page),e.value}catch(o){return console.warn(o),[]}}async function Wt(t,e){try{await n.post("/files?action=remove_download_url",{id:e},{requestOptions:{loading:Bt("file.shareListModal.deletingShare"),successMessage:!0}}),Jt(t)}catch(a){console.warn(a)}}const At=R(t=>re(t),100),{t:Ht}=o.global;async function Jt(t,e){const{tableLoading:a,currentPath:i,favoriteList:n,fileRecycle:o,fileList:s,filesView:r,dirNums:c,fileNums:d,total:u,page:p,size:f,sort:v,reverse:m,diskMountPoint:g,currentFile:h,currentDirSize:b,uploadFileList:y,dragUploadRef:x}=t;a.value=!0;try{const a=await ta(i.value,t=>{n.value=t.store,o.value=t.file_recycle,c.value=t.dir.length,d.value=t.files.length,u.value=l(t.page),g.value=t.disk,i.value=t.path},{p:p.value,showRow:f.value,...v.value?{sort:v.value,reverse:m.value}:{},disk:!0,...e});h.value=null,b.value=-1,p.value=1;const w=await Xt(t);let k=[];w.length&&(k=w.map(t=>t.label));const _=await Vt(t);let C=[];_.length&&(C=_.map(t=>t.filename)),s.value=a.map(t=>(t.remarks_hover=!1,t.isEditRemarks=!1,t.isCreate=!1,t.card_hover=!1,t.card_choosed=!1,t.isRenameForCard=!1,t.operation_show=!1,k.includes(t.nm)&&(t.isFavorite=!0),C.includes(t.path)&&(t.isShare=!0),t)),y.value=[],x.value?.listenDragEvent(),P(()=>{"list"==r.value&&(Yt(t),function(t){const{tableRef:e,choosePathRef:a}=t;let i=0;const n=setInterval(()=>{if(i<10?i++:clearInterval(n),e.value){const i=e.value;i.querySelector(".n-data-table-base-table-body")&&Yt(t),i.oncontextmenu=e=>{e.preventDefault(),Zt(e,t)},i.onclick=e=>{"INPUT"!=e.target.nodeName&&(At(t),a.value.handleEnterDown())},clearInterval(n)}},1e3)}(t))}),function(t){const{choosedKeys:e,waitForPaste:a}=t;e.value=[]}(t)}catch(w){console.warn(w)}finally{a.value=!1}}function Yt(t){const{tableRef:e}=t;e.value&&Ut(e.value.querySelector(".n-data-table-base-table-body"),e=>function(t,e){const{trRectArr:a,choosedKeys:i}=t,n=[];for(let l=0;l<a.value.length;l++){const[[t,i]]=Object.entries(a.value[l]);Et(e,i.getClientRects()[0])&&n.push(t)}i.value=[...new Set(n)]}(t,e),(e,a)=>function(t,e,a){const{choosedKeys:i,isMiniScreen:n}=a;if(!t.target.closest(".n-checkbox-box")){if(t.target.classList.contains("file-checkbox")){const e=t.target.closest("tr").dataset.key;return void(i.value.includes(e)?i.value=i.value.filter(t=>t!==e):i.value.push(e))}if(function(t){const{normalTrList:e,trRectArr:a}=t;e.value=document.querySelectorAll('[class*="normal-tr"]');const i=[];for(let n=0;n<e.value.length;n++){const t=e.value[n].dataset.key;i.push({[t]:e.value[n]})}a.value=i}(a),t.target.closest("tr")){const e=t.target.closest("tr").dataset.key;if(0==t.button&&(i.value=[e]),2==t.button){if(i.value.includes(e))return;i.value=[e]}}"INPUT"==t.target.nodeName?e.m_flag.value=!1:e.m_flag.value=!0}}(e,a,t))}async function Xt(t){const{resetFavoriteOptions:e,favoriteOptions:a}=t;try{const t=(await n.post("/files?action=get_files_store",{},{requestOptions:{isOriginalResult:!0}})).message.map(t=>({icon:t.type,label:t.name,key:t.path}));return e(),a.value=[...t,...a.value],a.value}catch(i){return console.warn(i),[]}}function Zt(t,e){const{choosedKeys:a,contextRef:i}=e;console.log();let n="empty";t.target.closest("tr")&&(n=a.value.length>1?"multiple":1==a.value.length?"single":"empty"),i.value.filesOperation(t,n)}function Qt(){const t=document.querySelector("#createInput")?.querySelector("input");t?.focus(),t?.select()}async function te(t,e){const{close:a}=c.loading("Processing, please wait...");try{await kt("tamper_core",71);const{message:a}=await n.post("/tamper_core/get_effective_path.json",{path:e.path},{requestOptions:{isOriginalResult:!0}});if(d(a)&&a.status){const{data:i}=a;"dir"===e.type?function(t,e,a){const{pid:i,lock:n,action:l}=a,o=(n?"Turning off protection ":"Turning on protection ")+`[${e.path}]`,s=Ht(n?"file.tableController.afterTurningOffProtectionDir":"file.tableController.afterTurningOnProtectionDir");bt({width:480,title:o,content:s,onConfirm:async()=>{if("create"===l[0]&&0===i)return await ee(e.path,[]),void Jt(t);const a=[];n?a.push({key:-1!=e.path.indexOf("/www/server/panel/class")?"add_wd":l[0],values:[e.path]}):a.push({key:l[0],values:[e.path]}),await ae(i,a),Jt(t)}})}(t,e,i):function(t,e,a){const{pid:i,lock:n,action:l}=a,o=Ht(n?"file.tableController.turningOffProtection":"file.tableController.turningOnProtection",{path:e.path}),s=Ht(n?"file.tableController.afterTurningOffProtectionFile":"file.tableController.afterTurningOnProtectionFile"),r=C(!1),c=C(!0);bt({title:o,width:480,content:()=>O(D,null,[O("div",null,[s]),O("div",{class:"mt-8px"},[O(_t,{checked:c.value,"onUpdate:checked":t=>c.value=t},{default:()=>[O("span",null,[Ht(n?"file.tableController.turningOffProtectionFile":"file.tableController.turningOnProtectionFile",{path:e.nm})])]})]),O("div",{class:"mt-8px"},[O(_t,{checked:r.value,"onUpdate:checked":t=>r.value=t},{default:()=>[O("span",null,[Ht(n?"file.tableController.turningOffProtectionSuffix":"file.tableController.turningOnProtectionSuffix",{suffix:e.ext})])]})])]),onConfirm:async()=>{if("create"===l[0]&&0===i){const a=e.path.substring(0,e.path.lastIndexOf("/")),i=[];if(c.value){const t=e.path.split("/"),a=t.length>=2?t[t.length-2]:"";i.push(`${a}/${e.nm}`)}return r.value&&i.push("."+e.ext),await ee(a,i),void Jt(t)}const a=[];n?(c.value&&(a.push({key:"remove_bf",values:[e.path]}),a.push({key:"add_wf",values:[e.path]})),r.value&&a.push({key:"remove_bf",values:["."+e.ext]})):(c.value&&(a.push({key:"add_bf",values:[e.path]}),a.push({key:"remove_wf",values:[e.path]})),r.value&&a.push({key:"add_bf",values:["."+e.ext]})),await ae(i,a),Jt(t)}})}(t,e,i)}}finally{a()}}async function ee(t,e){const{message:a}=await n.post("/tamper_core/create_path.json",{path:t,exts:JSON.stringify(e)},{requestOptions:{loading:Ht("file.tableController.creatingDirectoryProtection"),isOriginalResult:!0}});if(d(a)){if(!a.status)return c.error(a.msg),Promise.reject();c.success(a.msg)}}async function ae(t,e){const{message:a}=await n.post("/tamper_core/batch_setting.json",{pid:t,settings:JSON.stringify(e)},{requestOptions:{loading:Ht("file.tableController.executing"),isOriginalResult:!0}});if(d(a)){if(!a.status)return c.error(a.msg),Promise.reject();c.success(a.msg)}}function ie(t,e){const{currentPreviewImg:a,previewShow:i}=t;a.value=e,i.value=!0}function ne(t,e){const{currentPreviewVideo:a,previewVideoShow:i}=t;a.value={path:e.path,name:e.nm},i.value=!0}async function le(t){const{currentFile:e,currentPath:a}=t;if(e.value&&(e.value.isCreate&&e.value.isRename||e.value.isRenameForCard)&&(e.value.editName||(e.value.isCreate=!1),e.value.editName==e.value.nm&&(e.value.isCreate=!1),e.value.isCreate&&e.value.isRename||e.value.isRenameForCard)){if(e.value.editName!==e.value.nm){try{await(i=e.value.path,n=a.value+"/"+e.value.editName,$e(i,n,{rename:!0})),Jt(t)}catch(l){console.log(l)}finally{e.value.isCreate=!1,e.value.isRenameForCard=!1,e.value.isRename=!1}return!0}e.value.isCreate=!1,e.value.isRenameForCard=!1,e.value.isRename=!1}var i,n}async function oe(t){const{currentFile:e,currentPath:a,fileList:i}=t;if(e.value&&e.value.isCreate&&!e.value.isRename)if(""==e.value.editName)i.value.shift();else try{return"dir"==e.value.type?await pe(a.value+"/"+e.value.editName):await async function(t){try{await n.post("/files?action=CreateFile",{path:t},{requestOptions:{loading:ue("file.buttonGroup.loading.creatingFile"),successMessage:!0}})}catch(e){console.warn(e)}}(a.value+"/"+e.value.editName),await Jt(t),!0}catch(l){i.value.shift()}}async function se(t){const{currentFile:e}=t;if(e.value&&e.value.isEditRemarks)return e.value.editRemarks!=e.value.rmk?(await async function(t){await n.post("/files?action=set_file_ps",t,{requestOptions:{successMessage:!0}})}({filename:e.value.path,ps_type:0,ps_body:e.value.editRemarks}),await Jt(t),!0):(e.value.isEditRemarks=!1,e.value.remarks_hover=!1,!1)}async function re(t){await se(t)||await le(t)||await oe(t)}async function ce(){return n.post("/task?action=get_task_lists",{status:-3})}async function de(t){if(document.querySelector(".file-task-modal"))return;const{message:a}=await ce();s(a)&&a.length>0&&ht({title:Ht("file.tableController.realtimeTaskQueue"),width:510,class:"file-task-modal",unstableShowMask:!1,data:{store:t,taskList:a},component:j(()=>r(()=>e.import("./FileTask-legacy.js?v=1756367574781"),void 0))})}const{t:ue}=o.global;async function pe(t){try{await n.post("/files?action=CreateDir",{path:t},{requestOptions:{loading:ue("file.buttonGroup.loading.creatingDirectory"),successMessage:!0}})}catch(e){console.warn(e)}}function fe(t){aa(t,"UploadFile",t=>{t.value.open()})}function ve(t){aa(t,"RemoteDownload",t=>{t.value.open()})}function me(t){aa(t,"SearchFileContent",t=>{t.value.open()})}const ge=t=>{aa(t,"FavoriteList",t=>{t.value.open()})};function he(t,e){const{currentPath:a}=t;"management"==e?ge(t):(a.value=e,Jt(t))}function be(t){aa(t,"ShareList",t=>{t.value.open()})}function ye(t){const{currentPath:e}=t;e.value="/",Jt(t)}function xe(t){aa(t,"Backup",t=>{t.value.open()})}function we(t){aa(t,"Recycle",t=>{t.value.open()})}function ke(t){aa(t,"Terminal",t=>{t.value.open()})}function _e(t,e,a,i){const{fileList:n,currentFile:l}=t,o={nm:e,isCreate:!0,type:a,ext:i,path:"",editName:e};l.value=o,l.value.editName=l.value.nm,n.value.unshift(l.value),P(Qt)}function Ce(t,e){switch(e){case"dir":_e(t,ue("file.buttonGroup.defaultNames.untitledDirectory"),"dir","folder");break;case"file":_e(t,ue("file.buttonGroup.defaultNames.untitledFile"),"file","unknown");break;case"softlink":aa(t,"Softlink",t=>{t.value.open()})}}function Se(t){const{optionToolsRef:e,isMiniScreen:a}=t;e.value.offsetWidth<1560?a.value=!0:a.value=!1}async function ze(t,e){try{await n.post("/files?action=del_files_store",{path:e},{requestOptions:{loading:ue("file.buttonGroup.loading.deletingFavorite"),successMessage:!0}}),Jt(t)}catch(a){console.warn(a)}}const{t:Fe}=o.global,je=t=>{const{fileRecycle:e}=t;e.value?Pe(t):Re(t)},Pe=t=>{const{currentPath:e,choosedKeys:a,fileList:i}=t,n=i.value.filter(t=>a.value.includes(t.nm));bt({title:1===n.length?Fe("file.deleteController.deleteSingleFileTitle",{name:n[0].nm}):Fe("file.deleteController.batchDeleteTitle"),content:Fe("file.deleteController.recycleBinMessage"),width:400,onConfirm:async()=>{1===n.length?await Oe(n[0].path,n[0].type):await De(n.map(t=>t.nm),e.value),Jt(t)}})},Re=t=>{const{currentPath:e,choosedKeys:a,fileList:i}=t,n=i.value.filter(t=>a.value.includes(t.nm));yt({title:1===n.length?Fe("file.deleteController.deleteSingleFileTitle",{name:n[0].nm}):Fe("file.deleteController.batchDeleteTitle"),content:()=>O("span",{class:"text-error"},[Fe("file.deleteController.permanentDeleteMessage")]),width:400,onConfirm:async()=>{1===n.length?await Oe(n[0].path,n[0].type):await De(n.map(t=>t.nm),e.value),Jt(t)}})};async function Oe(t,e){await n.post("/files?action="+("dir"===e?"DeleteDir":"DeleteFile"),{path:t},{requestOptions:{loading:Fe("file.deleteController.deletingSingle"),successMessage:!0}})}async function De(t,e){await n.post("/files?action=SetBatchData",{data:JSON.stringify(t),type:4,path:e},{requestOptions:{loading:Fe("file.deleteController.deletingBatch"),successMessage:!0}})}const{t:Me}=o.global;async function Le(t,e){return(await n.post("/files?action=CheckExistsFiles",{dfile:t,filename:e},{requestOptions:{isOriginalResult:!0}})).message.length>0}async function Te(t,e){return await n.post("/files?action=CopyFile",{sfile:t,dfile:e},{requestOptions:{loading:Me("file.contextMenu.loading.copying"),successMessage:!0}})}async function Ne(t,e){return await n.post("/files?action=BatchPaste",{type:t,path:e},{requestOptions:{loading:Me("file.contextMenu.loading.pasting"),successMessage:!0}})}async function $e(t,e,a){return await n.post("/files?action=MvFile",{sfile:t,dfile:e,...a},{requestOptions:{loading:Me("file.contextMenu.loading.moving"),successMessage:!0}})}function Ie(t,e){return e.map(e=>t[e])}function qe(t){const{choosedKeys:e,currentPath:a,fileList:i}=t,n=i.value.find(t=>t.nm==e.value[0]);n&&It(0,n.path,a.value)}function Ue(t){const{choosedKeys:e,currentPath:a,fileList:i}=t,n=i.value.find(t=>t.nm==e.value[0]);a.value=n.path,Jt(t)}async function Ee(t,e,a){const{choosedKeys:i,fileList:l,fileCopyCache:o,waitForPaste:s,copiedFile:r,currentPath:d}=t;if(1==i.value.length)c.success(e),o.value=JSON.parse(JSON.stringify(i.value)),r.value=ea(l.value,o.value)[0],s.value=!0;else try{const t=await async function(t,e,a){return await n.post("/files?action=SetBatchData",{data:JSON.stringify(t),type:e,path:a},{requestOptions:{loading:Me("file.contextMenu.loading.batchSetting"),successMessage:!0}})}(i.value,a,d.value);0==t.status&&(o.value=JSON.parse(JSON.stringify(i.value)),s.value=!0)}catch(u){console.warn(u)}}async function Ke(t){const{fileOperationFlag:e,waitForPaste:a}=t;e.value=1,await Ee(t,Me("file.contextMenu.messages.copySuccess"),1),a.value=!0}async function Ge(t){const{fileOperationFlag:e,waitForPaste:a}=t;e.value=2,await Ee(t,Me("file.contextMenu.messages.cutSuccess"),2),a.value=!0}async function Be(t){const{fileCopyCache:e,currentPath:a,waitForPaste:i}=t;if(!i.value)return;let n=!1;1==e.value.length?n=await Le(a.value,e.value[0]):e.value.length>1&&(n=await Le(a.value)),n?aa(t,"PasteConfirm",t=>t.value.open()):async function(t){const{fileCopyCache:e,fileOperationFlag:a,currentPath:i,copiedFile:n,waitForPaste:l}=t;e.value.length>1?await Ne(a.value,i.value):1==e.value.length&&(1==a.value?await Te(n.value.path,i.value+"/"+n.value.nm):2==a.value&&await $e(n.value.path,i.value+"/"+n.value.nm)),Jt(t),l.value=!1}(t)}function Ve(t){aa(t,"Compression",t=>t.value.open())}function We(t,e){const{menuShow:a}=e;switch(t){case"edit":qe(e);break;case"copy":Ke(e);break;case"cut":Ge(e);break;case"paste":Be(e);break;case"permission":aa(e,"Permission",t=>t.value.open());break;case"compression":Ve(e);break;case"decompress":aa(e,"Decompress",t=>t.value.open());break;case"conversion":console.log("conversion");break;case"del":je(e);break;case"refresh":Jt(e);break;case"upload":aa(e,"UploadFile",t=>t.value.open());break;case"createFile":_e(e,Me("file.contextMenu.defaultNames.untitledFile"),"file","file");break;case"createDir":_e(e,Me("file.contextMenu.defaultNames.untitledDirectory"),"dir","folder");break;case"download":!async function(t){const{currentPath:e,choosedKeys:a}=t;u(`${"/"===e.value?"":e.value}/${a.value[0]}`)}(e);break;case"terminal":aa(e,"Terminal",t=>t.value.open());break;case"open":Ue(e);break;case"share":aa(e,"Share",t=>t.value.open());break;case"unShare":!function(t){const{choosedKeys:e,fileList:a,shareList:i}=t,n=ea(a.value,e.value)[0],l=i.value.find(t=>t.filename.includes(n.nm));Wt(t,l?.id)}(e);break;case"favorite":!async function(t){const{choosedKeys:e,fileList:a}=t,i=a.value.find(t=>t.nm==e.value[0]);try{await n.post("/files?action=add_files_store",{path:i.path},{requestOptions:{loading:Me("file.contextMenu.loading.addingToFavorites"),successMessage:!0}}),Xt(t),Jt(t)}catch(l){console.warn(l)}}(e);break;case"unfavorite":!async function(t){const{choosedKeys:e,fileList:a}=t;ze(t,ea(a.value,e.value)[0].path)}(e);break;case"rename":!async function(t){const{choosedKeys:e,fileList:a,currentFile:i,filesView:n}=t,l=ea(a.value,e.value)[0];i.value=l,"card"===n.value?(i.value.isRenameForCard=!0,i.value.editName=i.value.nm):(l.isCreate=!0,l.isRename=!0,l.editName=l.nm,P(Qt))}(e);break;case"attrs":aa(e,"Properties",t=>t.value.open());break;case"preview":!function(t){const{choosedKeys:e,fileList:a}=t;ie(t,ea(a.value,e.value)[0].path)}(e);break;case"playVideo":!function(t){const{choosedKeys:e,fileList:a}=t;ne(t,ea(a.value,e.value)[0])}(e)}a.value=!1}function Ae(t){const{type:e,list:a,path:i}=t,n=[];for(const l of a)n.push(He({type:e,item:l,path:i}));return n}function He(t){const{type:e,item:a,path:i}=t,{nm:n,sz:l,is_link:o,lnk:s,mt:r,ctime:c,atime:d,gid:u,uid:p,group:f,user:v,acc:m,rmk:g,durl:h,cmp:b,fav:y,top:x,sn:w}=a,k=function(t,e){if("dir"===e)return"folder";const a=["tar.gz"],i=t.toLowerCase();for(const l of a)if(i.endsWith(l))return l;const n=i.lastIndexOf(".");return-1!==n?i.substring(n+1):"file"}(a.nm,e);return{ext:k,nm:n,sz:l,mt:r,acc:m,user:v,is_link:o?s:"",lnk:s,durl:h,cmp:b,fav:y,rmk:g,top:x,sn:w,path:Je(i,n),ctime:c,atime:d,gid:u,uid:p,group:f,type:e}}function Je(t,e){return function(t){return t.replace(/\/\//g,"/")}(`${t}/${e}`)}function Ye(t){return["folder"].includes(t)?"file-dir":["txt","rtf","md","log","conf"].includes(t)?"file-txt":["json"].includes(t)?"file-json":["htm","html","xhtml"].includes(t)?"file-html":["css","less","scss"].includes(t)?"file-css":["js","ts"].includes(t)?"file-js":["php"].includes(t)?"file-php":["doc","docx","docm","dot","dotx","dotm"].includes(t)?"file-doc":["pdf","pdfa","pdfx","pdfu"].includes(t)?"file-pdf":["xlsx","xlsm","xltx","xltm"].includes(t)?"file-excel":["jpg","jpeg","png","gif","bmp","webp","tiff","tif","psd","ai","eps","cr2","cr3","nef","nrw","dng","svg","cdr","wmf","emf","apng","heic","ico","xbm","xpm","xcf","iff","pnm"].includes(t)?"file-img":["py","java","js","ts","c","cpp","cs","php","rb","go","swift","kt","html","css","jsx","vue","scss","less","tsx","json","xml","yaml","yml","ini","properties","env","sql","pl","sh","bat","ps1","m","swift","kt","gradle","makefile","cmake","jar","war","exe","md","gitignore","dockerfile","yml","ipynb","asm","lua","rs","hs"].includes(t)?"file-sh":["zip","rar","7z","tar","tar.gz","gz","tgz","tar.bz2","tar.xz","cab","iso","msi","rpm","deb","xz","zipx","lz4","zst","rar5","part1.rar","rar.part1","z01","z02"].includes(t)?"file-compression":"file-unknown-file"}function Xe(t){return["mp4","avi","mov","mkv","wmv","flv","3gp","3g2","vob","webm","ogv"].includes(t)}function Ze(t){return"file-img"===Ye(t.ext)}function Qe(t){return"file-compression"===Ye(t)}async function ta(t,e,a){try{const{message:i}=await n.post("/files?action=GetDirNew",{path:t,is_operating:!0,...a});e&&e(i);let l=Ae({type:"dir",list:i.dir,path:t}),o=Ae({type:"file",list:i.files,path:t});return l=l.map((t,e)=>({...t,protected:i.tamper_data.dirs&&i.tamper_data.dirs[e]?Number(i.tamper_data.dirs[e].split(";")[0]):0,protected_rule:i.tamper_data.dirs&&i.tamper_data.dirs[e]?Number(i.tamper_data.dirs[e].split(";")[1]):0})),o=o.map((t,e)=>({...t,protected:i.tamper_data.files&&i.tamper_data.files[e]?Number(i.tamper_data.files[e].split(";")[0]):0,protected_rule:i.tamper_data.files&&i.tamper_data.files[e]?Number(i.tamper_data.files[e].split(";")[1]):0})),[...l,...o]}catch(i){return console.warn(i),[]}}function ea(t,e){return t.filter(t=>e.includes(t.nm))}async function aa(t,e,a){const{dynamicCmptObj:i,dynamicCmpt:n,dynamicCmptRef:l}=t,o=i[e]();await o.__asyncLoader(),n.value=o,P(()=>{a&&a(l)})}wt.create({baseURL:"/v2"});const ia=t("F",p(M({__name:"FileIcon",props:{ext:{type:String,default:""},size:{type:String,default:"medium"}},setup(t){const e=L(()=>Qe(t.ext)?"compress":"Dir"===t.ext?"folder":t.ext);return(a,i)=>(N(),T("div",{class:I(["files-icon",[`${q(e)}-icon`,`${t.size}-icon`]])},null,2))}}),[["__scopeId","data-v-0a2d98fb"]])),na={class:"video-container"},la=["src"],oa={class:"video-list"},sa=["onClick"],ra=p(M({__name:"VideoPlayer",setup(t){const e=U("fileStore"),{videoWaitPreview:a,previewVideoShow:i,currentPreviewVideo:n}=e,l=C(),o=C(0),s=L(()=>`/download?filename=${n.value.path}`);function r(){o.value=l.value.offsetHeight}return(t,e)=>{const c=f,d=xt;return N(),E(d,{show:q(i),"onUpdate:show":e[0]||(e[0]=t=>S(i)?i.value=t:null),width:"70%",title:t.$t("file.videoPlayerModal.title"),onAfterEnter:r},{default:K(()=>[G("div",na,[G("video",{src:q(s),controls:"true",preload:"auto",width:"100%",ref_key:"videoRef",ref:l},null,8,la),G("div",oa,[O(c,{style:B({height:q(o)+"px"})},{default:K(()=>[(N(!0),T(D,null,V(q(a),t=>(N(),T("div",{class:I(["video-item",{active:t.path==q(n).path}]),key:t.path,onClick:e=>n.value=t},[O(ia,{ext:"mp4"}),O(q(Ct),null,{default:K(()=>[W(A(t.name),1)]),_:2},1024)],10,sa))),128))]),_:1},8,["style"])])])]),_:1},8,["show","title"])}}}),[["__scopeId","data-v-6be9ab69"]]),ca=C([]),da=C(!1),ua=C(null),pa=C(1),{t:fa}=o.global;function va(){const t=C(),a=C("list"),i=C("/www"),n=C([]),l=C(!1),o=C([]),s=C([]),c=C([]),d=C(),u=C(),p=C(),f=C([]),v=C([]),m=C({url:"http://",path:i.value,filename:""}),g=C({reference:"",per:0,speed:"0",used:"0",except:"--",total:0}),h=C(!1),b=C([]),y=C({text:"",exts:"html,php",path:i.value,is_subdir:0,mode:0,isword:0,iscase:1,noword:0}),x=C({}),w=C({files:0,times:0}),k=C([]),_=C([{label:fa("file.favoriteListModal.management"),key:"management",icon:"settings"}]),S=C([]),z=C([]),F=C({back_sub_dir:1,path:"",remark:""}),P=pa,R=ca,O=da,D=ua,M={PasteConfirm:()=>j(()=>r(()=>e.import("./PasteConfirm-legacy.js?v=1756367574781"),void 0)),UploadFile:()=>j(()=>r(()=>e.import("./UploadFile-legacy.js?v=1756367574781"),void 0)),RemoteDownload:()=>j(()=>r(()=>e.import("./RemoteDownload-legacy.js?v=1756367574781"),void 0)),SearchFileContent:()=>j(()=>r(()=>e.import("./SearchFileContent-legacy.js?v=1756367574781"),void 0)),FavoriteList:()=>j(()=>r(()=>e.import("./FavoriteList-legacy.js?v=1756367574781"),void 0)),ShareList:()=>j(()=>r(()=>e.import("./ShareList-legacy.js?v=1756367574781"),void 0)),Backup:()=>j(()=>r(()=>e.import("./Backup-legacy.js?v=1756367574781"),void 0)),Recycle:()=>j(()=>r(()=>e.import("./Recycle-legacy.js?v=1756367574781"),void 0)),Terminal:()=>j(()=>r(()=>e.import("./Terminal-legacy.js?v=1756367574781"),void 0)),Softlink:()=>j(()=>r(()=>e.import("./SoftLink-legacy.js?v=1756367574781"),void 0)),Share:()=>j(()=>r(()=>e.import("./Share-legacy.js?v=1756367574781"),void 0)),Permission:()=>j(()=>r(()=>e.import("./Permission-legacy.js?v=1756367574781"),void 0)),Properties:()=>j(()=>r(()=>e.import("./Properties-legacy.js?v=1756367574781"),void 0)),Del:()=>j(()=>r(()=>e.import("./Del-legacy.js?v=1756367574781"),void 0)),Compression:()=>j(()=>r(()=>e.import("./Compression-legacy.js?v=1756367574781"),void 0)),Decompress:()=>j(()=>r(()=>e.import("./Decompress-legacy.js?v=1756367574781"),void 0)),AceEditor:()=>j(()=>r(()=>e.import("./index-legacy183.js?v=1756367574781"),void 0))},T=H(null),N=C(),$=C(!1),I=C(!1),q=C([]),U=C(!1),E=C(!1),K=C(!1),G=C(!1),B=C(),V=C(!1),W=L(()=>n.value.filter(t=>Ze(t)).map(t=>t.path)),A=L(()=>n.value.filter(t=>Xe(t.ext)).map(t=>({path:t.path,name:t.nm}))),J=C(""),Y=C({path:"",name:""}),X=C(!1),Z=C(!1),Q=C(1),tt=C(0),et=C(0),at=C(1),it=C(100),nt=C(""),lt=C("False"),ot=C(0),st=C(null),rt=C(),ct=C([]),dt=C(1),ut=C(0),pt=C(-1),ft=C();return{mainRef:t,filesView:a,currentPath:i,fileList:n,tableLoading:l,normalTrList:o,trRectArr:s,choosedKeys:c,tableRef:d,dataTableRef:u,contextRef:p,normalCardList:f,cardRectArr:v,downloadFileFormData:m,downloadProgressData:g,downloadProgressShow:h,resourceManagerWindow:b,searchFileContentFormData:y,resetSearchFileContentFormData:function(){y.value={text:"",exts:"html,php",path:i.value,is_subdir:0,mode:0,isword:0,iscase:1,noword:0}},searchRes:x,searchStatistics:w,favoriteList:k,favoriteOptions:_,resetFavoriteOptions:function(){_.value=[{label:fa("file.favoriteListModal.management"),key:"management",icon:"settings"}]},shareList:S,backupList:z,backupForm:F,fileOperationFlag:P,fileCopyCache:R,waitForPaste:O,copiedFile:D,dynamicCmptObj:M,dynamicCmpt:T,dynamicCmptRef:N,fileRecycle:$,menuShow:I,uploadFileList:q,uploadShow:U,uploadComplete:E,startUpload:K,fileConflictShow:G,optionToolsRef:B,isMiniScreen:V,imgWaitPreview:W,videoWaitPreview:A,currentPreviewImg:J,currentPreviewVideo:Y,previewShow:X,previewVideoShow:Z,operationType:Q,dirNums:tt,fileNums:et,page:at,size:it,sort:nt,reverse:lt,total:ot,currentFile:st,choosePathRef:rt,diskMountPoint:ct,shareListPage:dt,shareListTotal:ut,currentDirSize:pt,dragUploadRef:ft}}const ma={class:"drag-upload"},ga={class:"upload-area"},ha={class:"tip"},ba=M({__name:"DragUpload",setup(t,{expose:e}){const{t:a}=J(),i=U("fileStore"),{uploadFileList:n,uploadShow:l,uploadComplete:o,startUpload:s}=i,r=C(!1),d=C(0);function u(t){const e=t.dataTransfer;return!!e&&e.types.some(t=>"Files"===t||"application/x-moz-file"===t)}function p(t){t.preventDefault(),u(t)&&(d.value++,r.value=!0)}function f(t){t.preventDefault(),u(t)&&(d.value--,d.value<=0&&(r.value=!1,d.value=0))}function v(t){t.preventDefault(),u(t)&&(t.dataTransfer.dropEffect="copy")}async function m(t){const e=[];for(let a=0;a<t.length;a++){const i=t[a].webkitGetAsEntry();i&&e.push(i)}await g(e)&&c.error(a("file.uploadModal.fileAlreadyExists"),{close:!0})}async function g(t,e=""){o.value&&(n.value=[],s.value=!1,o.value=!1);let a=!1;for(const i of t)if(i.isDirectory){const t=i.createReader(),n=await new Promise(e=>{t.readEntries(e)});await g(n,e?`${e}/${i.name}`:i.name)&&(a=!0)}else if(i.isFile){if(-1!=n.value.findIndex(t=>t.file.name==i.name)){a=!0;continue}const t=await new Promise(t=>{i.file(t)});n.value.push({file:t,status:0,progress:0,relativePath:e?`${e}`:""})}return a}async function h(t){t.preventDefault(),u(t)&&(d.value=0,r.value=!1,t.dataTransfer?.items&&(await m(t.dataTransfer.items),aa(i,"UploadFile"),l.value=!0))}function b(){document.ondragenter=p,document.ondragleave=f,document.ondragover=v,document.ondrop=h}return aa(i,"UploadFile"),e({listenDragEvent:b}),Y(()=>{b()}),(t,e)=>{const a=St;return N(),T("div",ma,[O(a,{show:q(r),"onUpdate:show":e[0]||(e[0]=t=>S(r)?r.value=t:null)},{default:K(()=>[G("div",ga,[G("span",ha,A(t.$t("file.uploadModal.dragFilesHere")),1)])]),_:1},8,["show"])])}}}),ya=p(ba,[["__scopeId","data-v-35fe8a60"]]),xa={class:"img-wrapper"},wa=["src"],ka=p(M({__name:"ImagePreview",setup(t){const e=U("fileStore"),{imgWaitPreview:a,currentPreviewImg:i,previewShow:n}=e,l=C(.5),o=L(()=>`/download?filename=${a.value[s.value]}`),s=C(0);function r(){s.value=a.value.findIndex(t=>t===i.value)}function c(){s.value>0&&s.value--}function d(){s.value<a.value.length-1&&s.value++}function u(){l.value>2||(l.value+=.1)}function p(){l.value<.2||(l.value-=.1)}function f(){n.value=!1}function v(t){l.value-t.deltaY/1e3<.2||l.value-t.deltaY/1e3>2||(l.value-=t.deltaY/1e3)}return(t,e)=>{const a=St;return N(),E(a,{show:q(n),"onUpdate:show":e[0]||(e[0]=t=>S(n)?n.value=t:null),"close-on-esc":!1,"mask-closable":!1,"on-after-enter":r},{default:K(()=>[G("div",xa,[G("img",{src:q(o),style:B({transform:`translate(-50%, -50%) scale(${q(l)})`}),onWheel:v},null,44,wa),G("div",{class:"tools"},[G("i",{class:"i-ic:outline-arrow-circle-left text-16 text-[#fff] cursor-pointer",onClick:c}),G("i",{class:"i-ic:baseline-zoom-in text-16 text-[#fff] cursor-pointer",onClick:u}),G("i",{class:"i-ic:baseline-zoom-out text-16 text-[#fff] cursor-pointer",onClick:p}),G("i",{class:"i-ic:outline-arrow-circle-right text-16 text-[#fff] cursor-pointer",onClick:d})]),G("i",{class:"i-iconoir:xmark-circle text-16 text-[#fff] cursor-pointer close-icon",onClick:f})])]),_:1},8,["show"])}}}),[["__scopeId","data-v-7045f818"]]),_a={key:0,class:"group-left"},Ca={key:1,class:"group-left"},Sa={class:"group-right"},za={class:"view-change"},Fa=M({__name:"ButtonGroup",props:{filesView:{type:String,default:"list"},filesViewModifiers:{}},emits:X(["viewChange"],["update:filesView"]),setup(t,{emit:e}){const a=e,{t:i}=J(),n=U("fileStore"),{favoriteOptions:l,choosedKeys:o,waitForPaste:s,optionToolsRef:r,isMiniScreen:c}=n,u=Z(t,"filesView"),p=L(()=>[{label:i("file.buttonGroup.createOptions.newDirectory"),key:"dir",icon:()=>O(v,{name:"file-dir",size:"16"},null)},{label:i("file.buttonGroup.createOptions.newFile"),key:"file",icon:()=>O(v,{name:"base-file",size:"16"},null)},{label:i("file.buttonGroup.createOptions.softLink"),key:"softlink",icon:()=>O(v,{name:"file-soft-link",size:"15"},null)}]),f=L(()=>[{label:i("file.buttonGroup.miniScreenOptions.upload"),key:"Upload",icon:()=>O(v,{name:"file-upload",size:"14"},null)},{label:i("file.buttonGroup.miniScreenOptions.remoteDownload"),key:"Remote Download",icon:()=>O(v,{name:"file-download",size:"16"},null)},{label:i("file.buttonGroup.miniScreenOptions.new"),key:"create",icon:()=>O(v,{name:"base-dir",size:"14",class:"mr-5px"},null),children:[{label:i("file.buttonGroup.createOptions.newDirectory"),key:"dir",icon:()=>O(v,{name:"file-dir",size:"16"},null)},{label:i("file.buttonGroup.createOptions.newFile"),key:"file",icon:()=>O(v,{name:"base-file",size:"16"},null)},{label:i("file.buttonGroup.createOptions.softLink"),key:"softlink",icon:()=>O(v,{name:"file-soft-link",size:"15"},null)}]},{label:i("file.buttonGroup.miniScreenOptions.searchFileContent"),key:"Search File Content",icon:()=>O(v,{name:"search",size:"14"},null)},{label:i("file.buttonGroup.miniScreenOptions.favorite"),key:"Favorite",icon:()=>O(v,{name:"file-favorite",size:"14",class:"mr-5px"},null),children:g.value},{label:i("file.buttonGroup.miniScreenOptions.shareList"),key:"Share List",icon:()=>O(v,{name:"file-share",size:"14"},null)},{label:i("file.buttonGroup.miniScreenOptions.terminal"),key:"Terminal",icon:()=>O(v,{name:"file-terminal",size:"14"},null)},{label:i("file.buttonGroup.miniScreenOptions.rootDirectory"),key:"Root Directory",icon:()=>O(v,{name:"file-disk",size:"14"},null)},{label:i("file.buttonGroup.miniScreenOptions.fileProtection"),key:"File/Dir protection",icon:()=>O(v,{name:"file-protect",size:"14"},null)}]);function m(t,e){switch(t){case"Upload":fe(n);break;case"Remote Download":ve(n);break;case"dir":Ce(n,"dir");break;case"file":Ce(n,"file");break;case"softlink":Ce(n,"softlink");break;case"Search File Content":me(n);break;case"Share List":be(n);break;case"Terminal":ke(n);break;case"Root Directory":ye(n);break;case"File/Dir protection":h();break;default:!function(t){he(n,t)}(t)}}const g=L(()=>l.value.map(t=>({key:t.key,icon:()=>{return O(v,{name:(e=t.icon,"dir"==e?"file-dir":"settings"==e?"flow-action":"file-record"),size:"16"},null);var e},label:()=>O("div",{class:"flex"},[O("div",{class:"max-w-300px"},[O(Ct,null,{default:()=>[t.label]})])]),meta:{type:"favorite"}}))),h=async()=>{const t=await kt("tamper_core",75);d(t)&&Lt(t)};function b(){aa(n,"Permission",t=>t.value.open())}function y(){je(n)}function x(t){!function(t,e){const{filesView:a}=t;a.value=e}(n,t),a("viewChange",t)}return Q(()=>{Se(n),window.addEventListener("resize",()=>Se(n))}),(t,e)=>{const a=v,i=zt,l=Ft,d=jt;return N(),T("div",{class:"button-group",ref_key:"optionToolsRef",ref:r},[!q(c)&&q(o).length<=1?(N(),T("div",_a,[O(i,{onClick:e[0]||(e[0]=t=>q(fe)(q(n)))},{icon:K(()=>[O(a,{name:"file-upload",size:"14"})]),default:K(()=>[W(" "+A(t.$t("file.upload")),1)]),_:1}),O(i,{onClick:e[1]||(e[1]=t=>q(ve)(q(n)))},{icon:K(()=>[O(a,{name:"file-download",size:"16"})]),default:K(()=>[W(" "+A(t.$t("file.remoteDownload")),1)]),_:1}),O(l,{trigger:"hover",options:q(p),placement:"bottom-start","on-select":t=>q(Ce)(q(n),t)},{default:K(()=>[O(i,{"icon-placement":"right",class:"btn-behavior"},{default:K(()=>[O(a,{name:"base-dir",size:"14",class:"mr-5px"}),W(" "+A(t.$t("file.create"))+" ",1),O(a,{name:"base-arrow-right",size:"14"})]),_:1})]),_:1},8,["options","on-select"]),O(i,{onClick:e[2]||(e[2]=t=>q(me)(q(n)))},{icon:K(()=>[O(a,{name:"search",size:"14"})]),default:K(()=>[W(" "+A(t.$t("file.searchContent")),1)]),_:1}),O(l,{placement:"bottom-start",scrollable:!0,style:{maxHeight:"480px"},options:q(g),onSelect:e[4]||(e[4]=t=>q(he)(q(n),t))},{default:K(()=>[O(i,{"icon-placement":"right",class:"btn-behavior",onClick:e[3]||(e[3]=t=>q(ge)(q(n)))},{default:K(()=>[O(a,{name:"file-favorite",size:"14",class:"mr-5px"}),W(" "+A(t.$t("file.favorite"))+" ",1),O(a,{name:"base-arrow-right",size:"14"})]),_:1})]),_:1},8,["options"]),O(i,{onClick:e[5]||(e[5]=t=>q(be)(q(n)))},{icon:K(()=>[O(a,{name:"file-share",size:"14"})]),default:K(()=>[W(" "+A(t.$t("file.shareList")),1)]),_:1}),O(i,{onClick:e[6]||(e[6]=t=>q(ke)(q(n)))},{icon:K(()=>[O(a,{name:"file-terminal",size:"14"})]),default:K(()=>[W(" "+A(t.$t("file.terminal")),1)]),_:1}),e[16]||(e[16]=G("div",{class:"divider"},null,-1)),O(i,{onClick:e[7]||(e[7]=t=>q(ye)(q(n)))},{icon:K(()=>[O(a,{name:"file-disk",size:"14"})]),default:K(()=>[W(" "+A(t.$t("file.rootDirectory")),1)]),_:1}),e[17]||(e[17]=G("div",{class:"divider"},null,-1)),O(i,{onClick:h},{icon:K(()=>[O(a,{name:"file-protect",size:"14"})]),default:K(()=>[W(" "+A(t.$t("file.protection")),1)]),_:1})])):q(c)||q(o).length>1?(N(),T("div",Ca,[O(l,{placement:"bottom-start",scrollable:!0,"menu-props":()=>({style:"max-height: 480px"}),options:q(f),"on-select":m},{default:K(()=>[O(i,{"icon-placement":"right",class:"btn-behavior"},{default:K(()=>[O(a,{name:"base-dir",size:"14",class:"mr-5px"}),W(" "+A(t.$t("file.buttonGroup.fileOperations"))+" ",1),O(a,{name:"base-arrow-right",size:"14"})]),_:1})]),_:1},8,["options"])])):tt("",!0),G("div",Sa,[q(o).length>1?(N(),E(d,{key:0},{default:K(()=>[O(i,{onClick:e[8]||(e[8]=t=>q(Ke)(q(n)))},{icon:K(()=>[O(a,{name:"common-copy",size:"16"})]),default:K(()=>[W(" "+A(t.$t("file.copy")),1)]),_:1}),O(i,{onClick:e[9]||(e[9]=t=>q(Ge)(q(n)))},{icon:K(()=>[O(a,{name:"file-cut",size:"16"})]),default:K(()=>[W(" "+A(t.$t("file.cut")),1)]),_:1}),O(i,{onClick:e[10]||(e[10]=t=>q(Ve)(q(n)))},{icon:K(()=>[O(a,{name:"file-compression",size:"16"})]),default:K(()=>[W(" "+A(t.$t("file.compress")),1)]),_:1}),O(i,{onClick:b},{icon:K(()=>[O(a,{name:"file-dir-permission",size:"16"})]),default:K(()=>[W(" "+A(t.$t("file.buttonGroup.permissions")),1)]),_:1}),O(i,{onClick:y},{icon:K(()=>[O(a,{name:"file-recycling-bin",size:"16"})]),default:K(()=>[W(" "+A(t.$t("file.delete")),1)]),_:1})]),_:1})):tt("",!0),q(s)?(N(),E(i,{key:1,onClick:e[11]||(e[11]=()=>q(Be)(q(n)))},{icon:K(()=>[O(a,{name:"file-paste",size:"20"})]),default:K(()=>[W(" "+A(t.$t("file.paste")),1)]),_:1})):tt("",!0),O(i,{onClick:e[12]||(e[12]=t=>q(xe)(q(n)))},{default:K(()=>[W(A(t.$t("file.backup")),1)]),_:1}),O(i,{onClick:e[13]||(e[13]=t=>q(we)(q(n)))},{icon:K(()=>[O(a,{name:"file-recycling-bin",size:"14"})]),default:K(()=>[W(" "+A(t.$t("file.recycleBin")),1)]),_:1}),G("div",za,[G("div",{class:I(["card",{active:"card"==u.value}]),onClick:e[14]||(e[14]=t=>x("card"))},[O(a,{name:"file-card-view",size:"14"})],2),G("div",{class:I(["list",{active:"list"==u.value}]),onClick:e[15]||(e[15]=t=>x("list"))},[O(a,{name:"file-list-view",size:"16"})],2)])])],512)}}}),ja=p(Fa,[["__scopeId","data-v-062d5ea2"]]),Pa={class:"path-dir"},Ra={class:"path-arrow reversal"},Oa={class:"path-dir"},Da={class:"path-arrow"},Ma=["onClick"],La={class:"path-dir"},Ta={class:"path-arrow"},Na=M({__name:"ChoosePath",props:{currentPath:{type:String,default:"/"}},emits:["pathChange"],setup(t,{expose:e,emit:a}){const i=t,l=a,{t:o}=J(),s=U("fileStore"),r=C(""),c=et("pathListRef"),u=C(0),p=L(()=>i.currentPath.split("/").filter(t=>""!==t).map((t,e)=>({name:t,originalIndex:e}))),f=L(()=>{if(!u.value||0===p.value.length)return p.value;let t=u.value-80;const e=[...p.value].reverse(),a=[];for(const i of e){const e=Math.min(8*i.name.length,150)+20+12;if(!(t>=e))break;a.unshift(i),t-=e}return a}),m=L(()=>f.value.length<p.value.length),g=L(()=>{const t=p.value.length-f.value.length;return p.value.slice(0,t)}),h=L(()=>{const t=g.value.map(t=>({key:t.originalIndex,label:t.name,icon:()=>O(v,{name:"file-dir",size:"16"},null)}));return t.unshift({key:"/",label:o("file.rootDirectory"),icon:()=>O(v,{name:"file-dir",size:"16"},null)}),t}),b=t=>{F(t)},y=C(!0),x=et("inputRef");let w=null;function k(){c.value&&(u.value=c.value.offsetWidth)}function _(t){y.value=t,y.value?(r.value="",P(()=>{k()})):r.value=i.currentPath}Q(()=>{c.value&&(k(),w=new ResizeObserver(()=>{k()}),w.observe(c.value))}),at(()=>{w&&w.disconnect()});const z=()=>{_(!1),P(()=>{x.value?.focus()})};function F(t,e){const a=i.currentPath.split("/").filter(t=>""!==t);let n="";"number"==typeof t&&(a.splice(t+1),n="/"+a.join("/")),"/"==t&&(n="/"),l("pathChange",n),e?.stopPropagation()}async function j(){if(r.value==i.currentPath||""==r.value)x.value?.blur(),_(!0);else if(Tt(r.value))try{const{message:t}=await n.post("/files?action=test_path",{path:r.value});if(d(t)&&t.exists)l("pathChange",r.value),_(!0);else{let t=r.value;bt({title:o("file.pathNotExists"),content:o("file.pathNotExistsConfirm",{path:t}),onPublicClose:()=>_(!1),onConfirm:async()=>{await pe(t),l("pathChange",t)},onCancel(){x.value?.blur(),_(!0)}})}}catch(t){console.warn(t)}else _(!1)}function R(){const t=i.currentPath.split("/").filter(t=>""!==t);if(0!=t.length){t.pop();let e="/"+t.join("/");l("pathChange",e)}}function M(){Jt(s)}return e({handleEnterDown:j}),(t,e)=>{const a=zt,i=Ft,n=Ct,l=Pt,o=Rt;return N(),E(o,null,{default:K(()=>[O(a,{onClick:R},{default:K(()=>[O(v,{name:"file-back",size:"16"})]),_:1}),q(y)?(N(),T("div",{key:0,ref_key:"pathListRef",ref:c,class:"path-list",onClick:z},[O(i,{trigger:"click",placement:"bottom-start",options:q(h),onSelect:b},{default:K(()=>[it(G("div",{class:"path-item",onClick:e[0]||(e[0]=t=>t.stopPropagation())},[G("div",Pa,[O(v,{name:"file-dir",size:"16"})]),G("div",Ra,[O(v,{name:"base-arrow-right"})])],512),[[nt,q(m)]])]),_:1},8,["options"]),it(G("div",{class:"path-item",onClick:e[1]||(e[1]=t=>F("/",t))},[G("div",Oa,A(t.$t("file.rootDirectory")),1),G("div",Da,[O(v,{name:"base-arrow-right"})])],512),[[nt,!q(m)]]),(N(!0),T(D,null,V(q(f),(t,e)=>(N(),T("div",{class:"path-item",key:`${t}_${e}`,onClick:e=>F(t.originalIndex,e)},[G("div",La,[O(n,{class:"max-w-150px!"},{default:K(()=>[W(A(t.name),1)]),_:2},1024)]),G("div",Ta,[O(v,{name:"base-arrow-right"})])],8,Ma))),128))],512)):(N(),E(l,{key:1,ref_key:"inputRef",ref:x,value:q(r),"onUpdate:value":e[2]||(e[2]=t=>S(r)?r.value=t:null),class:"flex-1",placeholder:" ",onFocus:e[3]||(e[3]=t=>_(!1)),onBlur:e[4]||(e[4]=t=>_(!0)),onKeydown:[lt(j,["enter"]),ot(()=>!1,["stop"])]},null,8,["value"])),O(a,{onClick:M},{default:K(()=>[O(v,{name:"base-refresh",size:"16"})]),_:1})]),_:1})}}}),$a=t("C",p(Na,[["__scopeId","data-v-13ecd16b"]])),Ia={class:"filter-tools"},qa=p(M({__name:"SearchTools",setup(t){const e=U("fileStore"),{currentPath:a}=e,i=C(""),n=C(void 0),{choosePathRef:l}=e;async function o(){const t={search:i.value};n.value&&(t.all="True"),Jt(e,t)}function s(t){a.value=t,Jt(e)}return(t,e)=>{const r=_t,c=Pt,d=v,u=zt,p=Rt;return N(),T("div",Ia,[O($a,{class:"w-50%","current-path":q(a),onPathChange:s,ref_key:"choosePathRef",ref:l},null,8,["current-path"]),O(p,{class:"dir-search"},{default:K(()=>[O(c,{placeholder:t.$t("file.search"),status:"success",value:q(i),"onUpdate:value":e[1]||(e[1]=t=>S(i)?i.value=t:null),onKeyup:lt(o,["enter"])},{suffix:K(()=>[O(r,{checked:q(n),"onUpdate:checked":e[0]||(e[0]=t=>S(n)?n.value=t:null)},{default:K(()=>[W(A(t.$t("file.includeSubdir")),1)]),_:1},8,["checked"])]),_:1},8,["placeholder","value"]),O(u,{type:"primary",onClick:o},{icon:K(()=>[O(d,{name:"search",size:"16"})]),_:1})]),_:1})])}}}),[["__scopeId","data-v-70ba294c"]]),Ua={key:0,class:"operation-wrapper"},Ea={class:"mr-4px"},Ka=M({__name:"FileOperation",props:{file:{}},setup(t){const e=t,a=U("fileStore"),{isMiniScreen:i}=a,{t:n}=J(),l=C([{label:n("Public.Btn.Copy"),value:"copy",handle:()=>We("copy",a)},{label:n("file.fileOperation.cut"),value:"cut",handle:()=>We("cut",a)},{label:n("file.fileOperation.rename"),value:"rename",handle:()=>We("rename",a)},{label:n("file.fileOperation.PMSN"),value:"permission",handle:()=>We("permission",a)},{label:n("file.fileOperation.compress"),value:"compress",handle:()=>We("compression",a)},{label:n("Public.Btn.Delete"),value:"delete",handle:()=>We("del",a)}]),o=L(()=>l.value.map(t=>({label:t.label,key:t.value,handle:t.handle}))),s=L(()=>{if(Ze(e.file))return[{label:n("Public.Btn.Preview"),value:"preview",handle:()=>ie(a,e.file.path)},...l.value];if("dir"===e.file.type)return[{label:n("file.fileOperation.open"),value:"open",handle:()=>We("open",a)},...l.value];if(t=e.file,["file-txt","file-json","file-html","file-css","file-js","file-php","file-doc","file-sh"].includes(Ye(t.ext)))return[{label:n("Public.Btn.Edit"),value:"edit",handle:()=>We("edit",a)},...l.value];var t;if(Qe(e.file.ext)){const t=[...l.value];return t.splice(-2,0,{label:n("file.fileOperation.decompress"),value:"decompress",handle:()=>We("decompress",a)}),t}return l.value});function r(t){const e=l.value.find(e=>e.value===t);e&&e.handle()}return(t,e)=>{const a=zt,n=v,l=Ft;return q(i)?(N(),E(l,{key:1,trigger:"click",options:q(o),onSelect:r},{default:K(()=>[O(a,{text:"","icon-placement":"right"},{default:K(()=>[G("span",Ea,A(t.$t("Public.Table.Action")),1),O(n,{name:"down",size:"14"})]),_:1})]),_:1},8,["options"])):(N(),T("div",Ua,[(N(!0),T(D,null,V(q(s),t=>(N(),E(a,{key:t.value,text:"",type:"primary",onClick:ot(t.handle,["stop"])},{default:K(()=>[W(A(t.label),1)]),_:2},1032,["onClick"]))),128))]))}}}),Ga=p(Ka,[["__scopeId","data-v-e47d1079"]]),Ba=M({__name:"ContextMenu",setup(t,{expose:e}){const{t:a}=J(),i=U("fileStore"),{waitForPaste:n,menuShow:l}=i,o=C("empty"),s=C(0),r=C(1),c=L(()=>{switch(o.value){case"single":return function(t,e){const{fileList:a,choosedKeys:i}=t,n=ea(a.value,i.value)[0];let l=["share","favorite","permission","copy","cut","rename","del","compression","attrs"];if(!n)return Ie(e.value,["refresh","upload","create","terminal"]);if("dir"==n.type?l.unshift("open"):l.unshift("edit","download"),Ze(n)&&(l.unshift("preview"),l=l.filter(t=>"edit"!==t)),Xe(n.ext)&&(l.unshift("playVideo"),l=l.filter(t=>"edit"!==t)),n.isFavorite){const t=l.findIndex(t=>"favorite"==t);l[t]="unfavorite"}if(n.isShare){const t=l.findIndex(t=>"share"==t);l[t]="unShare"}return Qe(n.ext)&&(l.unshift("decompress"),l=l.filter(t=>"edit"!==t)),Ie(e.value,l)}(i,d);case"multiple":return Ie(d.value,["copy","cut","permission","compression","del"]);default:return n.value?Ie(d.value,["refresh","upload","create","terminal","paste"]):Ie(d.value,["refresh","upload","create","terminal"])}}),d=C({edit:{label:a("Public.Btn.Edit"),key:"edit",icon:()=>O(v,{name:"common-copy",size:"14"},null)},copy:{label:a("Public.Btn.Copy"),key:"copy",icon:()=>O(v,{name:"common-copy",size:"14"},null)},cut:{label:a("file.fileOperation.cut"),key:"cut",icon:()=>O(v,{name:"file-cut",size:"16"},null)},permission:{label:a("file.fileOperation.permission"),key:"permission",icon:()=>O(v,{name:"file-dir-permission",size:"14"},null)},compression:{label:a("file.contextMenu.createCompression"),key:"compression",icon:()=>O(v,{name:"file-compression",size:"16"},null)},decompress:{label:a("file.fileOperation.decompress"),key:"decompress",icon:()=>O(v,{name:"file-compression",size:"16"},null)},conversion:{label:a("file.contextMenu.formatConversion"),key:"conversion",icon:()=>O(v,{name:"file-conversion",size:"16"},null)},del:{label:a("Public.Btn.Delete"),key:"del",icon:()=>O(v,{name:"file-recycling-bin",size:"16"},null)},refresh:{label:a("Public.Btn.Refresh"),key:"refresh",icon:()=>O(v,{name:"base-refresh",size:"14"},null)},upload:{label:a("Public.Btn.Upload"),key:"upload",icon:()=>O(v,{name:"file-upload",size:"16"},null)},create:{label:a("file.contextMenu.newFolderFile"),key:"create",icon:()=>O(v,{name:"base-dir",size:"14"},null),children:[{label:a("file.contextMenu.newFolder"),key:"createDir",icon:()=>O(v,{name:"base-dir",size:"14"},null)},{label:a("file.contextMenu.newFile"),key:"createFile",icon:()=>O(v,{name:"base-file",size:"14"},null)}]},download:{label:a("Public.Btn.Download"),key:"download",icon:()=>O(v,{name:"file-download",size:"16"},null)},terminal:{label:a("file.contextMenu.terminal"),key:"terminal",icon:()=>O(v,{name:"file-terminal",size:"16"},null)},paste:{label:a("file.contextMenu.paste"),key:"paste",icon:()=>O(v,{name:"file-paste",size:"16"},null)},open:{label:a("file.fileOperation.open"),key:"open",icon:()=>O(v,{name:"file-open",size:"16"},null)},share:{label:a("file.contextMenu.externalShare"),key:"share",icon:()=>O(v,{name:"file-share",size:"16"},null)},unShare:{label:a("file.contextMenu.cancelShare"),key:"unShare",icon:()=>O(v,{name:"file-share",size:"16"},null)},favorite:{label:a("file.contextMenu.addToFavorites"),key:"favorite",icon:()=>O(v,{name:"file-favorite",size:"14"},null)},unfavorite:{label:a("file.contextMenu.removeFromFavorites"),key:"unfavorite",icon:()=>O(v,{name:"file-favorite",size:"14"},null)},rename:{label:a("file.fileOperation.rename"),key:"rename",icon:()=>O(v,{name:"file-rename",size:"16"},null)},attrs:{label:a("file.contextMenu.properties"),key:"attrs",icon:()=>O(v,{name:"file-attrs",size:"16"},null)},"new-window":{label:a("file.contextMenu.openInNewWindow"),key:"new-window",icon:()=>O(v,{name:"file-new-window",size:"14"},null)},top:{label:a("file.contextMenu.pinToTop"),key:"top",icon:()=>O(v,{name:"file-top",size:"18"},null)},"file-sync":{label:a("file.contextMenu.fileSync"),key:"file-sync",icon:()=>O(v,{name:"common-copy",size:"16"},null)},scan:{label:a("file.contextMenu.malwareScan"),key:"scan",icon:()=>O(v,{name:"file-scan",size:"16"},null)},duplicate:{label:a("file.contextMenu.createCopy"),key:"duplicate",icon:()=>O(v,{name:"common-copy",size:"16"},null)},preview:{label:a("Public.Btn.Preview"),key:"preview",icon:()=>O(v,{name:"drag-preview",size:"14"},null)},playVideo:{label:"播放",key:"playVideo",icon:()=>O(v,{name:"file-play-video",size:"16"},null)}});function u(){l.value=!1}return e({filesOperation:function(t,e){t.preventDefault(),l.value=!1,o.value=e,P().then(()=>{l.value=!0,s.value=t.clientX,r.value=t.clientY})}}),(t,e)=>{const a=Ft;return N(),E(a,{placement:"bottom-start",trigger:"manual",x:q(s),y:q(r),options:q(c),show:q(l),"on-clickoutside":u,onSelect:e[0]||(e[0]=t=>q(We)(t,q(i)))},null,8,["x","y","options","show"])}}}),Va={key:1,class:"i-svg-spinners:90-ring-with-bg text-[#36ad6a] text-7"},Wa=M({__name:"CalcSize",props:{path:{}},setup(t){const{t:e}=J(),a=t,i=C(-1),l=C(!1);async function o(){-1==i.value&&(l.value=!0,i.value=await async function(t){try{return(await n.post("/files?action=GetDirSize",{path:t},{requestOptions:{isOriginalResult:!0}})).message}catch(e){return console.warn(e),"计算失败"}}(a.path),l.value=!1)}return(t,a)=>{const n=zt;return q(l)?(N(),T("i",Va)):(N(),E(n,{key:0,text:"",type:"primary",onClick:o},{default:K(()=>[W(A(-1!==q(i)?q(i):q(e)("file.tableFooter.calculate")),1)]),_:1}))}}}),Aa=M({__name:"FileTable",setup(t){function e(t){}const a=U("fileStore"),{sort:i,reverse:n,tableRef:l,fileList:o,choosedKeys:s,tableLoading:r,contextRef:c,currentFile:d,dataTableRef:u}=a,p=C({}),f=t=>t.nm,b=t=>({"data-key":t.nm,onContextmenu(t){t.preventDefault(),Zt(t,a)},onDblclick(){!function(t,e){const{currentPath:a}=t;"dir"==e.type?(a.value="/"==a.value?`/${e.nm}`:a.value+"/"+e.nm,Jt(t)):Ze(e)?ie(t,e.path):Qe(e.ext)?aa(t,"Decompress",t=>t.value.open()):Xe(e.ext)?ne(t,e):It(0,e.path,a.value)}(a,t)},onMouseenter(){t.operation_show=!0},onMouseleave(){t.operation_show=!1}}),y=(t,e)=>s.value.includes(t.nm)?`active-row normal-tr-${t.nm}`:`normal-tr-${t.nm}`,{t:x}=J(),w=C([{type:"selection",width:40,className:"file-checkbox",cellProps:()=>({style:{cursor:"pointer"}})},{title:()=>x("file.fileName"),key:"name",width:"22%",minWidth:164,sorter:!0,sortOrder:!1,render:t=>t.isCreate?O("div",{class:"flex justify-between items-center gap-2.5 w-100%"},[O("div",{class:"flex justify-start items-center"},[O(ia,{ext:t.ext},null),O(Pt,{"input-props":{autocomplete:"on",name:"filename"},value:t.editName,"onUpdate:value":e=>t.editName=e,autofocus:!0,id:"createInput",onKeydown:t=>{"Enter"===t.key&&(t.preventDefault(),re(a))},onBlur:()=>{re(a)}},null)])]):O("div",{class:"flex cursor-pointer",onClick:()=>function(t,e){const{choosedKeys:a}=t;"dir"==e.type&&(a.value=[e.nm],Ue(t))}(a,t)},[O("div",{class:"flex-1 flex items-center w-0 gap-4px"},[O("div",{class:"flex-1 w-0 flex items-center"},[O("div",{class:"flex items-center"},[O(ia,{ext:t.ext},null)]),O("div",{class:"min-w-0"},[O(Ct,null,{default:()=>[O("span",{class:"hover:text-primary cursor-pointer"},[t.lnk?t.nm+t.lnk:t.nm])]})])]),O("div",{class:"flex items-center gap-4px"},[t.isShare?O(v,{name:"file-share",size:"16"},null):null,t.isFavorite?O(v,{name:"file-favorite",size:"16"},null):null])])])},{title:()=>x("file.protected"),key:"protection",width:"8%",minWidth:114,render:t=>O("div",{class:"flex justify-start gap-4px items-center cursor-pointer",onClick:()=>te(a,t)},[O("span",{class:1===t.protected?"text-primary":""},[1==t.protected?x("file.protectedStatus"):x("file.unprotectedStatus")]),O(v,{size:"14",name:1==t.protected?"file-lock":"file-unlock",class:1===t.protected?"text-primary":"text-weak"},null)])},{title:"PMSN/Owner",key:"accept",width:"8%",minWidth:108,sorter:!0,sortOrder:!1,render:t=>`${t.acc} / ${t.user}`},{title:()=>x("file.size"),key:"size",width:"7%",minWidth:90,sorter:!0,sortOrder:!1,render(t){if("dir"===t.type)return O(Wa,{path:t.path},null);{let a;return O(zt,{type:"primary",text:!0},"function"==typeof(e=a=g(t.sz))||"[object Object]"===Object.prototype.toString.call(e)&&!rt(e)?a:{default:()=>[a]})}var e}},{title:()=>x("file.modifyTime"),key:"mtime",width:"10%",minWidth:140,sorter:!0,sortOrder:!1,render:t=>h(t.mt)},{title:()=>x("file.remarks"),key:"rmk",minWidth:164,render:t=>O("div",{class:"min-w-134px min-h-26px",onMouseenter:()=>{return(e=t).remarks_hover=!0,void(e.editRemarks=e.rmk);var e},onMouseleave:()=>{var e;(e=t).isEditRemarks||(e.remarks_hover=!1)}},[t.remarks_hover?O(Pt,{value:t.editRemarks,"onUpdate:value":e=>t.editRemarks=e,size:"small",onClick:e=>{e.preventDefault(),t.isEditRemarks=!0,p.value=t,d.value=t,d.value.editRemarks=t.rmk,d.value.isEditRemarks=!0},onBlur:()=>{re(a)},onKeydown:t=>{"Enter"===t.key&&(t.preventDefault(),re(a))}},null):O("span",{title:t.rmk},[t.rmk])])},{title:()=>x("file.operation"),key:"operation",width:"22%",maxWidth:340,align:"right",render(t){if(t.operation_show||s.value.includes(t.nm))return O(Ga,{file:t},null)}}]),k=t=>{w.value.forEach(e=>{const a=e;a.key===t.columnKey?a.sortOrder=t.order:a.sortOrder=!1}),m(t.order)?(n.value="ascend"===t.order?"False":"True",i.value=`${t.columnKey}`):(i.value="",n.value="False"),Jt(a)};function _(t,e){s.value=t}return st(s,()=>Se(a)),Q(()=>{Yt(a),l.value.oncontextmenu=t=>{t.preventDefault(),t.target.closest("tr")||(s.value.length,c.value.filesOperation(t))}}),(t,a)=>{const i=Ot;return N(),T(D,null,[G("div",{ref_key:"tableRef",ref:l,class:"h-full relative"},[O(i,{class:"h-full",ref_key:"dataTableRef",ref:u,"flex-height":"",columns:q(w),"row-key":f,data:q(o),"row-class-name":y,"on-update:checked-row-keys":_,"row-props":b,"checked-row-keys":q(s),loading:q(r),"scrollbar-props":{trigger:"none"},"onUpdate:sorter":k,"on-scroll":e},null,8,["columns","data","checked-row-keys","loading"])],512),O(Ba,{ref_key:"contextRef",ref:c},null,512)],64)}}}),Ha=p(Aa,[["__scopeId","data-v-2f7fd2d3"]]),Ja={class:"h-full overflow-auto"},Ya=["onMouseenter","onMouseleave","onClick","data-key","onContextmenu","onDblclick"],Xa={class:"single-line-ellipsis"},Za=["onMouseenter","onMouseleave","onClick","data-key","onContextmenu"],Qa=p(M({__name:"CardList",setup(t){const e=U("fileStore"),{normalCardList:a,cardRectArr:i,fileList:n,choosedKeys:l,tableLoading:o,currentFile:s}=e,r=C(),c=C(),d=C();st(s,t=>{t?.isCreate&&P(()=>{const t=c.value.querySelector("input");t&&(t.focus(),t.select())})});const u=L(()=>n.value.map(t=>(l.value.includes(t.nm)?t.card_choosed=!0:t.card_choosed=!1,t)));async function p(t){t.isRenameForCard||(l.value=[t.nm],"dir"===t.type&&await Ue(e))}function f(t){const e=[];for(let a=0;a<i.value.length;a++){const[[n,l]]=Object.entries(i.value[a]);Et(t,l.getClientRects()[0])&&e.push(n)}l.value=e}function v(t,n){!function(){a.value=document.querySelectorAll(".file-item");const t=[];for(let e=0;e<a.value.length;e++){const i=a.value[e].dataset.key;t.push({[i]:a.value[e]})}i.value=t}(),"INPUT"==t.target.nodeName?n.m_flag.value=!1:(n.m_flag.value=!0,re(e))}function m(t){if(t.target.closest("div.file-item")){const e=t.target.closest("div.file-item").dataset.key;if(l.value.includes(e))return;l.value=[e]}else l.value=[]}function g(t,e){l.value.length>1?r.value.filesOperation(t,"multiple"):(1==l.value.length||(l.value=[e.nm]),r.value.filesOperation(t,"single"))}return Q(()=>{d.value=Ut(c,f,v),c.value.oncontextmenu=t=>{t.preventDefault(),t.target.closest("div.file-item")||(l.value.length,r.value.filesOperation(t))}}),ct(()=>{c.value.oncontextmenu=null}),(t,a)=>{const i=Dt,n=Pt,s=b;return N(),T("div",Ja,[O(s,{show:q(o),class:"h-full"},{default:K(()=>[G("div",{class:"card-list",ref_key:"cardListRef",ref:c,onContextmenu:m},[(N(!0),T(D,null,V(q(u),t=>(N(),T(D,{key:t.nm},[t.isRenameForCard||t.isCreate?t.isRenameForCard||t.isCreate?(N(),T("div",{key:1,class:I(["file-item",{active:t.card_hover||t.card_choosed}]),onMouseenter:e=>q(Kt)(t),onMouseleave:e=>q(Gt)(t),onClick:e=>p(t),"data-key":t.nm,onContextmenu:e=>g(e,t)},[O(ia,{ext:t.ext,size:"large"},null,8,["ext"]),O(n,{value:t.editName,"onUpdate:value":e=>t.editName=e,size:"small",autofocus:"",autoselect:"",onClick:ot(()=>!1,["stop"]),onKeydown:a[0]||(a[0]=lt(()=>q(re)(q(e)),["enter"]))},null,8,["value","onUpdate:value"])],42,Za)):tt("",!0):(N(),E(i,{key:0,trigger:"hover",placement:"bottom"},{trigger:K(()=>[G("div",{class:I(["file-item",{active:t.card_hover||t.card_choosed}]),onMouseenter:e=>q(Kt)(t),onMouseleave:e=>q(Gt)(t),onClick:e=>p(t),"data-key":t.nm,onContextmenu:e=>g(e,t),onDblclick:a=>function(t){t.isRenameForCard||"dir"!==t.type&&(l.value=[t.nm],qe(e))}(t)},[O(ia,{ext:t.ext,size:"large"},null,8,["ext"]),G("span",Xa,A(t.nm),1)],42,Ya)]),default:K(()=>[W(" "+A(t.nm),1)]),_:2},1024))],64))),128))],544)]),_:1},8,["show"]),O(Ba,{ref_key:"contextRef",ref:r},null,512)])}}}),[["__scopeId","data-v-ae5d241c"]]),ti={class:"flex items-center justify-between"},ei={class:"flex justify-start items-center whitespace-pre"},ai={key:1,class:"i-svg-spinners:90-ring-with-bg text-7 text-primary"},ii=M({__name:"FileTableFooter",setup(t){const{t:e}=J(),a=U("fileStore"),{dirNums:i,fileNums:l,page:o,size:s,total:r,currentPath:c,currentDirSize:d}=a,u=C(!1),p=[100,500,1e3,1500,2e3];async function f(){try{u.value=!0;const t=await n.post("/files?action=GetDirSize",{path:c.value},{requestOptions:{isOriginalResult:!0}});d.value=t.message}catch(t){console.warn(t)}finally{u.value=!1}}return(t,n)=>{const c=zt,v=Nt;return N(),T("div",ti,[G("div",ei,[W(A(q(e)("file.tableFooter.summary",{dirNum:q(i),fileNum:q(l)}))+" ",1),q(u)?(N(),T("i",ai)):(N(),T(D,{key:0},[-1===q(d)?(N(),E(c,{key:0,type:"primary",text:"",onClick:f},{default:K(()=>[W(A(q(e)("file.tableFooter.calculate")),1)]),_:1})):(N(),E(c,{key:1,text:"",type:"primary"},{default:K(()=>[W(A(q(d)),1)]),_:1}))],64))]),O(v,{page:q(o),"onUpdate:page":n[0]||(n[0]=t=>S(o)?o.value=t:null),"page-size":q(s),"onUpdate:pageSize":n[1]||(n[1]=t=>S(s)?s.value=t:null),"item-count":q(r),"page-sizes":p,onRefresh:n[2]||(n[2]=()=>q(Jt)(q(a)))},null,8,["page","page-size","item-count"])])}}}),ni={class:"flex flex-col gap-16px h-full p-16px overflow-hidden"},li=M({__name:"main",props:{path:{default:"/"},view:{default:"list"}},emits:["currentPathChange","viewChange","rendered"],setup(t,{emit:e}){const a=t,i=C(),n=va(),l=dt();ft("fileStore",n);const{dynamicCmpt:o,dynamicCmptRef:s,currentPath:r,filesView:c,choosedKeys:d,mainRef:u,copiedFile:p,currentFile:f,dragUploadRef:v}=n;r.value=a.path,c.value=a.view;const m=e;function g(t){m("viewChange",{view:t,currentPath:r.value})}return st(r,t=>{sessionStorage.setItem("currentPath",t),m("currentPathChange",t)}),Y(()=>{Jt(n),document.onkeydown=async t=>{if("/files"==l.path&&!(f.value?.isCreate||f.value?.isEditRemarks||f.value?.isRename||document.querySelector(".aceEditors"))){if(t.ctrlKey&&"c"===t.key){if(0==d.value.length)return;await Ke(n)}if(t.ctrlKey&&"v"===t.key&&Be(n),t.ctrlKey&&"x"===t.key){if(0==d.value.length)return;Ge(n)}}}}),ut(()=>{Jt(n)}),de(n),Q(()=>m("rendered",r.value)),(t,e)=>{const a=y;return N(),T("div",{ref_key:"mainRef",ref:u,class:"flex-1 overflow-hidden"},[G("div",ni,[G("div",null,[O(qa)]),O(a),G("div",null,[O(ja,{"files-view":q(c),"onUpdate:filesView":e[0]||(e[0]=t=>S(c)?c.value=t:null),onViewChange:g},null,8,["files-view"])]),G("div",{ref_key:"listRef",ref:i,class:"flex-1 overflow-hidden",tabindex:"0"},["list"==q(c)?(N(),E(Ha,{key:0})):"card"==q(c)?(N(),E(Qa,{key:1})):tt("",!0)],512),O(ii)]),(N(),E(pt(q(o)),{ref_key:"dynamicCmptRef",ref:s},null,512)),O(ya,{ref_key:"dragUploadRef",ref:v},null,512),O(ka),O(ra)],512)}}}),oi={class:"tabs"},si=["onClick"],ri={class:"flex justify-start gap-5"},ci={class:"tab-tit"},di={class:"tab-tit"},ui=M({__name:"index",setup(t){const e=C(null),{mainHeight:a}=vt(x()),i=L(()=>a.value-16-16),n=sessionStorage.getItem("tabs"),l=C(),o=C(),s=C(),r=C(!1);let d=[];d=n?JSON.parse(n):[{id:"tab-0",title:"/www/wwwroot",path:"/www/wwwroot",view:"list"}];const u=C(d),p=C("tab-0"),f=C("list");p.value=sessionStorage.getItem("activeTab")?sessionStorage.getItem("activeTab"):"tab-0",st(p,t=>{const e=u.value.find(e=>e.id==t);e&&(f.value=e.view)},{immediate:!0});const m=L(()=>{const t=u.value.find(t=>t.id==p.value);return t?t.path:"tab-0"});function g(){if(u.value.length>=14)return void c.warning("最多只能打开14个标签");const t=`tab-${(new Date).getTime()}`;u.value.push({id:t,title:"/www/wwwroot",path:"/www/wwwroot",view:"list"}),p.value=t}function h(t){const e=t.split("/").slice(-1)[0];u.value.forEach(a=>{a.id==p.value&&(a.path=t,a.title=""==e?"/":e)})}function b({view:t,path:e}){f.value=t,u.value.forEach(a=>{a.id==p.value&&(a.path=e,a.view=t)})}function y(t){"left"==t?s.value.scrollLeft-=100:"right"==t&&(s.value.scrollLeft+=100)}function S(){o.value&&(r.value=o.value.offsetWidth>l.value.offsetWidth)}return st(u,t=>{sessionStorage.setItem("tabs",JSON.stringify(t)),setTimeout(()=>S(),50)},{deep:!0}),st(p,t=>{sessionStorage.setItem("activeTab",t),S()}),Q(()=>{s.value.addEventListener("mousewheel",t=>{t.preventDefault(),s.value.scrollLeft+=t.deltaY})}),function(){const t=k("Path");if(t){const e=`tab-${(new Date).getTime()}`;u.value.push({id:e,title:t,path:t,view:"list"});const a=u.value.find(e=>e.path==t);a&&(p.value=a.id)}_("Path")}(),Q(async()=>{await w("/static/ace/styles/icons.css?v=1756367574781",e.value),qt()}),(t,a)=>{const n=v,c=Dt,d=Mt;return N(),T("div",{ref_key:"fileRef",ref:e,id:"file-main",class:"p-16px"},[O(d,{style:B({height:q(i)+"px"}),"content-style":{display:"flex",flexDirection:"column",overflow:"hidden"}},{default:K(()=>[G("div",oi,[G("div",{class:I(["tabs-scroll",{"has-scroll":q(r)}]),ref_key:"tabScrollRef",ref:l},[q(r)?(N(),T("div",{key:0,class:"left",onClick:a[0]||(a[0]=t=>y("left"))},a[2]||(a[2]=[G("i",{class:"i-tdesign:caret-left text-7"},null,-1)]))):tt("",!0),q(r)?(N(),T("div",{key:1,class:"right",onClick:a[1]||(a[1]=t=>y("right"))},a[3]||(a[3]=[G("i",{class:"i-tdesign:caret-right text-7"},null,-1)]))):tt("",!0),G("div",{class:"scroll-container",ref_key:"tabScrollContainerRef",ref:s},[G("div",{class:"tabs-wrapper",ref_key:"tabWrapperRef",ref:o},[(N(!0),T(D,null,V(q(u),t=>(N(),E(c,{placement:"bottom",key:t.id},{trigger:K(()=>[G("div",{class:I(["tab-item",{active:t.id==q(p)}]),onClick:e=>{return a=t.id,void(p.value=a);var a}},[G("div",ri,[O(n,{name:"file-dir",size:"18"}),G("span",ci,A(t.title),1)]),t.id==q(p)&&q(u).length>1?(N(),E(n,{key:0,name:"base-error",size:"18",color:"#bbb",onClick:e=>function(t){if(1==u.value.length)return void(p.value=u.value[0].id);const e=u.value.findIndex(e=>e.id==t);u.value.splice(e,1),setTimeout(()=>p.value=u.value[u.value.length-1].id,50)}(t.id)},null,8,["onClick"])):tt("",!0)],10,si)]),default:K(()=>[G("span",di,A(t.title),1)]),_:2},1024))),128)),G("div",{class:"tab-item add",onClick:g},[O(n,{name:"base-add",size:"18",color:"#ccc"})])],512)],512)],2)]),(N(),E(mt,null,[(N(),E(pt(li),{key:q(p),onCurrentPathChange:h,path:q(m),view:q(f),onViewChange:b},null,40,["path","view"]))],1024))]),_:1},8,["style"])],512)}}}),pi=p(ui,[["__scopeId","data-v-7a85dcb9"]]),fi=Object.freeze(Object.defineProperty({__proto__:null,default:pi},Symbol.toStringTag,{value:"Module"}));t("p",fi)}}});
