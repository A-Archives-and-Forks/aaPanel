const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/count.js?v=1742891699271","js/index.vue_vue_type_script_setup_true_lang6.js?v=1742891699271","js/page_layout.js?v=1742891699271","js/vue.js?v=1742891699271","js/__commonjsHelpers__.js?v=1742891699271","js/naive.js?v=1742891699271","js/common.js?v=1742891699271","js/public.js?v=1742891699271","css/public.css?v=1742891699271","css/page_layout.css?v=1742891699271","js/record.js?v=1742891699271","js/index.vue_vue_type_script_setup_true_lang4.js?v=1742891699271","js/index.vue_vue_type_script_setup_true_lang8.js?v=1742891699271","css/index19.css?v=1742891699271","js/index.vue_vue_type_script_setup_true_lang5.js?v=1742891699271","js/site3.js?v=1742891699271","js/tools2.js?v=1742891699271","js/rules.js?v=1742891699271","css/record.css?v=1742891699271"])))=>i.map(i=>d[i]);
import{b as e,bE as t,cT as a,b7 as i,a as l,I as n,m as s}from"./page_layout.js?v=1742891699271";import{_ as o}from"./index.js?v=1742891699271";import{_ as d}from"./index95.js?v=1742891699271";import{_ as r}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1742891699271";import{_ as u}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1742891699271";import{_ as c}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1742891699271";import{_ as p}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1742891699271";import{d as m,t as _,O as f,j as x,R as v,S as h,P as W,a1 as w,c as y,U as S,V as b,k as g,v as R,a2 as $,M as k,_ as j,r as P,F as U,f as C,a0 as N,i as E,Y as q}from"./vue.js?v=1742891699271";import{a as O,d as L,b as T,f as z,u as D}from"./public.js?v=1742891699271";import{u as V}from"./useModal2.js?v=1742891699271";import{s as I,a as M,g as A,b as Y,c as B,d as F,e as H}from"./site3.js?v=1742891699271";import{_ as J}from"./index183.js?v=1742891699271";import{_ as Z}from"./index.vue_vue_type_script_setup_true_lang.js?v=1742891699271";import{b$ as G,cm as K,cl as Q,_ as X,ch as ee,cM as te,cN as ae,bY as ie,bZ as le,a2 as ne,ck as se}from"./naive.js?v=1742891699271";import"./common.js?v=1742891699271";import"./__commonjsHelpers__.js?v=1742891699271";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1742891699271";const oe={class:"p-20px"},de={class:"flex-1"},re={class:"flex items-center h-32px"},ue={class:"flex items-center h-32px"},ce={class:"w-320px mt-6px"},pe={class:"flex-1"},me={class:"flex items-center h-32px"},_e={class:"flex items-center h-32px"},fe={class:"w-320px mt-6px"},xe={class:"text-error"},ve=m({__name:"index",props:{row:{},onRefresh:{}},setup(t,{expose:a}){const i=t,l=_(i,"row"),{t:n}=f(),s=x({html:!1,html_fast:!1,js:!1,picture:!1}),o=x({type:"default",text:""}),r=x({type:"default",text:""});(()=>{if(!l.value)return;const{crawler:e}=l.value;e&&(s.html=e.html,s.picture=e.picture,e.htmlnew&&(o.type=e.htmlnew.type,o.text=e.htmlnew.text),e.picturenew&&(r.type=e.picturenew.type,r.text=e.picturenew.text))})();const u=async()=>{var t;const a=(()=>{const t={site:l.value.siteName,html:s.html,html_fast:!1,js:!1,picture:s.picture,htmlnew:k(o),picturenew:k(r)};return te(l.value.crawler,t,((t,a)=>{if(e(t))return JSON.stringify(ae(t,a))}))})();await I(a),null==(t=i.onRefresh)||t.call(i)};return a({onConfirm:async({hide:e})=>(s.html||s.picture?O({title:n("Public.Confirm.Title"),width:408,content:()=>W("div",{class:"relative pb-40px"},[W("div",null,[y("效果：每次访问网页内容随机加密、有效防止爬虫")]),W("div",null,[y("影响：开启后会导致比之前流量增加1倍")]),W("div",null,[y("建议：线上业务建议不要开启")]),W(d,{class:"absolute left-[-21px] bottom-0 mt-16px "},{default:()=>[W("li",{class:"text-error"},[y("当前的功能为测试功能建议不要在线上业务开启！！")])]})]),onConfirm:async({hide:t})=>{await u(),t(),e()}}):(await u(),e()),!1)}),(e,t)=>{const a=G,i=K,l=Q,n=X,u=ee,c=Z;return v(),h("div",oe,[W(c,{"label-width":"160px"},{default:w((()=>[W(u,{label:e.$t("Waf.Site.ReptileProtection.index_1")},{default:w((()=>[S("div",de,[S("div",re,[W(a,{value:b(s).html,"onUpdate:value":t[0]||(t[0]=e=>b(s).html=e)},null,8,["value"])]),g(S("div",ue,[W(l,{value:b(o).type,"onUpdate:value":t[1]||(t[1]=e=>b(o).type=e)},{default:w((()=>[W(i,{value:"default"},{default:w((()=>[y($(e.$t("Waf.Site.ReptileProtection.index_2")),1)])),_:1}),W(i,{value:"text"},{default:w((()=>[y($(e.$t("Waf.Site.ReptileProtection.index_3")),1)])),_:1})])),_:1},8,["value"])],512),[[R,b(s).html]]),g(S("div",ce,[W(n,{value:b(o).text,"onUpdate:value":t[2]||(t[2]=e=>b(o).text=e),placeholder:e.$t("Waf.Site.ReptileProtection.index_4")},null,8,["value","placeholder"])],512),[[R,b(s).html&&"text"===b(o).type]])])])),_:1},8,["label"]),W(u,{label:e.$t("Waf.Site.ReptileProtection.index_5")},{default:w((()=>[S("div",pe,[S("div",me,[W(a,{value:b(s).picture,"onUpdate:value":t[3]||(t[3]=e=>b(s).picture=e)},null,8,["value"])]),g(S("div",_e,[W(l,{value:b(r).type,"onUpdate:value":t[4]||(t[4]=e=>b(r).type=e)},{default:w((()=>[W(i,{value:"default"},{default:w((()=>[y($(e.$t("Waf.Site.ReptileProtection.index_6")),1)])),_:1}),W(i,{value:"text"},{default:w((()=>[y($(e.$t("Waf.Site.ReptileProtection.index_7")),1)])),_:1})])),_:1},8,["value"])],512),[[R,b(s).picture]]),g(S("div",fe,[W(n,{value:b(r).text,"onUpdate:value":t[5]||(t[5]=e=>b(r).text=e),placeholder:e.$t("Waf.Site.ReptileProtection.index_8")},null,8,["value","placeholder"])],512),[[R,b(s).picture&&"text"===b(r).type]])])])),_:1},8,["label"])])),_:1}),W(d,{class:"mt-16px"},{default:w((()=>[S("li",xe,$(e.$t("Waf.Site.ReptileProtection.index_9")),1),S("li",null,[S("b",null,$(e.$t("Waf.Site.ReptileProtection.index_10")),1),y($(e.$t("Waf.Site.ReptileProtection.index_11")),1)]),S("li",null,[S("b",null,$(e.$t("Waf.Site.ReptileProtection.index_12")),1),y($(e.$t("Waf.Site.ReptileProtection.index_13")),1)]),S("li",null,[S("b",null,$(e.$t("Waf.Site.ReptileProtection.index_14")),1),y($(e.$t("Waf.Site.ReptileProtection.index_15")),1)])])),_:1})])}}}),he={class:"p-20px"},We={class:"w-40px"},we={class:"mx-8px"},ye={class:"w-40px"},Se={class:"mx-8px"},be={class:"w-40px"},ge={class:"ml-8px"},Re={class:"flex-1"},$e={class:"flex items-center h-32px"},ke={class:"w-320px mt-6px"},je={class:"text-error"},Pe=m({__name:"index",props:{row:{},onRefresh:{}},setup(e,{expose:a}){const i=e,l=_(i,"row"),n=x({open:!1,user:50,time:10,qps:1,identity:{type:"default",text:""}});(()=>{if(!l.value)return;const{limiting:e}=l.value;if(!e)return;const{timeout:t}=e;t&&(n.open=t.open,n.user=t.user,n.time=t.time,n.qps=t.qps,n.identity.type=t.identity.type,n.identity.text=t.identity.text)})();return a({onConfirm:async()=>{var e;await M({site:l.value.siteName,limiting:{open:n.open,user:n.user,time:n.time,qps:n.qps,identity:{type:n.identity.type,text:n.identity.text}}}),null==(e=i.onRefresh)||e.call(i)}}),(e,a)=>{const i=G,l=ee,s=ie,o=K,r=Q,u=X,c=t,p=Z,m=d;return v(),h("div",he,[W(p,{"label-width":"160px"},{default:w((()=>[W(l,{label:e.$t("Waf.Site.WaitingRoom.index_1")},{default:w((()=>[W(i,{value:b(n).open,"onUpdate:value":a[0]||(a[0]=e=>b(n).open=e)},null,8,["value"])])),_:1},8,["label"]),W(c,{show:b(n).open},{default:w((()=>[W(l,{label:e.$t("Waf.Site.WaitingRoom.index_2")},{default:w((()=>[S("div",We,[W(s,{value:b(n).user,"onUpdate:value":a[1]||(a[1]=e=>b(n).user=e),min:0,"show-button":!1,placeholder:""},null,8,["value"])]),S("div",we,$(e.$t("Waf.Site.WaitingRoom.index_3")),1),S("div",ye,[W(s,{value:b(n).time,"onUpdate:value":a[2]||(a[2]=e=>b(n).time=e),min:0,"show-button":!1,placeholder:""},null,8,["value"])]),S("div",Se,$(e.$t("Waf.Site.WaitingRoom.index_4")),1),S("div",be,[W(s,{value:b(n).qps,"onUpdate:value":a[3]||(a[3]=e=>b(n).qps=e),min:0,"show-button":!1,placeholder:""},null,8,["value"])]),S("div",ge,$(e.$t("Waf.Site.WaitingRoom.index_5")),1)])),_:1},8,["label"]),W(l,{label:e.$t("Waf.Site.WaitingRoom.index_6")},{default:w((()=>[S("div",Re,[S("div",$e,[W(r,{value:b(n).identity.type,"onUpdate:value":a[4]||(a[4]=e=>b(n).identity.type=e)},{default:w((()=>[W(o,{value:"default"},{default:w((()=>[y($(e.$t("Waf.Site.WaitingRoom.index_7")),1)])),_:1}),W(o,{value:"text"},{default:w((()=>[y($(e.$t("Waf.Site.WaitingRoom.index_8")),1)])),_:1})])),_:1},8,["value"])]),g(S("div",ke,[W(u,{value:b(n).identity.text,"onUpdate:value":a[5]||(a[5]=e=>b(n).identity.text=e),placeholder:e.$t("Waf.Site.WaitingRoom.index_9")},null,8,["value","placeholder"])],512),[[R,"text"===b(n).identity.type]])])])),_:1},8,["label"])])),_:1},8,["show"])])),_:1}),W(m,{class:"mt-16px"},{default:w((()=>[S("li",je,$(e.$t("Waf.Site.WaitingRoom.index_10")),1),S("li",null,[S("b",null,$(e.$t("Waf.Site.WaitingRoom.index_11")),1),y($(e.$t("Waf.Site.WaitingRoom.index_12")),1)]),S("li",null,[S("b",null,$(e.$t("Waf.Site.WaitingRoom.index_13")),1),y($(e.$t("Waf.Site.WaitingRoom.index_14")),1)]),S("li",null,[S("b",null,$(e.$t("Waf.Site.WaitingRoom.index_15")),1),y($(e.$t("Waf.Site.WaitingRoom.index_16")),1)]),S("li",null,[S("b",null,$(e.$t("Waf.Site.WaitingRoom.index_17")),1),y($(e.$t("Waf.Site.WaitingRoom.index_18")),1)]),S("li",null,$(e.$t("Waf.Site.WaitingRoom.index_19")),1)])),_:1})])}}}),Ue={class:"cursor-pointer"};function Ce(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!E(e)}const Ne=m({__name:"index",setup(t){const m=q((()=>l((()=>import("./count.js?v=1742891699271")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])))),_=q((()=>l((()=>import("./record.js?v=1742891699271")),__vite__mapDeps([10,11,12,2,3,4,5,6,7,8,9,13,14,1,15,16,17,18])))),{t:h}=f(),g=a();j(g),P("9.6.0");const R=P(!1),E=async e=>{await F({obj:"malicious_ip"}),R.value=e},I=x({p:1,limit:10,search:""}),M=L(""),Z=L(""),K=async(e,t)=>{await Y({siteName:e.siteName,obj:t})},{table:Q,columns:X,setLoading:ee}=T([{key:"siteName",title:h("Waf.Site.index_8"),minWidth:150,ellipsis:{tooltip:!0},render:e=>W("a",{class:"bt-link",href:"javascript:;",onClick:()=>{V({row:e,onRefresh:oe})}},[e.siteName])},{key:"total",title:h("Waf.Site.index_9"),width:"10%",minWidth:140,render:e=>{let t=0;return e.total.forEach((e=>{t+=e.value})),W(le,{placement:"bottom-start","arrow-point-to-center":!0},{trigger:()=>W(U,null,[t>0?W("a",{class:"bt-link error",href:"javascript:;",onClick:()=>{(e=>{M.data.list=e.total,M.title=h("Waf.Site.index_5",[e.siteName]),M.show=!0})(e)}},[t]):t]),default:()=>W("div",null,[e.total.map((e=>W("div",{class:"leading-18px"},[e.name,y(": "),e.value,h("Waf.Site.index_35")])))])})}},{key:"not_spider",width:"12%",minWidth:120,title:()=>{let e;return W(U,null,[W("span",{class:"mr-6px"},[h("Waf.Site.index_36")]),W(J,null,Ce(e=h("Waf.Site.index_37"))?e:{default:()=>[e]})])},render:e=>W(ne,{checked:e.not_spider,onUpdateChecked:async t=>{await K(e,"not_spider"),e.not_spider=t}},null)},{key:"cdn",width:"12%",minWidth:120,title:()=>{let e;return W(U,null,[W("span",{class:"mr-6px"},[h("Waf.Site.index_38")]),W(J,null,Ce(e=h("Waf.Site.index_39"))?e:{default:()=>[e]})])},render:e=>W(ne,{checked:e.cdn,onUpdateChecked:async t=>{await K(e,"cdn"),e.cdn=t}},null)},{key:"smart_cc",width:"14%",minWidth:140,title:()=>W(U,null,[W("span",{class:"mr-6px"},[h("Waf.Site.index_40")]),W(J,null,{default:()=>[W("div",{class:"w-500px"},[h("Waf.Site.index_41")])]})]),render:e=>W("div",{class:"inline-flex items-center"},[W(ne,{class:"mr-6px",checked:e.smart_cc.open,onUpdateChecked:async t=>{t?O({title:h("Public.Confirm.Title"),content:h("Waf.Site.index_10"),onConfirm:async()=>{await K(e,"smart_cc"),e.smart_cc.open=t}}):(await K(e,"smart_cc"),e.smart_cc.open=t)}},null),W(le,{placement:"bottom-start","arrow-point-to-center":!0},{trigger:()=>W("span",{class:"text-desc text-13px"},[e.total[9].value]),default:()=>W(U,null,[h("Waf.Site.index_42",[e.total[9].value])])})])},{key:"crawler",title:h("Waf.Site.index_43"),width:"9%",minWidth:100,render:e=>{const t=(e.crawler?Object.entries(e.crawler):[]).some((([e,t])=>t&&"picturenew"!==e&&"htmlnew"!==e));return W("a",{class:["bt-link",t?"":"error"],href:"javascript:;",onClick:()=>{te(e)}},[h(t?"Public.Status.Enable":"Public.Status.Disable")])}},{key:"limiting",title:h("Waf.Site.index_44"),width:"10%",minWidth:170,render:e=>{var t,a,i,l;return W("a",{class:["bt-link",(null==(a=null==(t=null==e?void 0:e.limiting)?void 0:t.timeout)?void 0:a.open)?"":"error"],href:"javascript:;",onClick:()=>{ae(e)}},[(null==(l=null==(i=null==e?void 0:e.limiting)?void 0:i.timeout)?void 0:l.open)?h("Public.Status.Enable"):h("Public.Status.Disable")])}},{key:"cc",width:"8%",minWidth:100,title:h("Waf.Site.index_11"),render:e=>W("div",{class:"inline-flex items-center"},[W(ne,{class:"mr-6px",checked:e.cc.open,onUpdateChecked:async t=>{await K(e,"cc"),e.cc.open=t}},null),W(le,{placement:"bottom-start","arrow-point-to-center":!0},{trigger:()=>W("span",{class:"text-desc text-13px"},[e.total[2].value]),default:()=>W(U,null,[h("Waf.Site.index_42",[e.total[2].value])])})])},{key:"open",width:"6%",minWidth:70,title:h("Waf.Site.index_12"),render:e=>W(G,{size:"small",value:e.open,onUpdateValue:async t=>{await K(e,"open"),e.open=t}},null)},z({width:100,options:e=>[{label:h("Waf.Site.index_13"),onClick:()=>{(async e=>{const{message:t}=await H({siteName:e.siteName});n(t)&&t.length>0?(Z.data.timeList=t,Z.data.siteName=e.siteName,Z.title=h("Waf.Site.index_6",[e.siteName]),Z.show=!0):s.success(h("Waf.Site.index_7"))})(e)}},{label:h("Public.Btn.Set"),onClick:()=>{V({row:e,onRefresh:oe})}}]})]),te=e=>{D({title:h("Waf.Site.index_45",[e.siteName]),width:620,footer:!0,data:{row:e,onRefresh:oe},component:ve})},ae=e=>{D({title:h("Waf.Site.index_46",[e.siteName]),width:700,footer:!0,data:{row:e,onRefresh:oe},component:Pe})},ie=()=>{I.p=1,oe()},oe=async()=>{try{ee(!0);const{message:t}=await A(k(I));e(t)&&(Q.data=t.data,Q.total=i(t.page))}finally{ee(!1)}};return(async()=>{const{message:t}=await B();e(t)&&(R.value=t.malicious_ip)})(),C((()=>{oe()})),(e,t)=>{const a=p,i=c,l=u,n=r,s=d,f=o,x=se;return v(),N(x,{class:"p-16px"},{default:w((()=>[W(n,null,{toolsLeft:w((()=>[S("div",Ue,[S("span",{class:"mr-8px text-desc",onClick:t[0]||(t[0]=e=>E(!b(R)))},$(e.$t("Waf.Site.index_1")),1),W(b(ne),{checked:b(R),"onUpdate:checked":E},null,8,["checked"])])])),toolsRight:w((()=>[W(a,{value:b(I).search,"onUpdate:value":t[1]||(t[1]=e=>b(I).search=e),placeholder:e.$t("Waf.Site.index_2"),onSearch:ie},null,8,["value","placeholder"])])),table:w((()=>[W(i,{loading:b(Q).loading,data:b(Q).data,columns:b(X)},null,8,["loading","data","columns"])])),pageRight:w((()=>[W(l,{page:b(I).p,"onUpdate:page":t[2]||(t[2]=e=>b(I).p=e),"page-size":b(I).limit,"onUpdate:pageSize":t[3]||(t[3]=e=>b(I).limit=e),"item-count":b(Q).total,"store-key":"waf-site",onRefresh:oe},null,8,["page","page-size","item-count"])])),_:1}),W(s,{class:"mt-16px"},{default:w((()=>[S("li",null,$(e.$t("Waf.Site.index_3")),1),S("li",null,$(e.$t("Waf.Site.index_4")),1)])),_:1}),W(f,{show:b(M).show,"onUpdate:show":t[4]||(t[4]=e=>b(M).show=e),title:b(M).title,width:480,"min-height":688,data:b(M).data,component:b(m)},null,8,["show","title","data","component"]),W(f,{show:b(Z).show,"onUpdate:show":t[5]||(t[5]=e=>b(Z).show=e),title:b(Z).title,data:b(Z).data,width:1e3,"min-height":552,component:b(_)},null,8,["show","title","data","component"])])),_:1})}}});export{Ne as default};
