System.register(["./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1721298337096","./mail-legacy.js?v=1721298337096","./index-legacy.js?v=1721298337096","./data-legacy.js?v=1721298337096","./vue-legacy.js?v=1721298337096","./Select-legacy.js?v=1721298337096","./useTableColumns-legacy.js?v=1721298337096","./pinia-legacy.js?v=1721298337096","./Tag-legacy.js?v=1721298337096","./Empty-legacy.js?v=1721298337096","./Progress-legacy.js?v=1721298337096"],(function(e,a){"use strict";var l,s,t,r,n,u,i,o,d,p,m,c,v,w,_,f,b,g,h,y,x;return{setters:[e=>{l=e._,s=e.a},e=>{t=e.e,r=e.A,n=e.B},e=>{u=e.k,i=e.L,o=e.ab,d=e.cJ},e=>{p=e.g},e=>{m=e.l,c=e.r,v=e.f,w=e.S,_=e.Z,f=e.P,b=e.V,g=e._,h=e.W},e=>{y=e._},e=>{x=e._},null,null,null,null],execute:function(){const a={class:"p-20px"},E={class:"w-280px"},q={class:"w-100px ml-10px"},j={class:"w-280px"},U={class:"w-130px"},B={class:"w-140px ml-10px"},T={class:"w-280px"};e("default",m({__name:"index",props:{row:{},isEdit:{type:Boolean}},emits:["refresh"],setup(e,{expose:m,emit:k}){const A=e,P=k,{isEdit:z}=A,G=c(null),M=v({full_name:"",domain:null,quota:5,quota_unit:"GB",is_admin:0,username:"",password:"",active:1}),S=c([]),Z=[{label:"GB",value:"GB"},{label:"MB",value:"MB"}],C=[{label:"General user",value:0},{label:"Admin",value:1}],L={full_name:{trigger:["blur","input"],validator:()=>""!==M.full_name.trim()||new Error("Username cannot be empty!")},username:{trigger:["blur","input"],validator:()=>""!==M.username.trim()||new Error("Email address cannot be empty!")},quota:{trigger:["blur","input"],validator:()=>(console.log(M.quota),!!M.quota||new Error("MailBox size cannot be empty!"))},password:{trigger:["blur","input"],validator:()=>{if(z){if(M.password&&M.password.trim().length<8)return new Error("The current mailbox user password length is less than 8 digits, please re-enter");const e=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$/;if(M.password&&!e.test(M.password))return new Error("The current mailbox user password must contain at least uppercase and lowercase letters and numbers. Please re-enter")}else{if(M.password.trim().length<8)return new Error("The current mailbox user password length is less than 8 digits, please re-enter");if(!/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$/.test(M.password))return new Error("The current mailbox user password must contain at least uppercase and lowercase letters and numbers. Please re-enter")}return!0}}},$=()=>({full_name:M.full_name,quota:M.quota+" "+M.quota_unit,is_admin:M.is_admin,username:M.username+"@"+M.domain,password:M.password,active:M.active});return(async()=>{const{message:e}=await n();u(e)&&(S.value=e.map((e=>({label:e,value:e}))),M.domain=e[0])})(),(()=>{const{row:e,isEdit:a}=A;if(a&&e){M.full_name=e.full_name,M.is_admin=e.is_admin,M.username=e.username.split("@")[0],M.active=e.active;const[a,l]=e.username.split("@");M.username=a,M.domain=l;const s=i(e.quota),[t,r]=s.split(" ");M.quota=p(t),M.quota_unit=r}})(),m({onConfirm:async()=>{await(G.value?.validate()),z?await t($()):await r($()),P("refresh")}}),(e,t)=>{const r=o,n=l,u=d,i=y,p=x,m=s;return w(),_("div",a,[f(m,{ref_key:"formRef",ref:G,model:h(M),rules:L},{default:b((()=>[f(n,{label:"Username",path:"full_name"},{default:b((()=>[g("div",E,[f(r,{value:h(M).full_name,"onUpdate:value":t[0]||(t[0]=e=>h(M).full_name=e),placeholder:"Enter the username please"},null,8,["value"])])])),_:1}),f(n,{label:"Quota",path:"quota"},{default:b((()=>[f(u,{value:h(M).quota,"onUpdate:value":t[1]||(t[1]=e=>h(M).quota=e),class:"w-170px",min:0,"show-button":!1,placeholder:"Enter the size of MailBox"},null,8,["value"]),g("div",q,[f(i,{value:h(M).quota_unit,"onUpdate:value":t[2]||(t[2]=e=>h(M).quota_unit=e),options:Z},null,8,["value"])])])),_:1}),f(n,{label:"User type",path:"is_admin"},{default:b((()=>[g("div",j,[f(i,{value:h(M).is_admin,"onUpdate:value":t[3]||(t[3]=e=>h(M).is_admin=e),options:C},null,8,["value"])])])),_:1}),f(n,{label:"Email Address",path:"username"},{default:b((()=>[g("div",U,[f(r,{value:h(M).username,"onUpdate:value":t[4]||(t[4]=e=>h(M).username=e),disabled:h(z),placeholder:"Your domain name"},null,8,["value","disabled"])]),g("div",B,[f(i,{value:h(M).domain,"onUpdate:value":t[5]||(t[5]=e=>h(M).domain=e),disabled:h(z),filterable:!0,options:h(S)},null,8,["value","disabled","options"])])])),_:1}),f(n,{label:"Email Password",path:"password"},{default:b((()=>[g("div",T,[f(r,{value:h(M).password,"onUpdate:value":t[6]||(t[6]=e=>h(M).password=e),placeholder:h(z)?"If it is empty, the password will not be changed":"Enter your email password please"},null,8,["value","placeholder"])])])),_:1}),f(n,{label:"EnforceTLS",path:"active","show-feedback":!1},{default:b((()=>[f(p,{value:h(M).active,"onUpdate:value":t[7]||(t[7]=e=>h(M).active=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1})])),_:1},8,["model"])])}}}))}}}));
