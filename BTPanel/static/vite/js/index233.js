import{_ as e}from"./index103.js?v=1749179669910";import{_ as a}from"./index122.js?v=1749179669910";import{_ as l}from"./index.vue_vue_type_script_setup_true_lang.js?v=1749179669910";import{dr as t,N as i,g as r,f as n,c as s,o,_ as u,m as d,cC as p}from"./page_layout.js?v=1749179669910";import{d as _,_ as m,ae as v,r as c,R as f,a0 as h,V as b,n as g,w as x,e as w,O as y,j as S,a1 as j,U as k,a2 as $,c as P,ao as L,S as E,P as U,k as R,aj as W,v as q,m as A}from"./vue.js?v=1749179669910";import{b as V}from"./soft.js?v=1749179669910";import{g as C,a as z,c as H,b as F}from"./index84.js?v=1749179669910";import{aq as D}from"./site.js?v=1749179669910";import{d as M}from"./public.js?v=1749179669910";import{cp as N,co as I,cn as O,cj as T,_ as B,c1 as J,bU as Q,a2 as G,c0 as K,T as X,ct as Y,cs as Z,y as ee}from"./naive.js?v=1749179669910";import{_ as ae}from"./index.vue_vue_type_script_setup_true_lang18.js?v=1749179669910";import{D as le}from"./domain-input.js?v=1749179669910";import{_ as te}from"./index.vue_vue_type_script_setup_true_lang11.js?v=1749179669910";import{u as ie}from"./file.js?v=1749179669910";import"./common.js?v=1749179669910";import"./__commonjsHelpers__.js?v=1749179669910";import"./index.js?v=1749179669910";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1749179669910";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1749179669910";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1749179669910";import"./index.vue_vue_type_script_setup_true_lang13.js?v=1749179669910";import"./index.vue_vue_type_script_setup_true_lang9.js?v=1749179669910";import"./site4.js?v=1749179669910";import"./index228.js?v=1749179669910";import"./index97.js?v=1749179669910";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1749179669910";import"./theme-chrome.js?v=1749179669910";import"./cert.js?v=1749179669910";import"./php.js?v=1749179669910";import"./index101.js?v=1749179669910";import"./ssl.js?v=1749179669910";import"./utils2.js?v=1749179669910";import"./index202.js?v=1749179669910";import"./paypal-js.js?v=1749179669910";import"./ssl-lets-progress.js?v=1749179669910";import"./columns.js?v=1749179669910";import"./index96.js?v=1749179669910";const re=_({__name:"index",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const a=t(),{phpVersion:l}=m(a),r=v(e,"value"),{loading:n,setLoading:s}=M(),o=c([]),u=e=>{l.value=e};return(async()=>{try{s(!0);const{message:e}=await D(),a=i(e)?e:[];o.value=a.reverse().filter((e=>"00"!==e.version)).map((e=>({label:e.name,value:e.version}))),await g(),a.length>0&&(r.value="00"==a[0].version?"":a[0].version,l.value="00"==a[0].version?"":a[0].version)}finally{s(!1)}})(),(e,a)=>{const l=N;return f(),h(l,{value:r.value,"onUpdate:value":[a[0]||(a[0]=e=>r.value=e),u],loading:b(n),options:b(o)},null,8,["value","loading","options"])}}}),ne=_({__name:"index",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const a=t();x((()=>a.phpVersion),(e=>{u(e)}));const l=w((()=>a.phpVersion?"Not supported by current PHP":"Please select PHP version")),r=v(e,"value"),{loading:n,setLoading:s}=M(),o=c([]),u=async e=>{try{s(!0),r.value="";const{message:a}=await C({php_version_short:e});i(a)&&(o.value=a.map((e=>({label:e.version,value:e.version}))),await g(),a.length>0&&(r.value=a[0].version))}finally{s(!1)}};return a.phpVersion&&u(a.phpVersion),(e,a)=>{const t=N;return f(),h(t,{value:r.value,"onUpdate:value":a[0]||(a[0]=e=>r.value=e),loading:b(n),options:b(o),placeholder:b(l)},null,8,["value","loading","options","placeholder"])}}}),se={key:1},oe={class:"w-400px"},ue={class:"w-400px"},de={class:"w-230px"},pe={class:"w-230px"},_e={class:"w-400px"},me={class:"w-230px mr-16px"},ve={class:"w-400px"},ce={class:"w-400px"},fe=_({__name:"index",props:{getList:{type:Function}},setup(e,{expose:i}){const p=e,{t:_}=y(),v=t(),{web:g,mysql:x,php:w}=m(v),A=c(null),C=c(null),H=c([]),F=S({type:0,domain_auto:[""],domain:"",weblog_title:"",language:"en",php_version:null,wp_version:null,user_name:r(6),admin_password:n(16,"wp"),pw_weak:!1,admin_email:"",Login_url:"wp-admin",redirection_url:"404",prefix:"wp_"+r(6)+"_",enable_cache:!1,wps:!1,is_create_default_file:!0}),D={domain:{required:!0,trigger:["blur","input"],validator:()=>0!==F.type||""!==F.domain.trim()||new Error(_("Site.RulesError.index_31"))},domain_auto:{trigger:["blur"],validator:(e,a)=>!(1===F.type&&!a[0])||new Error(_("Site.PHP.add_site_23"))},weblog_title:{required:!0,trigger:["blur","input"],validator:()=>""!==F.weblog_title.trim()||new Error(_("Site.RulesError.index_3"))},language:{trigger:"change",validator:()=>null!==F.language||new Error(_("Site.RulesError.index_4"))},php_version:{trigger:"change",validator:()=>null!==F.php_version||new Error(_("Site.RulesError.index_5"))},wp_version:{trigger:"change",validator:()=>null!==F.php_version||new Error(_("Site.RulesError.index_6"))},user_name:{required:!0,trigger:["blur","input"],validator:()=>""!==F.user_name.trim()||new Error(_("Site.RulesError.index_7"))},admin_password:{required:!0,trigger:["blur","input"],validator:()=>""!==F.admin_password.trim()||new Error(_("Site.RulesError.index_8"))},admin_email:{required:!0,trigger:["blur","input"],validator:()=>""!==F.admin_email.trim()||new Error(_("Site.RulesError.index_9"))},redirection_url:{required:!0,trigger:["blur","input"],validator:()=>""!==F.redirection_url.trim()||new Error(_("Site.RulesError.index_12"))},Login_url:{required:!0,trigger:["blur","input"],validator:()=>""!==F.Login_url.trim()||new Error(_("Site.RulesError.index_11"))},prefix:{required:!0,trigger:["blur","input"],validator:()=>""!==F.prefix.trim()||new Error(_("Site.RulesError.index_10"))}},M=e=>{var a;if(null==(a=A.value)||a.restoreValidation(),!e)return void(F.domain=F.domain_auto[0]);const l=F.domain.trim();l!==F.domain_auto[0]&&(F.domain_auto=l?[l]:[""],F.domain_auto.forEach(((e,a)=>{var l;return null==(l=C.value)?void 0:l.onDomainItemBlur(e,a)})))};return i({onConfirm:async()=>{var e;await new Promise(((e,a)=>{0===H.value.filter((e=>e.hash)).length&&1===F.type?(d.error("This domain does not support automatic resolution, please choose manual resolution"),a(!1)):e(!0)})),await(null==(e=A.value)?void 0:e.validate());const{message:a}=await z((()=>{const{domain:e,php_version:a}=F,l=e.replace(new RegExp(/([-.])/g),"_");if(null===a)throw d.error(_("Site.RulesError.index_5")),new Error(_("Site.RulesError.index_5"));const t=H.value.filter((e=>e.hash)).map((e=>({domain:e.domain,hash:e.hash,support:[...e.auto?["auto"]:[],...e.ssl_cert?["ssl_cert"]:[],...e.cf_proxy?["cf_proxy"]:[]]})));return{webname:{domain:e,domainlist:[],count:0},type:"PHP",port:80,type_id:0,ftp:!1,sql:"MySQL",codeing:"utf8",set_ssl:0,force_ssl:0,project_type:"WP",path:v.sitePath+"/"+(0===F.type?e:F.domain_auto[0]),ps:l,version:a,datauser:"sql_"+l,datapassword:r(16),password:F.admin_password,pw_weak:F.pw_weak?"on":"off",email:F.admin_email,weblog_title:F.weblog_title,language:F.language,user_name:F.user_name,prefix:F.prefix,enable_cache:F.enable_cache?1:0,enable_whl:0,whl_page:F.Login_url?F.Login_url:null,whl_redirect_admin:F.redirection_url?F.redirection_url:null,package_version:F.wp_version,wp_parse_list:1===F.type&&t.length?JSON.stringify(t):null,is_create_default_file:F.is_create_default_file}})());s(a)&&p.getList()}}),(e,t)=>{const i=o,r=I,n=O,s=u,d=T,p=B,_=J,m=Q,v=G,c=K,y=l,S=a;return f(),h(S,{install:b(x).setup&&b(w).setup},{desc:j((()=>[k("span",null,$(e.$t("WP.index_6")),1),b(w).setup?L("",!0):(f(),h(i,{key:0,class:"ml-4px",onClick:t[0]||(t[0]=e=>b(V)("php-8.0"))},{default:j((()=>[P($(e.$t("WP.index_7")),1)])),_:1})),b(x).setup?L("",!0):(f(),E("span",se,[t[17]||(t[17]=k("span",{class:"mx-4px"},"|",-1)),U(i,{onClick:t[1]||(t[1]=e=>b(V)("mysql"))},{default:j((()=>[P($(e.$t("WP.index_8")),1)])),_:1})]))])),default:j((()=>[U(y,{ref_key:"formRef",ref:A,model:b(F),rules:D},{default:j((()=>[U(d,{label:e.$t("SSL.index_1")},{default:j((()=>[U(n,{value:b(F).type,"onUpdate:value":[t[2]||(t[2]=e=>b(F).type=e),M]},{default:j((()=>[U(r,{value:0},{default:j((()=>[P($(e.$t("SSL.index_2")),1)])),_:1}),U(r,{value:1},{default:j((()=>[P($(e.$t("SSL.index_3")),1)])),_:1})])),_:1},8,["value"]),U(s,{name:"ssl-stars",size:22})])),_:1},8,["label"]),R(U(d,{label:e.$t("Site.Lable.index_1"),path:"domain_auto"},{default:j((()=>[U(le,{ref_key:"domainInputRef",ref:C,value:b(F).domain_auto,"onUpdate:value":t[3]||(t[3]=e=>b(F).domain_auto=e),"parse-list":b(H),"onUpdate:parseList":t[4]||(t[4]=e=>W(H)?H.value=e:null),is_wp:""},null,8,["value","parse-list"])])),_:1},8,["label"]),[[q,1===b(F).type]]),R(U(d,{label:e.$t("Site.Lable.index_1"),path:"domain"},{default:j((()=>[k("div",oe,[U(p,{value:b(F).domain,"onUpdate:value":t[5]||(t[5]=e=>b(F).domain=e),placeholder:e.$t("Site.Placeholder.index_12")},null,8,["value","placeholder"])])])),_:1},8,["label"]),[[q,0===b(F).type]]),U(d,{label:e.$t("Site.Lable.index_20"),path:"weblog_title"},{default:j((()=>[k("div",ue,[U(p,{value:b(F).weblog_title,"onUpdate:value":t[6]||(t[6]=e=>b(F).weblog_title=e),placeholder:e.$t("Site.Placeholder.index_13")},null,8,["value","placeholder"])])])),_:1},8,["label"]),U(d,{label:e.$t("Site.Lable.index_21"),path:"language"},{default:j((()=>[k("div",de,[U(ae,{value:b(F).language,"onUpdate:value":t[7]||(t[7]=e=>b(F).language=e)},null,8,["value"])])])),_:1},8,["label"]),U(d,{label:e.$t("Site.Lable.index_22"),path:"php_version"},{default:j((()=>[k("div",pe,[U(re,{value:b(F).php_version,"onUpdate:value":t[8]||(t[8]=e=>b(F).php_version=e)},null,8,["value"])])])),_:1},8,["label"]),U(d,{label:e.$t("Site.Lable.index_23"),path:"wp_version"},{default:j((()=>[U(m,{class:"items-center",size:8},{default:j((()=>[U(ne,{value:b(F).wp_version,"onUpdate:value":t[9]||(t[9]=e=>b(F).wp_version=e),class:"w-230px"},null,8,["value"]),U(_,{trigger:"hover"},{trigger:j((()=>[U(s,{name:"common-ask",size:"18",color:"#999"})])),default:j((()=>[P(" "+$(e.$t("WP.Add.index_8")),1)])),_:1})])),_:1})])),_:1},8,["label"]),U(d,{label:e.$t("Site.Lable.index_24"),path:"user_name"},{default:j((()=>[k("div",_e,[U(p,{value:b(F).user_name,"onUpdate:value":t[10]||(t[10]=e=>b(F).user_name=e),placeholder:e.$t("Site.Placeholder.index_14")},null,8,["value","placeholder"])])])),_:1},8,["label"]),U(d,{label:e.$t("Site.Lable.index_27"),path:"admin_password"},{default:j((()=>[k("div",me,[U(p,{value:b(F).admin_password,"onUpdate:value":t[11]||(t[11]=e=>b(F).admin_password=e),placeholder:e.$t("Site.Placeholder.index_15")},null,8,["value","placeholder"])]),U(v,{checked:b(F).pw_weak,"onUpdate:checked":t[12]||(t[12]=e=>b(F).pw_weak=e)},{default:j((()=>[k("span",null,$(e.$t("WP.Add.index_9")),1)])),_:1},8,["checked"])])),_:1},8,["label"]),U(d,{label:e.$t("Site.Lable.index_28"),path:"admin_email"},{default:j((()=>[k("div",ve,[U(p,{value:b(F).admin_email,"onUpdate:value":t[13]||(t[13]=e=>b(F).admin_email=e),placeholder:e.$t("Site.Placeholder.index_16")},null,8,["value","placeholder"])])])),_:1},8,["label"]),U(d,{label:e.$t("Site.Lable.index_29"),path:"prefix"},{default:j((()=>[k("div",ce,[U(p,{value:b(F).prefix,"onUpdate:value":t[14]||(t[14]=e=>b(F).prefix=e),placeholder:e.$t("Site.Placeholder.index_17")},null,8,["value","placeholder"])])])),_:1},8,["label"]),U(d,{label:e.$t("Site.Lable.index_31"),"show-feedback":!1},{default:j((()=>[U(v,{checked:b(F).enable_cache,"onUpdate:checked":t[15]||(t[15]=e=>b(F).enable_cache=e),disabled:"nginx"!==b(g).type},{default:j((()=>[k("span",null,$(e.$t("WP.Add.index_10")),1)])),_:1},8,["checked","disabled"])])),_:1},8,["label"]),U(d,{label:e.$t("SSL.SiteSSL.index_18")},{default:j((()=>[U(c,{value:b(F).is_create_default_file,"onUpdate:value":t[16]||(t[16]=e=>b(F).is_create_default_file=e)},null,8,["value"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["install"])}}}),he=_({__name:"upload",props:{path:{default:"/"}},emits:["finish"],setup(e,{emit:a}){const l=e,t=a,i=c([]),r=async({file:e})=>{try{const a=new FormData;a.append("f_path",l.path),a.append("f_name",e.name),a.append("f_start","0"),e.file&&(a.append("blob",e.file),a.append("f_size",e.file.size.toString())),await ie(a),t("finish","".concat(l.path,"/").concat(e.name))}finally{i.value=[]}};return(e,a)=>{const l=X,t=p;return f(),h(t,{ref:"upload",class:"w-auto",action:"","file-list":b(i),"onUpdate:fileList":a[0]||(a[0]=e=>W(i)?i.value=e:null),"show-file-list":!1,multiple:!1,"custom-request":r},{default:j((()=>[U(l,null,{default:j((()=>[A(e.$slots,"default")])),_:3})])),_:3},8,["file-list"])}}}),be={class:"w-302px ml-12px"},ge={class:"w-400px"},xe={class:"w-230px"},we=_({__name:"index",setup(e,{expose:a}){const{t:i}=y(),r=t(),{web:n}=m(r),s=c(null),o=c(null),u=S({method:1,bak_file:"",domain:"",sub_path:"",php_version:null,enable_cache:!1}),d={bak_file:{trigger:["blur","input"],validator:()=>""!==u.bak_file.trim()||new Error(i("WP.Add.import_6"))},domain:{trigger:["blur","input"],validator:()=>""!==u.domain.trim()||new Error(i("Site.RulesError.index_31"))},php_version:{trigger:"change",validator:()=>null!==u.php_version||new Error(i("Site.RulesError.index_5"))}},p=w((()=>u.domain?"/".concat(u.domain,"/"):"/")),_=()=>{var e;null==(e=o.value)||e.restoreValidation()},v=e=>{u.bak_file=e};return a({onConfirm:async()=>{var e;await(null==(e=s.value)?void 0:e.validate());const a={bak_file:u.bak_file,domain:u.domain,sub_path:u.sub_path,php_ver_short:u.php_version||"",enable_cache:u.enable_cache?1:0};1===u.method?await H(a):await F(a),r.setRefresh(!0)}}),(e,a)=>{const t=Y,i=O,m=T,c=te,g=B,x=Z,w=ee,y=G,S=l;return f(),h(S,{ref_key:"formRef",ref:s,modelValue:b(u),"onUpdate:modelValue":a[6]||(a[6]=e=>W(u)?u.value=e:null),rules:d},{default:j((()=>[U(m,{label:e.$t("WP.Add.import_1")},{default:j((()=>[U(i,{value:b(u).method,"onUpdate:value":a[0]||(a[0]=e=>b(u).method=e)},{default:j((()=>[U(t,{label:e.$t("WP.Add.import_2"),value:1},null,8,["label"]),U(t,{label:e.$t("WP.Add.import_3"),value:2},null,8,["label"])])),_:1},8,["value"])])),_:1},8,["label"]),U(m,{ref_key:"bakFileRef",ref:o,label:e.$t("WP.Add.import_4"),path:"bak_file"},{default:j((()=>[U(he,{path:"/www/server/panel/temp",onFinish:v},{default:j((()=>a[7]||(a[7]=[P(" Upload file ")]))),_:1}),k("div",be,[U(c,{value:b(u).bak_file,"onUpdate:value":a[1]||(a[1]=e=>b(u).bak_file=e),"default-path":"/www/backup/wordpress","checked-type":["file"],onChange:_},null,8,["value"])])])),_:1},8,["label"]),U(m,{label:e.$t("Site.Lable.index_1"),path:"domain"},{default:j((()=>[k("div",ge,[U(g,{value:b(u).domain,"onUpdate:value":a[2]||(a[2]=e=>b(u).domain=e),placeholder:e.$t("Site.Placeholder.index_12")},null,8,["value","placeholder"])])])),_:1},8,["label"]),U(m,{label:e.$t("Site.PHP.add_site_9"),path:"path"},{default:j((()=>[U(w,{class:"w-400px"},{default:j((()=>[U(x,null,{default:j((()=>[P($(b(r).sitePath)+$(b(p)),1)])),_:1}),U(g,{value:b(u).sub_path,"onUpdate:value":a[3]||(a[3]=e=>b(u).sub_path=e),placeholder:e.$t("WP.Add.import_5")},null,8,["value","placeholder"])])),_:1})])),_:1},8,["label"]),U(m,{label:e.$t("Site.Lable.index_22"),path:"php_version"},{default:j((()=>[k("div",xe,[U(re,{value:b(u).php_version,"onUpdate:value":a[4]||(a[4]=e=>b(u).php_version=e)},null,8,["value"])])])),_:1},8,["label"]),U(m,{label:e.$t("Site.Lable.index_31"),"show-feedback":!1},{default:j((()=>[U(y,{checked:b(u).enable_cache,"onUpdate:checked":a[5]||(a[5]=e=>b(u).enable_cache=e),disabled:"nginx"!==b(n).type},{default:j((()=>[P($(e.$t("WP.Add.index_10")),1)])),_:1},8,["checked","disabled"])])),_:1},8,["label"])])),_:1},8,["modelValue"])}}}),ye={class:"p-20px h-full"},Se=_({__name:"index",props:{done:{type:Function}},setup(a,{expose:l}){const{t:t}=y(),i=a,r=c("single"),n=c(),s=[{key:"single",label:t("WP.Add.index_1"),isLazy:!0,component:fe,data:{getList:i.done}},{key:"import",label:t("WP.Add.index_2"),isLazy:!0,component:we}];return l({onConfirm:async()=>{var e;await(null==(e=n.value)?void 0:e.onConfirm())}}),(a,l)=>{const t=e;return f(),E("div",ye,[U(t,{ref_key:"tabsRef",ref:n,value:b(r),"onUpdate:value":l[0]||(l[0]=e=>W(r)?r.value=e:null),options:s},null,8,["value"])])}}});export{Se as default};
