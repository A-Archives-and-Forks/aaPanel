System.register(["./index-legacy226.js?v=1744703330658","./index-legacy95.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy21.js?v=1744703330658","./vue-legacy.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy10.js?v=1744703330658","./page_layout-legacy.js?v=1744703330658","./soft-legacy.js?v=1744703330658","./public-legacy.js?v=1744703330658","./naive-legacy.js?v=1744703330658","./php-legacy.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1744703330658","./index-legacy96.js?v=1744703330658","./index-legacy103.js?v=1744703330658","./logs-legacy.js?v=1744703330658","./file-legacy.js?v=1744703330658","./alarm-legacy.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy11.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy15.js?v=1744703330658","./theme-chrome-legacy.js?v=1744703330658","./__commonjsHelpers__-legacy.js?v=1744703330658","./common-legacy.js?v=1744703330658"],(function(e,n){"use strict";var a,t,l,s,i,o,u,_,c,r,d,f,b,p,y,m,g,x,h,z,v,w,k,q,P,M,j,S,B,N,I,C,$,T,U,F,L,G,R,K,O,Q,A,D,E,H,J,V,W,Y,X,Z,ee,ne,ae,te,le,se,ie,oe;return{setters:[e=>{a=e._},e=>{t=e._},e=>{l=e._,s=e.a},e=>{i=e.d,o=e.R,u=e.S,_=e.P,c=e.a0,r=e.U,d=e.a1,f=e.F,b=e.O,p=e.V,y=e.c,m=e.$,g=e.r,x=e.af,h=e.j,z=e.N},e=>{v=e._},e=>{w=e.e7,k=e.e8,q=e.e9,P=e.cz,M=e.ea,j=e.d,S=e.l,B=e.W,N=e.h,I=e.eb,C=e.aa,$=e.ab,T=e.K,U=e.ec,F=e.ed,L=e.ee,G=e.ef,R=e.I,K=e.eg,O=e.eh},e=>{Q=e.g,A=e.m,D=e.p},e=>{E=e.a,H=e.c,J=e.b,V=e.f,W=e.w},e=>{Y=e.T,X=e.bU,Z=e.bY,ee=e.b$,ne=e.cn},e=>{ae=e.s},e=>{te=e._},e=>{le=e._},e=>{se=e._},e=>{ie=e.o},e=>{oe=e.b},null,null,null,null,null,null,null],execute:function(){const n=i({__name:"index",setup:e=>(e,n)=>{const a=t;return o(),u(f,null,[_(l),_(a,{class:"mt-10px"},{default:c((()=>[r("li",null,d(e.$t("Plugin.Mysql.index_25")),1)])),_:1})],64)}}),ue=i({__name:"index",setup(e,{expose:n}){const{t:a}=b(),l=()=>{E({title:a("Plugin.Mysql.index_16"),content:a("Plugin.Mysql.index_17",[A.datadir]),onConfirm:async()=>{await w({datadir:A.datadir})}})};return Q(),n({init:Q}),(e,n)=>{const a=v,s=Y,i=X,b=t;return o(),u(f,null,[_(i,null,{default:c((()=>[_(a,{value:p(A).datadir,"onUpdate:value":n[0]||(n[0]=e=>p(A).datadir=e),class:"w-300px"},null,8,["value"]),_(s,{type:"primary",onClick:l},{default:c((()=>[y(d(e.$t("Plugin.Mysql.index_13")),1)])),_:1})])),_:1}),_(b,{class:"mt-10px"},{default:c((()=>[r("li",null,d(e.$t("Plugin.Mysql.index_14")),1),r("li",null,d(e.$t("Plugin.Mysql.index_15")),1)])),_:1})],64)}}}),_e=i({__name:"index",setup(e,{expose:n}){const a=async()=>{await k({port:A.port})};return Q(),n({init:Q}),(e,n)=>{const t=Z,l=Y,s=X;return o(),m(s,null,{default:c((()=>[_(t,{class:"w-100px!","show-button":!1,value:p(A).port,"onUpdate:value":n[0]||(n[0]=e=>p(A).port=e),placeholder:e.$t("Site.TableRow.index_16")},null,8,["value","placeholder"]),_(l,{type:"primary",onClick:a},{default:c((()=>[y(d(e.$t("Public.Btn.Conf")),1)])),_:1})])),_:1})}}}),ce=i({__name:"index",setup(e,{expose:n}){const{t:a}=b(),l=g(!1),s=async()=>{try{await q()}catch{l.value=!l.value}},i=()=>{E({title:a("Plugin.Mysql.index_22",[D.title]),content:a("Plugin.Mysql.index_24",[D.title]),onConfirm:async()=>{await ae({name:"mysqld",type:"restart"})}})},m=()=>{P(encodeURIComponent("/www/server/data/ssl.zip"))},{loading:h,setLoading:z}=H(),v=async()=>{try{z(!0);const{message:e}=await M();j(e)&&(l.value=e.status)}finally{z(!1)}};return v(),n({init:v}),(e,n)=>{const a=ee,b=Y,g=X,z=S,v=t;return o(),u(f,null,[_(g,{class:"items-center"},{default:c((()=>[r("span",null,d(e.$t("Plugin.Mysql.index_30"))+" Mysql SSL",1),_(a,{value:p(l),"onUpdate:value":[n[0]||(n[0]=e=>x(l)?l.value=e:null),s],loading:p(h)},null,8,["value","loading"]),_(b,{onClick:i,type:"primary"},{default:c((()=>[y(d(e.$t("Plugin.Mysql.index_22",[p(D).title])),1)])),_:1})])),_:1}),_(z,{class:"my-16px!"}),_(v,{class:"mb-16px"},{default:c((()=>[r("li",null,d(e.$t("Database.Mysql.index_27")),1),r("li",null,[y(d(e.$t("Database.Mysql.index_28"))+" ",1),r("a",{class:"bt-link",onClick:m},"【SSL.zip】")])])),_:1})],64)}}}),re=[{label:"Launch Time",value:"Run",isTime:!0},{label:"Total Connections",value:"Connections"},{label:"Send",value:"Bytes_sent",isSize:!0},{label:"Receive",value:"Bytes_received",isSize:!0},{label:"Query per second",value:"query"},{label:"Transaction per second",value:"transaction"},{label:"File",value:"File"},{label:"Position",value:"Position"}],de=[{name:"Active/Max connections",function:e=>e.Threads_running+"/"+e.Max_used_connections,value:"",ps:"If too high, increase max_connections"},{name:"Thread cache hit rate",value:"",function:e=>{const n=(100*(1-Number(e.Threads_created)/Number(e.Connections))).toFixed(2);return n?n+"%":"0"},ps:"If too low, increase thread_cache_size"},{value:"",name:"Index hit rate",function:e=>{const n=Number(e.Key_reads),a=Number(e.Key_read_requests);return(a>0?(100*(1-n/a)).toFixed(2):"0.00")+"%"},ps:"If too low, increase key_buffer_size"},{value:"",name:"Innodb index hit rate",function:e=>{const n=(100*(1-Number(e.Innodb_buffer_pool_reads)/Number(e.Innodb_buffer_pool_read_requests))).toFixed(2);return n||"0"},ps:"If too low, increase innodb_buffer_pool_size"},{value:"",name:"Query cache hit rate",function:e=>{let n=(parseInt(e.Qcache_hits)/(parseInt(e.Qcache_hits)+parseInt(e.Qcache_inserts))*100).toFixed(2)+"%";return"NaN%"==n&&(n="OFF"),n},ps:"If too low, increase query_cache_size"},{value:"",name:"Created temporary tables to disk",function:e=>{const n=(Number(e.Created_tmp_disk_tables)/Number(e.Created_tmp_tables)*100).toFixed(2);return n?n+"%":"0"},ps:"If too high, increase tmp_table_size"},{value:"",name:"Opened table",function:e=>e.Open_tables,ps:"If too high, increase table_open_cache"},{value:"",name:"Amount unindexed",function:e=>e.Select_full_join,ps:"If not 0, please check index of database table"},{value:"",name:"Amount unindexed in table join",function:e=>e.Select_range_check,ps:"If not 0, please check index of database table"},{value:"",name:"Number of merges after sorting",function:e=>e.Sort_merge_passes,ps:"If too high, increase sort_buffer_size"},{value:"",name:"Number of lock tables",function:e=>e.Table_locks_waited,ps:"If too high, consider increase your database performance"}],fe=i({__name:"index",setup(e,{expose:n}){const{t:a}=b(),t=h({}),{table:l,columns:s}=J([{title:a("Plugin.Apache.index_12"),key:"name",width:"30%"},{title:a("Plugin.Apache.index_13"),key:"value",width:"20%"},{title:a("Public.Table.Note"),key:"ps",ellipsis:{tooltip:!0}}]),i=e=>{if("query"===e.value)return parseInt((Number(t.Questions)/Number(t.Uptime)).toString());if("transaction"===e.value)return parseInt(((parseInt(t.Com_commit)+parseInt(t.Com_rollback))/Number(t.Uptime)).toString());const n=t[e.value];return void 0===n?"--":e.isTime?B(n):e.isSize?N(n):n},{loading:r,setLoading:g}=H(),x=async()=>{try{g(!0);const{message:e}=await I();j(e)&&(Object.assign(t,e),de.forEach((e=>{e.function&&(e.value=e.function(t))})),l.data=de)}finally{g(!1)}};return x(),n({init:x}),(e,n)=>{const a=C,t=$,b=T,g=te;return o(),u(f,null,[_(b,{show:p(r)},{default:c((()=>[_(t,{"label-placement":"left",bordered:"",column:2},{default:c((()=>[(o(!0),u(f,null,z(p(re),(e=>(o(),m(a,{label:e.label,key:e.value},{default:c((()=>[y(d(i(e)),1)])),_:2},1032,["label"])))),128))])),_:1})])),_:1},8,["show"]),_(g,{class:"mt-10px",loading:p(r),data:p(l).data,columns:p(s)},null,8,["loading","data","columns"])],64)}}}),be=[{label:"1-2GB",value:"1-2GB",data:{key_buffer_size:32,query_cache_size:32,tmp_table_size:32,innodb_buffer_pool_size:64,sort_buffer_size:256,read_buffer_size:256,read_rnd_buffer_size:256,join_buffer_size:512,thread_stack:256,binlog_cache_size:64,thread_cache_size:64,table_open_cache:128,max_connections:100}},{label:"2-4GB",value:"2-4GB",data:{key_buffer_size:64,query_cache_size:64,tmp_table_size:64,innodb_buffer_pool_size:128,sort_buffer_size:512,read_buffer_size:512,read_rnd_buffer_size:512,join_buffer_size:1024,thread_stack:256,binlog_cache_size:64,thread_cache_size:96,table_open_cache:192,max_connections:200}},{label:"4-8GB",value:"4-8GB",data:{key_buffer_size:128,query_cache_size:128,tmp_table_size:128,innodb_buffer_pool_size:256,sort_buffer_size:1024,read_buffer_size:1024,read_rnd_buffer_size:768,join_buffer_size:2048,thread_stack:256,binlog_cache_size:128,thread_cache_size:128,table_open_cache:384,max_connections:300}},{label:"8-16GB",value:"8-16GB",data:{key_buffer_size:256,query_cache_size:256,tmp_table_size:256,innodb_buffer_pool_size:512,sort_buffer_size:1024,read_buffer_size:2048,read_rnd_buffer_size:1024,join_buffer_size:2048,thread_stack:384,binlog_cache_size:192,thread_cache_size:192,table_open_cache:1024,max_connections:400}},{label:"16-32GB",value:"16-32GB",data:{key_buffer_size:1024,query_cache_size:384,tmp_table_size:1024,innodb_buffer_pool_size:1024,sort_buffer_size:4096,read_buffer_size:4096,read_rnd_buffer_size:2048,join_buffer_size:4096,thread_stack:512,binlog_cache_size:256,thread_cache_size:256,table_open_cache:2048,max_connections:500}}],pe={key_buffer_size:"MB, Buffer size for indexing",query_cache_size:"MB, Query cache, set to 0 for not enabled",tmp_table_size:"MB, Temporary table cache size",innodb_buffer_pool_size:"MB, Innodb buffer size",innodb_log_buffer_size:"MB, Innodb log buffer size",sort_buffer_size:"KB * Num of connections, Buffer size per thread sort",read_buffer_size:"KB * Num of connections, Read buffer size",read_rnd_buffer_size:"KB * Num of connections, Random read buffer size",join_buffer_size:"KB * Num of connections, Join table buffer size",thread_stack:"KB * Num of connections, Stack size per thread",binlog_cache_size:"KB * Num of connections, Bin log cache size (multiples of 4096)",thread_cache_size:"Thread cache size",table_open_cache:"Table open cache (NOT exceed 2048 at most)",max_connections:"Max connections"},ye={class:"w-150px!"},me={class:"w-250px! color-#666"},ge={class:"color-#666"},xe=i({__name:"index",setup(e,{expose:n}){const{t:a}=b(),t=g(),l=g(),s=h({}),i=(e,n)=>{for(const a in n.data)s[a]=n.data[a];v()},v=()=>{const e=new Set(["key_buffer_size","query_cache_size","tmp_table_size","innodb_buffer_pool_size","innodb_log_buffer_size"]),n=new Set(["sort_buffer_size","read_buffer_size","read_rnd_buffer_size","join_buffer_size","thread_stack","binlog_cache_size"]),a=Number(s.max_connections||0),{a:t,b:i}=Object.entries(s).reduce(((a,[t,l])=>{const s=Number(l);return e.has(t)?a.a+=s:n.has(t)&&(a.b+=s/1024),a}),{a:0,b:0});l.value=(t+i*a).toString()},w=async()=>{const e={...s,query_cache_type:s.query_cache_size>0?1:0,max_heap_table_size:s.tmp_table_size};await U(e),v()},k=()=>{E({title:a("Plugin.Mysql.index_22",[D.title]),content:a("Plugin.Mysql.index_24",[D.title]),onConfirm:async()=>{await ae({name:"mysqld",type:"restart"})}})},{loading:q,setLoading:P}=H(),M=async()=>{try{P(!0),t.value=null;const{message:e}=await F();if(j(e)){const n=e.mem;n.join_buffer_size??=512,n.thread_stack??=256,n.binlog_cache_size??=32;for(const e in pe)e in n&&(s[e]=n[e]);v()}}finally{P(!1)}};return M(),n({init:M}),(e,n)=>{const a=ne,b=X,g=le,h=S,v=Z,P=Y,M=T;return o(),u(f,null,[_(b,{class:"justify-center!"},{default:c((()=>[_(b,{class:"items-center"},{default:c((()=>[r("span",null,d(e.$t("Plugin.Mysql.index_20")),1),_(a,{class:"w-150px",value:p(t),"onUpdate:value":[n[0]||(n[0]=e=>x(t)?t.value=e:null),i],options:p(be),placeholder:e.$t("Ftp.Placeholder.Index_2")},null,8,["value","options","placeholder"])])),_:1}),_(b,{class:"items-center"},{default:c((()=>[y(d(e.$t("Plugin.Mysql.index_21")),1),_(g,{text:"MB",class:"w-150px!",value:p(l),"onUpdate:value":n[1]||(n[1]=e=>x(l)?l.value=e:null),readonly:""},null,8,["value"])])),_:1})])),_:1}),_(h,{class:"my-10px!"}),_(M,{show:p(q)},{default:c((()=>[(o(!0),u(f,null,z(p(s),((e,n)=>(o(),m(b,{class:"items-center flex-nowrap! py-2px",key:n},{default:c((()=>[r("div",ye,d(n),1),_(v,{class:"w-150px!",value:p(s)[n],"onUpdate:value":e=>p(s)[n]=e,min:0,"show-button":!1},null,8,["value","onUpdate:value"]),r("div",me,d(p(pe)[n]),1)])),_:2},1024)))),128)),_(b,{class:"items-center justify-center! mt-10px"},{default:c((()=>[_(P,{type:"primary",onClick:w},{default:c((()=>[y(d(e.$t("Public.Btn.Save")),1)])),_:1}),_(P,{onClick:k},{default:c((()=>[y(d(e.$t("Plugin.Mysql.index_22",[p(D).title])),1)])),_:1}),r("span",ge,"*"+d(e.$t("Plugin.Mysql.index_23")),1)])),_:1})])),_:1},8,["show"])],64)}}}),he=i({__name:"index",setup(e,{expose:n}){const a=g("None"),{loading:t,setLoading:l}=H(),s=async()=>{await ie({close:1}),i()},i=async()=>{try{l(!0);const{message:e}=await ie();j(e)&&(a.value=e.result?e.result:"None")}finally{l(!1)}};return i(),n({init:i}),(e,n)=>{const l=Y,i=se,r=T;return o(),u(f,null,[_(l,{class:"mb-10px",onClick:s},{default:c((()=>[y(d(e.$t("Crontab.Planned.index_25")),1)])),_:1}),_(r,{class:"h-580px",show:p(t)},{default:c((()=>[_(i,{log:p(a)},null,8,["log"])])),_:1},8,["show"])],64)}}}),ze=i({__name:"index",setup(e,{expose:n}){const a=g("None"),{loading:t,setLoading:l}=H(),s=async()=>{try{l(!0);const{message:e}=await L();j(e)&&(a.value=e.result?e.result:"None")}finally{l(!1)}};return s(),n({init:s}),(e,n)=>{const l=se,s=T;return o(),m(s,{class:"h-610px",show:p(t)},{default:c((()=>[_(l,{log:p(a)},null,8,["log"])])),_:1},8,["show"])}}}),ve={class:"ml-20px"},we=i({__name:"index",setup(e,{expose:n}){const{t:a}=b(),l=h({binlog_status:!1,size:0}),{table:s,columns:i}=J([{key:"name",title:a("Site.TableRow.index_22")},{key:"title",title:a("Site.TableRow.index_23"),render:e=>N(e.size)},{key:"title",title:a("Plugin.Mysql.index_8"),render:e=>B(e.last_modified)},V({width:70,options:e=>[{label:a("Public.Btn.Del"),onClick:()=>{W({title:a("Plugin.Mysql.index_9"),content:a("Plugin.Mysql.index_10",[e.name]),onConfirm:async()=>{await oe({path:e.path}),z()}})}}]})]),y=e=>{const n=a(e?"Public.Confirm.Enable":"Public.Status.Disable"),t=a(e?"Plugin.Mysql.index_11":"Plugin.Mysql.index_12");E({title:`${n} ${a("Plugin.Mysql.index_6")}`,content:t,onConfirm:async()=>{await K(),x()}})},{loading:m,setLoading:g}=H(),x=async()=>{const{message:e}=await K({status:1});j(e)&&(l.binlog_status=e.binlog_status,l.size=e.size)},z=async()=>{try{g(!0);const{message:e}=await G();R(e)&&(s.data=e)}finally{g(!1)}},v=()=>{x(),z()};return v(),n({init:v}),(e,n)=>{const a=ee,b=X,g=S,x=t,h=te;return o(),u(f,null,[_(b,{class:"items-center"},{default:c((()=>[r("span",null,d(e.$t("Plugin.Mysql.index_6")),1),_(a,{value:p(l).binlog_status,loading:p(m),"onUpdate:value":y},null,8,["value","loading"]),r("span",ve,d(p(N)(p(l).size)),1)])),_:1}),_(g,{class:"my-16px!"}),_(x,{class:"mb-16px"},{default:c((()=>[r("li",null,d(e.$t("Plugin.Mysql.index_7")),1)])),_:1}),_(h,{loading:p(m),data:p(s).data,columns:p(i),"max-height":400},null,8,["loading","data","columns"])],64)}}}),ke=i({__name:"index",setup(e,{expose:n}){const a=g(!1),l=async e=>{await O({status:e?1:0}),b()},{loading:s,setLoading:i}=H(),b=async()=>{try{i(!0),await O(),a.value=!0}catch{a.value=!1}finally{i(!1)}};return b(),n({init:b}),(e,n)=>{const i=ee,b=X,y=S,m=t;return o(),u(f,null,[_(b,{class:"items-center"},{default:c((()=>[r("span",null,d(e.$t("Plugin.Mysql.index_18")),1),_(i,{value:p(a),"onUpdate:value":[n[0]||(n[0]=e=>x(a)?a.value=e:null),l],loading:p(s)},null,8,["value","loading"])])),_:1}),_(y,{class:"my-16px!"}),_(m,{class:"mb-16px"},{default:c((()=>[r("li",null,d(e.$t("Plugin.Mysql.index_19")),1)])),_:1})],64)}}});e("default",i({__name:"index",setup(e){const{t:t}=b(),l=g("service"),i=[{key:"service",label:t("Security.History.Index_10"),component:n},{key:"file",label:t("Site.Config.index_15"),data:{path:"/etc/my.cnf"},component:s},{key:"location",label:t("Plugin.Mysql.index_26"),component:ue},{key:"port",label:t("Site.TableRow.index_16"),component:_e},{key:"ssl",label:"SSL",component:ce},{key:"status",label:t("Docker.Setting.index_2"),component:fe},{key:"optimization",label:t("Plugin.Mysql.index_27"),component:xe},{key:"logs",label:t("Site.Config.index_101"),component:he},{key:"slow",label:t("Plugin.Mysql.index_28"),component:ze},{key:"binary",label:t("Plugin.Mysql.index_6"),component:we},{key:"memory",label:t("Plugin.Mysql.index_18"),component:ke}];return(e,n)=>{const t=a;return o(),m(t,{value:p(l),"onUpdate:value":n[0]||(n[0]=e=>x(l)?l.value=e:null),data:i},null,8,["value"])}}}))}}}));
