import{_ as e}from"./index104.js?v=1744703330658";import{_ as s}from"./index95.js?v=1744703330658";import{_ as a}from"./index99.js?v=1744703330658";import{ae as l,af as t}from"./mail.js?v=1744703330658";import{s as i}from"./index48.js?v=1744703330658";import{c as n,a as o,b as r}from"./public.js?v=1744703330658";import{m as d,k as u,d as c}from"./page_layout.js?v=1744703330658";import{bU as p,b$ as m,cq as _,T as f,ch as y}from"./naive.js?v=1744703330658";import{d as v,O as h,r as x,e as b,R as w,S as k,V as j,$ as g,a0 as C,P as S,U as $,a1 as D,ap as P,af as L,c as U,ai as z,j as M}from"./vue.js?v=1744703330658";import{_ as A}from"./index.vue_vue_type_script_setup_true_lang.js?v=1744703330658";import{_ as B}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1744703330658";import{o as O,p as R}from"./ssl.js?v=1744703330658";import"./index.js?v=1744703330658";import"./common.js?v=1744703330658";import"./__commonjsHelpers__.js?v=1744703330658";import"./index.vue_vue_type_script_setup_true_lang4.js?v=1744703330658";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1744703330658";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1744703330658";const V={class:"cert-info"},q={class:"cert-label"},G={class:"cert-value"},N={class:"cert-info"},T={class:"cert-label"},H={class:"cert-value"},I={class:"cert-info mt-10px"},Y={class:"cert-label mr-10px"},E={class:"w-48%"},F={class:"mb-8px"},J={class:"w-48%"},K={class:"mb-8px"},Q=u(v({__name:"index",props:{row:{}},emits:["close","refresh"],setup(e,{emit:r}){const u=e,c=r,{row:y}=u,{t:v}=h(),z=x(y.ssl_info.key||""),M=x(y.ssl_info.src||""),A=b((()=>(y.ssl_info.dns||[]).join(", "))),B=async()=>{""!==z.value&&""!==M.value?(await l({domain:y.domain,key:z.value,csr:M.value}),c("refresh"),c("close")):d.error(v("Mail.Domain.index_31"))},O=()=>{o({title:v("Mail.Domain.index_32"),content:v("Mail.Domain.index_33"),onConfirm:async()=>{await t({domain:y.domain,key:z.value,csr:M.value}),c("refresh"),c("close")}})},{loading:R,setLoading:Q}=n(),W=async e=>{try{Q(!0),await i({domain:y.domain,open:e}),y.ssl_alarm=e}catch(s){y.ssl_alarm=1===e?0:1}finally{Q(!1)}};return(e,l)=>{const t=p,i=m,n=_,o=a,r=f,d=s;return w(),k("div",null,[j(y).ssl_status?(w(),g(n,{key:0,class:"mb-16px",type:"success","show-icon":!1},{default:C((()=>[S(t,{class:"items-center"},{default:C((()=>[$("div",V,[$("span",q,D(e.$t("Site.Cert.index_30"))+D(e.$t("Public.Punctuation.Colon")),1),$("span",G,D(j(y).ssl_info.issuer),1)]),$("div",N,[$("span",T,D(e.$t("Site.Cert.index_46"))+D(e.$t("Public.Punctuation.Colon")),1),$("span",H,D(j(A)),1)])])),_:1}),$("div",I,[$("span",Y,D(e.$t("SSL.Domain.index_26")),1),S(i,{size:"small",loading:j(R),"rubber-band":!1,value:j(y).ssl_alarm,"onUpdate:value":W,"checked-value":1,"unchecked-value":0},null,8,["loading","value"])])])),_:1})):P("",!0),S(t,{class:"mb-16px",size:10,justify:"space-between"},{default:C((()=>[$("div",E,[$("div",F,D(e.$t("Site.Cert.index_50")),1),S(o,{value:j(z),"onUpdate:value":l[0]||(l[0]=e=>L(z)?z.value=e:null),rows:10},null,8,["value"])]),$("div",J,[$("div",K,D(e.$t("Site.Cert.index_51")),1),S(o,{value:j(M),"onUpdate:value":l[1]||(l[1]=e=>L(M)?M.value=e:null),rows:10},null,8,["value"])])])),_:1}),S(t,{class:"mb-12px"},{default:C((()=>[S(r,{type:"primary",onClick:B},{default:C((()=>[U(D(e.$t("Public.Btn.Save")),1)])),_:1}),S(r,{onClick:O},{default:C((()=>[U(D(e.$t("Public.Btn.Delete")),1)])),_:1})])),_:1}),S(d,null,{default:C((()=>[$("li",null,D(e.$t("Site.Cert.index_33")),1),$("li",null,D(e.$t("Site.Cert.index_34")),1),$("li",null,D(e.$t("Site.Cert.index_35")),1),$("li",null,D(e.$t("Site.Cert.index_36")),1)])),_:1})])}}}),[["__scopeId","data-v-ec749ad6"]]),W={key:0},X={key:1},Z={class:"color-#3c763d"},ee={class:"color-#3c763d"},se=v({__name:"index",props:{row:{}},emits:["refresh"],setup(e,{emit:s}){const a=e,l=s,{row:t}=a,i=z(),n=M({ssl_method:"2"}),o=x({}),d=b((()=>t.ssl_hash&&Object.keys(o.value).length>0)),{table:u,columns:m}=r([{key:"type",title:"Type",width:50},{key:"record",title:"Record",width:120,ellipsis:{tooltip:!0}},{key:"value",title:"Value",ellipsis:{tooltip:!0}},{key:"necessary",title:"Necessary"}]),v=()=>{i.push("/ssl_domain/domain")},h=async()=>{},L=async()=>{await O({hash:t.ssl_hash,domain:t.domain}),l("refresh")};return(async()=>{if(t.ssl_hash){const{message:e}=await R({hash:t.ssl_hash});c(e)&&(o.value=e,n.ssl_method="2")}})(),(e,s)=>{const a=_,l=y,i=f,r=p,c=B,x=A;return w(),g(x,{model:j(n),"label-width":"180px"},{default:C((()=>[S(l,{label:"Domain name"},{default:C((()=>[S(a,{class:"min-w-250px h-36px",type:"default","show-icon":!1},{default:C((()=>[$("span",null,D(j(t).domain),1)])),_:1})])),_:1}),S(l,{label:"SSL to be applied for"},{default:C((()=>[S(a,{class:"min-w-250px h-36px",type:"default","show-icon":!1},{default:C((()=>[j(o).dns?(w(),k("span",W,D(j(o).dns.join(",")),1)):(w(),k("span",X,"--"))])),_:1})])),_:1}),"1"===j(n).ssl_method?(w(),g(l,{key:0,label:" "},{default:C((()=>[S(r,{class:"flex-col!"},{default:C((()=>[S(a,{type:"warning"},{default:C((()=>[S(r,{class:"items-center flex-nowrap!"},{default:C((()=>[s[1]||(s[1]=$("span",null,"After clicking Generate, the system will submit a verification request to Lets encrypt for you, please follow the prompts to your domain name hosting provider to add the corresponding resolution",-1)),S(i,{type:"primary",size:"small",ghost:"",onClick:h},{default:C((()=>s[0]||(s[0]=[U("Generate")]))),_:1})])),_:1})])),_:1}),S(c,{columns:j(m),data:j(u).data},null,8,["columns","data"])])),_:1})])),_:1})):(w(),g(l,{key:1,label:" "},{default:C((()=>[S(r,{class:"flex-col!"},{default:C((()=>[j(d)?(w(),g(a,{key:1,type:"success"},{default:C((()=>s[4]||(s[4]=[$("span",{class:"color-#3c763d font-bold"},"Does the system find a matching certificate for you and deploy it immediately?",-1)]))),_:1})):(w(),g(a,{key:0,type:"error"},{default:C((()=>[S(r,{class:"items-center flex-nowrap!"},{default:C((()=>[s[3]||(s[3]=$("span",null,"Your domain has not yet been integrated with the domain management center.",-1)),S(i,{type:"primary",size:"small",ghost:"",onClick:v},{default:C((()=>s[2]||(s[2]=[U("Add Now")]))),_:1})])),_:1})])),_:1})),j(d)?(w(),g(r,{key:2,class:"flex-col!"},{default:C((()=>[s[7]||(s[7]=$("div",null,"Valid certificate",-1)),S(a,{type:"success","show-icon":!1},{default:C((()=>[$("div",Z,[s[5]||(s[5]=$("span",{class:"font-bold"},"Brand：",-1)),U(D(j(o).info.issuer_O+" "+j(o).info.issuer),1)]),$("div",ee,[s[6]||(s[6]=$("span",{class:"font-bold"},"Certificate domain(s)：",-1)),U(" "+D(j(o).dns.join(",")),1)])])),_:1})])),_:1})):P("",!0)])),_:1})])),_:1})),S(l,{label:" "},{default:C((()=>[S(i,{type:"primary",onClick:L,disabled:!j(d)},{default:C((()=>[U(D(e.$t("SSL.index_29")),1)])),_:1},8,["disabled"])])),_:1})])),_:1},8,["model"])}}}),ae={class:"h-full p-16px"},le=v({__name:"index",props:{row:{}},emits:["close","refresh"],setup(s,{emit:a}){const l=s,t=a,{row:i}=l,{t:n}=h(),o={row:i,onClose:()=>{t("close")},onRefresh:()=>{t("refresh")}},r=x("other"),d=[{key:"other",label:n("Mail.Domain.index_30"),component:Q},{key:"apply",label:"Apply for SSL",component:se}];return(s,a)=>{const l=e;return w(),k("div",ae,[S(l,{value:j(r),"onUpdate:value":a[0]||(a[0]=e=>L(r)?r.value=e:null),data:o,options:d},null,8,["value"])])}}});export{le as default};
