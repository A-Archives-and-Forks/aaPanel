const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index114.js?v=1744703330658","js/index.vue_vue_type_script_setup_true_lang4.js?v=1744703330658","js/index.vue_vue_type_script_setup_true_lang8.js?v=1744703330658","js/page_layout.js?v=1744703330658","js/vue.js?v=1744703330658","js/__commonjsHelpers__.js?v=1744703330658","js/naive.js?v=1744703330658","js/common.js?v=1744703330658","js/public.js?v=1744703330658","css/public.css?v=1744703330658","css/page_layout.css?v=1744703330658","css/index19.css?v=1744703330658","js/index.vue_vue_type_script_setup_true_lang5.js?v=1744703330658","js/index.vue_vue_type_script_setup_true_lang6.js?v=1744703330658","js/index.js?v=1744703330658","css/index93.css?v=1744703330658","js/index.vue_vue_type_script_setup_true_lang12.js?v=1744703330658","js/index.vue_vue_type_script_setup_true_lang7.js?v=1744703330658","js/index104.js?v=1744703330658","css/index21.css?v=1744703330658","js/index95.js?v=1744703330658","js/index.vue_vue_type_script_setup_true_lang.js?v=1744703330658","js/theme-chrome.js?v=1744703330658","js/organization.js?v=1744703330658","js/index115.js?v=1744703330658","js/index103.js?v=1744703330658","css/index20.css?v=1744703330658","js/custom.js?v=1744703330658"])))=>i.map(i=>d[i]);
import{i as e,aS as a,W as t,d as n,b9 as i,I as r,a as l}from"./page_layout.js?v=1744703330658";import{_ as s}from"./index.js?v=1744703330658";import{_ as o}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1744703330658";import{_ as p}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1744703330658";import{_ as d}from"./index.vue_vue_type_script_setup_true_lang12.js?v=1744703330658";import{_ as c}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1744703330658";import{_}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1744703330658";import{_ as u}from"./index104.js?v=1744703330658";import{b as m,f as g,a as b,c as x,d as h}from"./public.js?v=1744703330658";import{_ as y}from"./index95.js?v=1744703330658";import{_ as v}from"./index.vue_vue_type_script_setup_true_lang.js?v=1744703330658";import{V as f}from"./theme-chrome.js?v=1744703330658";import{d as w,O as C,r as S,j as k,R as T,S as j,P as U,a0 as O,V as P,$ as E,ap as $,U as R,a1 as L,M as D,af as I,c as q,Y as A}from"./vue.js?v=1744703330658";import{_ as M,ch as z,cn as J,bU as N,ck as V,T as F}from"./naive.js?v=1744703330658";import{g as K}from"./organization.js?v=1744703330658";const{t:W}=e.global,B=e=>a.post("/crontab/script/test_script",{data:JSON.stringify(e)},{requestOptions:{loading:W("Crontab.Api.index_4"),errorMessage:!1}}),Y=e=>a.post("/crontab/script/get_script_logs",{data:JSON.stringify(e)}),G=(e,t=!0)=>a.post("/crontab/script/remove_script",e,{requestOptions:{loading:t?W("Security.Api.Index_3"):"",successMessage:t}}),H={class:"p-20px"},Q=w({__name:"index",props:{data:{}},setup(e,{expose:t}){const{t:n}=C(),i=e,{isEdit:r,row:l,id:s,getList:o}=i.data,p=S(null),d=[{value:"string",label:n("Crontab.Script.index_9")},{value:"int",label:n("Crontab.Script.index_10")},{value:"float",label:n("Crontab.Script.index_11")}],c=[{value:"1",label:n("Crontab.Script.index_12")},{value:"0",label:n("Crontab.Script.index_13")}],_={name:{required:!0,trigger:["blur","change"],message:n("Crontab.Planned.index_49")},custom:{required:!0,trigger:["blur","change"],message:n("Crontab.arrange.index_28")},argsTitle:{required:!0,trigger:["blur","change"],message:n("Security.Conf.Index_28")},argsExplain:{required:!0,trigger:["blur","change"],message:n("Security.Conf.Index_28")}},u=k({name:"",type:"string",argsType:"0",argsTitle:"",argsExplain:"",custom:"",remark:""}),m=()=>({name:u.name,return_type:u.type,is_args:u.argsType,ps:u.remark,script:u.custom,type_id:s,args_title:u.argsTitle,args_ps:u.argsExplain,...r?{script_id:null==l?void 0:l.script_id}:null});t({onConfirm:async()=>{var e,t;await(null==(e=p.value)?void 0:e.validate()),r?await(t=m(),a.post("/crontab/script/modify_script",{data:JSON.stringify(t)},{requestOptions:{loading:W("Crontab.Api.index_5"),successMessage:!0}})):await(e=>a.post("/crontab/script/create_script",{data:JSON.stringify(e)},{requestOptions:{loading:W("Security.Api.Index_4"),successMessage:!0}}))(m()),null==o||o()}});return r&&l&&(u.name=l.name,u.type=l.return_type,u.argsType=l.is_args.toString(),u.argsTitle=l.args_title,u.argsExplain=l.args_ps,u.custom=l.script,u.remark=l.ps),(e,a)=>{const t=M,n=z,i=J,r=N,l=v,s=y;return T(),j("div",H,[U(l,{ref_key:"formRef",ref:p,model:P(u),rules:_},{default:O((()=>[U(n,{label:e.$t("Docker.Compose.form.index_3"),path:"name"},{default:O((()=>[U(t,{class:"w-360px!",value:P(u).name,"onUpdate:value":a[0]||(a[0]=e=>P(u).name=e),placeholder:e.$t("Crontab.Planned.index_49")},null,8,["value","placeholder"])])),_:1},8,["label"]),U(n,{label:e.$t("Crontab.Script.index_2")},{default:O((()=>[U(i,{class:"w-150px!",value:P(u).type,"onUpdate:value":a[1]||(a[1]=e=>P(u).type=e),options:d},null,8,["value"])])),_:1},8,["label"]),U(r,null,{default:O((()=>[U(n,{label:e.$t("Crontab.Script.index_5")},{default:O((()=>[U(i,{class:"w-80px!",value:P(u).argsType,"onUpdate:value":a[2]||(a[2]=e=>P(u).argsType=e),options:c},null,8,["value"])])),_:1},8,["label"]),"1"==P(u).argsType?(T(),E(n,{key:0,path:"argsTitle"},{default:O((()=>[U(t,{class:"w-110px!",value:P(u).argsTitle,"onUpdate:value":a[3]||(a[3]=e=>P(u).argsTitle=e),placeholder:e.$t("Crontab.Script.index_51")},null,8,["value","placeholder"])])),_:1})):$("",!0),"1"==P(u).argsType?(T(),E(n,{key:1,path:"argsExplain"},{default:O((()=>[U(t,{class:"w-145px!",value:P(u).argsExplain,"onUpdate:value":a[4]||(a[4]=e=>P(u).argsExplain=e),placeholder:e.$t("Crontab.Script.index_52")},null,8,["value","placeholder"])])),_:1})):$("",!0)])),_:1}),U(n,{label:" ",path:"custom"},{default:O((()=>[U(P(f),{theme:"chrome",value:P(u).custom,"onUpdate:value":a[5]||(a[5]=e=>P(u).custom=e),class:"w-360px border-solid h-150px border-1px border-#ccc rounded-4px leading-[1.4]"},null,8,["value"])])),_:1}),U(n,{label:e.$t("Docker.Template.add.index_3")},{default:O((()=>[U(t,{class:"w-360px!",value:P(u).remark,"onUpdate:value":a[6]||(a[6]=e=>P(u).remark=e),placeholder:e.$t("Crontab.arrange.index_27")},null,8,["value","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"]),U(s,null,{default:O((()=>[R("li",null,L(e.$t("Crontab.Script.index_6")),1),R("li",null,L(e.$t("Crontab.Script.index_7")),1),R("li",null,L(e.$t("Crontab.Script.index_8")),1)])),_:1})])}}}),X=w({__name:"index",setup(e){const y=A((()=>l((()=>import("./index114.js?v=1744703330658")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])))),v=A((()=>l((()=>import("./index115.js?v=1744703330658")),__vite__mapDeps([24,25,3,4,5,6,7,8,9,10,26,14,15,1,2,11,12,16,13,17,18,19,20,21,22,23])))),f=A((()=>l((()=>import("./custom.js?v=1744703330658")),__vite__mapDeps([27,21,6,4,5,7])))),w=S("1"),j=S([]),{t:$}=C(),R=()=>{Z.data.isEdit=!1,Z.data.id=w.value,Z.show=!0},{keys:M,table:z,columns:J}=m([{type:"selection",width:40},{key:"name",title:$("Site.TableRow.index_2")},{key:"script_type",title:$("Ftp.Table.index_3")},{key:"return_type",title:$("Crontab.Script.index_2")},{key:"ps",title:$("Docker.Template.add.index_3")},{key:"name",title:$("Docker.Container.index_9"),render:e=>t(e.create_time)},{key:"name",title:$("Crontab.Planned.index_12"),render:e=>t(e.last_exec_time)},g({title:$("Public.Table.Operation"),width:240,options:e=>[{label:$("Docker.LocalImage.pull.index_12"),onClick:()=>{if(e.is_args)return te.show=!0,void(te.data.row=e);X("",e)}},{label:$("Site.TableOP.index_7"),onClick:()=>{Z.title=$("Crontab.arrange.index_38"),Z.data.isEdit=!0,Z.data.row=e,Z.data.id=w.value,Z.show=!0}},{label:$("Ftp.Table.index_15"),onClick:()=>{ee.title=$("Crontab.Planned.index_6",[e.name]),ee.data.id=e.script_id,ee.show=!0}},{label:$("Public.Btn.Del"),onClick:()=>{b({title:"".concat($("Ftp.Table.index_10")," ").concat(e.name," ").concat($("Crontab.Script.index_3")),content:$("Crontab.Script.index_4"),onConfirm:async()=>{await G({script_id:e.script_id}),H()}})}}]})]),N=[{key:"delete",type:"confirm",label:$("Crontab.Script.index_42"),confirm:{title:$("Crontab.Planned.index_16",[$("Crontab.Script.index_42")]),desc:$("Crontab.Planned.index_17",[$("Crontab.Script.index_42")]),columns:[J.value[1]],api:e=>G({script_id:e.script_id},!1),done:()=>{H()}}}],W=k({p:1,rows:10,search:""}),{loading:B,setLoading:Y}=x(!0);(async()=>{const{message:e}=await K();r(e)&&(j.value=e.map((e=>({label:e.name,key:e.type_id.toString()}))))})();const H=async()=>{try{Y(!0);const{message:t}=await(e=D({...W,type_id:w.value}),a.post("/crontab/script/get_script_list",{data:JSON.stringify(e)}));n(t)?(z.data=t.data.map((e=>({...e,id:e.script_id}))),z.total=i(t.page)):(z.data=[],z.total=0)}finally{M.value=[],Y(!1)}var e};H();const X=(e,a)=>{b({title:$("Crontab.Planned.index_13"),content:$("Crontab.arrange.index_1",[a.name]),onConfirm:()=>{ae.data.row=a,ae.data.args=e,ae.show=!0}})},Z=h($("Crontab.Script.index_1"),{getList:H}),ee=h(),ae=h($("Crontab.Planned.index_23"),{getList:H}),te=h($("Crontab.Script.index_44"),{callback:X});return(e,a)=>{const t=u,n=F,i=_,r=c,l=d,m=p,g=o,b=s,x=V;return T(),E(x,{class:"p-16px"},{default:O((()=>[U(t,{value:P(w),"onUpdate:value":[a[0]||(a[0]=e=>I(w)?w.value=e:null),H],options:P(j)},null,8,["value","options"]),U(g,null,{toolsLeft:O((()=>[U(n,{type:"primary",onClick:R},{default:O((()=>[q(L(e.$t("Crontab.Script.index_1")),1)])),_:1})])),toolsRight:O((()=>[U(i,{value:P(W).search,"onUpdate:value":a[1]||(a[1]=e=>P(W).search=e),placeholder:e.$t("WP.Sets.index_15"),onSearch:H},null,8,["value","placeholder"])])),table:O((()=>[U(r,{"checked-row-keys":P(M),"onUpdate:checkedRowKeys":a[2]||(a[2]=e=>I(M)?M.value=e:null),loading:P(B),data:P(z).data,columns:P(J)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:O((()=>[U(l,{"checked-row-keys":P(M),"onUpdate:checkedRowKeys":a[3]||(a[3]=e=>I(M)?M.value=e:null),data:P(z).data,options:N},null,8,["checked-row-keys","data"])])),pageRight:O((()=>[U(m,{page:P(W).p,"onUpdate:page":a[4]||(a[4]=e=>P(W).p=e),"page-size":P(W).rows,"onUpdate:pageSize":a[5]||(a[5]=e=>P(W).rows=e),"item-count":P(z).total,onRefresh:H},null,8,["page","page-size","item-count"])])),_:1}),U(b,{show:P(Z).show,"onUpdate:show":a[6]||(a[6]=e=>P(Z).show=e),title:P(Z).title,data:P(Z).data,width:600,footer:!0,component:Q},null,8,["show","title","data"]),U(b,{show:P(ae).show,"onUpdate:show":a[7]||(a[7]=e=>P(ae).show=e),title:P(ae).title,data:P(ae).data,width:400,"min-height":200,component:P(v)},null,8,["show","title","data","component"]),U(b,{show:P(te).show,"onUpdate:show":a[8]||(a[8]=e=>P(te).show=e),title:P(te).title,data:P(te).data,width:400,footer:!0,component:P(f)},null,8,["show","title","data","component"]),U(b,{show:P(ee).show,"onUpdate:show":a[9]||(a[9]=e=>P(ee).show=e),title:P(ee).title,data:P(ee).data,width:800,"min-height":550,footer:!1,component:P(y)},null,8,["show","title","data","component"])])),_:1})}}}),Z=Object.freeze(Object.defineProperty({__proto__:null,default:X},Symbol.toStringTag,{value:"Module"}));export{B as e,Y as g,Z as i};
