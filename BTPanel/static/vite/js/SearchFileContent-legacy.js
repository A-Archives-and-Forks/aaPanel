System.register(["./index-legacy.js?v=1756367574781","./page_layout-legacy.js?v=1756367574781","./vue-legacy.js?v=1756367574781","./index-legacy39.js?v=1756367574781","./ResourceManagerWindow-legacy.js?v=1756367574781","./naive-legacy.js?v=1756367574781","./common-legacy.js?v=1756367574781","./__commonjsHelpers__-legacy.js?v=1756367574781","./public-legacy.js?v=1756367574781","./soft-legacy2.js?v=1756367574781","./soft-legacy.js?v=1756367574781","./file-legacy2.js?v=1756367574781","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1756367574781"],function(e,l){"use strict";var a,t,s,n,c,i,o,r,d,u,f,h,p,v,m,g,y,_,x,b,C,k,j,F,w,$,M,U,O,R,S,P,W,D,I,q;return{setters:[e=>{a=e._},e=>{t=e._,s=e.q,n=e.bJ,c=e.bI,i=e.m,o=e.t,r=e.p},e=>{d=e.k,u=e.P,f=e.i,h=e.r,p=e.R,v=e.V,m=e.W,g=e.a3,y=e.S,_=e.U,x=e.j,b=e.a4,C=e.a2,k=e.an,j=e.F,F=e.O,w=e.av,$=e.ak},e=>{M=e.d},e=>{U=e.R},e=>{O=e.dW,R=e.dR,S=e.av,P=e.au,W=e.aC,D=e._,I=e.dT,q=e.dU},null,null,null,null,null,null,null],execute:function(){var l=document.createElement("style");l.textContent='@charset "UTF-8";.modal-footer-btns[data-v-8e683af6]{display:flex;align-items:center;flex-direction:row;justify-content:end;gap:10px;padding:10px}.single-line-ellipsis[data-v-8e683af6]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.search-wrapper[data-v-8e683af6]{padding:20px}.search-wrapper .search-res .top-desc[data-v-8e683af6]{display:flex;justify-content:start;align-content:center;margin-bottom:5px}.search-wrapper .search-res .match-list .match-list-item[data-v-8e683af6]{display:flex;align-items:center;flex-direction:row;justify-content:start;gap:5px;padding:0 10px 10px}[data-v-8e683af6] .n-collapse{border:1px solid var(--color-border)}[data-v-8e683af6] .n-collapse .n-collapse-item:first-child>.n-collapse-item__header{padding:10px 15px 10px 5px;background:var(--color-bg-2)}\n/*$vite$:1*/',document.head.appendChild(l);const E={class:"search-wrapper"},T={class:"w-100% flex justify-start gap-6 items-center"},z={class:"w-100% flex justify-between"},A={class:"search-res"},H={class:"top-desc"},J={class:"mr-5px"},K={class:"match-list"},V={class:"text-font1 fw-bold"};e("default",r(d({__name:"SearchFileContent",props:{currentPath:{type:String,default:"/"}},setup(e,{expose:l}){const r=e,{t:d}=u(),B=f("fileStore"),{currentPath:G,resetSearchFileContentFormData:L,choosedKeys:N}=B;function Q(){L()}l({open:function(){ae.value=!0,Z.value.path=G.value},close:Q});const{searchStatistics:X,searchRes:Y,searchFileContentFormData:Z}=B,ee=h(),le=h(r.currentPath),ae=h(!1);function te(){!async function(){const e=i.loading(d("file.searchFileContentModal.searching"));try{const e=await o.post("/files?action=files_search",Z.value,{requestOptions:{isOriginalResult:!0}});Y.value=e.message,Object.keys(Y.value).length&&(console.log(Object.values(Y.value).flat()),X.value.files=Object.keys(Y.value).length,X.value.times=Object.values(Y.value).flat().reduce((e,l)=>e+Object.values(l).length,0))}catch(l){console.warn(l)}finally{e.close()}}()}function se(){ee.value.open()}function ne(e){Z.value.path=e}return(e,l)=>{const i=P,o=W,r=S,d=R,u=D,f=t,h=q,G=I,L=O,ce=s,ie=c,oe=n,re=a;return v(),p(j,null,[m(re,{show:_(ae),"onUpdate:show":l[7]||(l[7]=e=>$(ae)?ae.value=e:null),title:e.$t("file.searchFileContentModal.title"),width:720,onPublicClose:Q},{default:g(()=>[y("div",E,[m(L,{"label-placement":"left","label-width":60,"label-align":"left"},{default:g(()=>[m(d,{label:e.$t("file.searchFileContentModal.search")},{default:g(()=>[m(r,null,{default:g(()=>[m(i,{value:_(Z).text,"onUpdate:value":l[0]||(l[0]=e=>_(Z).text=e)},null,8,["value"]),m(o,{type:"primary",onClick:te},{default:g(()=>[x(b(e.$t("file.searchFileContentModal.search")),1)]),_:1})]),_:1})]),_:1},8,["label"]),m(d,{label:e.$t("file.searchFileContentModal.suffix")},{default:g(()=>[m(i,{value:_(Z).exts,"onUpdate:value":l[1]||(l[1]=e=>_(Z).exts=e)},null,8,["value"])]),_:1},8,["label"]),m(d,{label:e.$t("file.searchFileContentModal.folder")},{default:g(()=>[y("div",T,[m(i,{value:_(Z).path,"onUpdate:value":l[3]||(l[3]=e=>_(Z).path=e)},{suffix:g(()=>[m(u,{checked:_(Z).is_subdir,"onUpdate:checked":l[2]||(l[2]=e=>_(Z).is_subdir=e),"checked-value":1,"unchecked-value":0},{default:g(()=>[x(b(e.$t("file.searchFileContentModal.subdir")),1)]),_:1},8,["checked"])]),_:1},8,["value"]),m(f,{name:"file-dir",color:"#000",size:"24",style:{cursor:"pointer"},onClick:se})])]),_:1},8,["label"]),m(d,{label:e.$t("file.searchFileContentModal.mode")},{default:g(()=>[y("div",z,[m(G,{value:_(Z).mode,"onUpdate:value":l[4]||(l[4]=e=>_(Z).mode=e)},{default:g(()=>[m(h,{value:0},{default:g(()=>[x(b(e.$t("file.searchFileContentModal.words")),1)]),_:1}),m(h,{value:1},{default:g(()=>[x(b(e.$t("file.searchFileContentModal.regex")),1)]),_:1})]),_:1},8,["value"]),y("div",null,[0==_(Z).mode?(v(),C(u,{key:0,checked:_(Z).isword,"onUpdate:checked":l[5]||(l[5]=e=>_(Z).isword=e),label:e.$t("file.searchFileContentModal.matchWholeWord"),class:"mr-5","checked-value":1,"unchecked-value":0},null,8,["checked","label"])):k("",!0),m(u,{checked:_(Z).iscase,"onUpdate:checked":l[6]||(l[6]=e=>_(Z).iscase=e),label:e.$t("file.searchFileContentModal.matchCase"),"checked-value":1,"unchecked-value":0},null,8,["checked","label"])])])]),_:1},8,["label"])]),_:1}),y("div",A,[y("div",H,[y("span",J,b(e.$t("file.searchFileContentModal.searchResult")),1),y("span",null,b(_(X).times)+" "+b(e.$t("file.searchFileContentModal.matchesIn"))+" "+b(_(X).files)+" "+b(e.$t("file.searchFileContentModal.files")),1)]),m(ce,{style:{"margin-bottom":"20px"}}),(v(!0),p(j,null,F(_(Y),(l,a)=>(v(),C(oe,{key:a,class:"mb-10px"},{default:g(()=>[m(ie,{title:`${a} (${e.$t("file.searchFileContentModal.match")} ${Object.values(l).length} ${e.$t("file.searchFileContentModal.times")})`,name:"1"},{"header-extra":g(()=>[m(o,{text:"",type:"primary",onClick:w(e=>async function(e){const l=e.split("/");N.value=l.splice(-1,1),M(B,"AceEditor",e=>e.value.open(l.join("/"))),Q()}(a),["stop"])},{default:g(()=>[x(b(e.$t("file.searchFileContentModal.edit")),1)]),_:2},1032,["onClick"])]),default:g(()=>[y("div",K,[(v(!0),p(j,null,F(l,(l,a)=>(v(),p("div",{class:"match-list-item",key:a},[y("div",V,b(e.$t("file.searchFileContentModal.line"))+" "+b(a)+": ",1),y("div",null,b(l),1)]))),128))])]),_:2},1032,["title"])]),_:2},1024))),128))])])]),_:1},8,["show","title"]),m(U,{"current-path":_(le),ref_key:"resourceRef",ref:ee,onChooseDir:ne},null,8,["current-path"])],64)}}}),[["__scopeId","data-v-8e683af6"]]))}}});
