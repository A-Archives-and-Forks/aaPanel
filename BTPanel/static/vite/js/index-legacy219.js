System.register(["./index-legacy103.js?v=1747989938512","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1747989938512","./index.vue_vue_type_script_setup_true_lang-legacy11.js?v=1747989938512","./index-legacy97.js?v=1747989938512","./page_layout-legacy.js?v=1747989938512","./vue-legacy.js?v=1747989938512","./site-legacy.js?v=1747989938512","./public-legacy.js?v=1747989938512","./soft-legacy.js?v=1747989938512","./naive-legacy.js?v=1747989938512","./domain-input-legacy.js?v=1747989938512","./index-legacy96.js?v=1747989938512","./common-legacy.js?v=1747989938512","./__commonjsHelpers__-legacy.js?v=1747989938512"],(function(e,a){"use strict";var t,s,l,i,n,d,u,p,r,o,_,c,v,m,P,f,x,b,S,y,g,h,w,H,$,U,j,k,L,E,q,C,I,M,R,O,z,D,B,F,J,N,Q,T,V,K,Z,A,G,W,X,Y,ee;return{setters:[e=>{t=e._},e=>{s=e._},e=>{l=e._},e=>{i=e._},e=>{n=e.cr,d=e.o,u=e.N,p=e._,r=e.q,o=e.g,_=e.c,c=e.m,v=e.bD,m=e.aV,P=e.p},e=>{f=e.d,x=e.O,b=e._,S=e.ae,y=e.e,g=e.R,h=e.S,w=e.U,H=e.P,$=e.V,U=e.a1,j=e.c,k=e.a2,L=e.ao,E=e.F,q=e.r,C=e.n,I=e.j,M=e.k,R=e.aj,O=e.v,z=e.a0},e=>{D=e.aq,B=e.c,F=e.aJ,J=e.aK},e=>{N=e.d,Q=e.u},e=>{T=e.b},e=>{V=e.cp,K=e.co,Z=e.cn,A=e.cj,G=e._,W=e.bU,X=e.c0,Y=e.bZ},e=>{ee=e.D},null,null,null],execute:function(){var a=document.createElement("style");a.textContent=".bt-tabs[data-v-22c72b40]>.n-tabs-nav{padding:0 20px}.bt-tabs[data-v-22c72b40]>.n-tab-pane{padding:16px 10px 0}\n",document.head.appendChild(a);const ae={class:"w-150px"},te={key:0,class:"ml-8px"},se=f({__name:"select-ftp",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const{t:a}=x(),t=n(),{ftp:s}=b(t),l=S(e,"value"),i=[{label:a("Site.PHP.add_site_31"),value:"0"},{label:a("Site.PHP.add_site_34"),value:"1"}],u=y((()=>!s.value.setup)),p=()=>{T("pureftpd")};return(e,a)=>{const t=V,s=d;return g(),h(E,null,[w("div",ae,[H(t,{value:l.value,"onUpdate:value":a[0]||(a[0]=e=>l.value=e),class:"ftp-select",options:i,disabled:$(u)},null,8,["value","disabled"])]),$(u)?(g(),h("div",te,[H(s,{onClick:p},{default:U((()=>[j(k(e.$t("Site.PHP.add_site_33")),1)])),_:1})])):L("",!0)],64)}}}),le={class:"w-150px"},ie={key:0,class:"ml-8px"},ne=f({__name:"select-database",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const{t:a}=x(),t=n(),{mysql:s}=b(t),l=S(e,"value"),i=[{label:a("Site.PHP.add_site_31"),value:"0"},{label:a("Site.PHP.add_site_32"),value:"MySQL"}],u=y((()=>!s.value.setup)),p=()=>{T("mysql")};return(e,a)=>{const t=V,s=d;return g(),h(E,null,[w("div",le,[H(t,{value:l.value,"onUpdate:value":a[0]||(a[0]=e=>l.value=e),class:"db-select",options:i,disabled:$(u)},null,8,["value","disabled"])]),$(u)?(g(),h("div",ie,[H(s,{onClick:p},{default:U((()=>[j(k(e.$t("Site.PHP.add_site_30")),1)])),_:1})])):L("",!0)],64)}}}),de={class:"w-150px"},ue=f({__name:"select-php",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const a=S(e,"value"),{loading:t,setLoading:s}=N(),l=q([]);return(async()=>{try{s(!0);const{message:e}=await D(),t=u(e)?e:[];l.value=t.reverse().map((e=>({label:e.name,value:e.version}))),await C(),t.length>0&&(a.value=t[0].version)}finally{s(!1)}})(),(e,s)=>{const i=V;return g(),h("div",de,[H(i,{value:a.value,"onUpdate:value":s[0]||(s[0]=e=>a.value=e),class:"php-select",loading:$(t),options:$(l)},null,8,["value","loading","options"])])}}}),pe={class:"w-150px"},re=f({__name:"select-category",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const a=S(e,"value"),{loading:t,setLoading:s}=N(),l=q([]);return(async()=>{try{s(!0);const{message:e}=await B();u(e)?(l.value=e.map((e=>({label:e.name,value:e.id}))),e.length>0&&(a.value=e[0].id)):l.value=[]}finally{s(!1)}})(),(e,s)=>{const i=V;return g(),h("div",pe,[H(i,{value:a.value,"onUpdate:value":s[0]||(s[0]=e=>a.value=e),class:"type-select",loading:$(t),options:$(l)},null,8,["value","loading","options"])])}}}),oe={class:"flex items-center w-600px py-30px px-50px"},_e={class:"w-120px text-primary"},ce={class:"flex flex-col gap-16px flex-1 ml-60px"},ve={key:0,class:"leading-24px"},me={class:"flex items-center h-30px"},Pe={class:"mt-8px"},fe={class:"font-bold"},xe={class:"font-bold"},be={key:1,class:"leading-24px"},Se={class:"flex items-center h-30px"},ye={class:"mt-8px"},ge={class:"font-bold"},he={class:"font-bold"},we=f({__name:"site-result",props:{data:{}},setup(e){const a=e,{info:t}=a.data;return(e,a)=>{const s=p,l=r;return g(),h("div",oe,[w("div",_e,[H(s,{name:"base-success",size:"120"})]),w("div",ce,[$(t).ftpStatus?(g(),h("div",ve,[w("div",me,k(e.$t("Site.PHP.add_site_35")),1),H(l,{dashed:""}),w("div",Pe,[j(k(e.$t("Site.PHP.add_site_37")),1),w("span",fe,k($(t).ftpUser||"--"),1)]),w("div",null,[j(k(e.$t("Site.PHP.add_site_38")),1),w("span",xe,k($(t).ftpPass||"--"),1)])])):L("",!0),$(t).databaseStatus?(g(),h("div",be,[w("div",Se,k(e.$t("Site.PHP.add_site_36")),1),H(l,{dashed:""}),w("div",ye,[j(k(e.$t("Site.PHP.add_site_37"))+" ",1),w("span",ge,k($(t).databaseUser||"--"),1)]),w("div",null,[j(k(e.$t("Site.PHP.add_site_38"))+" ",1),w("span",he,k($(t).databasePass||"--"),1)])])):L("",!0)])])}}}),He={class:"w-440px"},$e={class:"w-400px"},Ue={class:"w-400px"},je={class:"flex-1"},ke={class:"w-174px"},Le={class:"ml-8px"},Ee={class:"w-174px"},qe={class:"mt-8px text-desc"},Ce={class:"flex-1"},Ie={class:"w-174px"},Me={class:"ml-8px"},Re={class:"w-174px"},Oe={class:"mt-8px text-desc"},ze={class:"w-150px"},De=f({__name:"index",props:{getList:{type:Function}},setup(e,{expose:a}){const t=e,{t:d}=x(),u=n(),r=q("0"),v=q("0"),m=q(null),P=q(null),f=q([]),b=I({type:0,domain:[""],webname:{domain:""},ps:"",path:u.sitePath,ftp:!1,ftp_username:"",ftp_password:"",sql:!1,codeing:"utf8",datauser:"",datapassword:"",version:null,type_id:null,set_ssl:!1,force_ssl:!1,is_create_default_file:!0}),S={"webname.domain":{required:!0,trigger:["blur","change"],validator:(e,a)=>""!==a.trim()||0!==b.type||new Error(d("Site.PHP.add_site_23"))},domain:{trigger:["blur"],validator:(e,a)=>!(!a[0]&&1===b.type)||new Error(d("Site.PHP.add_site_23"))},path:{trigger:["blur","change"],validator:(e,a)=>""!==a||new Error(d("Site.PHP.add_site_26"))},version:{trigger:"change",validator:(e,a)=>null!==a||new Error(d("Site.PHP.add_site_27"))},type_id:{trigger:"change",validator:(e,a)=>null!==a||new Error(d("Site.PHP.add_site_28"))}},y=e=>{if(!e)return void(b.webname.domain=b.domain.filter(Boolean).join("\n"));const a=b.webname.domain.trim();a!==b.domain.join("\n")&&(b.domain=a?a.split("\n").filter(Boolean):[""],b.domain.forEach(((e,a)=>m.value?.onDomainItemBlur(e,a))))},E=e=>{const a=e?.trim().split("\n")[0].split(":")[0];if(a){const e=a.replace(new RegExp(/([-.])/g),"_");b.ps=e,b.path=`${u.sitePath}/${a}`,b.ftp_username=`ftp_${e}`,b.ftp_password=o(16),b.datauser=`sql_${e}`,b.datapassword=o(16)}else b.ps="",b.path=u.sitePath,b.ftp_username="",b.ftp_password="",b.datauser="",b.datapassword=""},C=e=>{b.ftp="1"===e},D=e=>{b.sql="0"!==e&&e};return a({onConfirm:async()=>{await new Promise(((e,a)=>{0===f.value.filter((e=>e.hash)).length&&1===b.type?(c.error("This domain does not support automatic resolution, please choose manual resolution"),a(!1)):e(!0)})),await(P.value?.validate());const{message:e}=await F((()=>{const{version:e,type_id:a}=b;if(null===e)throw c.error(d("Site.PHP.add_site_27")),new Error(d("Site.PHP.add_site_27"));if(null===a)throw c.error(d("Site.PHP.add_site_28")),new Error(d("Site.PHP.add_site_28"));const t=b.webname.domain.trim().split("\n"),s=t[0]+"\r",l=t[0].split(":")[1]||"80",i=t.length>1?t.slice(1):[],n=f.value.filter((e=>e.hash)).map((e=>({domain:e.domain,hash:e.hash,support:[...e.auto?["auto"]:[],...e.ssl_cert?["ssl_cert"]:[],...e.cf_proxy?["cf_proxy"]:[]]})));let u={webname:{domain:s,domainlist:i,count:i.length},parse_list:1===b.type&&n.length?JSON.stringify(n):null,port:l,type:"PHP",ps:b.ps,path:b.path,ftp:b.ftp,sql:b.sql,codeing:b.codeing,version:e,type_id:a,set_ssl:b.set_ssl?1:0,force_ssl:b.force_ssl?1:0,is_create_default_file:b.is_create_default_file};return b.ftp&&(u=Object.assign(u,{ftp_username:b.ftp_username,ftp_password:b.ftp_password})),b.sql&&(u=Object.assign(u,{datauser:b.datauser,datapassword:b.datapassword})),u})());var a;!_(e)||!1===e.ftpStatus&&!1===e.databaseStatus?c.success(d("Site.PHP.add_site_29")):(a=e,Q({title:d("Site.PHP.add_site_29"),data:{info:a},component:we})),t.getList()}}),(e,a)=>{const t=K,n=Z,d=p,u=A,o=i,_=G,c=l,x=W,q=X,I=s;return g(),h("div",null,[H(I,{ref_key:"formRef",ref:P,model:$(b),rules:S},{default:U((()=>[H(u,{label:e.$t("SSL.index_1")},{default:U((()=>[H(n,{value:$(b).type,"onUpdate:value":[a[0]||(a[0]=e=>$(b).type=e),y]},{default:U((()=>[H(t,{value:0},{default:U((()=>[j(k(e.$t("SSL.index_2")),1)])),_:1}),H(t,{value:1},{default:U((()=>[j(k(e.$t("SSL.index_3")),1)])),_:1})])),_:1},8,["value"]),H(d,{name:"ssl-stars",size:22})])),_:1},8,["label"]),M(H(u,{label:e.$t("Site.PHP.add_site_4"),path:"domain"},{default:U((()=>[H(ee,{ref_key:"domainInputRef",ref:m,value:$(b).domain,"onUpdate:value":a[1]||(a[1]=e=>$(b).domain=e),"parse-list":$(f),"onUpdate:parseList":a[2]||(a[2]=e=>R(f)?f.value=e:null),"onUpdate:domain":E},null,8,["value","parse-list"])])),_:1},8,["label"]),[[O,1===$(b).type]]),M(H(u,{label:e.$t("Site.PHP.add_site_4"),path:"webname.domain"},{default:U((()=>[w("div",He,[H(o,{value:$(b).webname.domain,"onUpdate:value":[a[3]||(a[3]=e=>$(b).webname.domain=e),E],name:"domain"},{default:U((()=>[w("p",null,k(e.$t("Site.PHP.add_site_5")),1),w("p",null,k(e.$t("Site.PHP.add_site_6")),1),w("p",null,k(e.$t("Site.PHP.add_site_7")),1)])),_:1},8,["value"])])])),_:1},8,["label"]),[[O,0===$(b).type]]),H(u,{label:e.$t("Site.PHP.add_site_8"),path:"ps"},{default:U((()=>[w("div",$e,[H(_,{value:$(b).ps,"onUpdate:value":a[4]||(a[4]=e=>$(b).ps=e),"input-props":{name:"ps"},placeholder:""},null,8,["value"])])])),_:1},8,["label"]),H(u,{label:e.$t("Site.PHP.add_site_9"),path:"path"},{default:U((()=>[w("div",Ue,[H(c,{value:$(b).path,"onUpdate:value":a[5]||(a[5]=e=>$(b).path=e),"input-props":{name:"path"}},null,8,["value"])])])),_:1},8,["label"]),H(u,{label:e.$t("Site.PHP.add_site_10")},{default:U((()=>[H(se,{value:$(r),"onUpdate:value":[a[6]||(a[6]=e=>R(r)?r.value=e:null),C]},null,8,["value"])])),_:1},8,["label"]),"1"===$(r)?(g(),z(u,{key:0,label:e.$t("Site.PHP.add_site_11")},{default:U((()=>[w("div",je,[H(x,{class:"items-center"},{default:U((()=>[w("div",ke,[H(_,{value:$(b).ftp_username,"onUpdate:value":a[7]||(a[7]=e=>$(b).ftp_username=e),"input-props":{name:"ftp_username"},placeholder:e.$t("Site.PHP.add_site_12")},null,8,["value","placeholder"])]),w("div",Le,k(e.$t("Site.PHP.add_site_13")),1),w("div",Ee,[H(_,{value:$(b).ftp_password,"onUpdate:value":a[8]||(a[8]=e=>$(b).ftp_password=e),"input-props":{name:"ftp_password"},placeholder:e.$t("Site.PHP.add_site_14")},null,8,["value","placeholder"])])])),_:1}),w("div",qe,k(e.$t("Site.PHP.add_site_15")),1)])])),_:1},8,["label"])):L("",!0),H(u,{label:e.$t("Site.PHP.add_site_16")},{default:U((()=>[H(ne,{value:$(v),"onUpdate:value":[a[9]||(a[9]=e=>R(v)?v.value=e:null),D]},null,8,["value"])])),_:1},8,["label"]),"MySQL"===$(v)?(g(),z(u,{key:1,label:e.$t("Site.PHP.add_site_17")},{default:U((()=>[w("div",Ce,[H(x,{class:"items-center"},{default:U((()=>[w("div",Ie,[H(_,{value:$(b).datauser,"onUpdate:value":a[10]||(a[10]=e=>$(b).datauser=e),"input-props":{name:"db_username"},placeholder:e.$t("Site.PHP.add_site_18")},null,8,["value","placeholder"])]),w("div",Me,k(e.$t("Site.PHP.add_site_13")),1),w("div",Re,[H(_,{value:$(b).datapassword,"onUpdate:value":a[11]||(a[11]=e=>$(b).datapassword=e),"input-props":{name:"db_password"},placeholder:e.$t("Site.PHP.add_site_19")},null,8,["value","placeholder"])])])),_:1}),w("div",Oe,k(e.$t("Site.PHP.add_site_20")),1)])])),_:1},8,["label"])):L("",!0),H(u,{label:e.$t("Site.PHP.add_site_21"),path:"version"},{default:U((()=>[w("div",ze,[H(ue,{value:$(b).version,"onUpdate:value":a[12]||(a[12]=e=>$(b).version=e)},null,8,["value"])])])),_:1},8,["label"]),H(u,{label:e.$t("Site.PHP.add_site_22"),path:"type_id"},{default:U((()=>[H(re,{value:$(b).type_id,"onUpdate:value":a[13]||(a[13]=e=>$(b).type_id=e)},null,8,["value"])])),_:1},8,["label"]),H(u,{label:e.$t("SSL.SiteSSL.index_18")},{default:U((()=>[H(q,{value:$(b).is_create_default_file,"onUpdate:value":a[14]||(a[14]=e=>$(b).is_create_default_file=e)},null,8,["value"])])),_:1},8,["label"])])),_:1},8,["model"])])}}}),Be={class:"px-10px"},Fe={class:"mt-8px leading-22px text-default"},Je={class:"mt-6px"},Ne=f({__name:"index",setup(e,{expose:a}){const{t:t}=x(),l=n(),d=I({domain:"domain|1|0|0|0\ndomain|1|0|0|0\ndomain|1|0|0|0"}),u=q([{key:"name",title:t("Site.TableRow.index_1")},{key:"ftp",title:t("Site.PHP.add_site_10"),render:e=>e.succesInfo?e.succesInfo.ftp_status?H("span",{class:"text-primary"},[t("Site.PHP.index_35")]):`${t("Site.PHP.index_37")}`:"--"},{key:"database",title:t("Site.PHP.add_site_16"),render:e=>e.succesInfo?e.succesInfo.db_status?H("span",{class:"text-primary"},[t("Site.PHP.index_35")]):`${t("Site.PHP.index_37")}`:"--"},{key:"result",title:t("Site.DelSite.index_10"),render:e=>"error"===e.status?H("span",{class:"text-error"},[e.errorMsg]):H("span",{class:"text-primary"},[t("Site.PHP.index_35")])}]);return a({onConfirm:async()=>{let e=[];const a=d.domain.trim().split("\n");for(let l=0;l<a.length;l++){const s=a[l].split("|");for(let a=0;a<s.length;a++){const i=l+1,n=s[a].trim();switch(a){case 0:e=n.split(",");for(let a=0;a<e.length;a++){const a=e[0],s=a.split(":");if(!v(s[0]))return void c.error(`${t("Site.PHP.index_39")} ${i}, ${t("Site.PHP.index_40")} [${a}]`);if(void 0!==s[1]&&m(s[1]))return void c.error(`${t("Site.PHP.index_39")} ${i}, ${t("Site.PHP.index_41")} [${s[1]}]`)}break;case 1:if("1"!==n&&n.indexOf("/")<-1)return void c.error(`${t("Site.PHP.index_39")} ${i}, ${t("Site.PHP.index_42")} [${n}]`)}}}const{message:s}=await J({websites_content:a});_(s)&&(c.success(s.msg),(e=>{const a=[];Object.entries(e.error).forEach((([e,t])=>{a.push({name:e,status:"error",errorMsg:t.result})})),Object.entries(e.success).forEach((([e,t])=>{a.push({name:e,status:"success",succesInfo:t})})),Q({title:t("Site.PHP.index_38"),content:()=>H("div",{class:"w-500px p-20px"},[H(Y,{data:a,columns:u.value},null)])})})(s)),l.setRefresh(!0)}}),(e,a)=>{const t=i,l=A,n=s;return g(),h("div",Be,[H(n,{ref:"formRef"},{default:U((()=>[H(l,{label:""},{default:U((()=>[H(t,{value:$(d).domain,"onUpdate:value":a[0]||(a[0]=e=>$(d).domain=e),rows:10,name:"batch-domain"},null,8,["value"])])),_:1})])),_:1},512),w("div",Fe,[w("p",null,k(e.$t("Site.PHP.add_site_39")),1),w("p",Je,k(e.$t("Site.PHP.add_site_40")),1),w("p",null,k(e.$t("Site.PHP.add_site_41")),1),w("p",null,k(e.$t("Site.PHP.add_site_42")),1),w("p",null,k(e.$t("Site.PHP.add_site_43")),1),w("p",null,k(e.$t("Site.PHP.add_site_44")),1),a[1]||(a[1]=w("p",{class:"mt-6px"},"Eq, bt.cn,test.cn:8081|/www/wwwroot/bt.cn|1|1|56",-1))])])}}}),Qe={class:"p-20px h-full"};e("default",P(f({__name:"index",props:{done:{type:Function}},setup(e,{expose:a}){const s=e,{t:l}=x(),i=q("single"),n=q(),d=[{key:"single",label:l("Site.PHP.add_site_1"),isLazy:!0,component:De,data:{getList:s.done}},{key:"batch",label:l("Site.PHP.add_site_2"),isLazy:!0,component:Ne}];return a({onConfirm:async()=>{await(n.value?.onConfirm())}}),(e,a)=>{const s=t;return g(),h("div",Qe,[H(s,{ref_key:"tabsRef",ref:n,value:$(i),"onUpdate:value":a[0]||(a[0]=e=>R(i)?i.value=e:null),options:d},null,8,["value"])])}}}),[["__scopeId","data-v-22c72b40"]]))}}}));
