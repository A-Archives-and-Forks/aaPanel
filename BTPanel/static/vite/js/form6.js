import{_ as e}from"./index.vue_vue_type_script_setup_true_lang.js?v=1742891699271";import{d as t,O as r,r as a,j as l,R as o,S as s,P as i,a1 as p,U as u,V as n,k as _,v as c}from"./vue.js?v=1742891699271";import{aZ as m,I as v,J as d}from"./page_layout.js?v=1742891699271";import{i as y,j as f,k as w}from"./index55.js?v=1742891699271";import{cn as b,ch as x,bY as h}from"./naive.js?v=1742891699271";import"./__commonjsHelpers__.js?v=1742891699271";import"./common.js?v=1742891699271";import"./public.js?v=1742891699271";import"./index123.js?v=1742891699271";import"./index104.js?v=1742891699271";import"./index.js?v=1742891699271";import"./index.vue_vue_type_script_setup_true_lang4.js?v=1742891699271";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1742891699271";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1742891699271";import"./index.vue_vue_type_script_setup_true_lang12.js?v=1742891699271";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1742891699271";import"./file.js?v=1742891699271";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1742891699271";const j={class:"px-20px pt-24px pb-8px"},g={class:"w-240px"},S={class:"w-240px"},A={class:"w-240px"},F={class:"w-240px"},U=t({__name:"form",props:{row:{},isEdit:{type:Boolean,default:!1}},emits:["refresh"],setup(t,{expose:U,emit:E}){const $=t,k=E,{t:C}=r(),{isEdit:H,row:R}=$,B=a(null),I=l({types:"drop",choose:"all",ports:null,country:["United States"]}),J={country:{trigger:"change",validator:()=>0!==I.country.length||new Error(C("Security.Firewall.Area.form_8"))},ports:{trigger:["blur","input"],validator:()=>{if("point"===I.choose){if(!I.ports)return new Error(C("Security.Firewall.Area.form_9"));if(!m("".concat(I.ports)))return new Error(C("Security.Firewall.Area.form_10"))}return!0}}},O=[{label:C("Security.Firewall.Area.form_11"),value:"all"},{label:C("Security.Firewall.Area.form_3"),value:"point"}],P=[{label:C("Security.Firewall.Area.form_12"),value:"drop"}],V=a(!1),Y=a([]);return(async()=>{try{V.value=!0;const{message:e}=await y();v(e)&&(Y.value=e.map((e=>({label:e.CH,value:e.CH,brief:e.brief}))))}finally{V.value=!1}})(),H&&R&&(I.types=R.types,I.choose=R.ports?"point":"all",I.ports=R.ports?d(R.ports):null,I.country=R.country),U({onConfirm:async()=>{var e,t;await(null==(e=B.value)?void 0:e.validate());const r={types:I.types,choose:I.choose,ports:"point"===I.choose?"".concat(I.ports||""):"",country:I.country,brief:""};H&&R?(r.brief="".concat((null==(t=Y.value.find((e=>e.label===R.country)))?void 0:t.brief)||""),await f({...r,id:R.id})):await w(r),k("refresh")}}),(t,r)=>{const a=b,l=x,m=h,v=e;return o(),s("div",j,[i(v,{ref_key:"formRef",ref:B,model:n(I),rules:J},{default:p((()=>[i(l,{label:t.$t("Security.Firewall.Area.form_1"),path:"types"},{default:p((()=>[u("div",g,[i(a,{value:n(I).types,"onUpdate:value":r[0]||(r[0]=e=>n(I).types=e),options:P},null,8,["value"])])])),_:1},8,["label"]),i(l,{label:t.$t("Security.Firewall.Area.form_2"),path:"choose"},{default:p((()=>[u("div",S,[i(a,{value:n(I).choose,"onUpdate:value":r[1]||(r[1]=e=>n(I).choose=e),options:O},null,8,["value"])])])),_:1},8,["label"]),_(i(l,{label:t.$t("Security.Firewall.Area.form_3"),path:"ports"},{default:p((()=>[u("div",A,[i(m,{value:n(I).ports,"onUpdate:value":r[2]||(r[2]=e=>n(I).ports=e),min:1,max:65535,"show-button":!1,placeholder:t.$t("Security.Firewall.Area.form_4")},null,8,["value","placeholder"])])])),_:1},8,["label"]),[[c,"point"===n(I).choose]]),i(l,{label:t.$t("Security.Firewall.Area.form_5"),path:"country"},{default:p((()=>[u("div",F,[i(a,{value:n(I).country,"onUpdate:value":r[3]||(r[3]=e=>n(I).country=e),filterable:"","max-tag-count":"responsive",multiple:!n(H),loading:n(V),options:n(Y)},null,8,["value","multiple","loading","options"])])])),_:1},8,["label"])])),_:1},8,["model"])])}}});export{U as default};
