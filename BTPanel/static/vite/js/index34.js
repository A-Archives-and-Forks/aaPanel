import{_ as e}from"./index.js?v=1749179669910";import{_ as a}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1749179669910";import{e as r,c as o,f as t,d as s,z as l,h as i}from"./public.js?v=1749179669910";import{_ as d}from"./index.vue_vue_type_script_setup_true_lang13.js?v=1749179669910";import{b$ as n,c0 as p,c,c1 as u,bQ as m,N as _}from"./page_layout.js?v=1749179669910";import{_ as y}from"./index.vue_vue_type_script_setup_true_lang.js?v=1749179669910";import{d as k,O as f,t as v,r as w,j as x,R as h,S as g,P as R,a1 as b,U as D,V as j,M as $,a0 as U,c as E,a2 as C,aj as P}from"./vue.js?v=1749179669910";import{_ as B,cj as L,cm as z,T as K}from"./naive.js?v=1749179669910";import"./common.js?v=1749179669910";import"./__commonjsHelpers__.js?v=1749179669910";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1749179669910";const S={class:"px-20px py-24px"},H={class:"w-430px"},M={class:"w-430px"},N={class:"flex"},O={class:"w-160px"},Q={class:"w-160px"},T={class:"w-430px"},V={class:"w-430px"},q=k({__name:"index",props:{isEdit:{type:Boolean,default:!1},row:{default:void 0}},emits:["refresh"],setup(e,{expose:a,emit:r}){const o=e,t=r,{t:s}=f(),l=v(o,"isEdit"),i=w(),d=x({registry:"",name:"",username:"",password:"",namespace:"",remark:""}),u={registry:{trigger:["blur"],validator:()=>""!==d.registry||new Error(s("Docker.Repository.form.index_11"))},name:{trigger:["blur"],validator:()=>""!==d.name||new Error(s("Docker.Repository.form.index_12"))},username:{trigger:["blur"],validator:()=>""!==d.username||new Error(s("Docker.Repository.form.index_13"))},password:{trigger:["blur"],validator:()=>""!==d.password||new Error(s("Docker.Repository.form.index_13"))},namespace:{trigger:["blur"],validator:()=>""!==d.namespace||new Error(s("Docker.Repository.form.index_14"))}};return(()=>{const{row:e}=o;l.value&&c(e)&&(console.log(1),d.registry=e.url,d.name=e.name,d.username=e.username,d.password=e.password,d.namespace=e.namespace,d.remark=e.remark)})(),a({onConfirm:async()=>{var e;await(null==(e=i.value)?void 0:e.validate()),l.value?o.row&&await p({...$(d),id:o.row.id}):await n($(d)),t("refresh")}}),(e,a)=>{const r=B,o=L,t=y;return h(),g("div",S,[R(t,{ref_key:"formRef",ref:i,model:j(d),rules:u,"label-width":"140px"},{default:b((()=>[R(o,{label:e.$t("Docker.Repository.form.index_1"),path:"registry"},{default:b((()=>[D("div",H,[R(r,{value:j(d).registry,"onUpdate:value":a[0]||(a[0]=e=>j(d).registry=e),placeholder:e.$t("Docker.Repository.form.index_2")},null,8,["value","placeholder"])])])),_:1},8,["label"]),R(o,{label:e.$t("Docker.Repository.form.index_3"),path:"name"},{default:b((()=>[D("div",M,[R(r,{value:j(d).name,"onUpdate:value":a[1]||(a[1]=e=>j(d).name=e),placeholder:e.$t("Docker.Repository.form.index_4")},null,8,["value","placeholder"])])])),_:1},8,["label"]),D("div",N,[R(o,{label:e.$t("Docker.Repository.form.index_5"),path:"username"},{default:b((()=>[D("div",O,[R(r,{value:j(d).username,"onUpdate:value":a[2]||(a[2]=e=>j(d).username=e),placeholder:e.$t("Docker.Repository.form.index_6")},null,8,["value","placeholder"])])])),_:1},8,["label"]),R(o,{label:e.$t("Docker.Repository.form.index_15"),"label-width":"110",path:"password"},{default:b((()=>[D("div",Q,[R(r,{value:j(d).password,"onUpdate:value":a[3]||(a[3]=e=>j(d).password=e),placeholder:e.$t("Docker.Repository.form.index_7")},null,8,["value","placeholder"])])])),_:1},8,["label"])]),R(o,{label:e.$t("Docker.Repository.form.index_8"),path:"namespace"},{default:b((()=>[D("div",T,[R(r,{value:j(d).namespace,"onUpdate:value":a[4]||(a[4]=e=>j(d).namespace=e),placeholder:e.$t("Docker.Repository.form.index_9")},null,8,["value","placeholder"])])])),_:1},8,["label"]),R(o,{label:e.$t("Docker.Repository.form.index_10"),path:"remark","show-feedback":!1},{default:b((()=>[D("div",V,[R(r,{value:j(d).remark,"onUpdate:value":a[5]||(a[5]=e=>j(d).remark=e),placeholder:e.$t("Docker.Repository.form.index_10")},null,8,["value","placeholder"])])])),_:1},8,["label"])])),_:1},8,["model"])])}}}),A=k({__name:"index",setup(n){const{t:p}=f(),c=r(p("Docker.Repository.index_1"),{isEdit:!1,onRefresh:()=>{S()}}),y=()=>{c.data.row=void 0,c.data.isEdit=!1,c.title=p("Docker.Repository.index_1"),c.show=!0},k=x({page:1,pageSize:10}),{keys:v,table:w,columns:g}=o([{type:"selection",width:40},{key:"url",title:"URL",ellipsis:{tooltip:{width:"trigger"}},render:e=>e.url||"--"},{key:"namespace",title:p("Docker.Repository.index_3"),ellipsis:{tooltip:{width:"trigger"}},render:e=>e.namespace||"--"},{key:"name",title:p("Docker.Repository.index_4"),ellipsis:{tooltip:{width:"trigger"}},render:e=>e.name||"--"},{key:"remark",title:p("Docker.Repository.index_5"),render:e=>e.remark||"--"},t({width:120,options:e=>[{label:p("Public.Btn.Edit"),disabled:1===e.id,onClick:()=>{(e=>{c.data.row=e,c.data.isEdit=!0,c.title=p("Docker.Repository.index_2",[e.name]),c.show=!0})(e)}},{label:p("Public.Btn.Del"),disabled:1===e.id,onClick:()=>{D(e)}}]})]),D=e=>{l({title:p("Docker.Repository.index_8",[e.name]),content:p("Docker.Repository.index_9",[e.name]),onConfirm:async()=>{await u({id:e.id}),S()}})},$=[{key:"del",type:"confirm",label:"Please choose del",confirm:{title:p("Docker.Repository.index_10"),desc:p("Docker.Repository.index_11"),columns:[g.value[3]],api:e=>u({id:e.id},!1),done:()=>{S()}}}],{loading:B,setLoading:L}=s(),S=async()=>{try{L(!0);const{message:e}=await m();w.data=_(e)?e:[]}finally{v.value=[],L(!1)}};return S(),(r,o)=>{const t=K,s=d,l=i,n=a,p=e,u=z;return h(),U(u,{class:"p-16px"},{default:b((()=>[R(n,null,{toolsLeft:b((()=>[R(t,{type:"primary",onClick:y},{default:b((()=>[E(C(r.$t("Docker.Repository.index_1")),1)])),_:1})])),table:b((()=>[R(l,{page:j(k),"onUpdate:page":o[1]||(o[1]=e=>P(k)?k.value=e:null),"checked-row-keys":j(v),"onUpdate:checkedRowKeys":o[2]||(o[2]=e=>P(v)?v.value=e:null),"is-page":!0,loading:j(B),data:j(w).data,columns:j(g)},{pagePrefix:b((()=>[R(s,{"checked-row-keys":j(v),"onUpdate:checkedRowKeys":o[0]||(o[0]=e=>P(v)?v.value=e:null),data:j(w).data,options:$},null,8,["checked-row-keys","data"])])),_:1},8,["page","checked-row-keys","loading","data","columns"])])),_:1}),R(p,{show:j(c).show,"onUpdate:show":o[3]||(o[3]=e=>j(c).show=e),data:j(c).data,title:j(c).title,width:620,footer:!0,component:q},null,8,["show","data","title"])])),_:1})}}});export{A as default};
