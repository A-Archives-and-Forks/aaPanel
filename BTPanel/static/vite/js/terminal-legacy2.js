System.register(["./xterm-legacy.js?v=1756367574781","./xterm-addon-canvas-legacy.js?v=1756367574781","./vue-legacy.js?v=1756367574781","./page_layout-legacy.js?v=1756367574781","./public-legacy.js?v=1756367574781"],function(e,t){"use strict";var n,o,a,s,d,l,i,r,c,u,v,p,f,m,g,x,h,w,A;return{setters:[e=>{n=e.x,o=e.a,a=e.b,s=e.c},e=>{d=e.x},e=>{l=e.k,i=e.P,r=e.a0,c=e.r,u=e.w,v=e.ap,p=e.o,f=e.b,m=e.R,g=e.V,x=e.n},e=>{h=e.d4,w=e.p},e=>{A=e.D}],execute:function(){var t=document.createElement("style");t.textContent="[data-v-3f2e8f75] .xterm{padding:12px!important}.box[data-v-3f2e8f75]{height:calc(100vh - 160px)}\n/*$vite$:1*/",document.head.appendChild(t),e("T",w(l({__name:"terminal",props:{data:{}},emits:["updateState","connectSuccess"],setup(e,{expose:t,emit:l}){const{t:w}=i(),y=e,{data:b}=y,S=l,C=h(),{isFull:_}=r(C),{ws:O,status:j,send:k,open:T,close:D}=A("/webssh",{verifyData:{host:b.host,port:b.port,id:b.id,ps:b.ps,sort:0},onMessage:(e,t)=>{const n=t.data;return n.indexOf("Authentication timeout.")>-1&&(F.value=!0),-1==n.indexOf("@127.0.0.1:")&&-1==n.indexOf("@localhost:")||-1==n.indexOf("Authentication failed")?"\\r\\nlogout\\r\\n"==n||"logout\\r\\n"==n||"\r\nlogout\r\n"==n||"logout\r\n"==n||n.search(/logout[\r\n]+$/)>-1?(S("updateState",b.id,!1),$.write("\r"+w("Component.Terminal.index_1")+"\r"),B(),void D()):void S("connectSuccess",n):(S("updateState",b.id,!1),D(),void B())}});let $,z;const F=c(!1),M=c(null),R=()=>{const e=O.value;e&&($.loadAddon(z),$.loadAddon(new d.CanvasAddon),$.loadAddon(new a.WebLinksAddon),$.loadAddon(new s.AttachAddon(e)),setTimeout(()=>{z.fit();const e=M.value;e&&(H.value=`${e.clientHeight}px`)},100))},E=()=>{M.value&&$.open(M.value)};let L=!1;const B=()=>{L=!1},H=c(""),I=()=>{$.focus(),$.onData(e=>{const t=O.value;"\r"===e&&F.value&&(F.value=!1,$.write("\r\n"),N()),void 0!==t||"\r"!==e||L||(L=!0,$.write("\r\n"+w("Component.Terminal.index_2")+"\r\n"),N())})},N=()=>{T(),I();const e=O.value;e&&($.loadAddon(new s.AttachAddon(e)),S("updateState",b.id,!0))},P=()=>{x(()=>{if(z.fit(),"CLOSED"!==j.value){S("updateState",b.id,!0);const{cols:e,rows:t}=$;k({cols:e,rows:t,resize:1})}})};u(()=>_.value,e=>{const t=M.value;t&&!e&&(t.style.height=H.value)});let V=!0;const W=new ResizeObserver(()=>{v(()=>{V?V=!1:P()},200)()});return t({send:k}),p(()=>{$=new n.Terminal({cursorBlink:!0,fontSize:14,fontFamily:"Monaco, Menlo, Consolas, 'Courier New', monospace",theme:{background:"#333",foreground:"#ececec"}}),z=new o.FitAddon,R(),E(),I(),P(),(()=>{const e=M.value;e&&W.observe(e)})()}),f(()=>{W?.disconnect()}),(e,t)=>(g(),m("div",{ref_key:"terminalRef",ref:M,class:"w-full box"},null,512))}}),[["__scopeId","data-v-3f2e8f75"]]))}}});
