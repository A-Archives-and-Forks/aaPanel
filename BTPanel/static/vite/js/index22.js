const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index125.js?v=1741416570306","js/index.vue_vue_type_script_setup_true_lang.js?v=1741416570306","js/vue.js?v=1741416570306","js/__commonjsHelpers__.js?v=1741416570306","js/naive.js?v=1741416570306","js/common.js?v=1741416570306","js/page_layout.js?v=1741416570306","js/public.js?v=1741416570306","css/public.css?v=1741416570306","css/page_layout.css?v=1741416570306","js/index.vue_vue_type_script_setup_true_lang2.js?v=1741416570306","js/index96.js?v=1741416570306","css/index15.css?v=1741416570306","js/index122.js?v=1741416570306","js/index123.js?v=1741416570306","css/index23.css?v=1741416570306","js/soft.js?v=1741416570306"])))=>i.map(i=>d[i]);
import{d as a,j as e,aI as t,aJ as s,b as o,n,aK as i,aA as l,aD as d,aE as r,aH as p,G as u,av as _,aG as c,a as m,m as b,l as h}from"./page_layout.js?v=1741416570306";import{_ as x}from"./index.js?v=1741416570306";import{_ as g}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1741416570306";import{_ as f}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1741416570306";import{_ as w}from"./index.vue_vue_type_script_setup_true_lang12.js?v=1741416570306";import{_ as y}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1741416570306";import{_ as v}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1741416570306";import{_ as k}from"./index121.js?v=1741416570306";import{n as D,c as j,d as C,b as R,p as U,f as $,a as z,q as I}from"./public.js?v=1741416570306";import{a as B,b as W,c as L,u as P,d as H,_ as S,e as E,g as G}from"./index122.js?v=1741416570306";import{g as K}from"./hooks.js?v=1741416570306";import{N as O,c as q,i as A,d as M,M as T,r as V,j as J,P as N,Q,$ as F,R as X,S as Y,a7 as Z,a0 as aa,w as ea,_ as ta,ao as sa,ae as oa,W as na}from"./vue.js?v=1741416570306";import{_ as ia}from"./index.vue_vue_type_script_setup_true_lang.js?v=1741416570306";import{_ as la}from"./index.vue_vue_type_script_setup_true_lang2.js?v=1741416570306";import{cb as da,bV as ra,T as pa,ce as ua}from"./naive.js?v=1741416570306";import{_ as _a}from"./index95.js?v=1741416570306";import"./common.js?v=1741416570306";import"./__commonjsHelpers__.js?v=1741416570306";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1741416570306";import"./php.js?v=1741416570306";import"./soft.js?v=1741416570306";import"./index123.js?v=1741416570306";import"./index96.js?v=1741416570306";const{t:ca}=a.global;const ma={class:"px-20px pt-24px pb-8px"},ba={class:"w-320px"},ha=M({__name:"index",setup(a,{expose:e}){const{t:i}=T(),l=V(null),d=J({password:""}),r={password:{required:!0,message:i("Database.tools.index_65"),trigger:"blur"}},{loading:p,setLoading:u}=j();return(async()=>{try{u(!0);const{message:a}=await s();o(a)&&(d.password=n(a.root)?a.root:"")}finally{u(!1)}})(),e({onConfirm:async({hide:a})=>{var e;try{await(null==(e=l.value)?void 0:e.validate()),await t(Z(d)),a()}catch(s){console.error(s)}}}),(a,e)=>{const t=la,s=da,o=ia;return N(),Q("div",ma,[O(o,{ref_key:"formRef",ref:l,model:Y(d),rules:r},{default:F((()=>[O(s,{label:a.$t("Database.index_2"),path:"password"},{default:F((()=>[X("div",ba,[O(t,{value:Y(d).password,"onUpdate:value":e[0]||(e[0]=a=>Y(d).password=a),loading:Y(p),default:!1},null,8,["value","loading"])])])),_:1},8,["label"])])),_:1},8,["model"])])}}}),xa={class:"px-20px py-24px"},ga=M({__name:"index",props:{data:{}},setup(a){const e=a,{status:t,getInfo:s}=e.data,o=J({status:t}),n=async()=>{await i(Z(o)),null==s||s()};return(a,e)=>{const t=ra,s=da,i=ia,l=_a;return N(),Q("div",xa,[O(i,{"label-width":"160"},{default:F((()=>[O(s,{label:a.$t("Database.mongo.index_1"),"show-feedback":!1},{default:F((()=>[O(t,{value:Y(o).status,"onUpdate:value":[e[0]||(e[0]=a=>Y(o).status=a),n],"checked-value":1},null,8,["value"])])),_:1},8,["label"])])),_:1}),O(l,{class:"mt-16px"},{default:F((()=>[X("li",null,aa(a.$t("Database.mongo.index_2")),1)])),_:1})])}}}),fa={class:"p-16px"},wa=M({__name:"index",setup(a){const{t:t}=T(),n=na((()=>m((()=>import("./index125.js?v=1741416570306")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16])))),i=l(),M=C(t("Database.mongo.index_4"),{status:!1}),V=()=>{M.data.status="enabled"===ya.authorization,M.show=!0},Q=C(t("Database.tools.index_70")),ia=()=>{"enabled"===ya.authorization?Q.show=!0:(da(),b.warning(t("Database.mongo.index_5")))},la=C(t("Database.mongo.index_1"),{status:0}),da=()=>{la.data.status="enabled"===ya.authorization?1:0,la.data.getInfo=va,la.show=!0},ra=()=>{G()},_a=async()=>{await d(i.type,{ids:[]}),Ca()},{keys:ma,table:ba,columns:xa}=R([{type:"selection",width:40},{key:"name",title:ca("Database.index_12"),width:"12%",minWidth:120},{key:"username",title:ca("Database.form.index_3"),width:"12%",minWidth:120},{key:"password",title:ca("Database.index_14"),minWidth:150,render:a=>O(D,{value:a.password},null)},{key:"backup_count",title:ca("Database.index_16"),width:"12%",render:a=>{let t;return O("div",{class:"flex items-center"},[O(e,{type:a.backup_count>0?"primary":"warning",onClick:()=>{B(a)}},{default:()=>[a.backup_count>0?"".concat(ca("Database.mongo.index_7"),"(").concat(a.backup_count,")"):ca("Database.index_18")]}),O("span",{class:"mx-4px"},[q("|")]),O(e,{onClick:()=>{W(a)}},(s=t=ca("Public.Btn.Import"),"function"==typeof s||"[object Object]"===Object.prototype.toString.call(s)&&!A(s)?t:{default:()=>[t]}))]);var s}},{key:"sid",title:ca("Database.mongo.index_8"),width:"12%",minWidth:120,render:a=>K(a)},U({onBlur:async(a,e)=>{await c({id:e.id,ps:a})}}),$({width:100,options:a=>[{label:"CHG PW",onClick:()=>{P(a)}},{label:t("Public.Btn.Del"),onClick:()=>{L([a])}}]})]),wa=[{key:"sync",label:t("Database.index_24"),onBatch:a=>{z({title:t("Database.index_25"),content:t("Database.index_26"),onConfirm:async({hide:e})=>{await d(i.type,{ids:a.map((a=>a.id))}),e()}})}},{key:"backup",type:"confirm",label:t("Database.index_27"),confirm:{title:t("Database.index_28"),desc:t("Database.index_29"),api:a=>r(i.type,{id:a.id},!1),done:()=>{Ca()},columns:[{key:"name",title:t("Database.index_12")}]}},{key:"delete",label:t("Database.index_30"),onBatch:a=>{L(a)}}],ya=J({authorization:"",msg:"",port:"",root:""}),va=async()=>{const{message:a}=await s();o(a)&&(ya.authorization=a.authorization,ya.msg=a.msg,ya.port=a.port,ya.root=a.root)},{loading:ka,setLoading:Da}=j(),ja=J({p:1,limit:10,sid:-1,search:""}),Ca=async()=>{try{Da(!0);const{message:a}=await p(i.type,(()=>{const a={...Z(ja)};return-1===a.sid&&delete a.sid,a})());o(a)?(ba.data=u(a.data)?a.data:[],ba.total=_(a.page)):(ba.data=[],ba.total=0)}finally{ma.value=[],Da(!1)}};ea((()=>i.isRefresh),(a=>{a&&(i.setRefresh(!1),i.delRemoteId===ja.sid&&(ja.sid=-1),Ca())}));return(async()=>{await i.getRemote(),i.install?(Ca(),va()):I()})(),(a,e)=>{const t=pa,s=h,o=k,l=v,d=y,r=w,p=f,u=g,_=x,c=ua;return N(),ta(Y(E),null,{default:F((()=>[O(c,null,{default:F((()=>[X("div",fa,[O(u,null,{toolsLeft:F((()=>[O(t,{type:"primary",onClick:V},{default:F((()=>[q(aa(a.$t("Database.index_1")),1)])),_:1}),O(t,{onClick:ia},{default:F((()=>[q(aa(a.$t("Database.index_2")),1)])),_:1}),O(t,{onClick:da},{default:F((()=>[q(aa(a.$t("Database.mongo.index_1")),1)])),_:1}),O(t,{onClick:ra},{default:F((()=>[q(aa(a.$t("Database.index_4")),1)])),_:1}),O(s,{class:"mx-0!",vertical:""}),O(t,{onClick:_a},{default:F((()=>[q(aa(a.$t("Database.index_5")),1)])),_:1}),O(t,{onClick:Y(H)},{default:F((()=>[q(aa(a.$t("Database.index_6")),1)])),_:1},8,["onClick"]),Y(i).isInstallMongoDB?(N(),ta(o,{key:0,"soft-name":"mongodb"})):sa("",!0)])),toolsRight:F((()=>[O(Y(S),{value:Y(ja).sid,"onUpdate:value":e[0]||(e[0]=a=>Y(ja).sid=a),"store-key":"database-mongo-page",onChange:Ca},null,8,["value"]),O(l,{value:Y(ja).search,"onUpdate:value":e[1]||(e[1]=a=>Y(ja).search=a),placeholder:a.$t("Database.mongo.index_3"),onSearch:Ca},null,8,["value","placeholder"])])),table:F((()=>[O(d,{"checked-row-keys":Y(ma),"onUpdate:checkedRowKeys":e[2]||(e[2]=a=>oa(ma)?ma.value=a:null),loading:Y(ka),data:Y(ba).data,columns:Y(xa)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:F((()=>[O(r,{"checked-row-keys":Y(ma),"onUpdate:checkedRowKeys":e[3]||(e[3]=a=>oa(ma)?ma.value=a:null),data:Y(ba).data,options:wa},null,8,["checked-row-keys","data"])])),pageRight:F((()=>[O(p,{page:Y(ja).p,"onUpdate:page":e[4]||(e[4]=a=>Y(ja).p=a),"page-size":Y(ja).limit,"onUpdate:pageSize":e[5]||(e[5]=a=>Y(ja).limit=a),"store-key":"database-mongo-page","item-count":Y(ba).total,onRefresh:Ca},null,8,["page","page-size","item-count"])])),_:1}),O(_,{show:Y(M).show,"onUpdate:show":e[6]||(e[6]=a=>Y(M).show=a),title:Y(M).title,width:540,minHeight:176,footer:!0,data:Y(M).data,component:Y(n)},null,8,["show","title","data","component"]),O(_,{show:Y(Q).show,"onUpdate:show":e[7]||(e[7]=a=>Y(Q).show=a),title:Y(Q).title,width:520,footer:!0,component:ha},null,8,["show","title"]),O(_,{show:Y(la).show,"onUpdate:show":e[8]||(e[8]=a=>Y(la).show=a),title:Y(la).title,width:400,data:Y(la).data,component:ga},null,8,["show","title","data"])])])),_:1})])),_:1})}}});export{wa as default};
