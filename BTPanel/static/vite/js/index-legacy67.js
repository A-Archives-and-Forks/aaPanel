System.register(["./vue-legacy.js?v=1741416570306","./page_layout-legacy.js?v=1741416570306","./index-legacy104.js?v=1741416570306","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1741416570306","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1741416570306","./public-legacy.js?v=1741416570306","./naive-legacy.js?v=1741416570306","./index-legacy.js?v=1741416570306","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1741416570306","./xterm-legacy.js?v=1741416570306","./xterm-addon-canvas-legacy.js?v=1741416570306"],(function(e,t){"use strict";var a,n,o,l,i,r,s,c,d,u,p,v,m,b,g,h,x,_,y,f,w,k,C,T,S,A,j,O,E,L,I,z,M,D,F,R,$,q,U,P,B,Y,H,K,N,W,G,Q,X,J,V,Z,ee,te,ae,ne,oe,le,ie,re;return{setters:[e=>{a=e.W,n=e.d,o=e.M,l=e.N,i=e.w,r=e.P,s=e.Q,c=e.$,d=e.c,u=e.a0,p=e.S,v=e.ae,m=e.r,b=e.j,g=e.Y,h=e.au,x=e.f,_=e.o,y=e.n,f=e._,w=e.L,k=e.af,C=e.an,T=e.R,S=e.H,A=e.F,j=e.ao,O=e.k,E=e.v},e=>{L=e.d,I=e.az,z=e.a,M=e.c6,D=e.G,F=e.k,R=e._,$=e.c},e=>{q=e._},e=>{U=e._},e=>{P=e._},e=>{B=e.u,Y=e.b,H=e.f,K=e.a,N=e.c,W=e.h,G=e.d,Q=e.s},e=>{X=e.T,J=e._,V=e.cb,Z=e.bO,ee=e.ce},e=>{te=e._},e=>{ae=e._},e=>{ne=e.x,oe=e.a,le=e.b,ie=e.c},e=>{re=e.x}],execute:function(){var se=document.createElement("style");se.textContent='[data-v-b79b3036] .xterm{padding:12px!important}.box[data-v-b79b3036]{height:calc(100vh - 160px)}.terminal[data-v-b0b3524c]{position:relative;height:100%}.head[data-v-b0b3524c]{position:relative;height:40px;align-items:center;--un-bg-opacity:1;background-color:rgb(241 241 241 / var(--un-bg-opacity))}.head .item[data-v-b0b3524c]{width:160px;height:100%;display:flex;cursor:pointer;align-items:center;justify-content:space-between;padding-left:8px;padding-right:8px;border-right:1px solid rgb(231,225,225)}.head .item .close-terminal[data-v-b0b3524c]{--un-text-opacity:1;color:rgb(239 8 8 / var(--un-text-opacity))}.head .item .close-terminal[data-v-b0b3524c]:hover{--un-bg-opacity:1;background-color:rgb(247 247 247 / var(--un-bg-opacity))}.head .item .text[data-v-b0b3524c]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.head .item .icon[data-v-b0b3524c]{margin-right:5px;width:10px;height:10px;--un-bg-opacity:1;background-color:rgb(32 165 58 / var(--un-bg-opacity));display:inline-block;border-radius:50%}.head .item .icon-active[data-v-b0b3524c]{--un-bg-opacity:1;background-color:rgb(247 11 60 / var(--un-bg-opacity))}.head .item[data-v-b0b3524c]:hover{--un-bg-opacity:1;background-color:rgb(218 218 218 / var(--un-bg-opacity))}.head .item-active[data-v-b0b3524c]{--un-text-opacity:1;color:rgb(255 255 255 / var(--un-text-opacity));background:#424242!important}.head .add-terminal[data-v-b0b3524c]{width:40px;height:40px;text-align:center;line-height:50px}.head .add-terminal[data-v-b0b3524c]:hover{--un-bg-opacity:1;background-color:rgb(204 204 204 / var(--un-bg-opacity))}.context-menu[data-v-b0b3524c]{position:absolute;z-index:9999;--un-bg-opacity:1;background-color:rgb(255 255 255 / var(--un-bg-opacity));--un-text-opacity:1;color:rgb(102 102 102 / var(--un-text-opacity));border-radius:5px}.context-menu ul[data-v-b0b3524c]{width:150px;padding-top:5px;padding-bottom:5px;list-style:none}.context-menu ul li[data-v-b0b3524c]{cursor:pointer;padding:8px 10px}.context-menu ul li[data-v-b0b3524c]:hover{--un-bg-opacity:1;background-color:rgb(231 245 233 / var(--un-bg-opacity));--un-text-opacity:1;color:rgb(29 149 52 / var(--un-text-opacity))}.terminal-contract-tool[data-v-b0b3524c]{position:absolute;right:0;top:50%;z-index:50;height:4rem;width:2rem;display:flex;cursor:pointer;align-items:center;justify-content:center;border-bottom-left-radius:9999px;border-top-left-radius:9999px;--un-bg-opacity:1;background-color:rgb(55 65 81 / var(--un-bg-opacity));background-color:#555;transform:translateY(-50%)}.terminal-contract-tool[data-v-b0b3524c]:after{content:"";--un-border-opacity:1;border-color:rgb(255 255 255 / var(--un-border-opacity));border:2px solid rgb(255,255,255);transform:rotate(45deg);border-left-width:0;border-bottom-width:0;height:1rem;width:1rem}.terminal-contract-tool[data-v-b0b3524c]:hover{--un-bg-opacity:1;background-color:rgb(107 114 128 / var(--un-bg-opacity))}.active[data-v-b0b3524c]:after{transform:rotate(-135deg)!important}.box[data-v-932584a7]{height:calc(100vh - 52px)}\n',document.head.appendChild(se);const{t:ce}=L.global,de=(e("a",(e=>I.post("/xterm?action=create_host",e,{requestOptions:{loading:ce("Security.Api.Index_4"),successMessage:!0}}))),e("g",(e=>I.post("/xterm?action=get_host_find",e))),e=>I.post("/xterm?action=remove_host",e,{requestOptions:{loading:ce("Security.Api.Index_3"),successMessage:!0}})),ue=e=>I.post("/xterm?action=create_command",e,{requestOptions:{loading:ce("Security.Api.Index_4"),successMessage:!0}}),pe=e=>I.post("/xterm?action=modify_command",e,{requestOptions:{loading:ce("Crontab.Api.index_5"),successMessage:!0}}),ve=e=>I.post("/xterm?action=remove_command",e,{requestOptions:{loading:ce("Security.Api.Index_3"),successMessage:!0}}),me=e=>{B({title:e.title,width:600,footer:!0,data:e.data,component:a((()=>z((()=>t.import("./form-legacy8.js?v=1741416570306")),void 0)))})},be=n({__name:"index",setup(e,{expose:t}){const{t:a}=o(),n=M(),{keys:m,table:b,columns:g}=Y([{key:"host",title:a("Term.index_8"),ellipsis:{tooltip:{width:"trigger"}},render:e=>l("span",{class:"cursor-pointer w-100%",onClick:()=>x(e)},[e.host])},H({width:130,options:e=>[{label:a("Site.TableOP.index_7"),onClick:()=>{const t={title:a("Term.index_22"),data:{isEdit:!0,row:e}};me(t)}},{label:a("Public.Btn.Del"),onClick:()=>{K({title:a("Term.index_6"),content:a("Term.index_7",[e.host]),onConfirm:async({hide:t})=>{await de({host:e.host}),f(),t()}})}}]})]),h=()=>{const e={title:a("Term.index_19"),data:{isEdit:!1}};me(e)},x=e=>{n.server={...e,time:new Date}},{loading:_,setLoading:y}=N(),f=async()=>{try{y(!0);const{message:e}=await I.post("/xterm?action=get_host_list");D(e)&&(b.data=e)}finally{m.value=[],y(!1)}};return f(),i((()=>n.isRefresh),(e=>{e&&(n.setRefresh(!1),f())})),t({init:f}),(e,t)=>{const a=X,n=P,o=U;return r(),s("div",null,[l(o,null,{toolsLeft:c((()=>[l(a,{type:"primary",onClick:h},{default:c((()=>[d(u(e.$t("Term.index_19")),1)])),_:1})])),table:c((()=>[l(n,{"checked-row-keys":p(m),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>v(m)?m.value=e:null),loading:p(_),data:p(b).data,columns:p(g)},null,8,["checked-row-keys","loading","data","columns"])])),_:1})])}}}),ge={class:"p-20px"},he=n({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:a}=o(),n=e,{isEdit:i,row:d,getList:u}=n.data,v=m(null),g=b({name:"",content:""}),h={name:{required:!0,message:a("Security.Conf.Index_28"),trigger:["blur","input"]},content:{required:!0,message:a("Security.Conf.Index_28"),trigger:["blur","input"]}};return i&&d&&(g.name=d.title,g.content=d.shell),t({onConfirm:async({hide:e})=>{await(v.value?.validate()),i?await pe({shell:g.content,title:d?d.title:"",new_title:g.name}):await ue({shell:g.content,title:g.name}),u?.(),e()}}),(e,t)=>{const a=J,n=V,o=ae;return r(),s("div",ge,[l(o,{ref_key:"formRef",ref:v,model:p(g),rules:h},{default:c((()=>[l(n,{label:e.$t("Docker.Compose.form.index_3"),path:"name"},{default:c((()=>[l(a,{class:"w-280px!",value:p(g).name,"onUpdate:value":t[0]||(t[0]=e=>p(g).name=e),placeholder:e.$t("Term.idnex_1")},null,8,["value","placeholder"])])),_:1},8,["label"]),l(n,{label:e.$t("Docker.LocalImage.build_5"),path:"content"},{default:c((()=>[l(a,{class:"w-280px!",type:"textarea",rows:6,value:p(g).content,"onUpdate:value":t[1]||(t[1]=e=>p(g).content=e),placeholder:e.$t("Term.index_2")},null,8,["value","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"])])}}}),xe=n({__name:"index",setup(e,{expose:t}){const{t:a}=o(),{keys:n,table:i,columns:m}=Y([{key:"title",title:a("Term.index_4"),ellipsis:{tooltip:{width:"trigger"}},render:e=>l("span",{class:"cursor-pointer w-100%",onClick:()=>{b(e.shell)}},[e.title])},H({width:130,options:e=>[{label:a("Public.Btn.Copy"),onClick:()=>{b(e.shell)}},{label:a("Public.Btn.Edit"),onClick:()=>{f(e)}},{label:a("Public.Btn.Del"),onClick:()=>{K({title:a("Term.index_20"),content:a("Term.index_21",[e.title]),onConfirm:async({hide:t})=>{await ve({title:e.title}),x(),t()}})}}]})]),b=e=>{W(e)},{loading:g,setLoading:h}=N(),x=async()=>{try{h(!0);const{message:e}=await I.post("/xterm?action=get_command_list");D(e)&&(i.data=e)}finally{n.value=[],h(!1)}},_=G(a("Term.index_3"),{isEdit:!1,getList:x}),y=()=>{_.data.isEdit=!1,_.title=a("Term.index_3"),_.show=!0},f=e=>{_.data.row=e,_.data.isEdit=!0,_.title=a("Term.index_5"),_.show=!0};return x(),t({init:x}),(e,t)=>{const a=X,o=P,b=U,h=te;return r(),s("div",null,[l(b,null,{toolsLeft:c((()=>[l(a,{type:"primary",onClick:y},{default:c((()=>[d(u(e.$t("Term.index_3")),1)])),_:1})])),table:c((()=>[l(o,{"checked-row-keys":p(n),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>v(n)?n.value=e:null),loading:p(g),data:p(i).data,columns:p(m)},null,8,["checked-row-keys","loading","data","columns"])])),_:1}),l(h,{show:p(_).show,"onUpdate:show":t[1]||(t[1]=e=>p(_).show=e),title:p(_).title,data:p(_).data,width:480,footer:!0,component:he},null,8,["show","title","data"])])}}}),_e=n({__name:"index",setup(e){const{t:t}=o(),a=m("server"),n=[{key:"server",label:t("Term.index_23"),component:be},{key:"command",label:t("Term.index_24"),component:xe}];return(e,t)=>{const o=q;return r(),s("div",null,[l(o,{class:"w-300px!",value:p(a),"onUpdate:value":t[0]||(t[0]=e=>v(a)?a.value=e:null),options:n},null,8,["value"])])}}}),ye=n({__name:"terminal",props:{data:{}},emits:["updateState"],setup(e,{emit:t}){const{t:a}=o(),n=e,{data:l}=n,c=t,d=M(),{isFull:u}=g(d),{ws:p,status:v,send:b,open:f,close:w}=Q("/webssh",{verifyData:{host:l.host,port:l.port,id:l.id,ps:l.ps,sort:0},onMessage:(e,t)=>{const n=t.data;return n.indexOf("Authentication timeout.")>-1&&(T.value=!0),-1==n.indexOf("@127.0.0.1:")&&-1==n.indexOf("@localhost:")||-1==n.indexOf("Authentication failed")?"\\r\\nlogout\\r\\n"==n||"logout\\r\\n"==n||"\r\nlogout\r\n"==n||"logout\r\n"==n||n.search(/logout[\r\n]+$/)>-1?(c("updateState",l.id,!1),k.write("\r"+a("Component.Terminal.index_1")+"\r"),E(),void w()):void 0:(c("updateState",l.id,!1),w(),void E())}});let k,C;const T=m(!1),S=m(null),A=()=>{const e=p.value;e&&(k.loadAddon(C),k.loadAddon(new re.CanvasAddon),k.loadAddon(new le.WebLinksAddon),k.loadAddon(new ie.AttachAddon(e)),setTimeout((()=>{C.fit();const e=S.value;e&&(L.value=`${e.clientHeight}px`)}),100))},j=()=>{S.value&&k.open(S.value)};let O=!1;const E=()=>{O=!1},L=m(""),I=()=>{k.focus(),k.onData((e=>{const t=p.value;"\r"===e&&T.value&&(T.value=!1,k.write("\r\n"),z()),void 0!==t||"\r"!==e||O||(O=!0,k.write("\r\n"+a("Component.Terminal.index_2")+"\r\n"),z())}))},z=()=>{f(),I();const e=p.value;e&&(k.loadAddon(new ie.AttachAddon(e)),c("updateState",l.id,!0))},D=()=>{y((()=>{if(C.fit(),"CLOSED"!==v.value){c("updateState",l.id,!0);const{cols:e,rows:t}=k;b({cols:e,rows:t,resize:1})}}))};i((()=>u.value),(e=>{const t=S.value;t&&!e&&(t.style.height=L.value)}));let F=!0;const R=new ResizeObserver((()=>{h((()=>{F?F=!1:D()}),200)()}));return x((()=>{k=new ne.Terminal({cursorBlink:!0,fontSize:14,fontFamily:"Monaco, Menlo, Consolas, 'Courier New', monospace",theme:{background:"#333",foreground:"#ececec"}}),C=new oe.FitAddon,A(),j(),I(),D(),(()=>{const e=S.value;e&&R.observe(e)})()})),_((()=>{R?.disconnect()})),(e,t)=>(r(),s("div",{ref_key:"terminalRef",ref:S,class:"w-full box"},null,512))}}),fe=F(ye,[["__scopeId","data-v-b79b3036"]]),we=["onClick","onContextmenu"],ke=["title"],Ce=["onClick"],Te={class:"terminal bg-#333333"},Se=n({__name:"index",setup(e){const{t:t}=o(),a=M(),{isFull:n,server:v,isShow:b}=g(a),h=m([{id:"aaaaaaaaa",host:"127.0.0.1",port:22,ps:t("Database.form.index_12"),state:!0}]),x=["Copy session","Close session","Close to right","Close other"],_=m("aaaaaaaaa"),y=()=>{const e={title:t("Term.index_19"),data:{isEdit:!1}};me(e)},L=e=>{const t=$(9,"letter");h.value.push({id:t,host:e.host,port:e.port,ps:e.ps,state:!0}),setTimeout((()=>{I(t)}),20)},I=e=>{_.value=e},z=(e,t)=>{h.value=h.value.map((a=>a.id===e?{...a,state:t}:a))},D=e=>{h.value=h.value.filter((t=>t.id!==e)),_.value=h.value.length>0?h.value[h.value.length-1].id:"aaaaaaaaa"},F=m(!1),q=m(0),U=m(0),P=m({id:"",host:"",port:0,ps:"",state:!1});return document.addEventListener("click",(()=>{F.value=!1})),i((()=>v.value),(e=>{null!==e&&L(e)}),{deep:!0}),(e,t)=>{const a=R,o=Z;return r(),f(o,{vertical:"",class:"gap-0!"},{default:c((()=>[l(o,{class:"head gap-0!"},{default:c((()=>[(r(!0),s(A,null,w(p(h),(e=>(r(),s("div",{key:e.id,class:k(["item",{"item-active":p(_)===e.id}]),onClick:t=>I(e.id),onContextmenu:C((t=>{return a=t,n=e,P.value=n,q.value=a.clientX,U.value=a.clientY,void(F.value=!0);var a,n}),["prevent"])},[T("div",{class:"text",title:e.ps},[T("span",{class:k(["icon",{"icon-active":!e.state}])},null,2),d(u(e.ps?e.ps:e.host),1)],8,ke),l(a,{name:"base-close",class:"close-terminal",size:16,onClick:C((t=>D(e.id)),["stop"])},null,8,["onClick"]),p(F)?(r(),s("div",{key:0,class:"context-menu",style:S({top:p(U)-20+"px",left:p(q)-180+"px"})},[T("ul",null,[(r(),s(A,null,w(x,((e,t)=>T("li",{key:t,onClick:t=>(e=>{if(!P.value)return;let t;switch(e){case"Copy session":L(P.value);break;case"Close session":D(P.value.id);break;case"Close to right":t=h.value.findIndex((e=>e.id===P.value.id)),-1!==t&&(h.value.splice(t+1),setTimeout((()=>{I(h.value[t]?.id||"aaaaaaaaa")}),20));break;case"Close other":h.value=h.value.filter((e=>e.id===P.value.id)),setTimeout((()=>{I(P.value.id)}),20)}F.value=!1})(e)},u(e),9,Ce))),64))])],4)):j("",!0)],42,we)))),128)),T("div",{class:"add-terminal",onClick:y},[l(a,{name:"base-add",size:24})]),T("div",{class:"absolute right-0px add-terminal",onClick:t[0]||(t[0]=e=>n.value=!p(n))},[l(a,{name:"base-full",size:24})])])),_:1}),T("div",Te,[(r(!0),s(A,null,w(p(h),(e=>O((r(),f(fe,{key:e.id,data:e,onUpdateFull:I,onUpdateState:z},null,8,["data"])),[[E,e.id===p(_)]]))),128)),T("div",{class:k(["terminal-contract-tool",{active:!p(b)}]),onClick:t[1]||(t[1]=e=>b.value=!p(b))},null,2)])])),_:1})}}}),Ae=F(Se,[["__scopeId","data-v-b0b3524c"]]),je={class:"p-16px box"},Oe=F(n({__name:"index",setup(e){const t=M(),{isShow:a,isFull:n}=g(t),o=m(null);i((()=>n.value),(e=>{e?(a.value=!1,o.value?.requestFullscreen()):document.exitFullscreen().catch((e=>{console.log(e.message)}))}));const d=()=>{document.fullscreenElement?n.value=!0:n.value=!1};return x((()=>{document.addEventListener("fullscreenchange",d)})),_((()=>{document.removeEventListener("fullscreenchange",d)})),(e,t)=>{const n=Z,i=ee;return r(),s("div",je,[l(i,{class:"p-16px h-100%"},{default:c((()=>[T("div",{class:"bg-#ffffff h-100%",ref_key:"contentRef",ref:o},[l(n,{class:"flex-nowrap! h-100%"},{default:c((()=>[l(Ae,{class:"flex-1 overflow-hidden"}),O(l(_e,null,null,512),[[E,p(a)]])])),_:1})],512)])),_:1})])}}}),[["__scopeId","data-v-932584a7"]]),Ee=Object.freeze(Object.defineProperty({__proto__:null,default:Oe},Symbol.toStringTag,{value:"Module"}));e("i",Ee)}}}));
