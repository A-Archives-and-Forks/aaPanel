import{_ as e}from"./index.js?v=1753954525509";import{_ as a,b as l,c as s,at as t,f as i,e as n,au as o,av as d,aw as r}from"./public.js?v=1753954525509";import{c as u,m as p,O as _,_ as c,p as m,o as f,e as S}from"./page_layout.js?v=1753954525509";import{_ as v}from"./index.vue_vue_type_script_setup_true_lang.js?v=1753954525509";import{k as x,P as h,r as y,e as g,U as b,V as w,Q as L,a2 as $,X as B,W as C,a3 as k,a1 as N,ah as M,ad as j,c as H,j as U,l as A,v as q,F as T,O as R,H as F}from"./vue.js?v=1753954525509";import{aq as P,cA as E,ay as z,bY as O,cF as W,cE as Y,c6 as D}from"./naive.js?v=1753954525509";import{_ as I}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1753954525509";import"./common.js?v=1753954525509";import"./__commonjsHelpers__.js?v=1753954525509";const J={class:"p-20px"},K=x({__name:"custom-domain",props:{onConfirm:{type:Function},single:{type:Boolean}},setup(e,{expose:l}){const{t:s}=h(),t=e,i=y(null),n=g({domain:""}),o={domain:[{required:!0,message:s("Mail.Setting.index_50"),trigger:"blur"}]};return l({onConfirm:async()=>{var e;await(null==(e=i.value)?void 0:e.validate()),t.onConfirm(n.domain.split("\n"))}}),(e,l)=>{const s=P,d=E,r=v,u=a;return b(),w("div",J,[L(r,{ref_key:"formRef",ref:i,model:B(n),rules:o},{default:$((()=>[L(d,{label:e.$t("Mail.Mass.index_45"),path:"domain"},{default:$((()=>[L(s,{"input-props":{spellcheck:!1},type:t.single?"text":"textarea",class:"w-350px!",value:B(n).domain,"onUpdate:value":l[0]||(l[0]=e=>B(n).domain=e),placeholder:t.single?e.$t("SSL.Business.index_24"):e.$t("SSL.index_14")},null,8,["type","value","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"]),L(u,{class:"mt-16px!"},{default:$((()=>[C("li",null,k(e.$t("SSL.Business.index_9")),1),C("li",null,k(e.$t("SSL.Business.index_10")),1),C("li",null,k(e.$t("SSL.Business.index_11")),1),C("li",null,k(e.$t("SSL.Business.index_12")),1),C("li",null,k(e.$t("SSL.Business.index_13")),1),C("li",null,k(e.$t("SSL.Business.index_14")),1)])),_:1})])}}}),Q=x({__name:"exist-domain",props:{onConfirm:{type:Function},single:{type:Boolean}},setup(e,{expose:n}){const{t:o}=h(),d=e,r=g({keyword:""}),c=()=>{y()},{keys:m,table:f,columns:S}=l([{type:"selection",width:40,multiple:!d.single},{title:o("Mail.Mass.index_45"),key:"name"}]),{loading:v,setLoading:x}=s(),y=async()=>{try{x(!0);const{message:e}=await t({tojs:"site.get_list",table:"domain",limit:1e4,search:r.keyword,p:1,order:"id desc",type:-1});u(e)&&(f.data=e.data)}finally{x(!1)}};y();return n({onConfirm:async()=>{if(0===m.value.length)return p.error(o("SSL.SiteSSL.index_16")),!1;d.onConfirm(m.value)}}),(e,l)=>{const s=I,t=i,n=a,o=_;return b(),N(o,{show:B(v),class:"p-20px"},{default:$((()=>[L(s,{class:"w-full!",clearable:"",value:B(r).keyword,"onUpdate:value":l[0]||(l[0]=e=>B(r).keyword=e),placeholder:e.$t("Mail.Setting.index_50"),onSearch:c},null,8,["value","placeholder"]),L(t,{class:"my-16px","max-height":250,"checked-row-keys":B(m),"onUpdate:checkedRowKeys":l[1]||(l[1]=e=>M(m)?m.value=e:null),loading:B(f).loading,"row-key":"name",data:B(f).data,columns:B(S)},null,8,["checked-row-keys","loading","data","columns"]),L(n,null,{default:$((()=>[C("li",null,k(e.$t("SSL.Business.index_9")),1),C("li",null,k(e.$t("SSL.Business.index_10")),1),C("li",null,k(e.$t("SSL.Business.index_11")),1),C("li",null,k(e.$t("SSL.Business.index_12")),1),C("li",null,k(e.$t("SSL.Business.index_13")),1),C("li",null,k(e.$t("SSL.Business.index_14")),1)])),_:1})])),_:1},8,["show"])}}}),V={class:"color-#20a53a"},X={class:"color-#20a53a text-12px"},G={class:"mt-16px"},Z=S(x({__name:"index",props:{data:{}},emits:["close"],setup(l,{emit:t}){const{t:i}=h(),p=l,{row:S}=j(p.data),x=H((()=>S.value.order_info.title.includes("Single"))),M=t,I=n(i("SSL.Business.index_26"),{onConfirm:e=>{se.domain=e.map((e=>e.replace(/,\s*$/,"").trim())).filter(Boolean).join("\n"),ie()},single:x.value}),J=n(i("SSL.Business.index_25"),{onConfirm:e=>{se.domain=e.join("\n"),ie()},single:x.value}),Z=y(null),ee=y(!0),ae=H((()=>!S.value.order_info.code.includes("wildcard"))),le=y([]),se=g({domain:"",verifyMethod:"CNAME_CSR_HASH",province:"",city:"",company:"",email:"",phone:"",job:"",postCode:"",country:"",firstName:"",lastName:"",address:"",tel_prefix:""}),te={domain:[{required:!0,message:i("Mail.Setting.index_50"),trigger:"blur"}],province:[{required:!0,message:i("SSL.Business.index_37"),trigger:"blur"}],city:[{required:!0,message:i("SSL.Business.index_38"),trigger:"blur"}],address:[{required:!0,message:"Address details",trigger:"blur"}],company:[{required:!0,message:i("SSL.Business.index_39"),trigger:"blur"}],firstName:[{required:!0,message:"First Name",trigger:"blur"}],lastName:[{required:!0,message:"Last Name",trigger:"blur"}],email:[{required:!0,message:i("Mail.Unsubscribe.index_5"),trigger:"blur"}],phone:[{required:!0,message:i("SSL.Business.index_40"),trigger:"blur"}],tel_prefix:[{required:!0,message:"Tel Prefix",trigger:"blur"}]},ie=async()=>{const{message:e}=await o({domains:se.domain.split("\n").join(",")});u(e)&&(le.value=e.auto)},ne=async()=>{var e,a,l,s,t;await(null==(e=Z.value)?void 0:e.validate());const{message:i}=await d({pdata:JSON.stringify({pid:null==(a=null==S?void 0:S.value)?void 0:a.order_info.pid,oid:null==(l=null==S?void 0:S.value)?void 0:l.order_info.oid,uc_id:null==(s=null==S?void 0:S.value)?void 0:s.order_info.uc_id,domains:se.domain.split("\n"),dcvMethod:se.verifyMethod,auth_to:"dns",auto:"CNAME_CSR_HASH"===se.verifyMethod?le.value:"",Administrator:{job:se.job,postCode:se.postCode,country:se.country,firstName:se.firstName,lastName:se.lastName,state:se.province,city:se.city,address:se.address,organation:se.company,email:se.email,mobile:se.phone,tel_prefix:se.tel_prefix}})});u(i)&&p.data.onRefresh(i.verify_info,null==(t=S.value)?void 0:t.order_info.uc_id),M("close")},{loading:oe,setLoading:de}=s();return(async()=>{try{de(!0);const{message:e}=await r();u(e)&&(se.province=e.state,se.city=e.city,se.company=e.organation,se.firstName=e.firstName,se.lastName=e.lastName,se.email=e.email,se.phone=e.mobile,se.job=e.job,se.postCode=e.postCode,se.country=e.country,se.address=e.address,se.tel_prefix=e.tel_prefix)}finally{de(!1)}})(),(l,s)=>{const t=E,i=P,n=z,o=O,d=W,r=Y,u=D,p=c,h=m,y=v,g=f,M=a,j=e,H=_;return b(),N(H,{show:B(oe),class:"p-16px"},{default:$((()=>[L(y,{ref_key:"formRef",ref:Z,model:B(se),rules:te},{default:$((()=>[L(t,{label:l.$t("Config.Safe.index_28")},{default:$((()=>[C("span",V,k(B(S).order_info.title),1)])),_:1},8,["label"]),L(t,{label:l.$t("Mail.Mass.index_45"),path:"domain"},{default:$((()=>[L(o,{class:"w-420px"},{default:$((()=>[L(i,{type:B(x)?"text":"textarea",disabled:"",value:B(se).domain,"onUpdate:value":s[0]||(s[0]=e=>B(se).domain=e),placeholder:B(x)?l.$t("SSL.Business.index_24"):l.$t("SSL.index_14")},null,8,["type","value","placeholder"]),L(o,null,{default:$((()=>[L(n,{size:"small",type:"primary",onClick:s[1]||(s[1]=e=>B(J).show=!0)},{default:$((()=>[U(k(l.$t("SSL.Business.index_25")),1)])),_:1}),L(n,{size:"small",onClick:s[2]||(s[2]=e=>B(I).show=!0)},{default:$((()=>[U(k(l.$t("SSL.Business.index_26")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["label"]),L(t,{label:l.$t("Waf.Setting.config_67"),path:"verifyMethod","show-feedback":!1},{default:$((()=>[L(r,{value:B(se).verifyMethod,"onUpdate:value":s[3]||(s[3]=e=>B(se).verifyMethod=e)},{default:$((()=>[L(d,{value:"CNAME_CSR_HASH"},{default:$((()=>[U(k(l.$t("SSL.index_12")),1)])),_:1}),A(L(d,{value:"HTTP_CSR_HASH"},{default:$((()=>[U(k(l.$t("SSL.SiteSSL.index_17"))+"(HTTP) ",1)])),_:1},512),[[q,B(ae)]]),A(L(d,{value:"HTTPS_CSR_HASH"},{default:$((()=>[U(k(l.$t("SSL.SiteSSL.index_17"))+"(HTTPS) ",1)])),_:1},512),[[q,B(ae)]])])),_:1},8,["value"])])),_:1},8,["label"]),A(L(t,{label:" ","show-feedback":!1},{default:$((()=>[B(le).length?(b(),N(u,{key:0,type:"success",class:"w-full"},{default:$((()=>[(b(!0),w(T,null,R(B(le),(e=>(b(),w("div",{key:e.id},k(e.domain)+" The parsing record will be added automatically",1)))),128))])),_:1})):(b(),N(u,{key:1,type:"warning",class:"w-full"},{default:$((()=>s[16]||(s[16]=[C("span",null,"Your domain name is not in the Domain management center, please manually add the domain name resolution record",-1)]))),_:1,__:[16]}))])),_:1},512),[[q,B(se).domain&&"CNAME_CSR_HASH"===B(se).verifyMethod]]),L(h,{class:"my-16px!"},{default:$((()=>[L(o,{size:5,class:"items-center flex-nowrap! cursor-pointer",onClick:s[4]||(s[4]=e=>ee.value=!B(ee))},{default:$((()=>[L(p,{name:"base-arrow-bottom",class:F(["color-#20a53a",{hiden:B(ee)}])},null,8,["class"]),C("span",X,k(l.$t("SSL.Business.index_27")),1)])),_:1})])),_:1}),A(C("div",G,[L(t,{label:l.$t("SSL.Business.index_32"),"show-feedback":!1},{default:$((()=>[L(o,null,{default:$((()=>[L(t,{label:"",path:"province"},{default:$((()=>[L(i,{value:B(se).province,"onUpdate:value":s[5]||(s[5]=e=>B(se).province=e),placeholder:l.$t("SSL.Business.index_28")},null,8,["value","placeholder"])])),_:1}),L(t,{label:"",path:"city"},{default:$((()=>[L(i,{value:B(se).city,"onUpdate:value":s[6]||(s[6]=e=>B(se).city=e),placeholder:l.$t("SSL.Business.index_29")},null,8,["value","placeholder"])])),_:1})])),_:1})])),_:1},8,["label"]),L(t,{label:l.$t("Mail.Forward.index_2"),path:"address"},{default:$((()=>[L(i,{class:"w-420px!",value:B(se).address,"onUpdate:value":s[7]||(s[7]=e=>B(se).address=e),placeholder:"Address details"},null,8,["value"])])),_:1},8,["label"]),L(t,{label:l.$t("SSL.Business.index_30"),path:"company"},{default:$((()=>[L(i,{class:"w-420px!",value:B(se).company,"onUpdate:value":s[8]||(s[8]=e=>B(se).company=e),placeholder:l.$t("SSL.Business.index_30")},null,8,["value","placeholder"])])),_:1},8,["label"]),L(t,{label:l.$t("Config.Alarm.index_43"),"show-feedback":!1},{default:$((()=>[L(o,null,{default:$((()=>[L(t,{label:"",path:"firstName"},{default:$((()=>[L(i,{value:B(se).firstName,"onUpdate:value":s[9]||(s[9]=e=>B(se).firstName=e),placeholder:"First Name"},null,8,["value"])])),_:1}),L(t,{label:"",path:"lastName"},{default:$((()=>[L(i,{value:B(se).lastName,"onUpdate:value":s[10]||(s[10]=e=>B(se).lastName=e),placeholder:"Last Name"},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["label"]),L(t,{label:l.$t("Config.Alarm.index_3"),path:"email"},{default:$((()=>[L(i,{class:"w-420px!",value:B(se).email,"onUpdate:value":s[11]||(s[11]=e=>B(se).email=e),placeholder:l.$t("Config.Alarm.index_3")},null,8,["value","placeholder"])])),_:1},8,["label"]),L(t,{label:l.$t("SSL.Business.index_31"),"show-feedback":!1},{default:$((()=>[L(o,null,{default:$((()=>[L(t,{label:"",path:"tel_prefix"},{default:$((()=>[L(i,{class:"w-120px!",value:B(se).tel_prefix,"onUpdate:value":s[12]||(s[12]=e=>B(se).tel_prefix=e),placeholder:"Tel Prefix"},null,8,["value"])])),_:1}),L(t,{label:"",path:"phone"},{default:$((()=>[L(i,{class:"w-290px!",value:B(se).phone,"onUpdate:value":s[13]||(s[13]=e=>B(se).phone=e),placeholder:"Phone Number"},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["label"])],512),[[q,B(ee)]]),L(t,{label:" "},{default:$((()=>[L(n,{type:"primary",onClick:ne},{default:$((()=>[U(k(l.$t("SSL.Business.index_33")),1)])),_:1})])),_:1})])),_:1},8,["model"]),L(M,null,{default:$((()=>[C("li",null,k(l.$t("SSL.Business.index_34")),1),C("li",null,k(l.$t("SSL.Business.index_35")),1),C("li",null,[L(g,{target:"_blank",href:"https://www.aapanel.com/docs/Function/BusinessCertificate.html"},{default:$((()=>[U(k(l.$t("SSL.Business.index_36")),1)])),_:1})])])),_:1}),L(j,{show:B(J).show,"onUpdate:show":s[14]||(s[14]=e=>B(J).show=e),title:B(J).title,data:B(J).data,footer:!0,width:580,component:Q},null,8,["show","title","data"]),L(j,{show:B(I).show,"onUpdate:show":s[15]||(s[15]=e=>B(I).show=e),title:B(I).title,data:B(I).data,footer:!0,width:580,component:K},null,8,["show","title","data"])])),_:1},8,["show"])}}}),[["__scopeId","data-v-09b21549"]]);export{Z as default};
