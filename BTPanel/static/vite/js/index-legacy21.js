System.register(["./page_layout-legacy.js?v=1753954525509","./index-legacy.js?v=1753954525509","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1753954525509","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1753954525509","./index.vue_vue_type_script_setup_true_lang-legacy11.js?v=1753954525509","./public-legacy.js?v=1753954525509","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1753954525509","./index-legacy102.js?v=1753954525509","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1753954525509","./theme-chrome-legacy.js?v=1753954525509","./vue-legacy.js?v=1753954525509","./naive-legacy.js?v=1753954525509","./organization-legacy.js?v=1753954525509"],(function(e,t){"use strict";var a,l,n,i,r,o,s,d,p,c,u,_,g,b,x,y,m,h,v,w,C,f,k,S,T,j,U,$,P,O,E,q,D,L,R,N,z,A,I,J,M,F,K,V,W,X;return{setters:[e=>{a=e.i,l=e.v,n=e.X,i=e.c,r=e.x,o=e.w,s=e.a},e=>{d=e._},e=>{p=e._},e=>{c=e._},e=>{u=e._},e=>{_=e._,g=e.b,b=e.h,x=e.d,y=e.c,m=e.e,h=e.f},e=>{v=e._},e=>{w=e._},e=>{C=e._},e=>{f=e.V},e=>{k=e.k,S=e.P,T=e.r,j=e.e,U=e.U,$=e.V,P=e.Q,O=e.a2,E=e.X,q=e.a1,D=e.al,L=e.W,R=e.a3,N=e.N,z=e.ah,A=e.j,I=e._},e=>{J=e.aq,M=e.cA,F=e.cG,K=e.bY,V=e.cD,W=e.ay},e=>{X=e.g}],execute:function(){const{t:B}=a.global,G=e=>l.post("/crontab/script/create_script",{data:JSON.stringify(e)},{requestOptions:{loading:B("Security.Api.Index_4"),successMessage:!0}}),Q=e=>l.post("/crontab/script/modify_script",{data:JSON.stringify(e)},{requestOptions:{loading:B("Crontab.Api.index_5"),successMessage:!0}}),Y=(e("e",(e=>l.post("/crontab/script/test_script",{data:JSON.stringify(e)},{requestOptions:{loading:B("Crontab.Api.index_4"),errorMessage:!1}}))),e("g",(e=>l.post("/crontab/script/get_script_logs",{data:JSON.stringify(e)}))),(e,t=!0)=>l.post("/crontab/script/remove_script",e,{requestOptions:{loading:t?B("Security.Api.Index_3"):"",successMessage:t}})),H={class:"p-20px"},Z=k({__name:"index",props:{data:{}},setup(e,{expose:t}){const{t:a}=S(),l=e,{isEdit:n,row:i,id:r,getList:o}=l.data,s=T(null),d=[{value:"string",label:a("Crontab.Script.index_9")},{value:"int",label:a("Crontab.Script.index_10")},{value:"float",label:a("Crontab.Script.index_11")}],p=[{value:"1",label:a("Crontab.Script.index_12")},{value:"0",label:a("Crontab.Script.index_13")}],c={name:{required:!0,trigger:["blur","change"],message:a("Crontab.Planned.index_49")},custom:{required:!0,trigger:["blur","change"],message:a("Crontab.arrange.index_28")},argsTitle:{required:!0,trigger:["blur","change"],message:a("Security.Conf.Index_28")},argsExplain:{required:!0,trigger:["blur","change"],message:a("Security.Conf.Index_28")}},u=j({name:"",type:"string",argsType:"0",argsTitle:"",argsExplain:"",custom:"",remark:""}),g=()=>({name:u.name,return_type:u.type,is_args:u.argsType,ps:u.remark,script:u.custom,type_id:r,args_title:u.argsTitle,args_ps:u.argsExplain,...n?{script_id:i?.script_id}:null});return t({onConfirm:async()=>{await(s.value?.validate()),n?await Q(g()):await G(g()),o?.()}}),n&&i&&(u.name=i.name,u.type=i.return_type,u.argsType=i.is_args.toString(),u.argsTitle=i.args_title,u.argsExplain=i.args_ps,u.custom=i.script,u.remark=i.ps),(e,t)=>{const a=J,l=M,n=F,i=K,r=C,o=_;return U(),$("div",H,[P(r,{ref_key:"formRef",ref:s,model:E(u),rules:c},{default:O((()=>[P(l,{label:e.$t("Docker.Compose.form.index_3"),path:"name"},{default:O((()=>[P(a,{class:"w-360px!",value:E(u).name,"onUpdate:value":t[0]||(t[0]=e=>E(u).name=e),placeholder:e.$t("Crontab.Planned.index_49")},null,8,["value","placeholder"])])),_:1},8,["label"]),P(l,{label:e.$t("Crontab.Script.index_2")},{default:O((()=>[P(n,{class:"w-150px!",value:E(u).type,"onUpdate:value":t[1]||(t[1]=e=>E(u).type=e),options:d},null,8,["value"])])),_:1},8,["label"]),P(i,null,{default:O((()=>[P(l,{label:e.$t("Crontab.Script.index_5")},{default:O((()=>[P(n,{class:"w-80px!",value:E(u).argsType,"onUpdate:value":t[2]||(t[2]=e=>E(u).argsType=e),options:p},null,8,["value"])])),_:1},8,["label"]),"1"==E(u).argsType?(U(),q(l,{key:0,path:"argsTitle"},{default:O((()=>[P(a,{class:"w-110px!",value:E(u).argsTitle,"onUpdate:value":t[3]||(t[3]=e=>E(u).argsTitle=e),placeholder:e.$t("Crontab.Script.index_51")},null,8,["value","placeholder"])])),_:1})):D("",!0),"1"==E(u).argsType?(U(),q(l,{key:1,path:"argsExplain"},{default:O((()=>[P(a,{class:"w-145px!",value:E(u).argsExplain,"onUpdate:value":t[4]||(t[4]=e=>E(u).argsExplain=e),placeholder:e.$t("Crontab.Script.index_52")},null,8,["value","placeholder"])])),_:1})):D("",!0)])),_:1}),P(l,{label:" ",path:"custom"},{default:O((()=>[P(E(f),{theme:"chrome",value:E(u).custom,"onUpdate:value":t[5]||(t[5]=e=>E(u).custom=e),class:"w-360px border-solid h-150px border-1px border-#ccc rounded-4px leading-[1.4]"},null,8,["value"])])),_:1}),P(l,{label:e.$t("Docker.Template.add.index_3")},{default:O((()=>[P(a,{class:"w-360px!",value:E(u).remark,"onUpdate:value":t[6]||(t[6]=e=>E(u).remark=e),placeholder:e.$t("Crontab.arrange.index_27")},null,8,["value","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"]),P(o,null,{default:O((()=>[L("li",null,R(e.$t("Crontab.Script.index_6")),1),L("li",null,R(e.$t("Crontab.Script.index_7")),1),L("li",null,R(e.$t("Crontab.Script.index_8")),1)])),_:1})])}}}),ee=k({__name:"index",setup(e){const a=I((()=>s((()=>t.import("./index-legacy118.js?v=1753954525509")),void 0))),_=I((()=>s((()=>t.import("./index-legacy119.js?v=1753954525509")),void 0))),C=I((()=>s((()=>t.import("./custom-legacy.js?v=1753954525509")),void 0))),f=T("1"),k=T([]),{t:$}=S(),D=()=>{ee.data.isEdit=!1,ee.data.id=f.value,ee.show=!0},{keys:L,table:J,columns:M}=g([{type:"selection",width:40},{key:"name",title:$("Site.TableRow.index_2")},{key:"script_type",title:$("Ftp.Table.index_3")},{key:"return_type",title:$("Crontab.Script.index_2")},{key:"ps",title:$("Docker.Template.add.index_3")},{key:"name",title:$("Docker.Container.index_9"),render:e=>n(e.create_time)},{key:"name",title:$("Crontab.Planned.index_12"),render:e=>n(e.last_exec_time)},b({title:$("Public.Table.Operation"),width:240,options:e=>[{label:$("Docker.LocalImage.pull.index_12"),onClick:()=>{if(e.is_args)return le.show=!0,void(le.data.row=e);H("",e)}},{label:$("Site.TableOP.index_7"),onClick:()=>{ee.title=$("Crontab.arrange.index_38"),ee.data.isEdit=!0,ee.data.row=e,ee.data.id=f.value,ee.show=!0}},{label:$("Ftp.Table.index_15"),onClick:()=>{te.title=$("Crontab.Planned.index_6",[e.name]),te.data.id=e.script_id,te.show=!0}},{label:$("Public.Btn.Del"),onClick:()=>{x({title:`${$("Ftp.Table.index_10")} ${e.name} ${$("Crontab.Script.index_3")}`,content:$("Crontab.Script.index_4"),onConfirm:async()=>{await Y({script_id:e.script_id}),Q()}})}}]})]),F=[{key:"delete",type:"confirm",label:$("Crontab.Script.index_42"),confirm:{title:$("Crontab.Planned.index_16",[$("Crontab.Script.index_42")]),desc:$("Crontab.Planned.index_17",[$("Crontab.Script.index_42")]),columns:[M.value[1]],api:e=>Y({script_id:e.script_id},!1),done:()=>{Q()}}}],K=j({p:1,rows:10,search:""}),{loading:B,setLoading:G}=y(!0);(async()=>{const{message:e}=await X();o(e)&&(k.value=e.map((e=>({label:e.name,key:e.type_id.toString()}))))})();const Q=async()=>{try{G(!0);const{message:t}=await(e=N({...K,type_id:f.value}),l.post("/crontab/script/get_script_list",{data:JSON.stringify(e)}));i(t)?(J.data=t.data.map((e=>({...e,id:e.script_id}))),J.total=r(t.page)):(J.data=[],J.total=0)}finally{L.value=[],G(!1)}var e};Q();const H=(e,t)=>{x({title:$("Crontab.Planned.index_13"),content:$("Crontab.arrange.index_1",[t.name]),onConfirm:()=>{ae.data.row=t,ae.data.args=e,ae.show=!0}})},ee=m($("Crontab.Script.index_1"),{getList:Q}),te=m(),ae=m($("Crontab.Planned.index_23"),{getList:Q}),le=m($("Crontab.Script.index_44"),{callback:H});return(e,t)=>{const l=w,n=W,i=v,r=h,o=u,s=c,g=p,b=d,x=V;return U(),q(x,{class:"p-16px"},{default:O((()=>[P(l,{value:E(f),"onUpdate:value":[t[0]||(t[0]=e=>z(f)?f.value=e:null),Q],options:E(k)},null,8,["value","options"]),P(g,{feedback:!0},{toolsLeft:O((()=>[P(n,{type:"primary",onClick:D},{default:O((()=>[A(R(e.$t("Crontab.Script.index_1")),1)])),_:1})])),toolsRight:O((()=>[P(i,{value:E(K).search,"onUpdate:value":t[1]||(t[1]=e=>E(K).search=e),placeholder:e.$t("WP.Sets.index_15"),onSearch:Q},null,8,["value","placeholder"])])),table:O((()=>[P(r,{"checked-row-keys":E(L),"onUpdate:checkedRowKeys":t[2]||(t[2]=e=>z(L)?L.value=e:null),loading:E(B),data:E(J).data,columns:E(M)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:O((()=>[P(o,{"checked-row-keys":E(L),"onUpdate:checkedRowKeys":t[3]||(t[3]=e=>z(L)?L.value=e:null),data:E(J).data,options:F},null,8,["checked-row-keys","data"])])),pageRight:O((()=>[P(s,{page:E(K).p,"onUpdate:page":t[4]||(t[4]=e=>E(K).p=e),"page-size":E(K).rows,"onUpdate:pageSize":t[5]||(t[5]=e=>E(K).rows=e),"item-count":E(J).total,onRefresh:Q},null,8,["page","page-size","item-count"])])),_:1}),P(b,{show:E(ee).show,"onUpdate:show":t[6]||(t[6]=e=>E(ee).show=e),title:E(ee).title,data:E(ee).data,width:600,footer:!0,component:Z},null,8,["show","title","data"]),P(b,{show:E(ae).show,"onUpdate:show":t[7]||(t[7]=e=>E(ae).show=e),title:E(ae).title,data:E(ae).data,width:400,"min-height":200,component:E(_)},null,8,["show","title","data","component"]),P(b,{show:E(le).show,"onUpdate:show":t[8]||(t[8]=e=>E(le).show=e),title:E(le).title,data:E(le).data,width:400,footer:!0,component:E(C)},null,8,["show","title","data","component"]),P(b,{show:E(te).show,"onUpdate:show":t[9]||(t[9]=e=>E(te).show=e),title:E(te).title,data:E(te).data,width:800,"min-height":550,footer:!1,component:E(a)},null,8,["show","title","data","component"])])),_:1})}}}),te=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"}));e("i",te)}}}));
