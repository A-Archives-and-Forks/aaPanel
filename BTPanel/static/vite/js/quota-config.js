import{_ as a}from"./index68.js?v=1721298337096";import{_ as e,a as s}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1721298337096";import{at as t,au as u,al as o,L as l,ab as i,cJ as p}from"./index.js?v=1721298337096";import{l as r,f as n,r as d,S as _,Z as c,P as f,V as m,_ as q,W as x,q as v,a3 as b,af as h}from"./vue.js?v=1721298337096";import{_ as z}from"./InputGroupLabel.js?v=1721298337096";import{_ as y}from"./InputGroup.js?v=1721298337096";import"./pinia.js?v=1721298337096";const{t:g}=t.global,j={class:"px-20px py-24px"},w={class:"w-160px"},M={class:"w-160px"},S=q("li",{class:"text-error"},"Reminder: This feature is exclusive to the pro edition",-1),O=q("li",null,"Requires an XFS filesystem and includes the [prjquota] parameter to use",-1),J={key:0},P=q("li",null,'Quota: To cancel quota, set to "0"',-1),W=r({__name:"quota-config",props:{data:{}},setup(t,{expose:r}){const W=t,{type:k,info:B,callback:G}=W.data,I=n({used:"0",size:0}),L=d("MB");return(()=>{const a=o(B,"quota.used",0);if(a>0){const e=l(a).split(" ");I.used=e[0],L.value=e[1]}I.size=o(B,"quota.size",0)})(),r({onConfirm:async({hide:a})=>{var e;"site"!==k&&"ftp"!==k||await(e={size:I.size,quota_type:k,path:o(B,"path","")},u.post("/project/quota/modify_path_quota",{data:JSON.stringify({path:e.path,quota_type:e.quota_type,quota_push:{module:"",status:!1,size:0,push_count:0},quota_storage:{size:e.size}})},{requestOptions:{loading:g("WP.api.tamper_8"),successMessage:!0,errorMessage:{close:!0}}})),"database"===k&&await(a=>u.post("/project/quota/modify_database_quota",{data:JSON.stringify({db_name:a.db_name,quota_push:{module:"",status:!1,size:0,push_count:0},quota_storage:{size:a.size}})},{requestOptions:{loading:g("WP.api.tamper_8"),successMessage:!0,errorMessage:{close:!0}}}))({size:I.size,db_name:o(B,"name","")}),null==G||G(),a()}}),(t,u)=>{const o=i,l=z,r=y,n=e,d=p,g=s,W=a;return _(),c("div",j,[f(g,{"label-width":"180"},{default:m((()=>[f(n,{label:"Quota already set"},{default:m((()=>[q("div",w,[f(r,null,{default:m((()=>[f(o,{value:x(I).used,"onUpdate:value":u[0]||(u[0]=a=>x(I).used=a),disabled:!0},null,8,["value"]),f(l,{class:"w-44px text-center"},{default:m((()=>[v(b(x(L)),1)])),_:1})])),_:1})])])),_:1}),f(n,{label:"Set new quota"},{default:m((()=>[q("div",M,[f(r,null,{default:m((()=>[f(d,{value:x(I).size,"onUpdate:value":u[1]||(u[1]=a=>x(I).size=a),min:0,"show-button":!1},null,8,["value"]),f(l,{class:"w-44px text-center"},{default:m((()=>[v("MB")])),_:1})])),_:1})])])),_:1})])),_:1}),f(W,{class:"mt-8px"},{default:m((()=>[S,O,"database"!==x(k)?(_(),c("li",J," Example of fstab: /dev/vdc1 /data xfs defaults,prjquota 0 0 ")):h("",!0),P])),_:1})])}}});export{W as default};
