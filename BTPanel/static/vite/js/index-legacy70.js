System.register(["./page_layout-legacy.js?v=1742891699271","./index-legacy.js?v=1742891699271","./index-legacy95.js?v=1742891699271","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1742891699271","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1742891699271","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1742891699271","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1742891699271","./vue-legacy.js?v=1742891699271","./public-legacy.js?v=1742891699271","./useModal-legacy2.js?v=1742891699271","./site-legacy3.js?v=1742891699271","./index-legacy183.js?v=1742891699271","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1742891699271","./naive-legacy.js?v=1742891699271","./common-legacy.js?v=1742891699271","./__commonjsHelpers__-legacy.js?v=1742891699271","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1742891699271"],(function(e,t){"use strict";var i,a,l,n,s,o,c,d,u,r,p,m,x,_,f,h,v,y,W,w,g,S,b,R,$,k,j,U,P,C,N,q,O,z,E,L,M,T,D,V,Y,B,F,H,I,J,Z,A,G,K,Q,X,ee,te,ie,ae,le,ne,se,oe,ce;return{setters:[e=>{i=e.b,a=e.bE,l=e.cT,n=e.b7,s=e.a,o=e.I,c=e.m},e=>{d=e._},e=>{u=e._},e=>{r=e._},e=>{p=e._},e=>{m=e._},e=>{x=e._},e=>{_=e.d,f=e.t,h=e.O,v=e.j,y=e.R,W=e.S,w=e.P,g=e.a1,S=e.c,b=e.U,R=e.V,$=e.k,k=e.v,j=e.a2,U=e.M,P=e._,C=e.r,N=e.F,q=e.f,O=e.a0,z=e.i,E=e.Y},e=>{L=e.a,M=e.d,T=e.b,D=e.f,V=e.u},e=>{Y=e.u},e=>{B=e.s,F=e.a,H=e.g,I=e.b,J=e.c,Z=e.d,A=e.e},e=>{G=e._},e=>{K=e._},e=>{Q=e.b$,X=e.cm,ee=e.cl,te=e._,ie=e.ch,ae=e.cM,le=e.cN,ne=e.bY,se=e.bZ,oe=e.a2,ce=e.ck},null,null,null],execute:function(){const de={class:"p-20px"},ue={class:"flex-1"},re={class:"flex items-center h-32px"},pe={class:"flex items-center h-32px"},me={class:"w-320px mt-6px"},xe={class:"flex-1"},_e={class:"flex items-center h-32px"},fe={class:"flex items-center h-32px"},he={class:"w-320px mt-6px"},ve={class:"text-error"},ye=_({__name:"index",props:{row:{},onRefresh:{}},setup(e,{expose:t}){const a=e,l=f(a,"row"),{t:n}=h(),s=v({html:!1,html_fast:!1,js:!1,picture:!1}),o=v({type:"default",text:""}),c=v({type:"default",text:""});(()=>{if(!l.value)return;const{crawler:e}=l.value;e&&(s.html=e.html,s.picture=e.picture,e.htmlnew&&(o.type=e.htmlnew.type,o.text=e.htmlnew.text),e.picturenew&&(c.type=e.picturenew.type,c.text=e.picturenew.text))})();const d=async()=>{const e=(()=>{const e={site:l.value.siteName,html:s.html,html_fast:!1,js:!1,picture:s.picture,htmlnew:U(o),picturenew:U(c)};return ae(l.value.crawler,e,((e,t)=>{if(i(e))return JSON.stringify(le(e,t))}))})();await B(e),a.onRefresh?.()};return t({onConfirm:async({hide:e})=>(s.html||s.picture?L({title:n("Public.Confirm.Title"),width:408,content:()=>w("div",{class:"relative pb-40px"},[w("div",null,[S("效果：每次访问网页内容随机加密、有效防止爬虫")]),w("div",null,[S("影响：开启后会导致比之前流量增加1倍")]),w("div",null,[S("建议：线上业务建议不要开启")]),w(u,{class:"absolute left-[-21px] bottom-0 mt-16px "},{default:()=>[w("li",{class:"text-error"},[S("当前的功能为测试功能建议不要在线上业务开启！！")])]})]),onConfirm:async({hide:t})=>{await d(),t(),e()}}):(await d(),e()),!1)}),(e,t)=>{const i=Q,a=X,l=ee,n=te,d=ie,r=K;return y(),W("div",de,[w(r,{"label-width":"160px"},{default:g((()=>[w(d,{label:e.$t("Waf.Site.ReptileProtection.index_1")},{default:g((()=>[b("div",ue,[b("div",re,[w(i,{value:R(s).html,"onUpdate:value":t[0]||(t[0]=e=>R(s).html=e)},null,8,["value"])]),$(b("div",pe,[w(l,{value:R(o).type,"onUpdate:value":t[1]||(t[1]=e=>R(o).type=e)},{default:g((()=>[w(a,{value:"default"},{default:g((()=>[S(j(e.$t("Waf.Site.ReptileProtection.index_2")),1)])),_:1}),w(a,{value:"text"},{default:g((()=>[S(j(e.$t("Waf.Site.ReptileProtection.index_3")),1)])),_:1})])),_:1},8,["value"])],512),[[k,R(s).html]]),$(b("div",me,[w(n,{value:R(o).text,"onUpdate:value":t[2]||(t[2]=e=>R(o).text=e),placeholder:e.$t("Waf.Site.ReptileProtection.index_4")},null,8,["value","placeholder"])],512),[[k,R(s).html&&"text"===R(o).type]])])])),_:1},8,["label"]),w(d,{label:e.$t("Waf.Site.ReptileProtection.index_5")},{default:g((()=>[b("div",xe,[b("div",_e,[w(i,{value:R(s).picture,"onUpdate:value":t[3]||(t[3]=e=>R(s).picture=e)},null,8,["value"])]),$(b("div",fe,[w(l,{value:R(c).type,"onUpdate:value":t[4]||(t[4]=e=>R(c).type=e)},{default:g((()=>[w(a,{value:"default"},{default:g((()=>[S(j(e.$t("Waf.Site.ReptileProtection.index_6")),1)])),_:1}),w(a,{value:"text"},{default:g((()=>[S(j(e.$t("Waf.Site.ReptileProtection.index_7")),1)])),_:1})])),_:1},8,["value"])],512),[[k,R(s).picture]]),$(b("div",he,[w(n,{value:R(c).text,"onUpdate:value":t[5]||(t[5]=e=>R(c).text=e),placeholder:e.$t("Waf.Site.ReptileProtection.index_8")},null,8,["value","placeholder"])],512),[[k,R(s).picture&&"text"===R(c).type]])])])),_:1},8,["label"])])),_:1}),w(u,{class:"mt-16px"},{default:g((()=>[b("li",ve,j(e.$t("Waf.Site.ReptileProtection.index_9")),1),b("li",null,[b("b",null,j(e.$t("Waf.Site.ReptileProtection.index_10")),1),S(j(e.$t("Waf.Site.ReptileProtection.index_11")),1)]),b("li",null,[b("b",null,j(e.$t("Waf.Site.ReptileProtection.index_12")),1),S(j(e.$t("Waf.Site.ReptileProtection.index_13")),1)]),b("li",null,[b("b",null,j(e.$t("Waf.Site.ReptileProtection.index_14")),1),S(j(e.$t("Waf.Site.ReptileProtection.index_15")),1)])])),_:1})])}}}),We={class:"p-20px"},we={class:"w-40px"},ge={class:"mx-8px"},Se={class:"w-40px"},be={class:"mx-8px"},Re={class:"w-40px"},$e={class:"ml-8px"},ke={class:"flex-1"},je={class:"flex items-center h-32px"},Ue={class:"w-320px mt-6px"},Pe={class:"text-error"},Ce=_({__name:"index",props:{row:{},onRefresh:{}},setup(e,{expose:t}){const i=e,l=f(i,"row"),n=v({open:!1,user:50,time:10,qps:1,identity:{type:"default",text:""}});return(()=>{if(!l.value)return;const{limiting:e}=l.value;if(!e)return;const{timeout:t}=e;t&&(n.open=t.open,n.user=t.user,n.time=t.time,n.qps=t.qps,n.identity.type=t.identity.type,n.identity.text=t.identity.text)})(),t({onConfirm:async()=>{await F({site:l.value.siteName,limiting:{open:n.open,user:n.user,time:n.time,qps:n.qps,identity:{type:n.identity.type,text:n.identity.text}}}),i.onRefresh?.()}}),(e,t)=>{const i=Q,l=ie,s=ne,o=X,c=ee,d=te,r=a,p=K,m=u;return y(),W("div",We,[w(p,{"label-width":"160px"},{default:g((()=>[w(l,{label:e.$t("Waf.Site.WaitingRoom.index_1")},{default:g((()=>[w(i,{value:R(n).open,"onUpdate:value":t[0]||(t[0]=e=>R(n).open=e)},null,8,["value"])])),_:1},8,["label"]),w(r,{show:R(n).open},{default:g((()=>[w(l,{label:e.$t("Waf.Site.WaitingRoom.index_2")},{default:g((()=>[b("div",we,[w(s,{value:R(n).user,"onUpdate:value":t[1]||(t[1]=e=>R(n).user=e),min:0,"show-button":!1,placeholder:""},null,8,["value"])]),b("div",ge,j(e.$t("Waf.Site.WaitingRoom.index_3")),1),b("div",Se,[w(s,{value:R(n).time,"onUpdate:value":t[2]||(t[2]=e=>R(n).time=e),min:0,"show-button":!1,placeholder:""},null,8,["value"])]),b("div",be,j(e.$t("Waf.Site.WaitingRoom.index_4")),1),b("div",Re,[w(s,{value:R(n).qps,"onUpdate:value":t[3]||(t[3]=e=>R(n).qps=e),min:0,"show-button":!1,placeholder:""},null,8,["value"])]),b("div",$e,j(e.$t("Waf.Site.WaitingRoom.index_5")),1)])),_:1},8,["label"]),w(l,{label:e.$t("Waf.Site.WaitingRoom.index_6")},{default:g((()=>[b("div",ke,[b("div",je,[w(c,{value:R(n).identity.type,"onUpdate:value":t[4]||(t[4]=e=>R(n).identity.type=e)},{default:g((()=>[w(o,{value:"default"},{default:g((()=>[S(j(e.$t("Waf.Site.WaitingRoom.index_7")),1)])),_:1}),w(o,{value:"text"},{default:g((()=>[S(j(e.$t("Waf.Site.WaitingRoom.index_8")),1)])),_:1})])),_:1},8,["value"])]),$(b("div",Ue,[w(d,{value:R(n).identity.text,"onUpdate:value":t[5]||(t[5]=e=>R(n).identity.text=e),placeholder:e.$t("Waf.Site.WaitingRoom.index_9")},null,8,["value","placeholder"])],512),[[k,"text"===R(n).identity.type]])])])),_:1},8,["label"])])),_:1},8,["show"])])),_:1}),w(m,{class:"mt-16px"},{default:g((()=>[b("li",Pe,j(e.$t("Waf.Site.WaitingRoom.index_10")),1),b("li",null,[b("b",null,j(e.$t("Waf.Site.WaitingRoom.index_11")),1),S(j(e.$t("Waf.Site.WaitingRoom.index_12")),1)]),b("li",null,[b("b",null,j(e.$t("Waf.Site.WaitingRoom.index_13")),1),S(j(e.$t("Waf.Site.WaitingRoom.index_14")),1)]),b("li",null,[b("b",null,j(e.$t("Waf.Site.WaitingRoom.index_15")),1),S(j(e.$t("Waf.Site.WaitingRoom.index_16")),1)]),b("li",null,[b("b",null,j(e.$t("Waf.Site.WaitingRoom.index_17")),1),S(j(e.$t("Waf.Site.WaitingRoom.index_18")),1)]),b("li",null,j(e.$t("Waf.Site.WaitingRoom.index_19")),1)])),_:1})])}}}),Ne={class:"cursor-pointer"};function qe(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!z(e)}e("default",_({__name:"index",setup(e){const a=E((()=>s((()=>t.import("./count-legacy.js?v=1742891699271")),void 0))),_=E((()=>s((()=>t.import("./record-legacy.js?v=1742891699271")),void 0))),{t:f}=h(),W=l();P(W),C("9.6.0");const $=C(!1),k=async e=>{await Z({obj:"malicious_ip"}),$.value=e},z=v({p:1,limit:10,search:""}),B=M(""),F=M(""),K=async(e,t)=>{await I({siteName:e.siteName,obj:t})},{table:X,columns:ee,setLoading:te}=T([{key:"siteName",title:f("Waf.Site.index_8"),minWidth:150,ellipsis:{tooltip:!0},render:e=>w("a",{class:"bt-link",href:"javascript:;",onClick:()=>{Y({row:e,onRefresh:ne})}},[e.siteName])},{key:"total",title:f("Waf.Site.index_9"),width:"10%",minWidth:140,render:e=>{let t=0;return e.total.forEach((e=>{t+=e.value})),w(se,{placement:"bottom-start","arrow-point-to-center":!0},{trigger:()=>w(N,null,[t>0?w("a",{class:"bt-link error",href:"javascript:;",onClick:()=>{(e=>{B.data.list=e.total,B.title=f("Waf.Site.index_5",[e.siteName]),B.show=!0})(e)}},[t]):t]),default:()=>w("div",null,[e.total.map((e=>w("div",{class:"leading-18px"},[e.name,S(": "),e.value,f("Waf.Site.index_35")])))])})}},{key:"not_spider",width:"12%",minWidth:120,title:()=>{let e;return w(N,null,[w("span",{class:"mr-6px"},[f("Waf.Site.index_36")]),w(G,null,qe(e=f("Waf.Site.index_37"))?e:{default:()=>[e]})])},render:e=>w(oe,{checked:e.not_spider,onUpdateChecked:async t=>{await K(e,"not_spider"),e.not_spider=t}},null)},{key:"cdn",width:"12%",minWidth:120,title:()=>{let e;return w(N,null,[w("span",{class:"mr-6px"},[f("Waf.Site.index_38")]),w(G,null,qe(e=f("Waf.Site.index_39"))?e:{default:()=>[e]})])},render:e=>w(oe,{checked:e.cdn,onUpdateChecked:async t=>{await K(e,"cdn"),e.cdn=t}},null)},{key:"smart_cc",width:"14%",minWidth:140,title:()=>w(N,null,[w("span",{class:"mr-6px"},[f("Waf.Site.index_40")]),w(G,null,{default:()=>[w("div",{class:"w-500px"},[f("Waf.Site.index_41")])]})]),render:e=>w("div",{class:"inline-flex items-center"},[w(oe,{class:"mr-6px",checked:e.smart_cc.open,onUpdateChecked:async t=>{t?L({title:f("Public.Confirm.Title"),content:f("Waf.Site.index_10"),onConfirm:async()=>{await K(e,"smart_cc"),e.smart_cc.open=t}}):(await K(e,"smart_cc"),e.smart_cc.open=t)}},null),w(se,{placement:"bottom-start","arrow-point-to-center":!0},{trigger:()=>w("span",{class:"text-desc text-13px"},[e.total[9].value]),default:()=>w(N,null,[f("Waf.Site.index_42",[e.total[9].value])])})])},{key:"crawler",title:f("Waf.Site.index_43"),width:"9%",minWidth:100,render:e=>{const t=(e.crawler?Object.entries(e.crawler):[]).some((([e,t])=>t&&"picturenew"!==e&&"htmlnew"!==e));return w("a",{class:["bt-link",t?"":"error"],href:"javascript:;",onClick:()=>{ie(e)}},[f(t?"Public.Status.Enable":"Public.Status.Disable")])}},{key:"limiting",title:f("Waf.Site.index_44"),width:"10%",minWidth:170,render:e=>w("a",{class:["bt-link",e?.limiting?.timeout?.open?"":"error"],href:"javascript:;",onClick:()=>{ae(e)}},[f(e?.limiting?.timeout?.open?"Public.Status.Enable":"Public.Status.Disable")])},{key:"cc",width:"8%",minWidth:100,title:f("Waf.Site.index_11"),render:e=>w("div",{class:"inline-flex items-center"},[w(oe,{class:"mr-6px",checked:e.cc.open,onUpdateChecked:async t=>{await K(e,"cc"),e.cc.open=t}},null),w(se,{placement:"bottom-start","arrow-point-to-center":!0},{trigger:()=>w("span",{class:"text-desc text-13px"},[e.total[2].value]),default:()=>w(N,null,[f("Waf.Site.index_42",[e.total[2].value])])})])},{key:"open",width:"6%",minWidth:70,title:f("Waf.Site.index_12"),render:e=>w(Q,{size:"small",value:e.open,onUpdateValue:async t=>{await K(e,"open"),e.open=t}},null)},D({width:100,options:e=>[{label:f("Waf.Site.index_13"),onClick:()=>{(async e=>{const{message:t}=await A({siteName:e.siteName});o(t)&&t.length>0?(F.data.timeList=t,F.data.siteName=e.siteName,F.title=f("Waf.Site.index_6",[e.siteName]),F.show=!0):c.success(f("Waf.Site.index_7"))})(e)}},{label:f("Public.Btn.Set"),onClick:()=>{Y({row:e,onRefresh:ne})}}]})]),ie=e=>{V({title:f("Waf.Site.index_45",[e.siteName]),width:620,footer:!0,data:{row:e,onRefresh:ne},component:ye})},ae=e=>{V({title:f("Waf.Site.index_46",[e.siteName]),width:700,footer:!0,data:{row:e,onRefresh:ne},component:Ce})},le=()=>{z.p=1,ne()},ne=async()=>{try{te(!0);const{message:e}=await H(U(z));i(e)&&(X.data=e.data,X.total=n(e.page))}finally{te(!1)}};return(async()=>{const{message:e}=await J();i(e)&&($.value=e.malicious_ip)})(),q((()=>{ne()})),(e,t)=>{const i=x,l=m,n=p,s=r,o=u,c=d,f=ce;return y(),O(f,{class:"p-16px"},{default:g((()=>[w(s,null,{toolsLeft:g((()=>[b("div",Ne,[b("span",{class:"mr-8px text-desc",onClick:t[0]||(t[0]=e=>k(!R($)))},j(e.$t("Waf.Site.index_1")),1),w(R(oe),{checked:R($),"onUpdate:checked":k},null,8,["checked"])])])),toolsRight:g((()=>[w(i,{value:R(z).search,"onUpdate:value":t[1]||(t[1]=e=>R(z).search=e),placeholder:e.$t("Waf.Site.index_2"),onSearch:le},null,8,["value","placeholder"])])),table:g((()=>[w(l,{loading:R(X).loading,data:R(X).data,columns:R(ee)},null,8,["loading","data","columns"])])),pageRight:g((()=>[w(n,{page:R(z).p,"onUpdate:page":t[2]||(t[2]=e=>R(z).p=e),"page-size":R(z).limit,"onUpdate:pageSize":t[3]||(t[3]=e=>R(z).limit=e),"item-count":R(X).total,"store-key":"waf-site",onRefresh:ne},null,8,["page","page-size","item-count"])])),_:1}),w(o,{class:"mt-16px"},{default:g((()=>[b("li",null,j(e.$t("Waf.Site.index_3")),1),b("li",null,j(e.$t("Waf.Site.index_4")),1)])),_:1}),w(c,{show:R(B).show,"onUpdate:show":t[4]||(t[4]=e=>R(B).show=e),title:R(B).title,width:480,"min-height":688,data:R(B).data,component:R(a)},null,8,["show","title","data","component"]),w(c,{show:R(F).show,"onUpdate:show":t[5]||(t[5]=e=>R(F).show=e),title:R(F).title,data:R(F).data,width:1e3,"min-height":552,component:R(_)},null,8,["show","title","data","component"])])),_:1})}}}))}}}));
