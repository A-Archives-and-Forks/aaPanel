const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index144.js?v=1749179669910","js/page_layout.js?v=1749179669910","js/vue.js?v=1749179669910","js/__commonjsHelpers__.js?v=1749179669910","js/naive.js?v=1749179669910","js/common.js?v=1749179669910","js/public.js?v=1749179669910","css/public.css?v=1749179669910","css/page_layout.css?v=1749179669910","css/index66.css?v=1749179669910"])))=>i.map(i=>d[i]);
import{X as e,r as a,e as t,_ as l,d as n,y as s,R as o,S as i,U as u,V as c,ao as r,a2 as p,F as d,N as v,a0 as y,a1 as _,P as m,k as h,v as f,m as x,ad as b,ae as g,O as C,ak as w,c as k,i as P,t as L,f as M,au as S,aj as I,Y as $,G as A,a5 as F}from"./vue.js?v=1749179669910";import{du as U,c as z,N as j,p as O,dv as T,dw as R,dx as V,dy as N,dz as B,dA as D,dB as q,l as Y,_ as E,O as H,dC as G,dD as X,bv as J,o as Q,m as K,dE as W,d4 as Z,d5 as ee,J as ae,dF as te,F as le,a as ne,a4 as se,dG as oe,dH as ie}from"./page_layout.js?v=1749179669910";import{bX as ue,bR as ce,ae as re,S as pe,cv as de,a2 as ve,cp as ye,T as _e,ck as me,cl as he}from"./naive.js?v=1749179669910";import{u as fe}from"./public.js?v=1749179669910";import{a as xe,l as be}from"./paypal-js.js?v=1749179669910";import{P as ge}from"./open.js?v=1749179669910";import{_ as Ce,a as we,b as ke,c as Pe}from"./weChat-pay.js?v=1749179669910";import"./__commonjsHelpers__.js?v=1749179669910";import"./common.js?v=1749179669910";import"./index102.js?v=1749179669910";import"./index97.js?v=1749179669910";const Le=e("pay",(()=>{const e=a(""),l=a(!0),n=a(""),s=a(27),o=a(""),i=a([]),u=a(!1),c=a(!0),r=a(0),p=a([]),d=a(0),v=t((()=>p.value.length>0?p.value[r.value].children:[])),y=t((()=>v.value[d.value])),_=a(!0),m={order_no:"",stripe_publishable_key:"",order_id:0,paypal_client_id:"",price:"",market_price:"",cycle:1,cycle_unit:"month",couponPrice:""},h=a(ue(m)),f=a("stripe"),x=a(!1),b=a(0),g=a([]),C=a([]),w=a({status:0,end_time:0,obtain_id:0,total:0,length:0,coupons:[],package_quota:{total:0,quota:0}}),k=a(""),P=a([]),L=a([]),M=()=>{r.value=0,p.value=[],d.value=0,_.value=!0,h.value=ue(m),f.value="stripe"},S=()=>{k.value="voucher",P.value=[],L.value=[]};return{currentMenu:e,isFirstCutMenu:l,pid:n,source:s,username:o,plugins:i,openSsl:u,isFirstFetchSsl:c,cycleIndex:r,numberIndex:d,cycleList:p,numberList:v,currentProduct:y,shouldFetchOrder:_,orderInfo:h,channelMenu:f,isUseCoupon:x,couponId:b,couponList:g,couponAllList:C,receiveCoupon:w,voucherMenu:k,voucherAllList:P,authorizationAllList:L,reset:()=>{e.value="",l.value=!0,n.value="",s.value=27,o.value="",i.value=[],u.value=!1,c.value=!0,M(),S()},resetProduct:M,resetVoucher:S}})),Me={class:"relative w-full h-full py-40px pl-22px pr-8px bg-#FFF5E1 rounded-tl-4px rounded-bl-4px"},Se={class:"mb-38px"},Ie={class:"flex mb-10px text-20px text-#e8a833"},$e={key:0,class:"glyphicon glyphicon-vip"},Ae={key:1,class:"ml-8px"},Fe={key:2},Ue={key:0,class:"min-h-34px text-#888"},ze={key:0},je={class:"mb-16px text-15px text-default"},Oe={class:"text-13px"},Te={class:"flex-1 ml-8px overflow-hidden text-#666"},Re={key:1,class:"mt-36px text-default"},Ve={class:"mb-16px text-15px"},Ne=["innerHTML"],Be={key:2,class:"pay-info-bg"},De={key:3,class:"contrast",href:"https://aapanel.com/new/pricing.html",target:"_blank",rel:"noreferer noopener"},qe={key:4,class:"pay-info-recom"},Ye={class:"buy"},Ee={class:"text"},He=O(n({__name:"ProductFeatures",setup(e){const t=Le(),{currentMenu:n,plugins:y}=l(t),_=a([]);return s((()=>{"pro"!==n.value&&"voucher"!==n.value||(async()=>{const{message:e}=await U({product_id:"100000058"});z(e)&&(_.value=j(e.res)?e.res:[])})()})),(e,a)=>(o(),i("div",Me,[u("div",Se,[u("div",Ie,["pro"===c(n)||"voucher"===c(n)?(o(),i("span",$e)):r("",!0),"pro"===c(n)||"voucher"===c(n)?(o(),i("span",Ae,p(e.$t("Component.Pay.index_1")),1)):r("",!0),"plugin"===c(n)&&c(y).length>0?(o(),i("span",Fe,p(c(y)[0].name),1)):r("",!0)]),"pro"===c(n)||"voucher"===c(n)?(o(),i("div",Ue,p(e.$t("Component.Pay.index_2")),1)):r("",!0)]),"pro"===c(n)||"voucher"===c(n)?(o(),i("div",ze,[u("div",je,p(e.$t("Component.Pay.index_3"))+":",1),u("div",Oe,[(o(!0),i(d,null,v(c(_),(e=>(o(),i("div",{key:e,class:"flex py-10px"},[a[0]||(a[0]=u("span",{class:"glyphicon glyphicon-ok text-#feaa04"},null,-1)),u("span",Te,p(e),1)])))),128))])])):r("",!0),"plugin"===c(n)&&c(y).length>0?(o(),i("div",Re,[u("div",Ve,p(100===c(y)[0].type?e.$t("Mail.Overview.today_17"):e.$t("Component.Pay.index_4"))+": ",1),u("div",{class:"w-186px leading-22px text-13px",innerHTML:c(y)[0].ps},null,8,Ne)])):r("",!0),"pro"===c(n)||"voucher"===c(n)?(o(),i("div",Be)):r("",!0),"pro"===c(n)||"voucher"===c(n)?(o(),i("a",De,p(e.$t("Component.Pay.index_5")),1)):r("",!0),"plugin"===c(n)&&100!==c(y)[0].type?(o(),i("div",qe,[u("div",Ye,p(e.$t("Component.Pay.index_6")),1),u("div",Ee,[u("span",null,p(e.$t("Component.Pay.index_7")),1)])])):r("",!0)]))}}),[["__scopeId","data-v-d14c89e4"]]),Ge=()=>{const e=Le(),{pid:a,source:n,cycleIndex:s,cycleList:o,currentProduct:i,openSsl:u,isFirstFetchSsl:c,shouldFetchOrder:r,orderInfo:p,channelMenu:d,isUseCoupon:v,couponId:y,couponList:_,couponAllList:m,receiveCoupon:h}=l(e),f=t((()=>{let e=!1;switch(d.value){case"paypal":e=i.value.paypal_first_subscription_price>0||i.value.paypal_subscription_price>0;break;case"stripe":e=i.value.first_subscription_price>0||i.value.subscription_price>0}return e})),x=t((()=>{if(v.value&&!f.value){const e=_.value.find((e=>e.id===y.value));if(e)return e.deduct_amount}return 0})),b=t((()=>{if(1!==h.value.status)return!1;return!(h.value.end_time-Math.floor(Date.now()/1e3)<=0)&&h.value.length>0})),g=(e=!1)=>{var t;_.value=[];if(null==(t=i.value.usable_coupons)||t.forEach((e=>{const t=m.value.find((t=>t.id===e&&"".concat(t.product_id)===a.value));t&&_.value.push(t)})),_.value.sort(((e,a)=>Number(a.deduct_amount)-Number(e.deduct_amount))),_.value.length>0)y.value=_.value[0].id,v.value=!0;else if(y.value=-1,v.value=!1,e&&m.value.length>0){const e=m.value[0];for(let a=0;a<o.value.length;a++){const t=2===e.charge_type?"999":"".concat(e.cycle);if(o.value[a].cycle===t&&o.value[a].cycle_unit===e.cycle_unit){s.value=a;break}}}};return{subscribe:f,couponPrice:x,showCouponModal:b,getCycleList:async()=>{const{message:e}=await T({product_id:a.value});o.value=j(e)?e:[]},getSslStatus:async()=>{if(!c.value)return;const{message:e}=await R();c.value=!1,z(e)&&(u.value=e.result)},getOrderInfo:async()=>{if(!r.value)return;const e={pid:a.value,cycle:i.value.cycle,cycle_unit:i.value.cycle_unit,charge_type:i.value.charge_type,num:i.value.num,source:n.value,...v.value&&0!==y.value?{coupon_id:y.value}:{}},{message:t}=await B(e);r.value=!1,z(t)&&(p.value.order_no=t.order_no,p.value.stripe_publishable_key=t.stripe_publishable_key,p.value.order_id=t.order_id,p.value.paypal_client_id=t.paypal_client_id,p.value.price=t.price,p.value.market_price=t.market_price,p.value.cycle=ce(t,"transaction.cycle",1),p.value.cycle_unit=ce(t,"transaction.cycle_unit",""))},setChannelMenu:e=>{d.value=e},getCouponList:async()=>{const{message:e}=await V();m.value=j(e)?e:[],g(!0)},setCouponList:g,getReceiveCoupon:async()=>{const{message:e}=await N();z(e)&&(h.value.status=e.status,h.value.end_time=e.end_time,h.value.obtain_id=e.obtain_id,h.value.length=e.coupons.length,h.value.total=e.total,h.value.coupons=e.coupons,h.value.package_quota=e.package_quota)},resetOrder:()=>{r.value=!0}}},Xe=()=>{const e=Le(),{pid:a,currentMenu:t,isFirstCutMenu:n,voucherMenu:s,voucherAllList:o,authorizationAllList:i}=l(e),u=async()=>{if(o.value.length>0)return;const{message:e}=await D();o.value=j(e)?e:[]},c=async()=>{if(i.value.length>0)return;const{message:e}=await q();i.value=j(e)?e:[]};return{getVoucherList:u,getAuthorizationList:c,initCurrentMenu:async()=>{if(!n.value)return;await c();if(i.value.find((e=>e.product.id===Y(a.value))))return n.value=!1,a.value="0",t.value="voucher",s.value="authorization",Promise.reject(!1);await u();return o.value.find((e=>e.product.id===Y(a.value)))?(n.value=!1,a.value="0",t.value="voucher",s.value="voucher",Promise.reject(!1)):void 0}}},Je={class:"h-full"},Qe=O(n({__name:"ProductLoading",props:{loading:{type:Boolean,default:!1}},setup:e=>(a,t)=>{const l=E,n=H;return o(),y(n,{class:"h-full",show:e.loading,rotate:!1},{description:_((()=>t[0]||(t[0]=[u("div",{class:"pt-8px text-14px leading-20px"},"Loading, please wait...",-1)]))),icon:_((()=>[m(l,{class:"loading-icon",name:"base-loading"})])),default:_((()=>[h(u("div",Je,[x(a.$slots,"default",{},void 0,!0)],512),[[f,!e.loading]])])),_:3},8,["show"])}}),[["__scopeId","data-v-39813426"]]),Ke={class:"product-section"},We={class:"section-title"},Ze={class:"section-body"},ea=O(n({__name:"ProductSection",props:{title:{type:String,default:""}},setup:e=>(a,t)=>(o(),i("div",Ke,[u("div",We,p(e.title),1),u("div",Ze,[x(a.$slots,"default",{},void 0,!0)])]))}),[["__scopeId","data-v-a46f66e0"]]),aa=["onClick"],ta={class:"new-price"},la={class:"number"},na={class:"time"},sa={class:"old-price"},oa={key:0,class:"tips"},ia={class:"flex-center h-103px"},ua=O(n({__name:"CycleSelect",props:b({options:{type:Array,default:()=>[]}},{value:{default:0},valueModifiers:{}}),emits:["update:value"],setup(e){const a=g(e,"value"),{t:t}=C(),l=e=>{const a=e.children[0],l=Y(a.cycle);return 999===l?t("Component.Auth.index_6"):"year"===a.cycle_unit?t("Component.Pay.index_14",[l,t("Public.Unit.Year",l)]):t("Component.Pay.index_15",[l,t("Public.Unit.Month",l)])};return(t,n)=>{const s=G,c=X,x=re;return o(),i(d,null,[h(m(c,{"slides-per-view":3,effect:"slide","space-between":20,loop:!1,"show-dots":!1,draggable:!0,"show-arrow":!0},{default:_((()=>[(o(!0),i(d,null,v(e.options,((e,c)=>(o(),y(s,{key:"".concat(e.cycle+e.cycle_unit),class:"pt-8px",style:{width:"190px"}},{default:_((()=>[e.children.length>0?(o(),i("div",{key:0,class:w(["radio-item pro",{active:a.value===c}]),onClick:e=>(e=>{a.value=e})(c)},[u("div",ta,[u("span",la,[n[0]||(n[0]=u("span",{class:"symbol"},"$",-1)),u("span",null,p(e.children[0].price.toFixed(2)),1)]),n[1]||(n[1]=u("span",{class:"ml-4px mr-2px"},"/",-1)),u("span",na,p(l(e)),1)]),u("div",sa,p(t.$t("Component.Pay.index_16",[e.children[0].market_price])),1),0===c?(o(),i("div",oa,p(t.$t("Component.Pay.index_10")),1)):r("",!0),n[2]||(n[2]=u("div",{class:"checked"},null,-1))],10,aa)):r("",!0)])),_:2},1024)))),128))])),_:1},512),[[f,e.options.length>0]]),h(u("div",ia,[m(x)],512),[[f,0===e.options.length]])],64)}}}),[["__scopeId","data-v-81f07a1d"]]),ca={class:"product-selector"},ra=["onClick"],pa={key:0,class:"discount"},da={class:"flex-center"},va=O(n({__name:"ProductSelect",props:b({onChange:[Function,Array],options:{type:Array,default:()=>[]}},{value:{},valueModifiers:{}}),emits:["update:value"],setup(e){const a=g(e,"value");return(t,l)=>{const n=re;return o(),i(d,null,[h(u("div",ca,[(o(!0),i(d,null,v(e.options,(l=>(o(),i("div",{key:l.value,class:w(["product-option",{active:a.value===l.value}]),onClick:t=>(t=>{a.value=t.value,e.onChange&&pe(e.onChange,t.value)})(l)},[k(p(l.label)+" ",1),l.discount&&l.discount<100?(o(),i("div",pa,p(t.$t("Component.Pay.index_13",["".concat(l.discount,"%")])),1)):r("",!0)],10,ra)))),128))],512),[[f,e.options.length>0]]),h(u("div",da,[m(n,{size:"small"})],512),[[f,0===e.options.length]])],64)}}}),[["__scopeId","data-v-e68e0310"]]),ya={class:"ml-16px"};function _a(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!P(e)}const ma=n({__name:"time",props:{endtime:{default:0}},emits:["finish"],setup(e,{emit:a}){const l=e,n=a,{t:s}=C(),u=t((()=>{const e=Date.now(),a=1e3*l.endtime;return Math.max(0,a-e)})),r=e=>e.toString().padStart(2,"0"),p=({hours:e,minutes:a,seconds:t})=>{let l,n,o,i;const u=Math.floor(e/24);return e%=24,m("div",{class:"text-desc"},[m("span",{class:"mr-6px"},[s("Component.Pay.index_40")]),u>0?m(de,{type:"error",size:"small",class:"px-4px",bordered:!1},_a(l=r(u))?l:{default:()=>[l]}):"",u>0?m("span",{class:"mx-4px"},[k(":")]):"",m(de,{type:"error",size:"small",class:"px-4px",bordered:!1},_a(n=r(e))?n:{default:()=>[n]}),m("span",{class:"mx-4px"},[k(":")]),m(de,{type:"error",size:"small",class:"px-4px",bordered:!1},_a(o=r(a))?o:{default:()=>[o]}),m("span",{class:"mx-4px"},[k(":")]),m(de,{type:"error",size:"small",class:"px-4px",bordered:!1},_a(i=r(t))?i:{default:()=>[i]})])},d=()=>{l.endtime>0&&n("finish")};return(e,a)=>{const t=J;return o(),i("div",ya,[m(t,{duration:c(u),render:p,"on-finish":d},null,8,["duration"])])}}}),ha=O(n({__name:"index",props:b({data:{default:()=>[]}},{value:{},valueModifiers:{},checked:{type:Boolean},checkedModifiers:{}}),emits:b(["change","finish"],["update:value","update:checked"]),setup(e,{emit:a}){const l=e,n=a,{t:s}=C(),{subscribe:r}=Ge(),d=L(l,"data"),v=g(e,"value"),y=g(e,"checked"),x=t((()=>{if(-1!==v.value){const e=d.value.find((e=>e.id===v.value));if(e)return e.end_time}return 0})),b=t((()=>d.value.length>0?d.value.map((e=>{const a=(e=>2===e.charge_type?s("Component.Auth.index_6").toLocaleLowerCase():"year"===e.cycle_unit?s("Public.Unit.Year").toLocaleLowerCase():s("Public.Unit.Month").toLocaleLowerCase())(e);return{label:s("Component.Pay.index_19",[e.deduct_amount,a]),value:e.id}})):[{label:s("Component.Pay.index_20"),value:-1}])),k=t((()=>0===l.data.length||r.value)),P=()=>{k.value||(y.value=!y.value,n("change"))},M=e=>{e.stopPropagation()},S=e=>{y.value=e,n("change")},I=()=>{n("change")},$=()=>{n("finish")};return(e,a)=>{const t=ve,l=ye;return o(),i("div",{class:w(["coupon-box mb-16px",{active:y.value}]),onClick:P},[m(t,{checked:y.value,disabled:c(k),onClick:M,"onUpdate:checked":S},{default:_((()=>[u("span",null,p(e.$t("Component.Pay.index_18",[e.data.length])),1)])),_:1},8,["checked","disabled"]),u("div",{class:"w-220px ml-16px",onClick:M},[m(l,{value:v.value,"onUpdate:value":[a[0]||(a[0]=e=>v.value=e),I],options:c(b),disabled:c(k),"menu-props":{style:{"--n-option-check-color":"#e4a93c","--n-option-text-color-active":"#e4a93c"}}},null,8,["value","options","disabled"])]),h(m(ma,{endtime:c(x),onFinish:$},null,8,["endtime"]),[[f,c(x)>0]])],2)}}}),[["__scopeId","data-v-d3abb1a4"]]),fa={key:0,class:"flex-center flex-col h-full"},xa={class:"mb-12px text-16px"},ba=n({__name:"ssl",props:{show:{type:Boolean,default:!1}},setup(e){const{t:a}=C(),t=()=>{fe({title:a("Config.Safe.index_11"),width:600,footer:!0,component:ge})};return(a,l)=>{const n=_e;return e.show?x(a.$slots,"default",{key:1}):(o(),i("div",fa,[u("div",xa,p(a.$t("Component.Pay.index_41")),1),m(n,{type:"primary",class:"h-36px",size:"large",color:"#ff8f00",onClick:t},{default:_((()=>[k(p(a.$t("Component.Pay.index_42")),1)])),_:1})]))}}}),ga={key:0,class:"mb-8px text-desc text-13px"},Ca={class:"font-bold"},wa={class:"flex flex-wrap justify-center items-baseline"},ka={class:"mr-4px text-14px"},Pa={class:"mr-4px pay-price-color"},La={class:"text-24px font-bold"},Ma={key:0,class:"ml-8px pay-price-color font-bold"},Sa=O(n({__name:"total",props:{payType:{type:String,default:""},subscribe:{type:Boolean,default:!1},currency:{type:Boolean,default:!1}},setup(e){const{t:a}=C(),n=Le(),{currentProduct:s,orderInfo:v}=l(n),{couponPrice:y}=Ge(),_=t((()=>e.subscribe?m.value:v.value.price)),m=t((()=>"paypal"===e.payType?s.value.paypal_first_subscription_price>0?s.value.paypal_first_subscription_price.toFixed(2):s.value.paypal_subscription_price.toFixed(2):s.value.first_subscription_price>0?s.value.first_subscription_price.toFixed(2):s.value.subscription_price.toFixed(2))),h=t((()=>{const{cycle_unit:e}=s.value;return"year"===e?90:10})),f=t((()=>{const e=Y(v.value.cycle);return 999===e?a("Component.Auth.index_6"):"year"===v.value.cycle_unit?a("Component.Pay.index_14",[e,a("Public.Unit.Year",e)]):a("Component.Pay.index_15",[e,a("Public.Unit.Month",e)])})),x=t((()=>2===s.value.charge_type?a("Component.Auth.index_6").toLocaleLowerCase():"year"===s.value.cycle_unit?a("Public.Unit.Year").toLocaleLowerCase():a("Public.Unit.Month").toLocaleLowerCase()));return(a,t)=>(o(),i(d,null,[e.subscribe?(o(),i("div",ga,[u("span",null,p(a.$t("Component.Pay.index_43")),1),u("span",Ca,p(a.$t("Component.Pay.index_44",[c(h)])),1)])):r("",!0),u("div",wa,[u("span",ka,p(a.$t("Component.Pay.index_25")),1),u("span",Pa,[t[0]||(t[0]=u("span",{class:"mr-2px text-18px font-bold"},"$",-1)),u("span",La,p(c(_)),1)]),u("span",null,"/"+p(c(f)),1),c(y)?(o(),i("span",Ma,p(a.$t("Component.Pay.index_19",[c(y),c(x)])),1)):r("",!0)])],64))}}),[["__scopeId","data-v-bd5719e0"]]),Ia={class:"relative flex-center flex-col h-full"},$a={class:"absolute left-0 bottom-12px w-full text-center text-desc"},Aa={class:"ml-8px"},Fa=n({__name:"index",setup(e,{expose:t}){const{t:n}=C(),s=Le(),{openSsl:i,orderInfo:r}=l(s),{subscribe:d,getSslStatus:v,getOrderInfo:h,setChannelMenu:f}=Ge();let x=null;const b=a(!0),g=a(!1),w=async()=>{if(!x)return;const e=K.loading(n("Component.Pay.index_12"));try{const{message:e}=await W({order_no:r.value.order_no,subscribe:d.value?1:0});z(e)&&(e.id?x.redirectToCheckout({sessionId:e.id}):K.error(n("Component.Pay.index_28")))}finally{e.close()}},P=()=>{f("paypal")},L=async()=>{try{b.value=!0,await v(),await h(),await S()}finally{b.value=!1}},S=async()=>{const e=xe(r.value.stripe_publishable_key);x=await e};return M((()=>{L()})),t({init:L}),(e,a)=>{const t=_e,l=Q;return o(),y(Qe,{loading:c(b)},{default:_((()=>[m(ba,{show:c(i)},{default:_((()=>[u("div",Ia,[m(Sa,{"pay-type":"stripe",subscribe:c(d),currency:c(g)},null,8,["subscribe","currency"]),m(t,{class:"mt-14px w-150px h-34px text-14px",type:"primary",color:"#ff8f00",onClick:w},{default:_((()=>[k(p(e.$t("Component.Pay.index_26")),1)])),_:1}),a[1]||(a[1]=u("div",{class:"h-32px"},null,-1)),u("div",$a,[u("span",Aa,p(e.$t("Component.Pay.index_27",["Stripe"])),1),m(l,{onClick:P},{default:_((()=>a[0]||(a[0]=[k("PayPal")]))),_:1})])])])),_:1},8,["show"])])),_:1},8,["loading"])}}}),Ua={class:"relative flex-center flex-col h-full"},za={class:"absolute left-0 bottom-12px w-full text-center text-desc"},ja={class:"ml-8px"},Oa=n({__name:"index",setup(e,{expose:t}){const{t:n}=C(),s=Le(),{openSsl:i,orderInfo:r,currentProduct:d}=l(s),{subscribe:v,getSslStatus:h,getOrderInfo:f,setChannelMenu:x}=Ge(),b=a(null),g=a(!0),w=()=>{x("stripe")},P=async()=>{try{g.value=!0,await h(),await f(),v.value?await I():await S()}finally{g.value=!1}},L=e=>new Promise(((a,t)=>{const{message:l}=e;if(z(l)){if(l.status)return a(l.res);K.error(l.msg)}t(l)})),S=async()=>{var e,a;const t=await be({clientId:r.value.paypal_client_id});t&&b.value&&(b.value.innerHTML="",null==(a=t.Buttons)||a.call(t,{style:{height:34},fundingSource:null==(e=t.FUNDING)?void 0:e.PAYPAL,createOrder:()=>Z({oid:r.value.order_id}).then(L).then((e=>e)),onApprove:e=>ee({paypal_order_id:e.orderID}).then((()=>{K.success(n("Component.Pay.index_7")),ae()}))}).render(b.value))},I=async()=>{var e,a;const t=await be({clientId:r.value.paypal_client_id,vault:!0,intent:"subscription"});t&&b.value&&(b.value.innerHTML="",null==(a=t.Buttons)||a.call(t,{style:{height:34},fundingSource:null==(e=t.FUNDING)?void 0:e.PAYPAL,createSubscription:(e,a)=>a.subscription.create({custom_id:"".concat(r.value.order_id),plan_id:d.value.paypal_subscription_plan_id}),onApprove:()=>(A(),Promise.resolve())}).render(b.value))};let $=null;const A=async()=>{const{close:e}=K.loading("Loading..."),a=async()=>{const{message:a}=await te({order_id:r.value.order_id});if(z(a)&&1===a.res)return $&&clearTimeout($),e(),K.success(n("Component.Pay.index_7")),await le({force:1}),void ae();t()},t=()=>{$=window.setTimeout((async()=>{await a()}),1e3)};$&&clearTimeout($),await a(),t()};return M((()=>{P()})),t({init:P}),(e,a)=>{const t=Q;return o(),y(Qe,{loading:c(g)},{default:_((()=>[m(ba,{show:c(i)},{default:_((()=>[u("div",Ua,[m(Sa,{"pay-type":"paypal",subscribe:c(v),currency:!1},null,8,["subscribe"]),u("div",{ref_key:"payBtnRef",ref:b,class:"relative w-150px h-34px mt-16px z-10"},null,512),a[1]||(a[1]=u("div",{class:"h-32px"},null,-1)),u("div",za,[u("span",ja,p(e.$t("Component.Pay.index_27",["Paypal"])),1),m(t,{onClick:w},{default:_((()=>a[0]||(a[0]=[k("Stripe")]))),_:1})])])])),_:1},8,["show"])])),_:1},8,["loading"])}}}),Ta={class:"relative flex-center flex-col h-full"},Ra={class:"absolute left-0 bottom-12px w-full text-center text-desc"},Va={class:"ml-8px"},Na=n({__name:"index",setup(e,{expose:t}){const{t:n}=C(),s=Le(),{openSsl:i,orderInfo:r}=l(s),{getSslStatus:d,getOrderInfo:v,setChannelMenu:h}=Ge();let f=null;const x=a(!0),b=a(!0),g=a(!1),w=async()=>{if(!f)return;const e=K.loading(n("Component.Pay.index_12"));try{const{message:e}=await W({order_no:r.value.order_no,subscribe:g.value?1:0,adaptive_pricing:1});z(e)&&(e.id?f.redirectToCheckout({sessionId:e.id}):K.error(n("Component.Pay.index_28")))}finally{e.close()}},P=e=>{h(e)},L=async()=>{try{x.value=!0,await d(),await v(),await S()}finally{x.value=!1}},S=async()=>{const e=xe(r.value.stripe_publishable_key);f=await e};return M((()=>{L()})),t({init:L}),(e,a)=>{const t=_e,l=Q;return o(),y(Qe,{loading:c(x)},{default:_((()=>[m(ba,{show:c(i)},{default:_((()=>[u("div",Ta,[a[5]||(a[5]=u("div",{class:"flex gap-16px mb-8px"},[u("img",{class:"h-32px",src:Ce,alt:""}),u("img",{class:"h-32px",src:we,alt:""}),u("img",{class:"h-32px",src:ke,alt:""}),u("img",{class:"h-32px",src:Pe,alt:""})],-1)),m(Sa,{"pay-type":"stripe",subscribe:c(g),currency:c(b)},null,8,["subscribe","currency"]),m(t,{class:"mt-12px w-150px h-34px text-14px",type:"primary",color:"#ff8f00",onClick:w},{default:_((()=>[k(p(e.$t("Component.Pay.index_47")),1)])),_:1}),a[6]||(a[6]=u("div",{class:"h-32px"},null,-1)),u("div",Ra,[u("span",Va,p(e.$t("Component.Pay.index_27",[""])),1),m(l,{onClick:a[0]||(a[0]=e=>P("stripe"))},{default:_((()=>a[2]||(a[2]=[k("Stripe")]))),_:1}),a[4]||(a[4]=u("span",null," or ",-1)),m(l,{onClick:a[1]||(a[1]=e=>P("paypal"))},{default:_((()=>a[3]||(a[3]=[k("PayPal")]))),_:1})])])])),_:1},8,["show"])])),_:1},8,["loading"])}}}),Ba={class:"flex-center flex-col h-full"},Da=n({__name:"index",setup(e){const a=()=>{window.open("mailto:support@aapanel.com")};return(e,t)=>{const l=_e;return o(),i("div",Ba,[t[1]||(t[1]=u("div",{class:"mb-12px text-14px leading-20px text-center text-#555"},[k(" For USDT payments, please contact our customer"),u("br"),k(" service team at "),u("b",null,"support@aapanel.com"),k(" for"),u("br"),k(" assistance with the transaction. ")],-1)),m(l,{type:"primary",class:"h-36px",size:"large",color:"#ff8f00",onClick:a},{default:_((()=>t[0]||(t[0]=[u("span",{class:"ml-4px"},"Contact Support",-1)]))),_:1})])}}}),qa=O(n({__name:"index",setup(e,{expose:a}){const t=Le(),{channelMenu:n,shouldFetchOrder:s}=l(t),i=S("stripeRef"),u=S("paypalRef"),r=S("otherRef"),p=()=>{s.value&&d()},d=()=>{var e,a,t;switch(n.value){case"stripe":null==(e=i.value)||e.init();break;case"paypal":null==(a=u.value)||a.init();break;case"other":null==(t=r.value)||t.init()}};return a({init:d}),(e,a)=>{const t=me,l=he;return o(),y(l,{value:c(n),"onUpdate:value":[a[0]||(a[0]=e=>I(n)?n.value=e:null),p],class:"pay-menu pro",type:"card",placement:"left"},{default:_((()=>[m(t,{name:"stripe",tab:"Stripe","display-directive":"show:lazy"},{default:_((()=>[m(Fa,{ref_key:"stripeRef",ref:i},null,512)])),_:1}),m(t,{name:"paypal",tab:"Paypal","display-directive":"show:lazy"},{default:_((()=>[m(Oa,{ref_key:"paypalRef",ref:u},null,512)])),_:1}),m(t,{name:"other",tab:"Other Payment","display-directive":"show:lazy"},{default:_((()=>[m(Na,{ref_key:"otherRef",ref:r},null,512)])),_:1}),m(t,{name:"usdt",tab:"USDT","display-directive":"show:lazy"},{default:_((()=>[m(Da)])),_:1})])),_:1},8,["value"])}}}),[["__scopeId","data-v-bfec83d0"]]),Ya={class:"h-full"},Ea={class:"mb-16px text-15px"},Ha=n({__name:"LinuxProfessional",setup(e){const n=Le(),{cycleIndex:s,cycleList:v,numberIndex:y,numberList:h,isUseCoupon:f,couponId:x,couponList:b,receiveCoupon:g}=l(n),{showCouponModal:C,resetOrder:w,getCycleList:P,getCouponList:L,setCouponList:A,getReceiveCoupon:F}=Ge(),{initCurrentMenu:U}=Xe(),z=S("channelRef"),j=a(!0),O=t((()=>h.value.map(((e,a)=>({label:"".concat(e.num),value:a,discount:Math.round(100-100*e.discount_rate)}))))),T=()=>{var e;y.value=0,w(),A(),null==(e=z.value)||e.init()},R=()=>{var e;w(),A(),null==(e=z.value)||e.init()},V=()=>{var e;w(),null==(e=z.value)||e.init()},N=async()=>{var e;await L(),w(),null==(e=z.value)||e.init()},B=async()=>{try{j.value=!0,n.resetProduct(),await U(),await P(),await L(),(async()=>{await F(),C.value&&fe({width:400,bgColor:"transparent",data:{obtainId:g.value.obtain_id,endTime:g.value.end_time,couponList:g.value.coupons,couponQuota:g.value.package_quota,onReceive:async()=>{B()}},component:$((()=>ne((()=>import("./index144.js?v=1749179669910")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))))})})()}finally{j.value=!1}};return M((()=>{B()})),(e,a)=>{const t=Q;return o(),i("div",Ya,[m(Qe,{loading:c(j)},{default:_((()=>[u("div",Ea,[u("span",null,p(e.$t("Component.Pay.index_8")),1),m(t,{href:"mailto:support@aapanel.com",target:"_blank"},{default:_((()=>a[4]||(a[4]=[k("support@aapanel.com")]))),_:1})]),m(ea,{title:"Choose your plan"},{default:_((()=>[m(ua,{value:c(s),"onUpdate:value":[a[0]||(a[0]=e=>I(s)?s.value=e:null),T],options:c(v)},null,8,["value","options"])])),_:1}),m(ea,{title:"Number of license"},{default:_((()=>[m(va,{value:c(y),"onUpdate:value":[a[1]||(a[1]=e=>I(y)?y.value=e:null),R],options:c(O)},null,8,["value","options"])])),_:1}),c(j)?r("",!0):(o(),i(d,{key:0},[m(ha,{value:c(x),"onUpdate:value":a[2]||(a[2]=e=>I(x)?x.value=e:null),checked:c(f),"onUpdate:checked":a[3]||(a[3]=e=>I(f)?f.value=e:null),data:c(b),onChange:V,onFinish:N},null,8,["value","checked","data"]),m(qa,{ref_key:"channelRef",ref:z},null,512)],64))])),_:1},8,["loading"])])}}}),Ga={class:"max-h-200px overflow-auto"},Xa={key:0,class:"voucher-list"},Ja=["onClick"],Qa={class:"voucher-name"},Ka={class:"voucher-date"},Wa={key:1,class:"flex-center h-72px"},Za=O(n({__name:"VoucherList",props:b({type:String,options:{type:Array,default:()=>[]}},{value:{},valueModifiers:{}}),emits:["update:value"],setup(e){const a=g(e,"value"),t=a=>{const{cycle:t,charge_type:l,rest_days:n}=a;return 2===l?"Lifetime":"authorization"===e.type?"".concat(n," day").concat(n>1?"s":""):"".concat(t," ").concat(a.cycle_unit).concat(t>1?"s":"")};return(l,n)=>{const s=re;return o(),i("div",Ga,[e.options.length>0?(o(),i("div",Xa,[(o(!0),i(d,null,v(e.options,((n,s)=>{return o(),i("div",{key:s,class:w(["voucher-item",{selected:a.value===n.id}]),onClick:e=>{return t=n.id,void(a.value=t);var t}},[u("div",Qa,p(t(n)),1),u("div",Ka,p(l.$t("Component.Auth.index_4"))+p((c=n.end_time,"authorization"===e.type||0===c?"Lifetime":se(c,"yyyy-MM-dd"))),1)],10,Ja);var c})),128))])):(o(),i("div",Wa,[m(s)]))])}}}),[["__scopeId","data-v-9e3dd324"]]),et={class:"voucher-container"},at=O(n({__name:"index",setup(e){const{t:t}=C(),n=Le(),{voucherMenu:s,voucherAllList:r,authorizationAllList:d}=l(n),{getVoucherList:v,getAuthorizationList:y}=Xe(),h=a(!1),f=[{label:t("Component.Pay.index_21"),value:"voucher"},{label:t("Component.Pay.index_22"),value:"authorization"}],x=a(0),b=a([]),g=a(0),w=a([]),P=async e=>{try{S(),h.value=!0,await e(),$(),F()}finally{h.value=!1}},L=async(e,a)=>{const t=e();t&&(await a(t),await le({force:1}),ae())},S=()=>{b.value=[],w.value=[],x.value=0,g.value=0},$=()=>{const e="voucher"===s.value?r.value:d.value,a=new Map;e.forEach((e=>{e.product&&a.set(e.product.id,e.product.name)}));const t=Array.from(a.entries()),l=t.findIndex((([e])=>100000058===e));if(-1!==l){const e=t[l];t.splice(l,1),t.unshift(e)}b.value=t.map((([e,a])=>({label:a,value:e}))),t.length>0?x.value=t[0][0]:x.value=0},F=()=>{const e="voucher"===s.value?r.value:d.value;w.value=e.filter((e=>{var a;return(null==(a=e.product)?void 0:a.id)===x.value})).map((e=>{var a;return{id:e.id,cycle:e.cycle,cycle_unit:e.cycle_unit,charge_type:e.charge_type,end_time:e.end_time,rest_days:"voucher"===s.value?0:null!=(a=e.rest_days)?a:0}})),w.value.length>0?g.value=w.value[0].id:g.value=0},U=e=>{switch(e){case"voucher":r.value=[],(async()=>{await P(v)})();break;case"authorization":d.value=[],(async()=>{await P(y)})()}},z=()=>{F()},j=()=>{switch(s.value){case"voucher":(async()=>{await L((()=>r.value.find((e=>e.id===g.value))),(e=>oe({pid:"".concat(e.product_id),code:e.code,coupon_id:e.id,cycle:e.cycle,cycle_unit:e.cycle_unit,charge_type:e.charge_type})))})();break;case"authorization":(async()=>{await L((()=>d.value.find((e=>e.id===g.value))),(e=>ie({serial_no:e.serial_no})))})()}};return M((()=>{s.value||(s.value="voucher"),U(s.value)})),A((()=>{n.resetVoucher()})),(e,a)=>{const t=_e;return o(),i("div",et,[m(Qe,{loading:c(h)},{default:_((()=>[m(ea,{title:"Voucher Type"},{default:_((()=>[m(va,{value:c(s),"onUpdate:value":a[0]||(a[0]=e=>I(s)?s.value=e:null),options:f,onChange:U},null,8,["value"])])),_:1}),m(ea,{title:"Product Type"},{default:_((()=>[m(va,{value:c(x),"onUpdate:value":a[1]||(a[1]=e=>I(x)?x.value=e:null),options:c(b),onChange:z},null,8,["value","options"])])),_:1}),m(ea,{title:"".concat("authorization"===c(s)?"License":"Voucher"," List")},{default:_((()=>[m(Za,{value:c(g),"onUpdate:value":a[2]||(a[2]=e=>I(g)?g.value=e:null),type:c(s),options:c(w)},null,8,["value","type","options"])])),_:1},8,["title"]),u("div",null,[m(t,{type:"primary",size:"large",color:"#ff8f00",disabled:0===c(w).length,onClick:j},{default:_((()=>[k(p(e.$t("Component.Pay.index_39")),1)])),_:1},8,["disabled"])])])),_:1},8,["loading"])])}}}),[["__scopeId","data-v-aacf5761"]]),tt={class:"pay-container"},lt={class:"pay-sidebar"},nt={class:"pay-body"},st={class:"product-tabs"},ot=["onClick"],it={class:"tab-content"},ut={class:"tab-title"},ct={key:0,class:"glyphicon glyphicon-vip"},rt={class:"text"},pt={class:"tab-desc"},dt={class:"pay-main"},vt={class:"absolute flex items-center justify-end right-20px bottom-20px"},yt=O(n({__name:"index",props:{username:{type:String,required:!0},source:{type:Number,required:!0},plugin:{type:Object}},setup(e){const{t:n}=C(),s=Le(),{currentMenu:h,plugins:f,pid:x,isFirstCutMenu:b}=l(s),{setUsername:g,setSource:P,setCurrentMenu:L,setPid:S,setPlugins:I}=(()=>{const e=Le(),{username:a,source:t,pid:n,currentMenu:s,plugins:o}=l(e);return{setUsername:e=>{a.value=e},setSource:e=>{t.value=e},setPid:e=>{n.value=e},setCurrentMenu:e=>{s.value=e},setPlugins:e=>{e&&(o.value=[e])}}})(),$=a([{key:"pro",pid:"100000058",title:n("Component.Pay.index_1"),description:n("Component.Pay.index_2")},{key:"voucher",pid:"0",title:"Voucher",description:"Voucher License"}]),U=t((()=>{switch(h.value){case"pro":case"plugin":return Ha;case"voucher":return at;default:return null}})),z=async()=>{await le({force:1}),ae()};return M((()=>{g(e.username),P(e.source),I(e.plugin),(()=>{if(f.value.length>0){const e=f.value[0],a={key:"plugin",title:e.name,description:100!==e.type?n("Component.Pay.index_17"):n("Mail.Overview.today_16",[e.name]),pid:"".concat(e.pid)};$.value.splice(1,0,a),S("".concat(e.pid)),L("plugin")}else S("100000058"),L("pro")})()})),A((()=>{s.reset()})),(e,a)=>{const t=_e;return o(),i("div",tt,[u("div",lt,[m(He)]),u("div",nt,[u("div",st,[(o(!0),i(d,null,v(c($),(e=>(o(),i("div",{key:e.key,class:w(["tab-item",["pro"===e.key?e.key:"",c(h)===e.key?"active":""]]),onClick:a=>(e=>{b.value=!1,S(e.pid),L(e.key)})(e)},[u("div",it,[u("div",ut,["pro"===e.key?(o(),i("span",ct)):r("",!0),u("div",rt,p(e.title),1)]),u("div",pt,p(e.description),1)])],10,ot)))),128))]),u("div",dt,[(o(),y(F(c(U)),{key:c(x)})),u("div",vt,[a[1]||(a[1]=u("span",{class:"mr-12px text-desc"},"License didn't changed?",-1)),m(t,{type:"primary",size:"small",ghost:"",onClick:z},{default:_((()=>a[0]||(a[0]=[k("Refresh License State")]))),_:1})])])])])}}}),[["__scopeId","data-v-25d73119"]]);export{yt as default};
