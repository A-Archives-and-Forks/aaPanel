const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/rewrite.js?v=1756367574781","js/public.js?v=1756367574781","js/page_layout.js?v=1756367574781","js/vue.js?v=1756367574781","js/__commonjsHelpers__.js?v=1756367574781","js/naive.js?v=1756367574781","js/common.js?v=1756367574781","css/page_layout.css?v=1756367574781","css/public.css?v=1756367574781","js/index84.js?v=1756367574781","js/index133.js?v=1756367574781","css/index23.css?v=1756367574781","js/index.vue_vue_type_script_setup_true_lang5.js?v=1756367574781","js/index.vue_vue_type_script_setup_true_lang6.js?v=1756367574781","css/index15.css?v=1756367574781","js/index.vue_vue_type_script_setup_true_lang7.js?v=1756367574781","js/index.vue_vue_type_script_setup_true_lang12.js?v=1756367574781","js/index.vue_vue_type_script_setup_true_lang8.js?v=1756367574781","js/index131.js?v=1756367574781","js/php.js?v=1756367574781","js/soft.js?v=1756367574781","css/index22.css?v=1756367574781","js/site.js?v=1756367574781","js/soft2.js?v=1756367574781","js/useOperate.js?v=1756367574781","js/useModal2.js?v=1756367574781","js/index.vue_vue_type_script_setup_true_lang15.js?v=1756367574781","js/index.js?v=1756367574781","css/index107.css?v=1756367574781","js/index.vue_vue_type_script_setup_true_lang.js?v=1756367574781","css/index58.css?v=1756367574781","js/file.js?v=1756367574781","js/index100.js?v=1756367574781","js/index101.js?v=1756367574781","js/theme-monokai.js?v=1756367574781","css/index16.css?v=1756367574781","js/ssl-log.js?v=1756367574781","js/index105.js?v=1756367574781","css/index19.css?v=1756367574781","js/index212.js?v=1756367574781","css/index90.css?v=1756367574781","js/index213.js?v=1756367574781","js/index244.js?v=1756367574781","css/index59.css?v=1756367574781","css/index91.css?v=1756367574781","js/domain-verification.js?v=1756367574781","js/index265.js?v=1756367574781","js/index99.js?v=1756367574781","css/index14.css?v=1756367574781","js/index.vue_vue_type_script_setup_true_lang10.js?v=1756367574781","js/index98.js?v=1756367574781","css/index13.css?v=1756367574781","js/index108.js?v=1756367574781","css/index21.css?v=1756367574781","js/refersh.js?v=1756367574781","js/form.vue_vue_type_script_setup_true_lang2.js?v=1756367574781","js/logs.vue_vue_type_script_setup_true_lang.js?v=1756367574781","js/ssl.js?v=1756367574781","js/cert.js?v=1756367574781","js/utils3.js?v=1756367574781","js/index217.js?v=1756367574781","js/paypal-js.js?v=1756367574781","css/index48.css?v=1756367574781","js/ssl-lets-progress.js?v=1756367574781","css/ssl-lets-progress.css?v=1756367574781","js/upload.js?v=1756367574781"])))=>i.map(i=>d[i]);
import{i as e,o as a,w as t,m as l,a as i,d as n,q as s,bd as o,h as d,aT as r,p as u,u as c,dr as p,R as _,cr as m,_ as v,a4 as h}from"./page_layout.js?v=1756367574781";import{_ as x}from"./index244.js?v=1756367574781";import{i as f,p as w,W as y,k as b,P as g,r as S,R as k,V as C,S as $,a3 as L,a4 as P,ak as R,U,j as E,e as T,_ as B,an as j,F as D,N,a2 as I,o as O,az as A,O as M,c as H,n as z,y as q,H as V,a0 as F,am as K,w as W,l as X,v as J,m as G,x as Y}from"./vue.js?v=1756367574781";import{u as Z}from"./index84.js?v=1756367574781";import{_ as Q}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1756367574781";import{_ as ee}from"./index.vue_vue_type_script_setup_true_lang12.js?v=1756367574781";import{a as ae,$ as te,c as le,d as ie,h as ne,e as se,f as oe,_ as de,b as re,s as ue,u as ce,ac as pe,ad as _e,a6 as me,a0 as ve,a1 as he,a2 as xe,n as fe,ae as we,af as ye,ag as be,ah as ge,ai as Se,j as ke,q as Ce,a5 as $e}from"./public.js?v=1756367574781";import{_ as Le}from"./index99.js?v=1756367574781";import{a0 as Pe,a1 as Re,a2 as Ue,aU as Ee,aV as Te,aW as Be,aX as je,aY as De,a3 as Ne,a4 as Ie,a5 as Oe,a6 as Ae,a7 as Me,a8 as He,a9 as ze,aa as qe,ay as Ve,az as Fe,aA as Ke,aB as We,aC as Xe,aD as Je,aE as Ge,aF as Ye,ao as Ze,ap as Qe,aq as ea,aZ as aa,a_ as ta,ar as la,as as ia,at as na,au as sa,av as oa,aw as da,ax as ra,$ as ua,a$ as ca,b0 as pa,b1 as _a,b2 as ma,b3 as va,b4 as ha,b5 as xa,ab as fa,ac as wa,ad as ya,ae as ba,af as ga,ag as Sa,ah as ka,ai as Ca,aj as $a,ak as La,al as Pa,am as Ra,an as Ua,aH as Ea,aI as Ta,aJ as Ba,g as ja,aK as Da}from"./site.js?v=1756367574781";import{aC as Na,da as Ia,au as Oa,dV as Aa,d5 as Ma,dR as Ha,dj as za,_ as qa,df as Va,eg as Fa,av as Ka,dY as Wa,bH as Xa,dk as Ja,e2 as Ga,dc as Ya,dT as Za,dU as Qa,G as et,dZ as at,aX as tt}from"./naive.js?v=1756367574781";import{_ as lt}from"./index.js?v=1756367574781";import{_ as it}from"./index.vue_vue_type_script_setup_true_lang.js?v=1756367574781";import{_ as nt}from"./index.vue_vue_type_script_setup_true_lang10.js?v=1756367574781";import{_ as st}from"./index108.js?v=1756367574781";import ot from"./index100.js?v=1756367574781";import{d as dt,e as rt,f as ut,h as ct}from"./php.js?v=1756367574781";import{_ as pt}from"./index133.js?v=1756367574781";import{_ as _t,a as mt,b as vt}from"./refersh.js?v=1756367574781";import{_ as ht}from"./form.vue_vue_type_script_setup_true_lang2.js?v=1756367574781";import{_ as xt}from"./index105.js?v=1756367574781";import{_ as ft}from"./logs.vue_vue_type_script_setup_true_lang.js?v=1756367574781";import{c as wt,s as yt,a as bt,g as gt,b as St}from"./ssl.js?v=1756367574781";import{C as kt}from"./cert.js?v=1756367574781";import{u as Ct}from"./utils3.js?v=1756367574781";import{A as $t}from"./index217.js?v=1756367574781";import{a as Lt}from"./ssl-lets-progress.js?v=1756367574781";import{o as Pt}from"./upload.js?v=1756367574781";const Rt=Symbol("site-config");function Ut(){return f(Rt)}const{t:Et}=e.global;function Tt({delDomain:e}){return{key:"action",title:Et("Public.Table.Action"),width:80,align:"right",render:a=>y(te,{options:[{label:Et("Public.Btn.Del"),class:"delete-btn",onClick:()=>{ae({title:"".concat(Et("Site.Batch.index_12"),"[").concat(a.name,"]"),content:Et("Site.Batch.index_13"),onConfirm:async({hide:t})=>{await e(a),t()}})}}]},null)}}const Bt={class:"flex justify-between items-center mb-24px"},jt={class:"w-400px"},Dt={class:"pr-40px"},Nt=b({__name:"index",setup(e,{expose:i}){const{t:n}=g(),{data:s}=Ut(),o=S(""),d=async()=>{""!==o.value.trim()?(await Ue({id:s.id,webname:s.name,domain:o.value.trim().split("\n").join(",")}),o.value="",x()):l.error(n("Site.RulesError.index_31"))},r=async e=>{await Pe({id:s.id,webname:s.name,domain:e.name,port:e.port}),x()},{keys:u,table:c,columns:p}=le([{type:"selection",width:40},{key:"name",title:Et("Site.TableRow.index_19"),render:e=>y(a,{href:"http://".concat(e.name,":").concat(e.port),target:"_blank"},{default:()=>[e.name]})},{key:"port",title:Et("Site.TableRow.index_16"),width:100},Tt({delDomain:r})]),_=()=>{c.data.length>1?p.value[p.value.length-1]=Tt({delDomain:r}):p.value[p.value.length-1]={key:"action",title:Et("Public.Table.Action"),width:80,align:"right",render:()=>y("span",{class:"text-default"},[Et("Config.Panel.index_82")])}},m=[{key:"del",type:"confirm",label:n("Site.Batch.index_20"),confirm:{title:n("Site.Batch.index_21"),desc:n("Site.Batch.index_11"),api:e=>Pe({id:s.id,webname:s.name,domain:e.name,port:e.port},!1),done:()=>{x()},columns:[{key:"name",title:n("Site.Cert.index_29"),ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:v,setLoading:h}=ie(),x=async()=>{try{h(!0);const e={id:s.id},{message:a}=await Re(e);c.data=t(a)?a:[],_()}finally{u.value=[],h(!1)}};return x(),i({init:x}),(e,a)=>{const t=Le,l=Na,i=ne,n=ee,s=Q;return C(),k("div",null,[$("div",Bt,[$("div",jt,[y(t,{value:U(o),"onUpdate:value":a[0]||(a[0]=e=>R(o)?o.value=e:null),name:"domain"},{default:L(()=>[$("p",null,P(e.$t("Site.Config.index_30")),1),$("p",null,P(e.$t("Site.Config.index_31")),1),$("p",null,P(e.$t("Site.Config.index_32")),1)]),_:1},8,["value"])]),$("div",Dt,[y(l,{class:"add-domain-btn",type:"primary",onClick:d},{default:L(()=>[E(P(e.$t("Site.Cert.index_62")),1)]),_:1})])]),y(s,null,{table:L(()=>[y(i,{"checked-row-keys":U(u),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>R(u)?u.value=e:null),loading:U(v),"max-height":400,data:U(c).data,columns:U(p)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:L(()=>[y(n,{"checked-row-keys":U(u),"onUpdate:checkedRowKeys":a[2]||(a[2]=e=>R(u)?u.value=e:null),data:U(c).data,options:m},null,8,["checked-row-keys","data"])]),_:1})])}}}),It={class:"w-140px"},Ot={class:"w-120px"},At=b({__name:"index",setup(e,{expose:a}){const s=B(()=>i(()=>import("./rewrite.js?v=1756367574781"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35]))),{t:o}=g(),{data:d}=Ut(),r=T({domain:"",dirName:null}),u=S([]),c=async()=>{const e=r.dirName;""!==r.domain.trim()?null!==e?(await Te({id:d.id,domain:r.domain,dirName:e}),b()):l.error(o("Site.RulesError.index_32")):l.error(o("Site.RulesError.index_31"))},p=se(o("Site.PHP.index_81"),{data:"",filename:"",rlist:[]}),_=e=>{p.data.filename=e.filename,p.data.fileContent=e.data,p.data.rlist=e.rlist,p.show=!0},{keys:m,table:v,columns:h}=le([{type:"selection",width:40},{key:"domain",title:o("Site.TableRow.index_19"),ellipsis:{tooltip:{width:"trigger"}}},{key:"port",title:o("Site.TableRow.index_16"),width:80},{key:"path",title:o("Site.Config.index_33"),width:120,ellipsis:{tooltip:{width:"trigger"}}},oe({width:130,options:e=>[{label:o("Site.TableOP.index_10"),onClick:()=>{(async e=>{try{const{message:a}=await Be({id:e.id});n(a)&&_(a)}catch(a){const t=Ma(a,"meesage.result","");t?l.error(t):ae({title:o("Site.Cert.index_40"),content:o("Site.PHP.index_80"),onConfirm:async({hide:a})=>{const{message:t}=await je({id:e.id});n(t)&&_(t),a()}})}})(e)}},{label:o("Public.Btn.Del"),onClick:()=>{ae({title:"".concat(o("Ftp.Table.index_10")," ").concat(e.path),content:o("Site.Config.index_34"),onConfirm:async({hide:a})=>{await Ee({id:e.id}),b(),a()}})}}]})]),x=[{key:"del",type:"confirm",label:o("Site.Batch.index_20"),confirm:{title:o("Site.Batch.index_21"),desc:o("Site.Batch.index_11"),api:e=>Ee({id:e.id},!1),done:()=>{b()},columns:[{key:"domain",title:o("Site.TableRow.index_19"),ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:f,setLoading:w}=ie(),b=()=>{r.domain="",r.dirName=null,(async()=>{try{w(!0);const{message:e}=await De({id:d.id});if(n(e)){const{dirs:a,binding:l}=e;t(a)&&a.length>0?(u.value=a.map(e=>({label:e,value:e})),r.dirName=a[0]):(u.value=[],r.dirName=null),v.data=t(l)?l:[]}}finally{m.value=[],w(!1)}})()};return b(),a({init:b}),(e,a)=>{const t=Oa,l=Ia,i=Aa,n=Na,o=ne,d=ee,_=Q,w=lt;return C(),k("div",null,[y(l,{class:"items-center",size:16},{default:L(()=>[y(l,{class:"items-center"},{default:L(()=>[$("div",null,P(e.$t("Site.TableRow.index_19")),1),$("div",It,[y(t,{value:U(r).domain,"onUpdate:value":a[0]||(a[0]=e=>U(r).domain=e),placeholder:"","input-props":{name:"domain"}},null,8,["value"])])]),_:1}),y(l,{class:"items-center"},{default:L(()=>[$("div",null,P(e.$t("Site.Config.index_33")),1),$("div",Ot,[y(i,{value:U(r).dirName,"onUpdate:value":a[1]||(a[1]=e=>U(r).dirName=e),options:U(u)},null,8,["value","options"])])]),_:1}),y(n,{class:"add-domain-btn",type:"primary",onClick:c},{default:L(()=>[E(P(e.$t("Site.Cert.index_62")),1)]),_:1})]),_:1}),y(_,{class:"mt-16px"},{table:L(()=>[y(o,{"checked-row-keys":U(m),"onUpdate:checkedRowKeys":a[2]||(a[2]=e=>R(m)?m.value=e:null),loading:U(f),"max-height":440,data:U(v).data,columns:U(h)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:L(()=>[y(d,{"checked-row-keys":U(m),"onUpdate:checkedRowKeys":a[3]||(a[3]=e=>R(m)?m.value=e:null),data:U(v).data,options:x},null,8,["checked-row-keys","data"])]),_:1}),y(w,{show:U(p).show,"onUpdate:show":a[4]||(a[4]=e=>U(p).show=e),title:U(p).title,data:U(p).data,width:600,"min-height":488,component:U(s)},null,8,["show","title","data","component"])])}}}),Mt={class:"pt-16px"},Ht={class:"flex-1"},zt={class:"w-240px"},qt={class:"mt-8px text-desc"},Vt={class:"flex-1"},Ft={class:"w-240px"},Kt={class:"mt-12px text-desc"},Wt={class:"my-16px"},Xt={class:"text-desc"},Jt={class:"my-20px"},Gt={class:"w-240px"},Yt={class:"w-240px"},Zt={class:"w-240px"},Qt=b({__name:"index",setup(e,{expose:a}){const{t:t}=g(),{data:i}=Ut(),o=S(""),d=async()=>{if(""!==o.value.trim())try{await Ne({id:i.id,name:i.name,path:o.value}),b()}catch(e){console.warn(e)}else l.error(t("Site.RulesError.index_13"))},r=S(null),u=S([]),c=async()=>{null!==r.value?(await Ie({id:i.id,runPath:r.value}),b()):l.error(t("Site.RulesError.index_15"))},p=S(!1),_=async()=>{await Oe({id:i.id,path:i.path}),b()},m=S(!1),v=async()=>{await Ae({id:i.id}),b()},h=S(!1),x=T({username_get:"",password_get_1:"",password_get_2:""}),f=async e=>{e||(await Me({id:i.id}),b())},w=async()=>{""!==x.username_get.trim()?""!==x.password_get_1.trim()?""!==x.password_get_2.trim()?x.username_get.trim().length<3||x.password_get_1.trim().length<3?l.error(t("Site.RulesError.index_35")):x.password_get_1.trim()===x.password_get_2.trim()?(await He({id:i.id,username:x.username_get,password:x.password_get_1}),x.username_get="",x.password_get_1="",x.password_get_2="",b()):l.error(t("Site.RulesError.index_38")):l.error(t("Site.RulesError.index_37")):l.error(t("Site.RulesError.index_36")):l.error(t("Site.RulesError.index_34"))},b=()=>{(async()=>{const{message:e}=await ze({id:i.id});n(e)&&(o.value=e.result||"/www")})(),(async()=>{const{message:e}=await qe({id:i.id,path:i.path});if(n(e)){r.value=Ma(e,"runPath.runPath",null),p.value=Ma(e,"userini",!1),m.value=Ma(e,"logs.result",!1),h.value=Ma(e,"pass.result",!1);const a=Ma(e,"runPath.dirs",[]);u.value=a.map(e=>({label:e,value:e}))}})()};return b(),a({init:b}),(e,a)=>{const t=nt,l=Na,i=Ia,n=Ha,b=Aa,g=s,S=za,T=Oa,B=it;return C(),k("div",Mt,[y(B,{"label-width":"140"},{default:L(()=>[y(n,{label:e.$t("Site.Lable.index_2"),"show-feedback":!1},{default:L(()=>[$("div",Ht,[y(i,null,{default:L(()=>[$("div",zt,[y(t,{value:U(o),"onUpdate:value":a[0]||(a[0]=e=>R(o)?o.value=e:null),"input-props":{name:"directory"}},null,8,["value"])]),y(l,{class:"save-dir-btn",type:"primary",onClick:d},{default:L(()=>[E(P(e.$t("Site.Cert.index_60")),1)]),_:1})]),_:1}),$("div",qt,P(e.$t("Site.Config.index_35")),1)])]),_:1},8,["label"]),y(n,{class:"mt-16px",label:e.$t("Site.Lable.index_3"),"show-feedback":!1},{default:L(()=>[$("div",Vt,[y(i,null,{default:L(()=>[$("div",Ft,[y(b,{value:U(r),"onUpdate:value":a[1]||(a[1]=e=>R(r)?r.value=e:null),class:"run-select",options:U(u)},null,8,["value","options"])]),y(l,{class:"save-run-btn",type:"primary",onClick:c},{default:L(()=>[E(P(e.$t("Site.Cert.index_60")),1)]),_:1})]),_:1}),$("div",Kt,P(e.$t("Site.Config.index_36")),1)])]),_:1},8,["label"]),$("div",Wt,[y(g,{dashed:""})]),y(n,{label:e.$t("Site.Lable.index_4"),"show-feedback":!1},{default:L(()=>[y(i,{class:"items-center"},{default:L(()=>[y(S,{value:U(p),"onUpdate:value":[a[2]||(a[2]=e=>R(p)?p.value=e:null),_]},null,8,["value"]),$("div",Xt,P(e.$t("Site.Config.index_37")),1)]),_:1})]),_:1},8,["label"]),y(n,{class:"mt-16px",label:e.$t("Site.Lable.index_5"),"show-feedback":!1},{default:L(()=>[y(i,{class:"items-center"},{default:L(()=>[y(S,{value:U(m),"onUpdate:value":[a[3]||(a[3]=e=>R(m)?m.value=e:null),v]},null,8,["value"]),a[8]||(a[8]=$("div",{class:"text-desc"},null,-1))]),_:1,__:[8]})]),_:1},8,["label"]),$("div",Jt,[y(g,{dashed:""})]),y(n,{label:e.$t("Site.Lable.index_14"),"show-feedback":!1},{default:L(()=>[y(i,{class:"items-center"},{default:L(()=>[y(S,{value:U(h),"onUpdate:value":[a[4]||(a[4]=e=>R(h)?h.value=e:null),f]},null,8,["value"]),a[9]||(a[9]=$("div",{class:"text-desc"},null,-1))]),_:1,__:[9]})]),_:1},8,["label"]),U(h)?(C(),k(D,{key:0},[y(n,{class:"mt-16px",label:e.$t("Site.Lable.index_17"),"show-feedback":!1},{default:L(()=>[$("div",Gt,[y(T,{value:U(x).username_get,"onUpdate:value":a[5]||(a[5]=e=>U(x).username_get=e),placeholder:e.$t("Site.Placeholder.Index_7")},null,8,["value","placeholder"])])]),_:1},8,["label"]),y(n,{class:"mt-16px",label:e.$t("Site.Lable.index_14"),"show-feedback":!1},{default:L(()=>[$("div",Yt,[y(T,{value:U(x).password_get_1,"onUpdate:value":a[6]||(a[6]=e=>U(x).password_get_1=e),type:"password",placeholder:e.$t("Site.Placeholder.Index_7")},null,8,["value","placeholder"])])]),_:1},8,["label"]),y(n,{class:"mt-16px",label:e.$t("Site.Lable.index_18"),"show-feedback":!1},{default:L(()=>[$("div",Zt,[y(T,{value:U(x).password_get_2,"onUpdate:value":a[7]||(a[7]=e=>U(x).password_get_2=e),type:"password",placeholder:e.$t("Site.Placeholder.Index_7")},null,8,["value","placeholder"])])]),_:1},8,["label"]),y(n,{class:"mt-16px",label:" ","show-feedback":!1},{default:L(()=>[y(l,{type:"primary",onClick:w},{default:L(()=>[E(P(e.$t("Site.Cert.index_60")),1)]),_:1})]),_:1})],64)):j("",!0)]),_:1})])}}}),el={class:"p-20px"},al={class:"w-280px"},tl={class:"w-280px"},ll={class:"w-280px"},il={class:"w-280px"},nl=b({__name:"form",props:{data:{}},setup(e,{expose:a}){const t=e,{t:l}=g(),{isEdit:i,siteId:n,row:s,getList:o}=t.data,d=S(null),r=T({name:"",site_dir:"",username:"",password:""}),u={name:{required:!0,message:l("Site.RulesError.index_16"),trigger:["blur","input"]},site_dir:{required:!0,message:l("Site.RulesError.index_17"),trigger:["blur","input"]},username:{required:!0,message:l("Site.Placeholder.Index_6"),trigger:["blur","input"]},password:{required:!0,message:l("Site.Placeholder.Index_8"),trigger:["blur","input"]}};return i&&s&&(r.name=s.name,r.site_dir=s.site_dir),a({onConfirm:async({hide:e})=>{var a;await(null==(a=d.value)?void 0:a.validate()),i?await Ve({id:n,name:r.name,username:r.username,password:r.password}):await Fe({...N(r),id:n}),null==o||o(),e()}}),(e,a)=>{const t=Oa,l=Ha,n=it,s=de;return C(),k("div",el,[y(n,{ref_key:"formRef",ref:d,model:U(r),rules:u},{default:L(()=>[y(l,{label:e.$t("Site.TableRow.index_2"),path:"name"},{default:L(()=>[$("div",al,[y(t,{value:U(r).name,"onUpdate:value":a[0]||(a[0]=e=>U(r).name=e),disabled:U(i),placeholder:"","input-props":{name:"name"}},null,8,["value","disabled"])])]),_:1},8,["label"]),y(l,{label:e.$t("Site.TableRow.index_15"),path:"site_dir"},{default:L(()=>[$("div",tl,[y(t,{value:U(r).site_dir,"onUpdate:value":a[1]||(a[1]=e=>U(r).site_dir=e),disabled:U(i),placeholder:e.$t("Site.Config.Limit.index_5"),"input-props":{name:"site_dir"}},null,8,["value","disabled","placeholder"])])]),_:1},8,["label"]),y(l,{label:e.$t("Site.Lable.index_24"),path:"username"},{default:L(()=>[$("div",ll,[y(t,{value:U(r).username,"onUpdate:value":a[2]||(a[2]=e=>U(r).username=e),placeholder:"","input-props":{name:"username"}},null,8,["value"])])]),_:1},8,["label"]),y(l,{label:e.$t("Site.Lable.index_27"),path:"password"},{default:L(()=>[$("div",il,[y(t,{value:U(r).password,"onUpdate:value":a[3]||(a[3]=e=>U(r).password=e),placeholder:"","input-props":{name:"password"}},null,8,["value"])])]),_:1},8,["label"])]),_:1},8,["model"]),y(s,{class:"mt-4px"},{default:L(()=>[$("li",null,P(e.$t("Site.Config.index_40")),1),$("li",null,P(e.$t("Site.Config.index_41")),1)]),_:1})])}}}),sl=b({__name:"index",setup(e,{expose:a}){const{t:t}=g(),{data:l}=Ut(),{keys:i,table:s,columns:o}=le([{type:"selection",width:40},{key:"name",title:t("Site.TableRow.index_2"),ellipsis:{tooltip:{width:"trigger"}}},{key:"site_dir",title:t("Site.TableRow.index_15"),ellipsis:{tooltip:{width:"trigger"}}},oe({width:130,options:e=>[{label:t("Site.TableOP.index_7"),class:"edit-btn",onClick:()=>{m(e)}},{label:t("Public.Btn.Del"),class:"delete-btn",onClick:()=>{ae({title:"".concat(t("Site.Config.Limit.index_1",[e.name])),content:t("Site.Config.Limit.index_2"),onConfirm:async({hide:a})=>{await Ke({id:l.id,name:e.name}),c(),a()}})}}]})]),d=[{key:"del",type:"confirm",label:t("Site.Batch.index_20"),confirm:{title:t("Site.Batch.index_21"),desc:t("Site.Batch.index_11"),columns:[o.value[1]],api:e=>Ke({id:l.id,name:e.name},!1),done:()=>{c()}}}],{loading:r,setLoading:u}=ie(),c=async()=>{try{u(!0);const{message:e}=await We({id:l.id});if(n(e)){s.data=[];for(const[a,t]of Object.entries(e))if(l.name===a){s.data=t;break}}}finally{i.value=[],u(!1)}},p=se(t("Site.Config.index_38"),{row:void 0,siteId:l.id,isEdit:!1,getList:c}),_=()=>{p.data.isEdit=!1,p.title=t("Site.Config.index_38"),p.show=!0},m=e=>{p.data.row=e,p.data.isEdit=!0,p.title=t("Site.Config.index_39"),p.show=!0};return c(),a({init:c}),(e,a)=>{const t=Na,l=ne,n=ee,u=Q,c=de,m=lt;return C(),k("div",null,[y(u,null,{toolsLeft:L(()=>[y(t,{class:"add-limit-btn",type:"primary",onClick:_},{default:L(()=>[E(P(e.$t("Site.Config.index_38")),1)]),_:1})]),table:L(()=>[y(l,{"checked-row-keys":U(i),"onUpdate:checkedRowKeys":a[0]||(a[0]=e=>R(i)?i.value=e:null),"row-key":"name",loading:U(r),"max-height":440,data:U(s).data,columns:U(o)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:L(()=>[y(n,{"checked-row-keys":U(i),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>R(i)?i.value=e:null),"row-key":"name",data:U(s).data,options:d},null,8,["checked-row-keys","data"])]),_:1}),y(c,{class:"mt-16px"},{default:L(()=>[$("li",null,P(e.$t("Site.Config.index_40")),1),$("li",null,P(e.$t("Site.Config.index_41")),1)]),_:1}),y(m,{show:U(p).show,"onUpdate:show":a[2]||(a[2]=e=>U(p).show=e),title:U(p).title,data:U(p).data,width:480,footer:!0,component:nl},null,8,["show","title","data"])])}}}),ol={class:"p-20px"},dl={class:"w-280px"},rl={class:"w-280px"},ul={class:"w-280px"},cl=b({__name:"form",props:{data:{}},setup(e,{expose:a}){const t=e,{isEdit:l,siteName:i,row:n,getList:s}=t.data,{t:o}=g(),d=S(null),r=T({deny_name:"",suffix:"php|jsp",dir:""}),u={deny_name:{required:!0,message:o("Site.Placeholder.Index_4"),trigger:["blur","input"]},suffix:{required:!0,message:o("Site.Placeholder.Index_5"),trigger:["blur","input"]},dir:{required:!0,message:o("Site.Placeholder.Index_6"),trigger:["blur","input"]}},c=()=>({...N(r),dir:r.dir.replace(/\/$/,"")+"/",website:i});return l&&n&&(r.deny_name=n.name,r.suffix=n.suffix,r.dir=n.dir),a({onConfirm:async({hide:e})=>{var a;await(null==(a=d.value)?void 0:a.validate()),l?await Xe(c()):await Je(c()),null==s||s(),e()}}),(e,a)=>{const t=Oa,i=Ha,n=it,s=de;return C(),k("div",ol,[y(n,{ref_key:"formRef",ref:d,model:U(r),rules:u},{default:L(()=>[y(i,{label:e.$t("Site.TableRow.index_2"),path:"deny_name"},{default:L(()=>[$("div",dl,[y(t,{value:U(r).deny_name,"onUpdate:value":a[0]||(a[0]=e=>U(r).deny_name=e),disabled:U(l),placeholder:e.$t("Site.Placeholder.Index_1"),"input-props":{name:"name"}},null,8,["value","disabled","placeholder"])])]),_:1},8,["label"]),y(i,{label:e.$t("Site.TableRow.index_18"),path:"suffix"},{default:L(()=>[$("div",rl,[y(t,{value:U(r).suffix,"onUpdate:value":a[1]||(a[1]=e=>U(r).suffix=e),placeholder:e.$t("Site.Placeholder.Index_2"),"input-props":{name:"suffix"}},null,8,["value","placeholder"])])]),_:1},8,["label"]),y(i,{label:e.$t("Site.TableRow.index_15"),path:"dir"},{default:L(()=>[$("div",ul,[y(t,{value:U(r).dir,"onUpdate:value":a[2]||(a[2]=e=>U(r).dir=e),placeholder:e.$t("Site.Placeholder.Index_3"),"input-props":{name:"dir"}},null,8,["value","placeholder"])])]),_:1},8,["label"])]),_:1},8,["model"]),y(s,{class:"mt-4px"},{default:L(()=>[$("li",null,P(e.$t("Site.PHP.index_72")),1),$("li",null,P(e.$t("Site.PHP.index_73")),1),$("li",null,P(e.$t("Site.PHP.index_74")),1),$("li",null,P(e.$t("Site.PHP.index_75")),1),$("li",null,P(e.$t("Site.PHP.index_76")),1)]),_:1})])}}}),pl=b({__name:"index",setup(e,{expose:a}){const{t:l}=g(),{data:i}=Ut(),{keys:n,table:s,columns:o}=le([{type:"selection",width:40},{key:"name",title:l("Site.TableRow.index_2"),ellipsis:{tooltip:{width:"trigger"}}},{key:"dir",title:l("Site.TableRow.index_15"),ellipsis:{tooltip:{width:"trigger"}}},{key:"suffix",title:l("Site.TableRow.index_18"),ellipsis:{tooltip:{width:"trigger"}}},oe({width:130,options:e=>[{label:l("Site.TableOP.index_7"),class:"edit-btn",onClick:()=>{m(e)}},{label:l("Public.Btn.Del"),class:"delete-btn",onClick:()=>{ae({title:"".concat(l("Site.TableOP.index_6")," [").concat(e.name,"]"),content:l("Site.Batch.index_13"),onConfirm:async({hide:a})=>{await Ge({website:i.name,deny_name:e.name}),c(),a()}})}}]})]),d=[{key:"del",type:"confirm",label:l("Site.Batch.index_20"),confirm:{title:l("Site.Batch.index_21"),desc:l("Site.Batch.index_11"),columns:[o.value[1]],api:e=>Ge({website:i.name,deny_name:e.name},!1),done:()=>{c()}}}],{loading:r,setLoading:u}=ie(),c=async()=>{try{u(!0);const{message:e}=await Ye({website:i.name});s.data=t(e)?e:[]}finally{n.value=[],u(!1)}},p=se(l("Site.Config.index_38"),{row:void 0,siteName:i.name,isEdit:!1,getList:c}),_=()=>{p.data.row=void 0,p.data.isEdit=!1,p.title=l("Site.Config.index_38"),p.show=!0},m=e=>{p.data.row=e,p.data.isEdit=!0,p.title=l("Site.Config.index_39"),p.show=!0};return c(),a({init:c}),(e,a)=>{const t=Na,l=ne,i=ee,u=Q,c=de,m=lt;return C(),k("div",null,[y(u,null,{toolsLeft:L(()=>[y(t,{class:"add-deny-btn",type:"primary",onClick:_},{default:L(()=>[E(P(e.$t("Site.Config.index_38")),1)]),_:1})]),table:L(()=>[y(l,{"checked-row-keys":U(n),"onUpdate:checkedRowKeys":a[0]||(a[0]=e=>R(n)?n.value=e:null),"row-key":"name",loading:U(r),"max-height":440,data:U(s).data,columns:U(o)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:L(()=>[y(i,{"checked-row-keys":U(n),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>R(n)?n.value=e:null),"row-key":"name",data:U(s).data,options:d},null,8,["checked-row-keys","data"])]),_:1}),y(c,{class:"mt-16px"},{default:L(()=>[$("li",null,P(e.$t("Site.Config.index_42"))+" |",1),$("li",null,P(e.$t("Site.Config.index_43")),1),$("li",null,P(e.$t("Site.Config.index_44")),1),$("li",null,P(e.$t("Site.Config.index_45")),1)]),_:1}),y(m,{show:U(p).show,"onUpdate:show":a[2]||(a[2]=e=>U(p).show=e),title:U(p).title,data:U(p).data,width:480,footer:!0,component:cl},null,8,["show","title","data"])])}}}),_l=b({__name:"index",setup(e){const{t:a}=g(),t=S("limit"),l=[{key:"limit",label:a("Site.Config.index_5"),component:sl},{key:"deny",label:a("Site.Config.index_14"),component:pl}];return(e,a)=>{const i=st;return C(),I(i,{value:U(t),"onUpdate:value":a[0]||(a[0]=e=>R(t)?t.value=e:null),options:l},null,8,["value"])}}}),ml={class:"pt-8px"},vl={class:"w-200px"},hl={class:"flex flex-col"},xl={class:"w-200px"},fl={class:"mt-8px text-desc"},wl={class:"flex flex-col"},yl={class:"w-200px"},bl={class:"mt-8px text-desc"},gl={class:"flex flex-col"},Sl={class:"w-200px"},kl={class:"mt-8px text-desc"},Cl=b({__name:"index",setup(e,{expose:a}){const{t:t}=g(),{data:l}=Ut(),i=S(null),s=T({status:!1,type:0,perserver:300,perip:25,limit_rate:512}),d={perserver:{trigger:["blur","change"],validator:()=>!!s.perserver||new Error(t("Site.RulesError.index_318"))},perip:{trigger:["blur","change"],validator:()=>!!s.perip||new Error(t("Site.RulesError.index_319"))},limit_rate:{trigger:["blur","change"],validator:()=>!!s.limit_rate||new Error(t("Site.RulesError.index_320"))}},r=S([{label:"BBS/Blog",value:0,items:{perserver:300,perip:25,limit_rate:512}},{label:"Photofolio",value:1,items:{perserver:200,perip:10,limit_rate:1024}},{label:"Download",value:2,items:{perserver:50,perip:3,limit_rate:2048}},{label:"Mall",value:3,items:{perserver:500,perip:10,limit_rate:2048}},{label:"Portal",value:4,items:{perserver:400,perip:15,limit_rate:1024}},{label:"Corporate",value:5,items:{perserver:60,perip:10,limit_rate:512}},{label:"Video",value:6,items:{perserver:150,perip:4,limit_rate:1024}},{label:"Customize",value:7,items:{perserver:0,perip:0,limit_rate:0}}]),u=async e=>{e?_():(await Ze({id:l.id}),m())},c=(e,a)=>{const{items:t}=a;n(t)&&p(t)},p=e=>{s.perserver=e.perserver,s.perip=e.perip,s.limit_rate=e.limit_rate},_=async()=>{var e;await(null==(e=i.value)?void 0:e.validate()),await Qe({id:l.id,perserver:s.perserver,perip:s.perip,limit_rate:s.limit_rate}),m()},m=async()=>{const{message:e}=await ea({id:l.id});n(e)&&(s.status=0!=e.perserver,p(r.value[0].items),o(e.perserver)&&0!=e.perserver&&(s.perserver=e.perserver),o(e.perip)&&0!=e.perip&&(s.perip=e.perip),o(e.limit_rate)&&0!=e.limit_rate&&(s.limit_rate=e.limit_rate))};return m(),a({init:m}),(e,a)=>{const t=qa,l=Ha,n=Aa,o=Va,p=Na,m=it;return C(),k("div",ml,[y(m,{ref_key:"formRef",ref:i,"label-width":"150",class:"px-8px",model:U(s),rules:d},{default:L(()=>[y(l,{label:" "},{default:L(()=>[y(t,{checked:U(s).status,"onUpdate:checked":[a[0]||(a[0]=e=>U(s).status=e),u]},{default:L(()=>[E(P(e.$t("Site.PHP.index_82")),1)]),_:1},8,["checked"])]),_:1}),y(l,{label:e.$t("Site.Lable.index_40"),path:"type"},{default:L(()=>[$("div",vl,[y(n,{value:U(s).type,"onUpdate:value":[a[1]||(a[1]=e=>U(s).type=e),c],options:U(r)},null,8,["value","options"])])]),_:1},8,["label"]),y(l,{label:e.$t("Site.Lable.index_41"),path:"perserver"},{default:L(()=>[$("div",hl,[$("div",xl,[y(o,{value:U(s).perserver,"onUpdate:value":a[2]||(a[2]=e=>U(s).perserver=e),"show-button":!1,min:0},null,8,["value"])]),$("div",fl,P(e.$t("Site.PHP.index_83")),1)])]),_:1},8,["label"]),y(l,{label:e.$t("Site.Lable.index_45"),path:"perip"},{default:L(()=>[$("div",wl,[$("div",yl,[y(o,{value:U(s).perip,"onUpdate:value":a[3]||(a[3]=e=>U(s).perip=e),"show-button":!1,min:0},null,8,["value"])]),$("div",bl,P(e.$t("Site.PHP.index_84")),1)])]),_:1},8,["label"]),y(l,{label:e.$t("Site.Config.index_6"),path:"limit_rate"},{default:L(()=>[$("div",gl,[$("div",Sl,[y(o,{value:U(s).limit_rate,"onUpdate:value":a[4]||(a[4]=e=>U(s).limit_rate=e),"show-button":!1,min:0},null,8,["value"])]),$("div",kl,P(e.$t("Site.PHP.index_85")),1)])]),_:1},8,["label"]),y(l,{label:" "},{default:L(()=>[y(p,{type:"primary",onClick:_},{default:L(()=>[E(P(e.$t("Site.Cert.index_60")),1)]),_:1})]),_:1})]),_:1},8,["model"])])}}}),$l={class:"w-420px"},Ll={class:"mt-8px"},Pl=b({__name:"index",setup(e,{expose:a}){const{data:t}=Ut(),l=S(""),i=async()=>{const{message:e}=await aa({id:t.id});n(e)&&(l.value=d(e.result)?e.result.split(",").join("\n"):"")},s=async()=>{await ta({id:t.id,Index:l.value.trim().split("\n").join(",")}),i()};return i(),a({init:i}),(e,a)=>{const t=Le,i=Na,n=de;return C(),k("div",null,[$("div",$l,[y(t,{value:U(l),"onUpdate:value":a[0]||(a[0]=e=>R(l)?l.value=e:null),rows:12,name:"content",placeholder:""},null,8,["value"])]),$("div",Ll,[y(i,{class:"save-btn",type:"primary",onClick:s},{default:L(()=>[E(P(e.$t("Public.Btn.Save")),1)]),_:1})]),y(n,{class:"mt-16px"},{default:L(()=>[$("li",null,P(e.$t("Site.PHP.index_79")),1)]),_:1})])}}}),Rl={class:"mt-8px"},Ul=b({__name:"index",setup(e,{expose:a}){const{data:t}=Ut(),l=Z(),i=S(null),n=S((()=>{const{webserver:e}=l,a="openlitespeed"===e?"".concat(e,"/detail"):e;return"/www/server/panel/vhost/".concat(a,"/").concat(t.name,".conf")})()),s=async()=>{var e;null==(e=i.value)||e.getContent()},o=()=>{var e;null==(e=i.value)||e.saveFile()};return O(()=>{s()}),a({init:s}),(e,a)=>{const t=Na,l=de;return C(),k("div",null,[y(ot,{ref_key:"configRef",ref:i,path:U(n),"onUpdate:path":a[0]||(a[0]=e=>R(n)?n.value=e:null),height:"500"},null,8,["path"]),$("div",Rl,[y(t,{type:"primary",onClick:o},{default:L(()=>[E(P(e.$t("Site.Cert.index_60")),1)]),_:1})]),y(l,{class:"mt-16px"},{default:L(()=>[$("li",null,P(e.$t("Site.Config.index_59")),1),$("li",null,P(e.$t("Site.Config.index_60")),1)]),_:1})])}}}),El={class:"p-8"},Tl=b({__name:"form",setup(e,{expose:a}){const t=S(null),l=S(!1),i={path:{required:!0,message:"Please select the file directory",trigger:["blur","change"]},operation:{type:"array",required:!0,trigger:"change",message:"please select"}},n=T({path:"",operation:[]}),s=(e,a)=>{"dir"===a.type?(l.value=!0,n.operation=[0]):(l.value=!1,n.operation=[0,1,2])};return a({onConfirm:async()=>{var e;await(null==(e=t.value)?void 0:e.validate())}}),(e,a)=>{const o=nt,d=Ha,u=qa,c=r,p=Fa,_=it,m=Ia,v=de;return C(),k("div",El,[y(m,null,{default:L(()=>[y(_,{ref_key:"formRef",ref:t,model:U(n),rules:i},{default:L(()=>[y(d,{label:"Detection path",path:"path"},{default:L(()=>[y(o,{disabled:"",value:U(n).path,"onUpdate:value":a[0]||(a[0]=e=>U(n).path=e),"checked-type":["dir","file"],placeholder:"Please select the file directory",onChange:s},null,8,["value"])]),_:1}),y(d,{label:"Alert operation",path:"operation"},{default:L(()=>[y(p,{value:U(n).operation,"onUpdate:value":a[1]||(a[1]=e=>U(n).operation=e)},{default:L(()=>[y(c,null,{default:L(()=>[y(u,{value:0},{default:L(()=>a[2]||(a[2]=[E(" Read ",-1)])),_:1,__:[2]}),y(u,{value:1,disabled:U(l)},{default:L(()=>a[3]||(a[3]=[E(" delete ",-1)])),_:1,__:[3]},8,["disabled"]),y(u,{value:2,disabled:U(l)},{default:L(()=>a[4]||(a[4]=[E(" Modify/increase ",-1)])),_:1,__:[4]},8,["disabled"])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1}),y(v,{class:"mt-16px"},{default:L(()=>a[5]||(a[5]=[$("li",null,"Directory temporarily only supports reading alarm operation",-1)])),_:1,__:[5]})])}}}),Bl={class:"p-5"},jl={class:"mt-16px"},Dl=b({__name:"monitor",setup(e){const a=S(!1),t=S(!1),l=S([{key:"path",title:"path",ellipsis:{tooltip:{width:"trigger"}}},{key:"type",title:"type",ellipsis:{tooltip:{width:"trigger"}}},{key:"operation",title:"Alert operation",ellipsis:{tooltip:{width:"trigger"}}},{key:"name",title:"operate",ellipsis:{tooltip:{width:"trigger"}}}]),i=S([]);return(e,n)=>{const s=Na,o=Ia,d=ne,r=de,u=lt;return C(),k("div",Bl,[$("div",null,[y(o,{justify:"space-between"},{default:L(()=>[y(s,{type:"primary",onClick:n[0]||(n[0]=e=>a.value=!0)},{default:L(()=>n[2]||(n[2]=[E(" Add monitor ",-1)])),_:1,__:[2]}),y(s,null,{icon:L(()=>n[3]||(n[3]=[$("img",{src:_t,class:"w-5"},null,-1)])),_:1})]),_:1})]),$("div",jl,[y(d,{loading:U(t),"loading-num":6,data:U(i),columns:U(l)},null,8,["loading","data","columns"])]),$("div",null,[y(r,{class:"mt-16px"},{default:L(()=>[n[5]||(n[5]=$("li",null," The security alarm will monitor the behavior of the current website access to the non -current website file (for example: your site a.COM visited the file or directory of the site B.COM). ",-1)),n[6]||(n[6]=$("li",null,"Police frequency: 60 seconds of alarm behavior will only send an alarm once",-1)),$("li",null,[y(s,{text:"",class:"color-#20a53a"},{default:L(()=>n[4]||(n[4]=[E("Tutorial",-1)])),_:1,__:[4]})])]),_:1,__:[5,6]})]),y(u,{show:U(a),"onUpdate:show":n[1]||(n[1]=e=>R(a)?a.value=e:null),title:"Add file monitor",width:500,"min-height":148,footer:!0,component:Tl},null,8,["show"])])}}});const Nl=u({},[["render",function(e,a){return C(),k("div",null,"555")}]]),Il={class:"box mt-16px"},Ol={key:0,class:"items-center warning"},Al={class:"warning"},Ml={class:"color-#f23836"},Hl=u(b({__name:"index",props:{isInstall:{type:Boolean,default:!1},phpVersion:{default:"PHP"}},setup(e){const t=Z(),l=S(!1),i=S(!1),n=S(!1),s=e,o=c(),d=()=>{re({source:114})},r=()=>{const e=l.value?"Open the site security alarm":"Close the site security alarm",a=l.value?"After opening, the alarm notice will be sent when the safety problem is detected. Do you continue?":"After closing, the website will no longer receive a security alarm. Do you continue?";ae({title:e,content:a,onConfirm:async()=>{const e=dt(l.value);console.log(e,"result")},onPublicClose:()=>{l.value=!l.value}})};return(e,u)=>{const c=za,p=Ia,_=Na,m=de,v=a,h=pt,x=lt;return C(),k(D,null,[$("div",Il,[y(h,{install:U(o).isPro,class:"install"},A({default:L(()=>[y(p,{class:"items-center color-#666"},{default:L(()=>[u[8]||(u[8]=$("div",null,"Site protection",-1)),$("div",null,[y(c,{value:U(l),"onUpdate:value":[u[0]||(u[0]=e=>R(l)?l.value=e:null),r]},null,8,["value"])]),u[9]||(u[9]=$("div",null,"today: 0",-1)),u[10]||(u[10]=$("div",null,"Total alarm: 0",-1)),U(l)?j("",!0):(C(),k("div",Ol,[u[7]||(u[7]=$("img",{src:vt,class:"h-8"},null,-1)),$("span",Al,[u[5]||(u[5]=E(" Please open ",-1)),$("span",Ml,"PHP-"+P(s.phpVersion),1),u[6]||(u[6]=E(" protection first ",-1))])]))]),_:1,__:[8,9,10]}),y(p,{class:"mt-16px"},{default:L(()=>[y(_,{onClick:u[1]||(u[1]=e=>i.value=!0)},{default:L(()=>u[11]||(u[11]=[E("Monitor",-1)])),_:1,__:[11]}),y(_,{onClick:u[2]||(u[2]=e=>n.value=!0)},{default:L(()=>u[12]||(u[12]=[E("Trigger log",-1)])),_:1,__:[12]})]),_:1}),y(m,{class:"mt-16px"},{default:L(()=>u[13]||(u[13]=[$("li",null," Based on the PHP kernel monitoring tools, real -time monitoring of other invasive behaviors such as Trojan horses and vulnerabilities, I found that Trojan supports automatic isolation ",-1),$("li",null," The security alarm will monitor the behavior of the current website access to the non -current website file (for example: your site a.COM visited the file or directory of the site B.COM). When you wait for a cache, please do not turn on this option ",-1)])),_:1,__:[13]})]),_:2},[s.isInstall?{name:"desc",fn:L(()=>[y(p,{class:"items-center"},{default:L(()=>[u[16]||(u[16]=$("img",{src:mt,class:"h-10"},null,-1)),$("span",null,[u[15]||(u[15]=E("If you need to use the [PHP website security alarm] function, please buy first ",-1)),y(v,{onClick:d},{default:L(()=>u[14]||(u[14]=[E("click to buy",-1)])),_:1,__:[14]})])]),_:1,__:[16]})]),key:"0"}:{name:"desc",fn:L(()=>[y(p,{class:"items-center"},{default:L(()=>[u[19]||(u[19]=$("img",{src:mt,class:"h-10"},null,-1)),$("span",null,[u[18]||(u[18]=E("Currently not installed [PHP website security alarm], ",-1)),y(v,null,{default:L(()=>u[17]||(u[17]=[E("Click to install",-1)])),_:1,__:[17]})])]),_:1,__:[19]})]),key:"1"}]),1032,["install"])]),y(x,{show:U(i),"onUpdate:show":u[3]||(u[3]=e=>R(i)?i.value=e:null),title:"XXXXmonitor",width:1e3,"min-height":148,footer:!1,component:Dl},null,8,["show"]),y(x,{show:U(n),"onUpdate:show":u[4]||(u[4]=e=>R(n)?n.value=e:null),title:"[".concat(U(t).siteName,"] Site security log"),width:1e3,"min-height":148,footer:!1,component:Nl},null,8,["show","title"])],64)}}}),[["__scopeId","data-v-d159b1c0"]]),zl={class:"w-140px"},ql={class:"my-16px"},Vl={key:0,class:"my-16px"},Fl=b({__name:"index",setup(e,{expose:a}){const{data:i}=Ut(),o=Z(),d=S(null),r=S(!1),u=S(!1);let c="";const _=S([]),m=async()=>{null!==d.value?(await la({siteName:i.name,version:d.value,other:c}),o.setRefresh(!0),x()):l.error("Please select a PHP version")},v=async()=>{const{message:e}=await oa({id:i.id});n(e)&&(r.value=e.result)},h=async e=>{await ia({id:i.id,act:e?1:0}),v()},x=()=>{(async()=>{const{message:e}=await rt();n(e)&&(u.value=e.php_status)})(),v(),(async()=>{const{message:e}=await sa();t(e)&&(_.value=e.reverse().map(e=>({label:e.name,value:e.version})))})(),(async()=>{const{message:e}=await na({siteName:i.name});n(e)&&(d.value=e.phpversion,c=e.php_other||"")})()};return x(),a({init:x}),(e,a)=>{const t=Aa,l=Na,i=Ia,n=de,o=s,c=za;return C(),k("div",null,[y(i,{class:"items-center"},{default:L(()=>[$("div",null,P(e.$t("Site.Lable.index_22")),1),$("div",zl,[y(t,{value:U(d),"onUpdate:value":a[0]||(a[0]=e=>R(d)?d.value=e:null),options:U(_)},null,8,["value","options"])]),$("div",null,[y(l,{type:"primary",onClick:m},{default:L(()=>[E(P(e.$t("Site.Cert.index_61")),1)]),_:1})])]),_:1}),y(n,{class:"mt-16px"},{default:L(()=>[$("li",null,P(e.$t("Site.Config.index_65")),1),$("li",null,P(e.$t("Site.Config.index_66")),1),$("li",null,P(e.$t("Site.Config.index_67")),1),$("li",null,P(e.$t("Site.Config.index_68")),1),$("li",null,P(e.$t("Site.Config.index_69")),1),$("li",null,P(e.$t("Site.Config.index_70")),1)]),_:1}),$("div",ql,[y(o,{dashed:""})]),y(i,{class:"items-center"},{default:L(()=>[$("div",null,P(e.$t("Site.Config.index_64")),1),$("div",null,[y(c,{value:U(r),"onUpdate:value":[a[1]||(a[1]=e=>R(r)?r.value=e:null),h]},null,8,["value"])])]),_:1}),y(n,{class:"mt-16px"},{default:L(()=>[$("li",null,P(e.$t("Site.Config.index_71")),1),$("li",null,P(e.$t("Site.Config.index_72")),1)]),_:1}),U(p)?(C(),k("div",Vl,[y(o,{dashed:""}),y(Hl,{isInstall:U(u),phpVersion:U(d)},null,8,["isInstall","phpVersion"])])):j("",!0)])}}}),Kl={class:"mr-16px text-#777"},Wl={key:1,class:"text-#777"},Xl={class:"w-200px mr-8px"},Jl={class:"w-200px mr-8px"},Gl=b({__name:"index",setup(e,{expose:a}){const{data:i}=Ut(),s=Z(),o=S(!1),d=S("--"),r=S("--"),u=S(i.cache_status),c=S(null),p=S([]),_=S(""),m=async()=>{await da({s_id:i.id,version:r.value}),f()},v=async e=>{await ra({version:i.php_version,sitename:i.name,act:e}),i.cache_status=e,s.setRefresh(!0)},h=async()=>{await ua({s_id:i.id})},x=async()=>{c.value?""!==_.value.trim()?await ca({s_id:i.id,user:c.value,new_pass:_.value}):l.error("Please enter new password"):l.error("Please select user")},f=async()=>{const e=l.loading("Getting Wordpress information, please wait...");try{await(async()=>{const{message:e}=await pa({s_id:i.id});n(e)&&(d.value=e.local_v,r.value=e.online_v,o.value=e.update)})(),await(async()=>{const{message:e}=await _a({s_id:i.id});t(e)&&e.length>0?(p.value=e.map(e=>({label:e,value:e})),c.value=e[0]):(p.value=[],c.value=null)})()}finally{e.close()}};return f(),a({init:f}),(e,a)=>{const t=Na,l=Ha,i=qa,n=Aa,s=Oa,f=it;return C(),k("div",null,[y(f,null,{default:L(()=>[y(l,{label:"WP Version"},{default:L(()=>[U(o)?(C(),k(D,{key:0},[$("div",Kl,"The current version is: "+P(U(d)),1),y(t,{type:"primary",onClick:m},{default:L(()=>[E("Upgrade to "+P(U(r)),1)]),_:1})],64)):(C(),k("span",Wl,"The latest version"))]),_:1}),y(l,{label:"Cache"},{default:L(()=>[y(i,{checked:U(u),"onUpdate:checked":[a[0]||(a[0]=e=>R(u)?u.value=e:null),v],class:"mr-16px"},{default:L(()=>a[3]||(a[3]=[E(" Open cache ",-1)])),_:1,__:[3]},8,["checked"]),y(t,{type:"primary",onClick:h},{default:L(()=>a[4]||(a[4]=[E("Purge all cache",-1)])),_:1,__:[4]})]),_:1}),y(l,{label:"Reset password"},{default:L(()=>[$("div",Xl,[y(n,{value:U(c),"onUpdate:value":a[1]||(a[1]=e=>R(c)?c.value=e:null),options:U(p)},null,8,["value","options"])]),$("div",Jl,[y(s,{value:U(_),"onUpdate:value":a[2]||(a[2]=e=>R(_)?_.value=e:null),placeholder:"Please enter a new password"},null,8,["value"])]),y(t,{type:"primary",onClick:x},{default:L(()=>a[5]||(a[5]=[E("Save password",-1)])),_:1,__:[5]})]),_:1})]),_:1})])}}}),Yl={class:"pt-8px"},Zl={class:"w-180px mr-8px"},Ql={class:"w-180px"},ei={class:"w-180px"},ai={class:"w-280px"},ti={class:"w-180px"},li={class:"w-180px"},ii={class:"w-280px"},ni={class:"flex-1"},si={key:0,class:"mb-16px text-error"},oi={key:1,class:"mb-16px text-error"},di=b({__name:"index",setup(e,{expose:t}){const{t:l}=g(),{data:i}=Ut(),s=T({composer_version:"",php_version:"auto",composer_args:"install",composer_cmd:"",repo:"repos.packagist",composer_user:"www",composer_path:i.path}),o=S([]),r=[{label:l("Docker.App.index_4"),value:"install"},{label:l("Docker.App.index_3"),value:"update"}],u=[{label:l("Site.Lable.index_8"),value:"repos.packagist"}],c=[{label:l("Site.Lable.index_9"),value:"www"},{label:l("Site.Lable.index_10"),value:"root"}],p=S(""),_=S(""),m=async()=>{await ma({repo:s.repo}),f()},v=async()=>{await va({path:i.path}),f()},h=()=>{ae({title:l("Site.PHP.index_77"),content:l("Site.PHP.index_78"),onConfirm:async()=>{await ha({php_version:s.php_version,composer_args:s.composer_args,composer_cmd:s.composer_cmd,repo:s.repo,path:s.composer_path,user:s.composer_user}),f()}})},x=()=>{o.value.unshift({label:l("Site.Lable.index_12"),value:"auto"})},f=async()=>{const{message:e}=await xa({path:i.path});n(e)&&(s.composer_version=e.result,e.comp_json&&(p.value=e.comp_json),d(e.comp_lock)&&(_.value=e.comp_lock),o.value=e.php_versions.filter(e=>"00"!==e.version).map(e=>({label:e.name,value:e.version})),x())};return x(),f(),t({init:f}),(e,t)=>{const l=Oa,i=Na,n=Ha,d=Aa,x=nt,f=a,w=it;return C(),k("div",Yl,[y(w,{class:"px-8px"},{default:L(()=>[y(n,{label:e.$t("Site.TableRow.index_3"),path:"composer_version"},{default:L(()=>[$("div",Zl,[y(l,{value:U(s).composer_version,"onUpdate:value":t[0]||(t[0]=e=>U(s).composer_version=e),disabled:!0,placeholder:""},null,8,["value"])]),y(i,{onClick:m},{default:L(()=>[E(P(e.$t("Docker.App.index_3")),1)]),_:1})]),_:1},8,["label"]),y(n,{label:e.$t("Site.TableRow.index_27"),path:"php_version"},{default:L(()=>[$("div",Ql,[y(d,{value:U(s).php_version,"onUpdate:value":t[1]||(t[1]=e=>U(s).php_version=e),options:U(o)},null,8,["value","options"])])]),_:1},8,["label"]),y(n,{label:e.$t("Site.TableRow.index_28"),path:"composer_args"},{default:L(()=>[$("div",ei,[y(d,{value:U(s).composer_args,"onUpdate:value":t[2]||(t[2]=e=>U(s).composer_args=e),options:r},null,8,["value"])])]),_:1},8,["label"]),y(n,{label:e.$t("Site.TableRow.index_29"),path:"composer_cmd"},{default:L(()=>[$("div",ai,[y(l,{value:U(s).composer_cmd,"onUpdate:value":t[3]||(t[3]=e=>U(s).composer_cmd=e),placeholder:e.$t("Site.Cert.index_67")},null,8,["value","placeholder"])])]),_:1},8,["label"]),y(n,{label:e.$t("Site.Lable.index_32"),path:"repo"},{default:L(()=>[$("div",ti,[y(d,{value:U(s).repo,"onUpdate:value":t[4]||(t[4]=e=>U(s).repo=e),options:u},null,8,["value"])])]),_:1},8,["label"]),y(n,{label:e.$t("Ftp.Analysis.Index_27"),path:"composer_user"},{default:L(()=>[$("div",li,[y(d,{value:U(s).composer_user,"onUpdate:value":t[5]||(t[5]=e=>U(s).composer_user=e),options:c},null,8,["value"])])]),_:1},8,["label"]),y(n,{label:e.$t("Site.Lable.index_26"),path:"composer_path"},{default:L(()=>[$("div",ii,[y(x,{value:U(s).composer_path,"onUpdate:value":t[6]||(t[6]=e=>U(s).composer_path=e)},null,8,["value"])])]),_:1},8,["label"]),y(n,{label:" ","show-feedback":!1},{default:L(()=>[$("div",ni,[U(p)?(C(),k("div",si,P(U(p)),1)):j("",!0),U(_)?(C(),k("div",oi,[$("span",null,P(U(_)),1),y(f,{onClick:v},{default:L(()=>[E("["+P(e.$t("Site.TableOP.index_6"))+"]",1)]),_:1})])):j("",!0),y(i,{type:"primary",onClick:h},{default:L(()=>[E(P(e.$t("Site.Lable.index_11")),1)]),_:1})])]),_:1})]),_:1})])}}}),ri={class:"px-20px py-24px"},ui={class:"w-120px"},ci={class:"w-120px"},pi={class:"w-200px"},_i={class:"w-200px"},mi={class:"w-200px"},vi=b({__name:"form",props:{data:{}},setup(e,{expose:a}){const{t:l}=g(),i=e,{isEdit:n,siteId:s,siteName:o,row:d,getList:r}=i.data,u=S(null),c=T({redirectname:"".concat((new Date).valueOf()),type:1,holdpath:1,domainorpath:"domain",redirecttype:"301",redirectpath:"",redirectdomain:[],tourl:"http://"}),p={redirectdomain:{trigger:["change"],validator:()=>0!==c.redirectdomain.length||new Error(l("Site.RulesError.index_23"))},redirectpath:{trigger:["blur","input"],validator:()=>""!==c.redirectpath.trim()||new Error(l("Site.RulesError.index_24"))},tourl:{trigger:["blur","input"],validator:()=>""!==c.tourl.trim()||new Error(l("Site.RulesError.index_25"))}},_=[{label:"Domain name",value:"domain"},{label:"Path",value:"path"}],m=[{label:"301",value:"301"},{label:"302",value:"302"}],v=S([]),h=()=>{c.redirectdomain=[],c.redirectpath=""},{loading:x,setLoading:f}=ie();return n&&d&&(c.redirectname=d.redirectname,c.type=d.type,c.holdpath=d.holdpath,c.redirecttype=d.redirecttype,c.redirectpath=d.redirectpath,c.domainorpath=d.domainorpath,c.redirectdomain=d.redirectdomain,c.tourl=d.tourl),(async()=>{try{f(!0);const{message:e}=await Re({id:s});v.value=t(e)?e.map(e=>({label:e.name,value:e.name})):[]}finally{f(!1)}})(),a({onConfirm:async({hide:e})=>{var a;await(null==(a=u.value)?void 0:a.validate());const t={...N(c),sitename:o};n?await wa(t):await fa(t),null==r||r(),e()}}),(e,a)=>{const t=za,l=Ha,i=Ia,n=Aa,s=Oa,o=it,d=de;return C(),k("div",ri,[y(o,{ref_key:"formRef",ref:u,model:U(c),rules:p},{default:L(()=>[y(i,{size:60},{default:L(()=>[y(l,{label:e.$t("Site.Lable.index_34")},{default:L(()=>[y(t,{value:U(c).type,"onUpdate:value":a[0]||(a[0]=e=>U(c).type=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"]),y(l,{label:e.$t("Site.TableRow.index_13"),"label-width":"120"},{default:L(()=>[y(t,{value:U(c).holdpath,"onUpdate:value":a[1]||(a[1]=e=>U(c).holdpath=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"])]),_:1}),y(i,{size:30},{default:L(()=>[y(l,{label:e.$t("Site.TableRow.index_11")},{default:L(()=>[$("div",ui,[y(n,{value:U(c).domainorpath,"onUpdate:value":[a[2]||(a[2]=e=>U(c).domainorpath=e),h],class:"type-select",options:_},null,8,["value"])])]),_:1},8,["label"]),y(l,{label:e.$t("Site.TableRow.index_12"),"label-width":"70"},{default:L(()=>[$("div",ci,[y(n,{value:U(c).redirecttype,"onUpdate:value":a[3]||(a[3]=e=>U(c).redirecttype=e),class:"mode-select",options:m},null,8,["value"])])]),_:1},8,["label"])]),_:1}),"domain"===U(c).domainorpath?(C(),I(l,{key:0,label:e.$t("Site.Lable.index_32"),path:"redirectdomain"},{default:L(()=>[$("div",pi,[y(n,{value:U(c).redirectdomain,"onUpdate:value":a[4]||(a[4]=e=>U(c).redirectdomain=e),class:"domain-select",multiple:!0,loading:U(x),options:U(v),"max-tag-count":"responsive",placeholder:"Select domain"},null,8,["value","loading","options"])])]),_:1},8,["label"])):j("",!0),"path"===U(c).domainorpath?(C(),I(l,{key:1,label:e.$t("Site.Lable.index_30"),path:"redirectpath"},{default:L(()=>[$("div",_i,[y(s,{value:U(c).redirectpath,"onUpdate:value":a[5]||(a[5]=e=>U(c).redirectpath=e),placeholder:"","input-props":{name:"path"}},null,8,["value"])])]),_:1},8,["label"])):j("",!0),y(l,{label:e.$t("Site.Lable.index_33"),path:"tourl"},{default:L(()=>[$("div",mi,[y(s,{value:U(c).tourl,"onUpdate:value":a[6]||(a[6]=e=>U(c).tourl=e),placeholder:"","input-props":{name:"url"}},null,8,["value"])])]),_:1},8,["label"])]),_:1},8,["model"]),y(d,{class:"mt-12px"},{default:L(()=>[$("li",null,P(e.$t("Site.Config.index_77")),1),$("li",null,P(e.$t("Site.Config.index_78")),1),$("li",null,P(e.$t("Site.Config.index_79")),1),$("li",null,P(e.$t("Site.Config.index_80")),1),$("li",null,P(e.$t("Site.Config.index_81")),1),$("li",null,P(e.$t("Site.Config.index_82")),1)]),_:1})])}}}),hi={class:"p-20px"},xi={class:"mt-12px"},fi=b({__name:"config",props:{data:{}},emits:["close"],setup(e,{emit:a}){const t=e,{row:i,siteName:s,getList:o}=t.data,d=a,r=Z(),u=S(""),c=S(""),p=S(""),_=async()=>{const{message:e}=await ba({path:p.value,data:u.value,encoding:c.value});n(e)&&l.success(e.msg),null==o||o(),d("close")};return(async()=>{const{message:e}=await ya({sitename:s,redirectname:i.redirectname,webserver:r.webserver});n(e)&&(p.value=e.file,u.value=e.data,c.value=e.encoding)})(),(e,a)=>{const t=Na,l=de;return C(),k("div",hi,[y(ot,{value:U(u),"onUpdate:value":a[0]||(a[0]=e=>R(u)?u.value=e:null),height:350,"show-tips":!1},null,8,["value"]),$("div",xi,[y(t,{type:"primary",onClick:_},{default:L(()=>[E(P(e.$t("Site.Cert.index_60")),1)]),_:1})]),y(l,{class:"mt-24px"},{default:L(()=>[$("li",null,P(e.$t("Site.Config.index_83")),1)]),_:1})])}}}),wi=b({__name:"index",setup(e,{expose:l}){const{t:i}=g(),{data:n}=Ut(),s=e=>({sitename:e.sitename,redirectname:e.redirectname,tourl:e.tourl,redirectdomain:e.redirectdomain,redirectpath:e.redirectpath,redirecttype:e.redirecttype,domainorpath:e.domainorpath}),{keys:o,table:d,columns:r}=le([{type:"selection",width:40},{key:"sitename",title:i("Site.TableRow.index_11"),ellipsis:{tooltip:{width:"trigger"}},render:e=>"path"===e.domainorpath?e.redirectpath:e.sitename},{key:"redirecttype",title:i("Site.TableRow.index_12"),width:90},{key:"holdpath",title:i("Site.TableRow.index_13"),width:140,render:e=>y(a,{type:1===e.holdpath?"primary":"error",onClick:async()=>{await ka({...s(e),type:e.type,holdpath:1===e.holdpath?0:1,status:e.type}),e.holdpath=1===e.holdpath?0:1}},{default:()=>[1===e.holdpath?i("Config.Alarm.index_18"):i("Public.Status.TurnOff")]})},{key:"type",title:i("Config.Safe.index_156"),width:100,render:e=>y(ue,{value:e.type,"checked-value":1,"unchecked-value":0,"checked-title":i("Public.Status.Running"),"unchecked-title":i("Public.Status.Paused"),onClick:async a=>{await ka({...s(e),type:a,holdpath:e.holdpath,status:e.type}),e.type=a}},null)},oe({width:140,options:e=>[{label:i("Site.TableOP.index_2"),class:"config-btn",onClick:()=>{f(e)}},{label:i("Site.TableOP.index_7"),class:"edit-btn",onClick:()=>{h(e)}},{label:i("Public.Btn.Del"),class:"delete-btn",onClick:()=>{ae({title:i("Site.Config.Redirect.index_1",[e.redirectname]),content:i("Site.Config.Redirect.index_2"),onConfirm:async()=>{await ga({sitename:n.name,redirectname:e.redirectname}),_()}})}}]})]),u=[{key:"del",type:"confirm",label:i("Site.Batch.index_20"),confirm:{title:i("Site.Batch.index_21"),desc:i("Site.Batch.index_11"),columns:[r.value[1]],api:e=>ga({sitename:n.name,redirectname:e.redirectname},!1),done:()=>{_()}}}],{loading:c,setLoading:p}=ie(),_=async()=>{try{p(!0);const{message:e}=await Sa({sitename:n.name});d.data=t(e)?e:[]}finally{o.value=[],p(!1)}},m=se(i("Site.Config.index_74"),{row:void 0,siteId:n.id,siteName:n.name,isEdit:!1,getList:_}),v=()=>{m.data.row=void 0,m.data.isEdit=!1,m.title=i("Site.Config.index_74"),m.show=!0},h=e=>{m.data.row=e,m.data.isEdit=!0,m.title="".concat(i("Site.Config.index_75")," [").concat(e.redirectname,"]"),m.show=!0},x=se("",{row:void 0,siteName:n.name,getList:_}),f=e=>{x.data.row=e,x.title="".concat(i("Site.Config.index_76")," [").concat(e.redirectname,"]"),x.show=!0};return _(),l({init:_}),(e,a)=>{const t=Na,l=ne,i=ee,n=Q,s=lt;return C(),k("div",null,[y(n,null,{toolsLeft:L(()=>[y(t,{class:"add-btn",type:"primary",onClick:v},{default:L(()=>[E(P(e.$t("Site.Config.index_73")),1)]),_:1})]),table:L(()=>[y(l,{"checked-row-keys":U(o),"onUpdate:checkedRowKeys":a[0]||(a[0]=e=>R(o)?o.value=e:null),"row-key":"redirectname",loading:U(c),"max-height":440,data:U(d).data,columns:U(r)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:L(()=>[y(i,{"checked-row-keys":U(o),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>R(o)?o.value=e:null),"row-key":"redirectname",data:U(d).data,options:u},null,8,["checked-row-keys","data"])]),_:1}),y(s,{show:U(m).show,"onUpdate:show":a[2]||(a[2]=e=>U(m).show=e),title:U(m).title,data:U(m).data,width:660,footer:!0,component:vi},null,8,["show","title","data"]),y(s,{show:U(x).show,"onUpdate:show":a[3]||(a[3]=e=>U(x).show=e),title:U(x).title,data:U(x).data,width:580,component:fi},null,8,["show","title","data"])])}}}),yi={class:"px-20px py-24px"},bi={class:"w-220px"},gi={class:"w-220px"},Si={class:"w-220px"},ki={class:"w-220px"},Ci={class:"w-220px"},$i={class:"w-220px"},Li={class:"w-220px"},Pi=b({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:l}=g(),i=e,{isEdit:n,siteName:s,row:o,getList:d}=i.data,r=S(null),u=T({type:1,proxyname:"",cachetime:1,proxydir:"/",proxysite:"http://",todomain:"$host",cache:0,advanced:0,sitename:s}),c={proxyname:{trigger:["blur","input"],validator:()=>""!==u.proxyname.trim()||new Error(l("Site.RulesError.index_26"))},cachetime:{trigger:["blur","input"],validator:()=>!(1===u.cache&&!u.cachetime)||new Error(l("Site.RulesError.index_27"))},proxydir:{trigger:["blur","input"],validator:()=>1!==u.advanced||""!==u.proxydir.trim()||new Error(l("Site.RulesError.index_28"))},proxysite:{trigger:["blur","input"],validator:()=>""!==u.proxysite.trim()||new Error(l("Site.RulesError.index_25"))},todomain:{trigger:["blur","input"],validator:()=>""!==u.todomain.trim()||new Error(l("Site.RulesError.index_29"))}},p=e=>{e=(e=e.replace(/^http[s]?:\/\//,"")).replace(/(:|\?|\/|\\)(.*)$/,""),/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(e)?u.todomain="$host":u.todomain=e},_=S([]),m=()=>{_.value.length>=3||_.value.push({sub1:"",sub2:""})};m();return(()=>{if(n&&o){u.type=o.type,u.cache=o.cache,u.advanced=o.advanced,u.proxyname=o.proxyname,u.cachetime=o.cachetime,u.proxydir=o.proxydir,u.proxysite=o.proxysite,u.todomain=o.todomain,u.sitename=o.sitename;const e=o.subfilter.filter(e=>""!==e.sub1||""!==e.sub2);e.length>0&&(_.value=e)}})(),t({onConfirm:async({hide:e})=>{var a;await(null==(a=r.value)?void 0:a.validate());const t=(()=>{const e=[{sub1:"",sub2:""},{sub1:"",sub2:""},{sub1:"",sub2:""}];return e.forEach((e,a)=>{_.value.length-1<a||(e.sub1=_.value[a].sub1,e.sub2=_.value[a].sub2)}),{...N(u),subfilter:e}})();n?await $a(t):await Ca(t),null==d||d(),e()}}),(e,t)=>{const l=za,i=Ha,s=Ia,o=Oa,d=Va,v=Wa,h=Ka,x=a,f=Na,w=it,b=de;return C(),k("div",yi,[y(w,{ref_key:"formRef",ref:r,model:U(u),rules:c},{default:L(()=>[y(s,{size:32},{default:L(()=>[y(i,{label:e.$t("Site.Lable.index_46")},{default:L(()=>[y(l,{value:U(u).type,"onUpdate:value":t[0]||(t[0]=e=>U(u).type=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"]),y(i,{label:e.$t("Site.Lable.index_47"),"label-width":"100"},{default:L(()=>[y(l,{value:U(u).cache,"onUpdate:value":t[1]||(t[1]=e=>U(u).cache=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"]),y(i,{label:e.$t("Site.Lable.index_35"),"label-width":"126"},{default:L(()=>[y(l,{value:U(u).advanced,"onUpdate:value":t[2]||(t[2]=e=>U(u).advanced=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"])]),_:1}),y(i,{label:e.$t("Site.Lable.index_38"),path:"proxyname"},{default:L(()=>[$("div",bi,[y(o,{value:U(u).proxyname,"onUpdate:value":t[3]||(t[3]=e=>U(u).proxyname=e),disabled:U(n),placeholder:"","input-props":{name:"name"}},null,8,["value","disabled"])])]),_:1},8,["label"]),1===U(u).cache?(C(),I(i,{key:0,label:e.$t("Site.Lable.index_39"),path:"cachetime"},{default:L(()=>[$("div",gi,[y(h,null,{default:L(()=>[y(d,{value:U(u).cachetime,"onUpdate:value":t[4]||(t[4]=e=>U(u).cachetime=e),min:1,"show-button":!1,placeholder:"","input-props":{name:"time"}},null,8,["value"]),y(v,{class:"w-70px text-center"},{default:L(()=>[E(P(U(u).cachetime>1?"Minutes":"Minute"),1)]),_:1})]),_:1})])]),_:1},8,["label"])):j("",!0),1===U(u).advanced?(C(),I(i,{key:1,label:e.$t("Site.TableRow.index_17"),path:"proxydir"},{default:L(()=>[$("div",Si,[y(o,{value:U(u).proxydir,"onUpdate:value":t[5]||(t[5]=e=>U(u).proxydir=e),placeholder:"","input-props":{name:"dir"}},null,8,["value"])])]),_:1},8,["label"])):j("",!0),y(i,{label:e.$t("Site.Lable.index_33")},{default:L(()=>[$("div",ki,[y(o,{value:U(u).proxysite,"onUpdate:value":[t[6]||(t[6]=e=>U(u).proxysite=e),p],placeholder:"","input-props":{name:"url"}},null,8,["value"])])]),_:1},8,["label"]),y(i,{label:e.$t("Site.Lable.index_36")},{default:L(()=>[$("div",Ci,[y(o,{value:U(u).todomain,"onUpdate:value":t[7]||(t[7]=e=>U(u).todomain=e),placeholder:"","input-props":{name:"domain"}},null,8,["value"])])]),_:1},8,["label"]),y(i,{label:e.$t("Site.Lable.index_37")},{default:L(()=>[y(s,{class:"flex-1",vertical:""},{default:L(()=>[(C(!0),k(D,null,M(U(_),(a,t)=>(C(),I(s,{key:"".concat(t+1),class:"sub-rows items-center"},{default:L(()=>[$("div",$i,[y(o,{value:a.sub1,"onUpdate:value":e=>a.sub1=e,placeholder:e.$t("Site.Placeholder.index_20"),"input-props":{name:"sub1"}},null,8,["value","onUpdate:value","placeholder"])]),$("div",Li,[y(o,{value:a.sub2,"onUpdate:value":e=>a.sub2=e,placeholder:e.$t("Site.Placeholder.index_21"),"input-props":{name:"sub2"}},null,8,["value","onUpdate:value","placeholder"])]),$("div",null,[y(x,{type:"error",disabled:0===t&&1===U(_).length,onClick:e=>(e=>{_.value.length<=1||_.value.splice(e,1)})(t)},{default:L(()=>[E(P(e.$t("Public.Btn.Del")),1)]),_:2},1032,["disabled","onClick"])])]),_:2},1024))),128)),$("div",null,[y(f,{type:"primary",class:"add-content-btn",disabled:U(_).length>=3,onClick:m},{default:L(()=>[$("span",null,P(e.$t("Site.Config.index_87")),1)]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["label"])]),_:1},8,["model"]),y(b,{class:"mt-12px"},{default:L(()=>[$("li",null,P(e.$t("Site.Config.index_88")),1),$("li",null,P(e.$t("Site.Config.index_89")),1),$("li",null,P(e.$t("Site.Config.index_90")),1),$("li",null,P(e.$t("Site.Config.index_91")),1)]),_:1})])}}}),Ri={class:"p-20px"},Ui={class:"mt-12px"},Ei=b({__name:"config",props:{data:{}},emits:["close"],setup(e,{emit:a}){const t=e,{row:i,siteName:s,getList:o}=t.data,d=a,r=Z(),u=S(""),c=S(""),p=S(""),_=async()=>{const{message:e}=await Pa({path:p.value,data:u.value,encoding:c.value});n(e)&&l.success(e.msg),null==o||o(),d("close")};return(async()=>{const{message:e}=await La({sitename:s,proxyname:i.proxyname,webserver:r.webserver});n(e)&&(p.value=e.file,u.value=e.data,c.value=e.encoding)})(),(e,a)=>{const t=Na,l=de;return C(),k("div",Ri,[y(ot,{value:U(u),"onUpdate:value":a[0]||(a[0]=e=>R(u)?u.value=e:null),height:350,"show-tips":!1},null,8,["value"]),$("div",Ui,[y(t,{type:"primary",onClick:_},{default:L(()=>[E(P(e.$t("Site.Cert.index_60")),1)]),_:1})]),y(l,{class:"mt-24px"},{default:L(()=>[$("li",null,P(e.$t("Site.Config.index_83")),1)]),_:1})])}}}),Ti=b({__name:"index",setup(e,{expose:l}){const{t:i}=g(),{data:n}=Ut(),s=e=>({proxyname:e.proxyname,sitename:e.sitename,proxydir:e.proxydir,proxysite:e.proxysite,todomain:e.todomain,subfilter:e.subfilter,advanced:e.advanced,cachetime:e.cachetime}),{keys:o,table:d,columns:r}=le([{type:"selection",width:40},{key:"proxyname",title:i("Site.TableRow.index_2"),width:80,ellipsis:{tooltip:{width:"trigger"}}},{key:"proxydir",title:i("Site.TableRow.index_17"),width:90,ellipsis:{tooltip:{width:"trigger"}}},{key:"proxysite",title:i("Site.Lable.index_33"),ellipsis:{tooltip:{width:"trigger"}},render:e=>y("a",{class:"text-primary text-primary-hover",href:e.proxysite,target:"_blank"},[e.proxysite])},{key:"cache",title:i("Site.Lable.index_31"),width:90,render:e=>y(a,{type:1===e.cache?"primary":"error",onClick:async()=>{await $a({...s(e),type:e.type,cache:1===e.cache?0:1}),e.cache=1===e.cache?0:1}},{default:()=>[1===e.cache?"Enabled":"Disabled"]})},{key:"type",title:i("Site.TableRow.index_14"),width:90,render:e=>y(ue,{value:e.type,"checked-value":1,"unchecked-value":0,"checked-title":"Running","unchecked-title":"Paused",onClick:async a=>{await $a({...s(e),type:a,cache:e.cache}),e.type=a}},null)},oe({width:120,options:e=>[{label:i("Site.TableOP.index_2"),onClick:()=>{f(e)}},{label:i("Site.TableOP.index_7"),class:"edit-btn",onClick:()=>{h(e)}},{label:i("Public.Btn.Del"),class:"delete-btn",onClick:()=>{ae({title:i("Site.Config.Proxy.index_1",[e.proxyname]),content:i("Site.Config.Proxy.index_2"),onConfirm:async()=>{await Ra({sitename:n.name,proxyname:e.proxyname}),_()}})}}]})]),u=[{key:"del",type:"confirm",label:i("Site.Batch.index_20"),confirm:{title:i("Site.Batch.index_21"),desc:i("Site.Batch.index_11"),api:e=>Ra({sitename:n.name,proxyname:e.proxyname},!1),done:()=>{_()},columns:[{key:"proxyname",title:i("Site.TableRow.index_2"),ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:c,setLoading:p}=ie(),_=async()=>{try{p(!0);const{message:e}=await Ua({sitename:n.name});d.data=t(e)?e:[]}finally{o.value=[],p(!1)}},m=se(i("Site.Config.index_86"),{row:void 0,siteName:n.name,isEdit:!1,getList:_}),v=()=>{m.data.row=void 0,m.data.isEdit=!1,m.title=i("Site.Config.index_86"),m.show=!0},h=e=>{m.data.row=e,m.data.isEdit=!0,m.title="".concat(i("Site.Config.index_75")," [").concat(e.proxyname,"]"),m.show=!0},x=se("",{row:void 0,siteName:n.name,getList:_}),f=e=>{x.data.row=e,x.title="".concat(i("Site.Config.index_76")," [").concat(e.proxyname,"]"),x.show=!0};return _(),l({init:_}),(e,a)=>{const t=Na,l=ne,i=ee,n=Q,s=lt;return C(),k("div",null,[y(n,null,{toolsLeft:L(()=>[y(t,{class:"add-btn",type:"primary",onClick:v},{default:L(()=>[E(P(e.$t("Site.Config.index_85")),1)]),_:1})]),table:L(()=>[y(l,{"checked-row-keys":U(o),"onUpdate:checkedRowKeys":a[0]||(a[0]=e=>R(o)?o.value=e:null),"row-key":"proxyname",loading:U(c),"max-height":440,data:U(d).data,columns:U(r)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:L(()=>[y(i,{"checked-row-keys":U(o),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>R(o)?o.value=e:null),"row-key":"proxyname",data:U(d).data,options:u},null,8,["checked-row-keys","data"])]),_:1}),y(s,{show:U(m).show,"onUpdate:show":a[2]||(a[2]=e=>U(m).show=e),title:U(m).title,data:U(m).data,width:660,footer:!0,component:Pi},null,8,["show","title","data"]),y(s,{show:U(x).show,"onUpdate:show":a[3]||(a[3]=e=>U(x).show=e),title:U(x).title,data:U(x).data,width:580,component:Ei},null,8,["show","title","data"])])}}}),Bi={class:"pt-8px"},ji=b({__name:"index",setup(e,{expose:a}){const{data:t}=Ut(),l=S();return a({init:()=>{l.value.init()}}),(e,a)=>(C(),k("div",Bi,[y(ht,{ref_key:"formRef",ref:l,site:U(t)},null,8,["site"])]))}}),Di=b({__name:"index",setup(e,{expose:a}){const{data:t}=Ut(),l=S("None"),{loading:i,setLoading:s}=ie(),o=async()=>{try{s(!0);const{message:e}=await Ea({siteName:t.name});n(e)&&(l.value=d(e.result)?e.result:"None")}finally{s(!1)}};return o(),a({init:o}),(e,a)=>{const t=xt,n=_;return C(),I(n,{class:"h-560px",show:U(i)},{default:L(()=>[y(t,{log:U(l)},null,8,["log"])]),_:1},8,["show"])}}}),Ni=b({__name:"index",setup(e,{expose:a}){const{data:t}=Ut(),l=S("None"),{loading:i,setLoading:s}=ie(),o=async()=>{try{s(!0);const{message:e}=await Ta({siteName:t.name});n(e)&&(l.value=d(e.result)?e.result:"None")}finally{s(!1)}};return o(),a({init:o}),(e,a)=>{const t=xt,n=_;return C(),I(n,{class:"h-560px",show:U(i)},{default:L(()=>[y(t,{log:U(l)},null,8,["log"])]),_:1},8,["show"])}}}),Ii={class:"text-error"},Oi={class:"w-400px p-20px"},Ai={class:"mb-16px"},Mi=b({__name:"index",setup(e,{expose:t}){const{t:i}=g(),s=Z(),{data:o}=Ut(),d=H(()=>{let e="";switch(s.webserver){case"nginx":e=".log";break;case"apache":e="-access_log";break;default:e="_ols.access_log"}return"/www/wwwlogs/".concat(o.name).concat(e)}),r=H(()=>{const e=d.value.split("/");return e[e.length-1]}),u=()=>{ae({title:i("Site.Config.index_104"),content:"".concat(i("Site.Config.index_105")," [").concat(r.value,"] ").concat(i("Site.Config.index_106")),onConfirm:async({hide:e})=>{await Ba({path:d.value}),e(),_()}})},c=S(!1),p=S(0),_=async()=>{c.value=!0,m()},m=(e=0)=>{let a=setTimeout(async()=>{const{message:e}=await ja({path:d.value});n(e)&&(p.value=e.result,p.value>=100?(l.success(i("Site.Config.index_107")),c.value=!1,p.value=0,b(),clearTimeout(a)):m(1e3))},e)},v=e=>{ce({title:"[".concat(e,"] ").concat(i("Site.Config.index_103")),data:{type:e,path:d.value},component:ft})},{table:h,columns:x}=le([{key:"start_time",title:i("Site.Cert.index_68")},{key:"time",title:i("Site.DelSite.index_6"),render:e=>"".concat(e.time.substring(0,4)," s")},{key:"xss",title:i("Site.TableRow.index_4"),render:e=>e.xss>0?y("span",{class:"text-error"},[e.xss]):e.xss},{key:"sql",title:i("Site.TableRow.index_5"),render:e=>e.sql>0?y("span",{class:"text-error"},[e.sql]):e.sql},{key:"san",title:i("Site.TableRow.index_6"),render:e=>e.san>0?y("span",{class:"text-error"},[e.san]):e.san},{key:"php",title:i("Site.TableRow.index_27"),render:e=>e.php>0?y("span",{class:"text-error"},[e.php]):e.php},{key:"ip",title:i("Site.TableRow.index_7"),render:e=>e.ip>0?y(a,{onClick:()=>{v("ip")}},{default:()=>[e.ip]}):e.ip},{key:"url",title:i("Site.TableRow.index_8"),render:e=>e.url>0?y(a,{onClick:()=>{v("url")}},{default:()=>[e.url]}):e.url}]),{loading:f,setLoading:w}=ie(),b=async()=>{try{w(!0);const{message:e}=await Da({path:d.value});n(e)&&(h.data=[e])}finally{w(!1)}},T=()=>{b()};return T(),t({init:T}),(e,t)=>{const l=Na,i=ne,n=Q,s=de,o=Xa,d=lt;return C(),k("div",null,[y(n,null,{toolsLeft:L(()=>[y(l,{type:"primary",onClick:u},{default:L(()=>[E(P(e.$t("Site.Config.index_104")),1)]),_:1})]),table:L(()=>[y(i,{loading:U(f),"loading-num":1,data:U(h).data,columns:U(x)},null,8,["loading","data","columns"])]),_:1}),y(s,{class:"mt-16px"},{default:L(()=>[$("li",null,[E(P(e.$t("Site.Config.index_108"))+" ",1),$("span",Ii,P(e.$t("Site.Config.index_109")),1)]),$("li",null,P(e.$t("Site.Config.index_110")),1),$("li",null,P(e.$t("Site.Config.index_111")),1),$("li",null,P(e.$t("Site.Config.index_112")),1),$("li",null,[y(a,{href:"https://www.aapanel.com/forum/d/3351-nginx-waf-instructions",target:"_blank"},{default:L(()=>[E(P(e.$t("Site.Config.index_113")),1)]),_:1}),E(" "+P(e.$t("Site.Config.index_114")),1)])]),_:1}),y(d,{show:U(c),"onUpdate:show":t[0]||(t[0]=e=>R(c)?c.value=e:null)},{default:L(()=>[$("div",Oi,[$("div",Ai,P(e.$t("Site.Config.index_115")),1),y(o,{type:"line",status:"success",height:24,percentage:U(p),"border-radius":4,"indicator-placement":"inside"},null,8,["percentage"])])]),_:1},8,["show"])])}}}),Hi=b({__name:"index",setup(e,{expose:a}){const{t:t}=g(),{config:l}=Ut(),i=S("access"),n=S(),s=[{key:"access",label:t("Site.Config.index_100"),component:Di},{key:"error",label:t("Site.Config.index_101"),component:Ni},{key:"security",label:t("Site.Config.index_102"),component:Mi}];return i.value=l.subMenu||"access",l.subMenu="",a({init:()=>{i.value="access",z(()=>{var e;null==(e=n.value)||e.init()})}}),(e,a)=>{const t=st;return C(),I(t,{value:U(i),"onUpdate:value":a[0]||(a[0]=e=>R(i)?i.value=e:null),ref_key:"tabsRef",ref:n,options:s},null,8,["value"])}}}),zi={class:"cert-info"},qi={class:"cert-label"},Vi={class:"cert-value"},Fi={class:"cert-info"},Ki={class:"cert-label"},Wi={class:"cert-value"},Xi={class:"cert-info"},Ji={class:"cert-label"},Gi={class:"cert-value"},Yi={class:"cert-info"},Zi={class:"cert-label"},Qi={class:"cert-value"},en={key:0,class:"text-primary"},an={key:1,class:"text-error"},tn={class:"cert-info"},ln={class:"cert-label"},nn={class:"cert-value"},sn={class:"w-48%"},on={class:"mb-8px"},dn={class:"w-48%"},rn={class:"mb-8px"},un=u(b({__name:"index",props:{info:{default:null},isRenew:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["refresh"],setup(e,{expose:t,emit:s}){const o=B(()=>i(()=>import("./ssl-log.js?v=1756367574781"),__vite__mapDeps([36,37,2,3,4,5,6,1,8,7,38]))),d=e,r=s,{t:u}=g(),{data:c}=Ut(),p=se(u("SSL.index_43")),v=Z(),h=S(-1),x=S(!1),f=S(!1),w=S(""),b=S("");let T="";const D=S("");let N="";const O=S({issuer:"",notAfter:"",notBefore:"",dns:[],subject:"",endtime:0}),A=H(()=>h.value===kt.LetsEncryptDeploy?u("Site.Cert.index_65"):h.value===kt.BusinessDeploy?u("Site.Cert.index_64"):h.value===kt.TestDeploy?u("Site.Cert.index_38"):u("Site.Cert.index_37")),M=H(()=>!!D.value),z=H(()=>d.isRenew||h.value===kt.LetsEncryptDeploy),V=H(()=>!1),F=H(()=>x.value),K=async e=>{e?(await yt({siteName:c.name}),r("refresh")):ae({title:u("Site.Cert.index_12"),content:u("Site.Cert.index_13"),onConfirm:async()=>{await wt({siteName:c.name}),r("refresh")},onPublicClose:()=>{f.value=!0}})},W=()=>{""!==b.value.trim()&&""!==D.value.trim()?b.value!==T&&T||D.value!==N&&N?ae({title:u("Site.Cert.index_10"),content:u("Site.Cert.index_11"),onConfirm:async()=>{await X()}}):X():l.error(u("Site.Cert.index_9"))},X=async()=>{const{message:e}=await pe({key:b.value,cert:D.value});n(e)&&e.hash&&(await _e({hash:e.hash,domains:JSON.stringify([c.name]),append:1}),l.success(u("SSL.index_32"))),Y()},J=async()=>{var e;const{message:a}=await me({hash:(null==(e=d.info)?void 0:e.hash)||""});n(a)&&(p.data.path=a.result,p.show=!0)},G=async()=>{await bt({updateOf:1,siteName:c.name}),Y()},Y=()=>{r("refresh"),v.setRefresh(!0)};return q(()=>{const{info:e}=d;e&&(h.value=e.type,x.value=e.status,f.value=e.httpTohttps,b.value=e.key||"",T=e.key||"",D.value=e.csr||"",N=e.csr||"",O.value=e.cert_data,w.value=e.index)}),t({init:r("refresh")}),(e,t)=>{const l=a,i=Ga,n=Ya,s=za,d=m,r=Ja,u=Le,c=Ia,v=Na,h=de,w=lt,g=_;return C(),I(g,{show:e.loading},{default:L(()=>[U(M)?(C(),I(r,{key:0,class:"mb-16px",type:"success","show-icon":!1},{default:L(()=>[y(d,{"x-gap":12,cols:"15"},{default:L(()=>[y(i,{span:"8"},{default:L(()=>[$("div",zi,[$("div",qi,P(e.$t("Site.Cert.index_44"))+P(e.$t("Public.Punctuation.Colon")),1),$("div",Vi,[y(l,null,{default:L(()=>[E(P(U(A)),1)]),_:1})])])]),_:1}),y(i,{span:"7"},{default:L(()=>[$("div",Fi,[$("div",Ki,P(e.$t("Site.Cert.index_45"))+P(e.$t("Public.Punctuation.Colon")),1),$("div",Wi,[y(n,null,{default:L(()=>[E(P(U(O).issuer||"other"),1)]),_:1})])])]),_:1}),y(i,{span:"8"},{default:L(()=>[$("div",Xi,[$("div",Ji,P(e.$t("Site.Cert.index_46"))+P(e.$t("Public.Punctuation.Colon")),1),$("div",Gi,[y(n,null,{default:L(()=>[E(P(U(O).dns.join(e.$t("Public.Punctuation.Comma"))),1)]),_:1})])])]),_:1}),y(i,{span:"7"},{default:L(()=>[$("div",Yi,[$("div",Zi,P(e.$t("Site.Cert.index_47"))+P(e.$t("Public.Punctuation.Colon")),1),$("div",Qi,[U(O).endtime>0?(C(),k("span",en,P(e.$t("Site.Cert.index_48",{date:U(O).notAfter,days:U(O).endtime})),1)):(C(),k("span",an,P(e.$t("Site.Cert.index_47")),1))])])]),_:1}),y(i,{span:"8"},{default:L(()=>[$("div",tn,[$("div",ln,P(e.$t("Site.Cert.index_49"))+P(e.$t("Public.Punctuation.Colon")),1),$("div",nn,[y(s,{value:U(f),"onUpdate:value":[t[0]||(t[0]=e=>R(f)?f.value=e:null),K],size:"small"},null,8,["value"])])])]),_:1})]),_:1})]),_:1})):j("",!0),y(c,{class:"mb-16px",size:10,justify:"space-between"},{default:L(()=>[$("div",sn,[$("div",on,P(e.$t("Site.Cert.index_50")),1),y(u,{value:U(b),"onUpdate:value":t[1]||(t[1]=e=>R(b)?b.value=e:null),rows:10},null,8,["value"])]),$("div",dn,[$("div",rn,P(e.$t("Site.Cert.index_51")),1),y(u,{value:U(D),"onUpdate:value":t[2]||(t[2]=e=>R(D)?D.value=e:null),rows:10},null,8,["value"])])]),_:1}),y(c,{class:"mb-12px"},{default:L(()=>[y(v,{type:"primary",onClick:W},{default:L(()=>[E(P(U(x)?e.$t("Public.Btn.Save"):e.$t("Site.Cert.index_52")),1)]),_:1}),U(z)?(C(),I(v,{key:0,type:"primary",onClick:J},{default:L(()=>[E(P(e.$t("Site.Cert.index_53")),1)]),_:1})):j("",!0),U(V)?(C(),I(v,{key:1},{default:L(()=>[E(P(e.$t("Site.Cert.index_54")),1)]),_:1})):j("",!0),U(F)?(C(),I(v,{key:2,onClick:G},{default:L(()=>[E(P(e.$t("Site.Cert.index_55")),1)]),_:1})):j("",!0)]),_:1}),y(h,null,{default:L(()=>[$("li",null,P(e.$t("Site.Cert.index_33")),1),$("li",null,P(e.$t("Site.Cert.index_34")),1),$("li",null,P(e.$t("Site.Cert.index_35")),1),$("li",null,P(e.$t("Site.Cert.index_36")),1)]),_:1}),y(w,{show:U(p).show,"onUpdate:show":t[3]||(t[3]=e=>U(p).show=e),title:U(p).title,data:U(p).data,width:650,"min-height":450,component:U(o)},null,8,["show","title","data","component"])]),_:1},8,["show"])}}}),[["__scopeId","data-v-092276eb"]]),cn={class:"business-top-tips flex flex-wrap border-#d6e9c6 border-1px rounded-5px p-12px"},pn={class:"text-#3c763d w-100%"},_n=u(b({__name:"top-tips",setup(e){const{t:a}=g(),t=[a("SSL.SiteSSL.index_5"),a("SSL.SiteSSL.index_6"),a("SSL.SiteSSL.index_7"),a("SSL.SiteSSL.index_8"),a("SSL.SiteSSL.index_9"),a("SSL.SiteSSL.index_10"),a("SSL.SiteSSL.index_11")];return(e,a)=>{const l=v,i=Ia;return C(),k("div",cn,[(C(),k(D,null,M(t,(e,a)=>y(i,{size:5,key:e,class:V(["flex-nowrap! leading-20px",{"w-33%":a!==t.length-1}])},{default:L(()=>[y(l,{name:"base-tick",size:16,color:"#ff8d00"}),$("span",pn,P(e),1)]),_:2},1032,["class"])),64))])}}}),[["__scopeId","data-v-77483f61"]]),mn={class:"my-10px"},vn=b({__name:"table",setup(e){const a=B(()=>i(()=>import("./index212.js?v=1756367574781"),__vite__mapDeps([39,27,3,4,6,1,2,5,7,8,28,29,17,40]))),t=B(()=>i(()=>import("./index213.js?v=1756367574781"),__vite__mapDeps([41,42,3,4,5,6,2,1,8,7,43,44]))),l=B(()=>i(()=>import("./domain-verification.js?v=1756367574781"),__vite__mapDeps([45,2,3,4,5,6,1,8,7,29]))),s=Z(),o=c(),{userInfo:d}=F(o),{t:r}=g(),u=T({p:1,limit:9999}),p=se(r("SSL.Business.index_41"),{onRefresh:(e,a)=>{v.data.request=!0,v.data.uc_id=a,v.data.verify=e,v.show=!0,w()}}),_=se(r("SSL.index_44")),m=se(r("SSL.index_49"),{onRefresh:()=>{w(),s.setRefresh(!0)}}),v=se(r("SSL.Business.index_42"),{onRefresh:()=>{w()}}),{table:h,columns:x}=le([{key:"verify_domains",title:r("Layout.Sider.mail_3"),render:e=>y("span",{innerHTML:e.verify_domains&&e.verify_domains.length>0?e.verify_domains.join("<br/>"):"--"},null)},{key:"title",title:r("Site.Cert.index_44"),render:e=>e.order_info.title,ellipsis:{tooltip:!0}},Ct({title:r("SSL.index_54")}),{key:"order_status",title:r("SSL.Business.index_43"),render:e=>{const a=e.order_info;return a.certId||a.domains.length?!a.certId&&a.domains.length?y("span",{class:"color-warning"},[E(" "),r("SSL.Business.index_45"),E(" ")]):"PENDING"===a.order_status&&1===a.status?y("span",{class:"color-warning"},[E(" "),r("SSL.Business.index_46"),E(" ")]):"COMPLETE"===a.order_status&&1===a.status?y("span",{class:"color-#20a53a"},[E(" "),r("SSL.Business.index_47"),E(" ")]):"CANCELLED"===a.order_status&&1===a.status||-1===a.status?y("span",{class:"color-warning"},[E(" "),r("SSL.Business.index_48"),E(" ")]):"FAILED"===a.order_status&&1===a.status?y("span",{class:"color-error"},[E(" "),r("SSL.Business.index_49"),E(" ")]):"EXPIRED"===a.order_status&&1===a.status?y("span",{class:"color-warning"},[E(" "),r("SSL.Business.index_50"),E(" ")]):1!==a.status||["PENDING","COMPLETE","CANCELLED","FAILED","EXPIRED"].includes(a.order_status)?0===a.status?y("span",{class:"color-warning"},[E(" "),r("SSL.Business.index_52"),E(" ")]):void 0:y("span",{class:"color-warning"},[E(" "),r("SSL.Business.index_51"),E(" ")]):y("span",{class:"color-warning cursor-pointer",onClick:()=>f(e)},[" ",r("SSL.Business.index_44")," "])}},oe({width:140,options:e=>[{show:!e.order_info.certId&&!e.order_info.domains.length,label:r("SSL.Business.index_53"),onClick:()=>{f(e)}},{show:"PENDING"===e.order_info.order_status&&1===e.order_info.status,label:r("SSL.Business.index_54"),onClick:async()=>{const{message:a}=await ve({uc_id:e.order_info.uc_id});n(a)&&(v.data.uc_id=e.order_info.uc_id,v.data.verify=a.data,v.data.paths=a.paths,v.show=!0)}},{show:"COMPLETE"===e.order_info.order_status&&1===e.order_info.status,label:r("SSL.index_58"),onClick:async()=>{m.data.row=e,m.show=!0}},{show:"COMPLETE"===e.order_info.order_status&&1===e.order_info.status,label:r("Ftp.Label.index_11"),onClick:async()=>{const a=window.location.origin+"/v2/business_ssl?action=download_cert&uc_id="+e.order_info.uc_id;window.open(a)}},{show:!1,label:r("Public.Btn.Del"),onClick:()=>{ae({title:r("SSL.index_59"),content:r("SSL.index_60"),onConfirm:async()=>{await he({hash:e.hash}),w()}})}}]})]),f=e=>{p.data.row=e,p.show=!0},w=async()=>{try{h.loading=!0;const{message:e}=await xe(u);n(e)&&(h.data=e.data,h.total=e.total)}finally{h.loading=!1}};return d.value.status&&w(),(e,i)=>{const n=Na,s=ne,o=Q,u=lt,c=pt;return C(),k("div",mn,[y(c,{install:U(d).status},{desc:L(()=>[i[6]||(i[6]=$("span",{class:"mr-10px"},"Business certificates require login panel to start using them",-1)),y(n,{type:"primary",onClick:i[0]||(i[0]=()=>U(fe)())},{default:L(()=>[E(P(e.$t("Login.index_3")),1)]),_:1})]),default:L(()=>[y(o,null,{toolsLeft:L(()=>[y(n,{type:"primary",onClick:i[1]||(i[1]=e=>U(_).show=!0)},{default:L(()=>[E(P(U(r)("SSL.index_44")),1)]),_:1})]),table:L(()=>[y(s,{loading:U(h).loading,data:U(h).data,columns:U(x),"max-height":220},null,8,["loading","data","columns"])]),_:1}),y(u,{show:U(_).show,"onUpdate:show":i[2]||(i[2]=e=>U(_).show=e),title:U(_).title,data:U(_).data,"min-height":250,component:$t},null,8,["show","title","data"]),y(u,{show:U(p).show,"onUpdate:show":i[3]||(i[3]=e=>U(p).show=e),title:U(p).title,data:U(p).data,width:650,"min-height":450,component:U(a)},null,8,["show","title","data","component"]),y(u,{show:U(m).show,"onUpdate:show":i[4]||(i[4]=e=>U(m).show=e),title:U(m).title,data:U(m).data,width:720,height:530,component:U(t)},null,8,["show","title","data","component"]),y(u,{show:U(v).show,"onUpdate:show":i[5]||(i[5]=e=>U(v).show=e),title:U(v).title,data:U(v).data,width:650,"min-height":450,component:U(l)},null,8,["show","title","data","component"])]),_:1},8,["install"])])}}}),hn={class:"text-error"};const xn=u({},[["render",function(e,t){const l=a,i=de;return C(),I(i,null,{default:L(()=>[$("li",hn,P(e.$t("SSL.SiteSSL.index_1")),1),$("li",null,P(e.$t("SSL.SiteSSL.index_2")),1),$("li",null,P(e.$t("SSL.SiteSSL.index_3")),1),$("li",null,[E(P(e.$t("SSL.SiteSSL.index_4"))+" ",1),y(l,{href:"https://www.aapanel.com/docs/Function/BusinessCertificate.html",target:"_blank"},{default:L(()=>[E(P(e.$t("SSL.Business.index_20")),1)]),_:1})])]),_:1})}]]),fn=b({__name:"index",setup:e=>(e,a)=>(C(),k("div",null,[y(_n),y(vn),y(xn)]))}),wn={class:"cert-info"},yn={class:"cert-label"},bn={class:"cert-value"},gn={class:"cert-info"},Sn={class:"cert-label"},kn={class:"cert-value"},Cn={class:"cert-info"},$n={class:"cert-label"},Ln={class:"cert-value"},Pn={class:"cert-info"},Rn={class:"cert-label"},Un={class:"cert-value"},En={key:0,class:"text-primary"},Tn={key:1,class:"text-error"},Bn={class:"w-48%"},jn={class:"mb-8px"},Dn={class:"w-48%"},Nn={class:"mb-8px"},In=u(b({__name:"cert",emits:["update"],setup(e,{emit:a}){const t=B(()=>i(()=>import("./ssl-log.js?v=1756367574781"),__vite__mapDeps([36,37,2,3,4,5,6,1,8,7,38]))),l=a,{t:s}=g(),{data:o}=Ut(),d=se(s("SSL.index_43")),r=Z(),u=S(!1),c=S(1),p=S(""),v=S(""),h=T({hash:"",issuer:"",notAfter:"",notBefore:"",dns:[],subject:"",endtime:0}),x=async()=>{const{message:e}=await me({hash:h.hash});n(e)&&(d.data.path=e.result,d.show=!0)},f=async()=>{await bt({updateOf:1,siteName:o.name}),l("update"),r.setRefresh(!0)},{loading:w,setLoading:b}=ie();return(async()=>{try{b(!0);const{message:e}=await gt({siteName:o.name});n(e)&&(u.value=e.status,h.hash=e.hash,h.issuer=e.cert_data.issuer,h.notAfter=e.cert_data.notAfter,h.notBefore=e.cert_data.notBefore,h.dns=e.cert_data.dns,h.subject=e.cert_data.subject,h.endtime=e.cert_data.endtime,p.value=e.key,v.value=e.csr,c.value=e.auto_renew)}finally{b(!1)}})(),(e,a)=>{const l=Ga,i=Ya,n=m,s=Ja,o=Le,r=Ia,u=Na,b=de,g=lt,S=_;return C(),I(S,{show:U(w)},{default:L(()=>[y(s,{class:"mb-16px",type:"success","show-icon":!1},{default:L(()=>[y(n,{"x-gap":12,cols:"15"},{default:L(()=>[U(c)?(C(),I(l,{key:0,span:"16"},{default:L(()=>[$("div",wn,[$("div",yn,P(e.$t("SSL.SiteSSL.index_22"))+"：",1),$("div",bn,P(e.$t("SSL.SiteSSL.index_23")),1)])]),_:1})):j("",!0),y(l,{span:"7"},{default:L(()=>[$("div",gn,[$("div",Sn,P(e.$t("Site.Cert.index_45"))+"：",1),$("div",kn,[y(i,null,{default:L(()=>[E(P(U(h).issuer),1)]),_:1})])])]),_:1}),y(l,{span:"8"},{default:L(()=>[$("div",Cn,[$("div",$n,P(e.$t("Site.Cert.index_46"))+"：",1),$("div",Ln,[y(i,null,{default:L(()=>[E(P(U(h).dns.join(e.$t("Public.Punctuation.Comma"))),1)]),_:1})])])]),_:1}),y(l,{span:"7"},{default:L(()=>[$("div",Pn,[$("div",Rn,P(e.$t("Site.Cert.index_47"))+P(e.$t("Public.Punctuation.Colon")),1),$("div",Un,[U(h).endtime>0?(C(),k("span",En,P(e.$t("Site.Cert.index_48",{date:U(h).notAfter,days:U(h).endtime})),1)):(C(),k("span",Tn,P(e.$t("Site.Cert.index_47")),1))])])]),_:1})]),_:1})]),_:1}),y(r,{class:"mb-16px",size:10,justify:"space-between"},{default:L(()=>[$("div",Bn,[$("div",jn,P(e.$t("Site.Cert.index_50")),1),y(o,{readonly:"",value:U(p),"onUpdate:value":a[0]||(a[0]=e=>R(p)?p.value=e:null),rows:14},null,8,["value"])]),$("div",Dn,[$("div",Nn,P(e.$t("Site.Cert.index_51")),1),y(o,{readonly:"",value:U(v),"onUpdate:value":a[1]||(a[1]=e=>R(v)?v.value=e:null),rows:14},null,8,["value"])])]),_:1}),y(r,{class:"mb-12px"},{default:L(()=>[y(u,{type:"primary",onClick:x},{default:L(()=>[E(P(e.$t("Site.Cert.index_53")),1)]),_:1}),y(u,{onClick:f},{default:L(()=>[E(P(e.$t("Site.Cert.index_55")),1)]),_:1})]),_:1}),y(b,null,{default:L(()=>[$("li",null,P(e.$t("SSL.SiteSSL.index_24")),1),$("li",null,P(e.$t("SSL.SiteSSL.index_25")),1)]),_:1}),y(g,{show:U(d).show,"onUpdate:show":a[2]||(a[2]=e=>U(d).show=e),title:U(d).title,data:U(d).data,width:650,"min-height":450,component:U(t)},null,8,["show","title","data","component"])]),_:1},8,["show"])}}}),[["__scopeId","data-v-3a30f84f"]]),On={class:"flex items-center"},An={class:"leading-17px"},Mn={class:"w-full"},Hn={class:"w-full"},zn={class:"text-error"},qn=b({__name:"apply",emits:["update"],setup(e,{emit:a}){const i=K(),{t:s}=g(),{data:o}=Ut(),d=Z(),u=a,c=T({auth_type:"http",dns_manual:0,auto_wildcard:0,domains:[],all:!1}),p={domains:{required:!0,trigger:"change",type:"array",message:s("SSL.SiteSSL.index_16")}},m=S(null),h=S([]),x=e=>{var a;return null==(a=h.value.find(a=>a.name===e))?void 0:a.auto},f=()=>{i.push("/ssl_domain/domain")},w=H(()=>c.domains.length>0&&c.domains.length<h.value.length);W(()=>c.domains,e=>{e.length===h.value.length?c.all=!0:e.length||(c.all=!1)}),W(()=>c.all,e=>{var a;e?(c.domains=h.value.map(e=>e.name),null==(a=m.value)||a.validate()):c.domains=[]}),W(()=>c.auth_type,e=>{var a;"dns"===e?(c.domains=h.value.filter(e=>e.auto).map(e=>e.name),null==(a=m.value)||a.validate()):c.domains=[]});const b=H(()=>c.domains.filter(e=>!x(e))),R=async()=>{var e;if(await(null==(e=m.value)?void 0:e.validate()),"dns"===c.auth_type&&b.value.length&&!c.dns_manual)return void l.error({content:()=>G("span",{innerHTML:"".concat(b.value.join("<br/>")).concat(s("SSL.SiteSSL.index_14"))})});let a={auth_type:c.dns_manual?"dns_manual":c.auth_type,auto_wildcard:c.auto_wildcard,domains:JSON.stringify(c.domains),site_id:c.dns_manual?o.id:void 0,deploy:c.dns_manual?0:1};if(c.dns_manual&&"dns"===c.auth_type){const{message:e}=await we({site_id:o.id,domains:JSON.stringify(c.domains)});if(n(e)&&Object.keys(e).length)return void ye(e.auths,o.id,c.domains,()=>{u("update"),d.setRefresh(!0)},!0);const t=ce({width:500,height:300,hideClose:!0,component:be});try{const{message:e}=await ge(a,!1);n(e)&&(e.deploy?(l.success(e.result||s("SSL.index_32")),u("update"),d.setRefresh(!0)):Array.isArray(e.auths)&&e.auths.length&&ye(e.auths,o.id,c.domains,()=>{u("update"),d.setRefresh(!0)}))}catch(i){Se(Ma(i,"message",""))}finally{t.hide()}return}const{message:t}=await ge(a);n(t)&&ce({hideClose:!0,data:{isJump:!1,task_id:t.task_id,onFinish:()=>{u("update"),d.setRefresh(!0)}},component:Lt})},{loading:B,setLoading:j}=ie();return O(()=>{(async()=>{try{j(!0);const{message:e}=await Re({id:o.id});if(t(e)){const a=e.map(async e=>{const{message:a}=await ke({domain:e.name});n(a)&&h.value.push({name:e.name,auto:!!a.hash})});await Promise.all(a)}}finally{j(!1)}})()}),(e,a)=>{const t=v,l=Ja,i=Qa,n=r,s=Za,o=Ha,d=qa,u=Ia,g=Fa,S=et,T=_,j=Na,N=it,O=de;return C(),k("div",null,[X(y(l,{"show-icon":!1,class:"mb-10px"},{default:L(()=>[$("div",On,[y(t,{name:"base-info",size:"17",class:"mr-8px"}),$("span",An,P(e.$t("SSL.SiteSSL.index_12")),1)])]),_:1},512),[[J,"dns"===U(c).auth_type]]),y(N,{ref_key:"formRef",ref:m,model:U(c),rules:p,"label-width":"140"},{default:L(()=>[y(o,{label:e.$t("Config.Safe.Ssl.index_2")},{default:L(()=>[y(s,{value:U(c).auth_type,"onUpdate:value":a[0]||(a[0]=e=>U(c).auth_type=e)},{default:L(()=>[y(n,null,{default:L(()=>[y(i,{value:"http"},{default:L(()=>[E(P(e.$t("SSL.SiteSSL.index_17")),1)]),_:1}),y(i,{value:"dns"},{default:L(()=>[E(P(e.$t("SSL.index_12"))+" (Wildcard support) ",1)]),_:1})]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),X(y(o,{label:" ","show-feedback":!1},{default:L(()=>[y(d,{checked:U(c).dns_manual,"onUpdate:checked":a[1]||(a[1]=e=>U(c).dns_manual=e),"checked-value":1,"unchecked-value":0},{default:L(()=>[E(P(e.$t("SSL.index_2")),1)]),_:1},8,["checked"])]),_:1},512),[[J,"dns"===U(c).auth_type]]),X(y(o,{label:" "},{default:L(()=>[y(d,{checked:U(c).auto_wildcard,"onUpdate:checked":a[2]||(a[2]=e=>U(c).auto_wildcard=e),"checked-value":1,"unchecked-value":0},{default:L(()=>[E(P(e.$t("SSL.SiteSSL.index_20")),1)]),_:1},8,["checked"])]),_:1},512),[[J,"dns"===U(c).auth_type]]),y(o,{label:e.$t("Mail.Domain.index_3"),path:"domains"},{default:L(()=>[y(T,{show:U(B),class:"p-12px w-300px max-h-300px min-h-100px overflow-auto border border-solid border-#ccc"},{default:L(()=>[y(d,{class:"mb-12px",checked:U(c).all,"onUpdate:checked":a[3]||(a[3]=e=>U(c).all=e),label:e.$t("Public.SelectAll"),indeterminate:U(w)},null,8,["checked","label","indeterminate"]),U(h).length?(C(),I(g,{key:0,value:U(c).domains,"onUpdate:value":a[4]||(a[4]=e=>U(c).domains=e)},{default:L(()=>[y(u,{class:"flex-col!",size:12},{default:L(()=>[(C(!0),k(D,null,M(U(h),e=>(C(),I(d,{key:e.name,value:e.name,label:e.name},null,8,["value","label"]))),128))]),_:1})]),_:1},8,["value"])):(C(),I(S,{key:1,description:"No domain name"}))]),_:1},8,["show"])]),_:1},8,["label"]),X(y(o,{label:" "},{default:L(()=>[y(l,{"show-icon":!1,type:U(b).length?"warning":"success"},{default:L(()=>[(C(!0),k(D,null,M(U(c).domains,a=>(C(),I(u,{key:a},{default:L(()=>[x(a)?(C(),I(u,{key:0,class:"flex-nowrap! py-3px"},{default:L(()=>[y(t,{name:"base-success",size:"17",color:"#20a53a"}),$("span",Mn,"["+P(a)+"] "+P(e.$t("SSL.SiteSSL.index_13")),1)]),_:2},1024)):(C(),I(u,{key:1,class:"flex-nowrap! py-3px"},{default:L(()=>[y(t,{name:"base-error",size:"17",color:"#E85445"}),$("span",Hn,"["+P(a)+"] "+P(e.$t("SSL.SiteSSL.index_14")),1),y(j,{type:"primary",size:"tiny",onClick:f},{default:L(()=>[E(P(e.$t("SSL.SiteSSL.index_21")),1)]),_:1})]),_:2},1024))]),_:2},1024))),128))]),_:1},8,["type"])]),_:1},512),[[J,"dns"===U(c).auth_type&&U(c).domains.length&&!U(c).dns_manual]]),y(o,{label:" "},{default:L(()=>[y(j,{type:"primary",onClick:R},{default:L(()=>[E(P(e.$t("Public.Btn.Apply")),1)]),_:1})]),_:1})]),_:1},8,["model"]),X(y(O,{class:"mt-16px"},{default:L(()=>[$("li",zn,P(e.$t("SSL.SiteSSL.index_15")),1),$("li",null,P(e.$t("Site.Cert.index_21")),1),$("li",null,P(e.$t("Site.Cert.index_23")),1),$("li",null,P(e.$t("Site.Cert.index_24")),1)]),_:1},512),[[J,"http"===U(c).auth_type]]),X(y(O,{class:"mt-24px"},{default:L(()=>[a[5]||(a[5]=$("li",null,"Manually resolved certificates do not support auto-renewal",-1)),$("li",null,P(e.$t("Site.Cert.index_25")),1),$("li",null,P(e.$t("Site.Cert.index_26")),1),$("li",null,P(e.$t("Site.Cert.index_27")),1),$("li",null,P(e.$t("Site.Cert.index_28")),1)]),_:1,__:[5]},512),[[J,"dns"===U(c).auth_type]])])}}}),Vn=b({__name:"index",props:{isOpen:{type:Boolean},type:{},onRefresh:{type:Function}},setup(e){const a=e,t=()=>{a.onRefresh()};return(e,l)=>(C(),k("div",null,[a.isOpen&&"Let's Encrypt"===a.type?(C(),I(In,{key:0,onUpdate:t})):(C(),I(qn,{key:1,onUpdate:t}))]))}}),Fn=b({__name:"index",props:{onMenuChange:{type:Function}},setup(e,{expose:a}){const{data:t}=Ut(),{t:i}=g(),s=T({p:1,limit:99999}),{columns:o,table:d}=le([{key:"domain",title:i("Site.Cert.index_29"),render:e=>y("span",{innerHTML:e.verify_domains.length>0?e.verify_domains.join("<br/>"):"--"},null)},Ct({title:i("SSL.index_54"),width:140}),{key:"issuer",title:i("Site.Cert.index_30"),ellipsis:{tooltip:!0}},oe({width:150,options:a=>[{label:i("Public.Btn.Deploy"),onClick:async()=>{try{await _e({hash:a.hash,domains:JSON.stringify([t.name]),append:1}),l.success(i("SSL.index_32")),setTimeout(()=>{e.onMenuChange()},500)}catch(n){console.log(n)}}},{show:"Let's Encrypt"===a.provider,label:i("Public.Btn.Del"),onClick:()=>{(e=>{Ce({title:i("Site.Cert.index_31"),content:i("Site.Cert.index_32"),onConfirm:async()=>{await he({hash:e.hash}),c()}})})(a)}}]})]),{loading:r,setLoading:u}=ie(!0),c=async()=>{try{u(!0);const{message:e}=await $e(s);n(e)&&(d.data=e.data)}finally{u(!1)}};return c(),a({init:c}),(e,a)=>{const t=ne;return C(),k("div",null,[y(t,{loading:U(r),columns:U(o),data:U(d).data,"max-height":510},null,8,["loading","columns","data"])])}}}),Kn={class:"mr-12px"},Wn={key:0,class:"mr-12px"},Xn={key:1,class:"mr-12px"},Jn=b({__name:"index",setup(e,{expose:a}){const t=B(()=>i(()=>import("./ssl-log.js?v=1756367574781"),__vite__mapDeps([36,37,2,3,4,5,6,1,8,7,38]))),l=Z(),{data:s}=Ut(),{t:o}=g(),d=S("current"),r=S(""),u=se(o("SSL.index_43")),c=S(kt.NotDeploy),p=S(""),_=S(!1),m=S(0),v=S(""),h=S(!1),x=async()=>{const{message:e}=await me({hash:r.value});n(e)&&(u.data.path=e.result,u.show=!0)},f=e=>{b.value[0].data&&(b.value[0].data.loading=e)},w=async()=>{try{f(!0);const{message:t}=await St({siteName:s.name});n(t)&&(c.value=t.type,_.value=t.status,m.value=Ma(t,"cert_data.endtime",0),v.value=t.cert_data.issuer_O||"",h.value=(()=>{let e=!1;return m.value<=30&&(e=!0),c.value===kt.TestDeploy&&m.value<0&&(e=!0),c.value!==kt.SaveOrHolderDeploy&&c.value!==kt.NotDeploy||(e=!1),e})(),p.value=t.cert_data.dns.join(","),r.value=t.hash,a=t,b.value[0].data&&(b.value[0].data.info=a),e=h.value,b.value[0].data&&(b.value[0].data.isRenew=e))}catch(t){_.value=!1,h.value=!1}finally{f(!1)}var e,a},b=S([{key:"current",label:()=>y("div",null,[y("span",null,[E("Current Certs - ")]),y("span",{class:_.value?"text-#1d9534":"text-red-500"},[E("["),_.value?"Deployed":"Not Deployed",E("]")])]),data:{info:null,isRenew:!1,loading:!0,onRefresh:w},component:Y(un)},{key:"business",label:o("Site.Cert.index_64"),component:Y(fn)},{key:"let",label:o("Site.Cert.index_65"),data:{isOpen:H(()=>_.value),type:H(()=>v.value),onRefresh:w},component:Y(Vn)},{key:"holder",label:o("Site.Cert.index_66"),component:Y(Fn),data:{onMenuChange:()=>{d.value="current",w(),l.setRefresh(!0)}}}]);return a({init:()=>{w()}}),(e,a)=>{const l=Na,i=Ja,n=st,s=lt;return C(),k("div",null,[U(_)?j("",!0):(C(),I(i,{key:0,class:"mb-12px",type:"error","show-icon":!1,style:{"--n-padding":"9px 16px"}},{default:L(()=>[$("span",Kn,P(e.$t("Site.Cert.index_41")),1),y(l,{size:"tiny",type:"primary",onClick:a[0]||(a[0]=e=>d.value="business")},{default:L(()=>[E(P(e.$t("Site.Cert.index_43")),1)]),_:1})]),_:1})),U(_)&&U(h)?(C(),I(i,{key:1,class:"mb-12px",type:"error","show-icon":!1,style:{"--n-padding":"9px 16px"}},{default:L(()=>[U(m)>0?(C(),k("span",Wn,P(e.$t("SSL.SiteSSL.index_26",[U(p),U(m)])),1)):(C(),k("span",Xn,P(e.$t("SSL.SiteSSL.index_19",[U(p)])),1)),y(l,{size:"tiny",type:"primary",onClick:x},{default:L(()=>[E(P(e.$t("Site.Cert.index_53")),1)]),_:1})]),_:1})):j("",!0),y(n,{value:U(d),"onUpdate:value":a[1]||(a[1]=e=>R(d)?d.value=e:null),options:U(b)},null,8,["value","options"]),y(s,{show:U(u).show,"onUpdate:show":a[2]||(a[2]=e=>U(u).show=e),title:U(u).title,data:U(u).data,width:650,"min-height":450,component:U(t)},null,8,["show","title","data","component"])])}}}),Gn={class:"w-full ml-12px"},Yn={class:"w-full ml-12px"},Zn=u(b({__name:"index",setup(e){const a=c(),{isPro:t}=F(a),{data:l}=Ut(),i=T({maintenance:!1,type:"default",maintenance_title:"",maintenance_big_text:"",maintenance_small_text:"",social_network_links:[],times:null,template_upload:"",background_upload:""}),s=()=>{i.social_network_links.push({title:"",value:""})},o=e=>{const a=l.path;Pt({path:a,uploadData:{multiple:!1,accept:"bg"===e?".jpg,.jpeg,.png,.gif,.svg,.webp":".html,.phtml,.php"},size:10,onUploadSuccess:t=>{"bg"===e?i.background_upload="".concat(a,"/").concat(t[0].name):i.template_upload="".concat(a,"/").concat(t[0].name)}})},d=()=>{re({source:371})},r=e=>e<Date.now()-864e5,u=async()=>{const e={set_id:l.id,...i,social_network_links:JSON.stringify(i.social_network_links),template_upload:"custom"===i.type?i.template_upload:""};await ut(e),v()},{loading:p,setLoading:m}=ie(),v=async()=>{try{m(!0);const{message:e}=await ct({set_id:l.id});n(e)&&(i.maintenance="true"===e.maintenance,i.maintenance_title=e.maintenance_title,i.maintenance_big_text=e.maintenance_big_text,i.maintenance_small_text=e.maintenance_small_text,i.social_network_links=e.social_network_links.length?e.social_network_links:[{title:"",value:""}],i.times=Number(e.times)||null,i.template_upload=e.template_upload,i.background_upload=e.background_upload,i.type=e.template_upload?"custom":"default")}finally{m(!1)}};return t.value&&v(),(e,a)=>{const l=Na,n=za,c=Ha,m=at,v=Za,x=Oa,f=tt,w=Ia,b=h,g=nt,S=it,R=de,T=_,B=pt;return C(),I(B,{install:U(t)},{desc:L(()=>[a[11]||(a[11]=$("span",null,"This feature is only available for Pro",-1)),y(l,{class:"ml-8px",onClick:d,type:"primary",size:"small"},{default:L(()=>a[10]||(a[10]=[E("Buy",-1)])),_:1,__:[10]})]),default:L(()=>[y(T,{show:U(p),class:"pr-16px"},{default:L(()=>[y(S,{model:U(i),"label-width":"150"},{default:L(()=>[y(c,{label:"Maintenance Mode"},{default:L(()=>[y(n,{value:U(i).maintenance,"onUpdate:value":a[0]||(a[0]=e=>U(i).maintenance=e)},null,8,["value"]),a[12]||(a[12]=$("span",{class:"tips"},"Enable maintenance mode to prevent users from accessing your website while it is being updated or when you are performing maintenance tasks.",-1))]),_:1,__:[12]}),y(c,{label:"Template"},{default:L(()=>[y(v,{value:U(i).type,"onUpdate:value":a[1]||(a[1]=e=>U(i).type=e)},{default:L(()=>[y(m,{label:"Default",value:"default"}),y(m,{label:"Custom",value:"custom"})]),_:1},8,["value"])]),_:1}),"default"===U(i).type?(C(),k(D,{key:0},[y(c,{label:"Browser Page Title"},{default:L(()=>[y(x,{value:U(i).maintenance_title,"onUpdate:value":a[2]||(a[2]=e=>U(i).maintenance_title=e)},null,8,["value"])]),_:1}),y(c,{label:"Text Block 1 (Larger)"},{default:L(()=>[y(x,{value:U(i).maintenance_big_text,"onUpdate:value":a[3]||(a[3]=e=>U(i).maintenance_big_text=e),maxlength:200},null,8,["value"])]),_:1}),y(c,{label:"Text Block 2 (Smaller)"},{default:L(()=>[y(x,{type:"textarea",value:U(i).maintenance_small_text,"onUpdate:value":a[4]||(a[4]=e=>U(i).maintenance_small_text=e),maxlength:300},null,8,["value"])]),_:1}),y(c,{label:"Social Network Links"},{default:L(()=>[y(w,null,{default:L(()=>[(C(!0),k(D,null,M(U(i).social_network_links,(e,t)=>(C(),I(w,{class:"flex-nowrap!",key:t},{default:L(()=>[y(x,{class:"w-150px!",value:e.title,"onUpdate:value":a=>e.title=a,placeholder:"Title"},null,8,["value","onUpdate:value"]),y(x,{class:"w-200px!",value:e.value,"onUpdate:value":a=>e.value=a,placeholder:"https://www.aapanel.com/"},null,8,["value","onUpdate:value"]),y(f,null,{default:L(()=>[y(l,{onClick:a=>(e=>{i.social_network_links=i.social_network_links.filter(a=>a!==e)})(e),disabled:1===U(i).social_network_links.length},{default:L(()=>a[13]||(a[13]=[E("-",-1)])),_:2,__:[13]},1032,["onClick","disabled"]),y(l,{onClick:s,disabled:U(i).social_network_links.length>=5},{default:L(()=>a[14]||(a[14]=[E("+",-1)])),_:1,__:[14]},8,["disabled"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),y(c,{label:"Auto-recovery Time"},{default:L(()=>[y(b,{value:U(i).times,"onUpdate:value":a[5]||(a[5]=e=>U(i).times=e),type:"datetime",clearable:"","is-date-disabled":r},null,8,["value"])]),_:1}),y(c,{ref:"dbBakFileRef",label:"Background Image",path:"db_bak_file"},{default:L(()=>[y(l,{onClick:a[6]||(a[6]=e=>o("bg"))},{default:L(()=>[E(P(e.$t("Docker.App.Backup.index_3")),1)]),_:1}),$("div",Gn,[y(g,{value:U(i).background_upload,"onUpdate:value":a[7]||(a[7]=e=>U(i).background_upload=e),"default-path":"/www/wwwroot","checked-type":["file"]},null,8,["value"])])]),_:1},512)],64)):j("",!0),"custom"===U(i).type?(C(),I(c,{key:1,label:"Template Upload"},{default:L(()=>[y(l,{onClick:a[8]||(a[8]=e=>o("template"))},{default:L(()=>[E(P(e.$t("Docker.App.Backup.index_3")),1)]),_:1}),$("div",Yn,[y(g,{value:U(i).template_upload,"onUpdate:value":a[9]||(a[9]=e=>U(i).template_upload=e),"default-path":"/www/wwwroot","checked-type":["file"]},null,8,["value"])])]),_:1})):j("",!0),y(c,{label:" "},{default:L(()=>[y(l,{type:"primary",onClick:u},{default:L(()=>[E(P(e.$t("Public.Btn.Save")),1)]),_:1})]),_:1})]),_:1},8,["model"]),y(R,null,{default:L(()=>[a[15]||(a[15]=$("li",{class:"text-warning font-bold"}," Please close and clear the cache before turning on maintenance mode. ",-1)),a[16]||(a[16]=$("li",null," Note: To avoid your website being downgraded by indexing engines, please do not enable maintenance mode for a long time. ",-1)),X($("li",null," Recommend uploading HTML files for templates, and use data URLs for static files of templates. ",512),[[J,"custom"===U(i).type]])]),_:1,__:[15,16]})]),_:1},8,["show"])]),_:1},8,["install"])}}}),[["__scopeId","data-v-150ccdef"]]),Qn={class:"h-full"},es=b({__name:"index",props:{siteInfo:{},config:{}},setup(e){const{t:a}=g(),t=Z(),{siteName:l}=F(t),n=B(()=>i(()=>import("./index265.js?v=1756367574781"),__vite__mapDeps([46,27,3,4,6,1,2,5,7,8,28,29,31,22,9,10,11,12,13,14,15,16,17,18,19,20,21,23,24,25,26,30,32,33,34,35,42,43,47,48,49,50,51,52,53,54,55,37,38,56,57,58,59,60,61,62,63,64,65]))),s=e,{siteInfo:o,config:d}=s;l.value=s.siteInfo.name;const r=S();o&&w(Rt,{data:o,config:d});const u=S("domain"),c=[{key:"domain",label:a("Site.Config.index_1"),component:Nt},{key:"subdirectory",label:a("Site.Config.index_3"),component:At},{key:"directory",label:a("Site.Config.index_4"),component:Qt},{key:"access",label:a("Site.Config.index_5"),component:_l},{key:"traffic",label:a("Site.Config.index_6"),component:Cl},{key:"rewrite",label:a("Site.Config.index_7"),component:n},{key:"document",label:a("Site.Config.index_9"),component:Pl},{key:"config",label:a("Site.Config.index_10"),component:Ul},{key:"ssl",label:()=>y(D,null,[a("Site.Config.index_11")]),component:Jn},{key:"php",label:a("Site.Config.index_12"),component:Fl},{key:"wordpress",label:"Wordpress Setting",show:"WP"===(null==o?void 0:o.project_type),component:Gl},{key:"composer",label:a("Site.Config.index_20"),component:di},{key:"redirect",label:a("Site.Config.index_21"),component:wi},{key:"proxy",label:a("Site.Config.index_23"),component:Ti},{key:"hotlink",label:a("Site.Config.index_24"),component:ji},{key:"maintenance",label:"Maintenance Mode",component:Zn},{key:"logs",label:a("Site.Config.index_25"),component:Hi}];return u.value=d.menu||"domain",d.menu="",O(()=>{window.siteConfigInit=r.value.init}),(e,a)=>{const t=x;return C(),k("div",Qn,[y(t,{value:U(u),"onUpdate:value":a[0]||(a[0]=e=>R(u)?u.value=e:null),ref_key:"tabsRef",ref:r,data:c},null,8,["value"])])}}}),as=Object.freeze(Object.defineProperty({__proto__:null,default:es},Symbol.toStringTag,{value:"Module"}));export{as as i,Ut as u};
