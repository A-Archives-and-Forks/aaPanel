System.register(["./page_layout-legacy.js?v=1741416570306","./index-legacy.js?v=1741416570306","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1741416570306","./index.vue_vue_type_script_setup_true_lang-legacy12.js?v=1741416570306","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1741416570306","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1741416570306","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1741416570306","./public-legacy.js?v=1741416570306","./mail-legacy.js?v=1741416570306","./naive-legacy.js?v=1741416570306","./vue-legacy.js?v=1741416570306","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1741416570306","./upload-legacy.js?v=1741416570306","./common-legacy.js?v=1741416570306","./__commonjsHelpers__-legacy.js?v=1741416570306","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1741416570306"],(function(e,a){"use strict";var l,t,i,n,s,o,u,d,r,c,p,_,m,x,v,h,w,f,g,b,M,y,k,B,$,j,q,P,C,U,E,S,z,A,R,L,G,T,W,D,V,F,I,H,K,Q,Z,N,O,J,X,Y,ee,ae,le,te,ie,ne,se;return{setters:[e=>{l=e.u,t=e.b,i=e.k,n=e.G,s=e.h,o=e.H,u=e.av,d=e.a,r=e.bQ},e=>{c=e._},e=>{p=e._},e=>{_=e._},e=>{m=e._},e=>{x=e._},e=>{v=e._},e=>{h=e.e,w=e.d,f=e.b,g=e.F,b=e.f,M=e.h,y=e.a,k=e.u},e=>{B=e.q,$=e.r,j=e.t,q=e.c,P=e.u,C=e.v,U=e.w,E=e.x,S=e.y},e=>{z=e.T,A=e._,R=e.cb,L=e.bS,G=e.ch,T=e.bV,W=e.ce},e=>{D=e.d,V=e.t,F=e.P,I=e.Q,H=e.N,K=e.$,Q=e.R,Z=e.a0,N=e.c,O=e.M,J=e.r,X=e.j,Y=e.S,ee=e._,ae=e.ah,le=e.aa,te=e.ae,ie=e.W},e=>{ne=e._},e=>{se=e.o},null,null,null],execute:function(){var oe=document.createElement("style");oe.textContent=".n-button[data-v-1fc88131]{padding:0 24px;--n-height: 40px;--n-border-radius: 2px;--n-color: #eee;--n-text-color: #333;--n-border: none;--n-color-hover: #20a53a;--n-border-hover: 1px solid #20a53a;--n-text-color-hover: #fff;--n-color-focus: #20a53a;--n-text-color-focus: #fff;--n-border-focus: 1px solid #20a53a}.bg-recommend[data-v-1fc88131]{position:absolute;width:32px;height:32px;top:-1px;left:-1px;background-image:url(/static/vite/images/recommend.svg);background-repeat:no-repeat;background-position:center;background-size:contain}\n",document.head.appendChild(oe);const ue={class:"flex justify-center p-32px"},de=i(D({__name:"login",props:{row:{},info:{}},setup(e){const a=e,i=V(a,"row"),n=V(a,"info"),s=l(),o=async()=>{if(s.isFree)return void h({source:221});const{message:e}=await B({rc_user:i.value.username,rc_pass:i.value.password});t(e)&&window.open(`${n.value.ssl_status?"https":"http"}://${e.result}`)},u=()=>{window.open(`${n.value.ssl_status?"https":"http"}://${n.value.site_name}`)};return(e,a)=>{const l=z;return F(),I("div",ue,[H(l,{onClick:o},{default:K((()=>[Q("span",null,Z(e.$t("Database.PhpAdmin.index_11")),1),a[0]||(a[0]=Q("span",{class:"bg-recommend"},null,-1))])),_:1}),H(l,{class:"ml-32px",onClick:u},{default:K((()=>[N(Z(e.$t("Database.PhpAdmin.index_6")),1)])),_:1})])}}}),[["__scopeId","data-v-1fc88131"]]),re={class:"p-20px"},ce={class:"w-280px"},pe={class:"w-100px ml-10px"},_e={class:"w-280px"},me={class:"w-130px"},xe={class:"w-140px ml-10px"},ve={class:"w-280px"},he=D({__name:"index",props:{row:{},isEdit:{type:Boolean}},emits:["refresh"],setup(e,{expose:a,emit:l}){const t=e,i=l,{isEdit:u}=t,{t:d}=O(),r=J(null),c=X({full_name:"",domain:null,quota:5,quota_unit:"GB",is_admin:0,username:"",password:"",active:1}),p=J([]),_=[{label:"GB",value:"GB"},{label:"MB",value:"MB"}],m=[{label:d("Mail.MailBox.index_19"),value:0},{label:d("Mail.MailBox.index_20"),value:1}],x={full_name:{trigger:["blur","input"],validator:()=>""!==c.full_name.trim()||new Error(d("Mail.MailBox.index_21"))},username:{trigger:["blur","input"],validator:()=>""!==c.username.trim()||new Error(d("Mail.MailBox.index_22"))},quota:{trigger:["blur","input"],validator:()=>(console.log(c.quota),!!c.quota||new Error(d("Mail.MailBox.index_23")))},password:{trigger:["blur","input"],validator:()=>{if(u){if(c.password&&c.password.trim().length<8)return new Error(d("Mail.MailBox.index_26"));const e=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$/;if(c.password&&!e.test(c.password))return new Error(d("Mail.MailBox.index_27"))}else{if(c.password.trim().length<8)return new Error(d("Mail.MailBox.index_24"));if(!/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$/.test(c.password))return new Error(d("Mail.MailBox.index_25"))}return!0}}},v=()=>({full_name:c.full_name,quota:c.quota+" "+c.quota_unit,is_admin:c.is_admin,username:c.username+"@"+c.domain,password:c.password,active:c.active});return(async()=>{const{message:e}=await q();n(e)&&(p.value=e.map((e=>({label:e,value:e}))),null===c.domain&&(c.domain=e[0]))})(),(()=>{const{row:e,isEdit:a}=t;if(a&&e){c.full_name=e.full_name,c.is_admin=e.is_admin,c.username=e.username.split("@")[0],c.active=e.active;const[a,l]=e.username.split("@");c.username=a,c.domain=l;const t=s(e.quota),[i,n]=t.split(" ");c.quota=o(i),c.quota_unit=n}})(),a({onConfirm:async()=>{await(r.value?.validate()),u?await $(v()):await j(v()),i("refresh")}}),(e,a)=>{const l=A,t=R,i=L,n=G,s=T,o=ne;return F(),I("div",re,[H(o,{ref_key:"formRef",ref:r,model:Y(c),rules:x},{default:K((()=>[H(t,{label:e.$t("Mail.MailBox.index_10"),path:"full_name"},{default:K((()=>[Q("div",ce,[H(l,{value:Y(c).full_name,"onUpdate:value":a[0]||(a[0]=e=>Y(c).full_name=e),placeholder:e.$t("Mail.MailBox.index_11")},null,8,["value","placeholder"])])])),_:1},8,["label"]),H(t,{label:e.$t("Mail.MailBox.index_3"),path:"quota"},{default:K((()=>[H(i,{value:Y(c).quota,"onUpdate:value":a[1]||(a[1]=e=>Y(c).quota=e),class:"w-170px",min:0,"show-button":!1,placeholder:e.$t("Mail.MailBox.index_12")},null,8,["value","placeholder"]),Q("div",pe,[H(n,{value:Y(c).quota_unit,"onUpdate:value":a[2]||(a[2]=e=>Y(c).quota_unit=e),options:_},null,8,["value"])])])),_:1},8,["label"]),H(t,{label:e.$t("Mail.MailBox.index_13"),path:"is_admin"},{default:K((()=>[Q("div",_e,[H(n,{value:Y(c).is_admin,"onUpdate:value":a[3]||(a[3]=e=>Y(c).is_admin=e),options:m},null,8,["value"])])])),_:1},8,["label"]),H(t,{label:e.$t("Mail.MailBox.index_14"),path:"username"},{default:K((()=>[Q("div",me,[H(l,{value:Y(c).username,"onUpdate:value":a[4]||(a[4]=e=>Y(c).username=e),disabled:Y(u),placeholder:e.$t("Mail.MailBox.index_15")},null,8,["value","disabled","placeholder"])]),Q("div",xe,[H(n,{value:Y(c).domain,"onUpdate:value":a[5]||(a[5]=e=>Y(c).domain=e),disabled:Y(u),filterable:!0,options:Y(p)},null,8,["value","disabled","options"])])])),_:1},8,["label"]),H(t,{label:e.$t("Mail.MailBox.index_16"),path:"password"},{default:K((()=>[Q("div",ve,[H(l,{value:Y(c).password,"onUpdate:value":a[6]||(a[6]=e=>Y(c).password=e),placeholder:Y(u)?e.$t("Mail.MailBox.index_17"):e.$t("Mail.MailBox.index_18")},null,8,["value","placeholder"])])])),_:1},8,["label"]),H(t,{label:e.$t("Public.Table.Status"),path:"active","show-feedback":!1},{default:K((()=>[H(s,{value:Y(c).active,"onUpdate:value":a[7]||(a[7]=e=>Y(c).active=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"])])),_:1},8,["model"])])}}}),we={class:"w-220px mr-8px"},fe="/www/server/panel/data/mail";e("default",D({__name:"index",setup(e){const i=ie((()=>d((()=>a.import("./batch-legacy2.js?v=1741416570306")),void 0))),{t:o}=O(),B=l(),j=ae(),A=J([]),R=()=>{A.value.unshift({label:o("Public.All"),value:"all"})},L=({option:e})=>`${o("Mail.MailBox.index_29")}${e.label}`,D=()=>{se({path:fe,uploadData:{accept:".json",multiple:!1},onUploadSuccess:async e=>{const a=fe+e[0].fullPath;await S({file:a}),ye()}})},V=async()=>{const{message:e}=await U({domain:I.domain});t(e)&&r(e.result)},I=X({p:1,size:10,domain:"all",search:""}),ne=w("",{isEdit:!1,row:void 0,onRefresh:()=>{ye()}}),oe=()=>{ne.data.isEdit=!1,ne.data.row=void 0,ne.title=o("Mail.MailBox.index_1"),ne.show=!0},ue=()=>{B.isFree?h({source:327}):ke.show=!0},re=()=>{if(Me.site_name)window.open(`${Me.ssl_status?"https":"http"}://${Me.site_name}`);else{const{hide:e}=y({title:o("Mail.MailBox.index_5"),content:()=>H(le,{tag:"div",keypath:"Mail.MailBox.index_6",scope:"global"},{link_1:()=>H("a",{class:"bt-link",href:"javascript:;",onClick:()=>{j.push("/mail/settings"),e()}},[o("Layout.Sider.mail_1"),N(" > "),o("Layout.Sider.mail_12")])}),onConfirm:()=>{j.push("/mail/settings")}})}},{keys:ce,table:pe,columns:_e}=f([{type:"selection",width:40},{key:"username",title:o("Public.Table.Username"),ellipsis:{tooltip:!0}},g({width:160}),{key:"info",title:o("Mail.MailBox.index_2"),width:180,render:e=>H("a",{class:"bt-link",href:"javascript:;",onClick:()=>{xe(e)}},[o("Public.Btn.Copy")])},{key:"quota",title:o("Mail.MailBox.index_3"),render:e=>s(e.quota)},{key:"is_admin",title:o("Mail.MailBox.index_4"),render:e=>1===e.is_admin?"Admin":"General user"},{key:"active",title:o("Public.Table.Status"),render:e=>H(T,{value:e.active,size:"small",checkedValue:1,uncheckedValue:0,onUpdateValue:async a=>{await $({username:e.username,full_name:e.full_name,quota:s(e.quota),active:a,is_admin:e.is_admin}),e.active=a}},null)},b({width:150,options:e=>[{label:"WebMail",onClick:()=>{if(Me.status)ve(e);else{const{hide:e}=y({title:o("Mail.MailBox.index_5"),content:()=>H(le,{tag:"div",keypath:"Mail.MailBox.index_6",scope:"global"},{link_1:()=>H("a",{class:"bt-link",href:"javascript:;",onClick:()=>{j.push("/mail/settings"),e()}},[o("Layout.Sider.mail_1"),N(" > "),o("Layout.Sider.mail_12")])}),onConfirm:()=>{j.push("/mail/settings")}})}}},{label:o("Public.Btn.Edit"),onClick:()=>{ge(e)}},{label:o("Public.Btn.Del"),onClick:()=>{be(e)}}]})]),me=[{key:"delete",type:"confirm",label:o("Site.Batch.index_21"),confirm:{title:o("Site.Batch.index_21"),desc:o("Site.Batch.index_11"),columns:[{..._e.value[1],width:"auto"}],api:e=>P({username:e.username},!1),done:()=>{ye()}}}],xe=e=>{M(`WebMail: ${Me.ssl_status?"https":"http"}://${Me.site_name}\nUsername: ${e.username}\nPassword: ${e.password}\nPOP service [ Address: ${e.mx} Port: 110/995 ]\nIMAP service [ Address: ${e.mx} Port: 143/993 ]\nSMTP service [ Address: ${e.mx} Port: 25/465/587 ]\n`)},ve=async e=>{k({title:"WebMail",width:400,data:{row:e,info:Me},component:de})},ge=e=>{ne.data.isEdit=!0,ne.data.row=e,ne.title=o("Mail.MailBox.index_7"),ne.show=!0},be=async e=>{y({title:o("Mail.MailBox.index_8"),content:o("Mail.MailBox.index_9",[e.username]),onConfirm:async()=>{await P({username:e.username}),ye()}})},Me=X({id:0,site_name:"",status:!1,ssl_status:!1}),ye=async()=>{try{pe.loading=!0;const{message:e}=await C({p:I.p,size:I.size,search:I.search,..."all"!==I.domain?{domain:I.domain}:{}});t(e)&&(pe.data=n(e.data)?e.data:[],pe.total=u(e.page))}finally{pe.loading=!1,ce.value=[]}},ke=w(o("Mail.MailBox.index_31"),{getList:ye}),Be=()=>{I.p=1,ye()};return R(),(async()=>{const{message:e}=await q();n(e)&&(A.value=e.map((e=>({label:e,value:e}))),R())})(),(async()=>{try{pe.loading=!0,await(async()=>{const{message:e}=await E();t(e)&&(Me.id=e.id,Me.status=e.status,Me.site_name=e.site_name,Me.ssl_status=e.ssl_status)})(),await ye()}finally{pe.loading=!1}})(),(e,a)=>{const l=z,t=G,n=v,s=x,o=m,u=_,d=p,r=c,h=W;return F(),ee(h,{class:"p-16px"},{default:K((()=>[H(d,null,{toolsLeft:K((()=>[H(l,{type:"primary",onClick:oe},{default:K((()=>[N(Z(e.$t("Mail.MailBox.index_1")),1)])),_:1}),H(l,{onClick:ue},{default:K((()=>[N(Z(e.$t("Mail.MailBox.index_30")),1)])),_:1}),H(l,{onClick:re},{default:K((()=>a[8]||(a[8]=[N("WebMail")]))),_:1}),H(l,{onClick:D},{default:K((()=>[N(Z(e.$t("Public.Btn.Import")),1)])),_:1}),H(l,{onClick:V},{default:K((()=>[N(Z(e.$t("Public.Btn.Export")),1)])),_:1})])),toolsRight:K((()=>[Q("div",we,[H(t,{value:Y(I).domain,"onUpdate:value":[a[0]||(a[0]=e=>Y(I).domain=e),Be],options:Y(A),"render-tag":L,filterable:!0},null,8,["value","options"])]),H(n,{value:Y(I).search,"onUpdate:value":a[1]||(a[1]=e=>Y(I).search=e),width:"280",placeholder:e.$t("Mail.MailBox.index_28"),onSearch:Be},null,8,["value","placeholder"])])),table:K((()=>[H(s,{"row-key":"username","checked-row-keys":Y(ce),"onUpdate:checkedRowKeys":a[2]||(a[2]=e=>te(ce)?ce.value=e:null),loading:Y(pe).loading,data:Y(pe).data,columns:Y(_e)},null,8,["checked-row-keys","loading","data","columns"])])),pageRight:K((()=>[H(o,{page:Y(I).p,"onUpdate:page":a[3]||(a[3]=e=>Y(I).p=e),"page-size":Y(I).size,"onUpdate:pageSize":a[4]||(a[4]=e=>Y(I).size=e),"item-count":Y(pe).total,onRefresh:ye},null,8,["page","page-size","item-count"])])),pageLeft:K((()=>[H(u,{"row-key":"username","checked-row-keys":Y(ce),"onUpdate:checkedRowKeys":a[5]||(a[5]=e=>te(ce)?ce.value=e:null),data:Y(pe).data,options:me},null,8,["checked-row-keys","data"])])),_:1}),H(r,{show:Y(ne).show,"onUpdate:show":a[6]||(a[6]=e=>Y(ne).show=e),title:Y(ne).title,data:Y(ne).data,width:480,"min-height":236,footer:!0,component:he},null,8,["show","title","data"]),H(r,{show:Y(ke).show,"onUpdate:show":a[7]||(a[7]=e=>Y(ke).show=e),title:Y(ke).title,data:Y(ke).data,width:480,"min-height":236,footer:!0,component:Y(i)},null,8,["show","title","data","component"])])),_:1})}}}))}}}));
