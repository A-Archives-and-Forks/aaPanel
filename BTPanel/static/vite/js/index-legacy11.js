System.register(["./index-legacy.js?v=1721298337096","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1721298337096","./index.vue_vue_type_script_setup_true_lang-legacy2.js?v=1721298337096","./index.vue_vue_type_script_setup_true_lang-legacy3.js?v=1721298337096","./useTableData-legacy.js?v=1721298337096","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1721298337096","./index-legacy72.js?v=1721298337096","./useLoading-legacy.js?v=1721298337096","./useTableColumns-legacy.js?v=1721298337096","./index-legacy63.js?v=1721298337096","./index-legacy65.js?v=1721298337096","./vue-legacy.js?v=1721298337096","./Ellipsis-legacy.js?v=1721298337096","./capitalize-legacy.js?v=1721298337096","./Tabs-legacy.js?v=1721298337096","./pinia-legacy.js?v=1721298337096","./DataTable-legacy.js?v=1721298337096","./Checkbox-legacy.js?v=1721298337096","./Select-legacy.js?v=1721298337096","./Tag-legacy.js?v=1721298337096","./Empty-legacy.js?v=1721298337096","./omit-legacy.js?v=1721298337096","./Skeleton-legacy.js?v=1721298337096","./Progress-legacy.js?v=1721298337096","./index-legacy64.js?v=1721298337096"],(function(e,t){"use strict";var a,l,i,d,s,n,o,u,c,r,y,p,g,h,m,_,v,w,x,b,f,k,j,C,R,D,U,E,S,K,L,I,B,T,W,z,$,A,P,q,F,H,V,G,Z,J,M,N,O,Q,X,Y,ee,te,ae;return{setters:[e=>{a=e.n,l=e._,i=e.u,d=e.g,s=e.C,n=e.h,o=e.D,u=e.E,c=e.k,r=e.F,y=e.j,p=e.m,g=e.l,h=e.B,m=e.p,_=e.G,v=e.q,w=e.r,x=e.v},e=>{b=e._},e=>{f=e._},e=>{k=e._},e=>{j=e.u,C=e._},e=>{R=e._},e=>{D=e._},e=>{U=e.u},e=>{E=e.b},e=>{S=e.g,K=e._,L=e.e},e=>{I=e.u},e=>{B=e.l,T=e.S,W=e.Z,z=e._,$=e.P,A=e.V,P=e.q,q=e.a3,F=e.r,H=e.H,V=e.f,G=e.w,Z=e.U,J=e.W,M=e.b,N=e.ag,O=e.F,Q=e.af,X=e.a1,Y=e.t},e=>{ee=e._},e=>{te=e.c},e=>{ae=e._},null,null,null,null,null,null,null,null,null,null],execute:function(){const le={class:"flex"},ie={class:"w-0 flex-1 flex items-center"},de={style:{minWidth:0}},se=B({__name:"index",props:{value:{default:""}},setup(e){const t=e,{toClipboard:i}=I(),d=async()=>{try{await i(`${t.value}`),a.success("Successfully copied")}catch(e){a.success("Copy failure")}};return(e,t)=>{const a=ee,i=l;return T(),W("div",le,[z("div",ie,[z("div",de,[$(a,{class:"max-w-full",tooltip:{width:"trigger",scrollable:!0,contentStyle:{maxHeight:"360px",overflow:"auto"}}},{default:A((()=>[P(q(e.value),1)])),_:1})]),z("button",{class:"reset mx-8px text-15px cursor-pointer text-#333",title:"Copy",onClick:d},[$(i,{name:"common-copy"})])])])}}}),ne={class:"p-16px"},oe={class:"flex flex-wrap justify-between mb-12px"},ue={class:"flex items-center text-warning"},ce=z("span",{class:"ml-4px"},"All current action items are associated with",-1),re=z("div",null,null,-1);e("default",B({__name:"index",setup(e){const a=X((()=>x((()=>t.import("./index-legacy69.js?v=1721298337096")),void 0))),I=X((()=>x((()=>t.import("./index-legacy70.js?v=1721298337096")),void 0))),B=X((()=>x((()=>t.import("./index-legacy71.js?v=1721298337096")),void 0))),q=i(),ee=F(null),le=H([]),ie=d("",{row:void 0,sid:null,dbIdx:0,isEdit:!1}),de=()=>{ie.data.dbIdx=me.db_idx,ie.data.row=void 0,ie.data.sid=ee.value,ie.data.isEdit=!1,ie.title="Add Key",ie.show=!0},ye=d("Redis Backup list",{sid:null}),pe=()=>{ye.data.sid=ee.value,ye.show=!0},ge=d("Example Clear database",{sid:null,databaseList:[]}),he=()=>{ge.data.sid=ee.value,ge.data.databaseList=le.value,ge.show=!0},me=V({db_idx:-1,db_type:0,p:1,limit:20,search:""}),{keys:_e,table:ve,columns:we}=j([{type:"selection",width:40},{key:"name",title:"Key",width:"20%",minWidth:120,ellipsis:{tooltip:{width:"trigger"}}},{key:"val",title:"Value",render:e=>$(se,{value:e.val},null)},{key:"type",title:"Data type",width:"10%",minWidth:100,render:e=>te(e.type)},{key:"len",title:"Data length",width:"10%",minWidth:100},{key:"endtime",title:"Term of validity",width:"10%",minWidth:100,render:e=>0===e.endtime?"Permanent":s(e.endtime)},E({width:100,options:e=>[{label:"Edit",onClick:()=>{(e=>{ie.data.dbIdx=me.db_idx,ie.data.row=e,ie.data.sid=ee.value,ie.data.isEdit=!0,ie.title=`Edit Key [${e.name}]`,ie.show=!0})(e)}},{label:"Del",onClick:()=>{n({title:"Delete the key value",content:`Do you really want to delete [${e.name}]?`,onConfirm:async({hide:t})=>{null!==ee.value&&-1!==me.db_idx&&(await o({sid:ee.value,key:e.name,db_idx:me.db_idx}),1===ve.data.length&&(me.db_idx=-1),Ce(),t())}})}}]})]),xe=[{key:"del",type:"confirm",label:"Please choose del",confirm:{title:"Batch delete Key",desc:"Delete selected keys in batches. Do you want to continue?",columns:[{key:"name",title:"Key",ellipsis:{tooltip:{width:"trigger"}}}],api:async e=>{null!==ee.value&&-1!==me.db_idx&&await o({sid:ee.value,key:e.name,db_idx:me.db_idx},!1)},done:e=>{ve.total===e.length&&(me.db_idx=-1),Ce()}}}],be=async()=>{if(null===ee.value)return;const{message:e}=await u({sid:ee.value});c(e)&&e.length>0?(le.value=e,-1===me.db_idx&&(me.db_idx=e[0].id)):(le.value=[],ve.data=[],ve.total=0,me.db_idx=-1)},{loading:fe,setLoading:ke}=U(),je=async()=>{try{ke(!0);const e=ee.value;if(null===e)return;if(le.value.length<=0)return;if(-1===me.db_idx)return;const{message:t}=await r({sid:e,...Y(me)});y(t)?(ve.data=c(t.data)?t.data:[],ve.total=p(t.page)):(ve.data=[],ve.total=0)}finally{_e.value=[],ke(!1)}},Ce=async()=>{await be(),await je()};return G((()=>q.isRefresh),(e=>{e&&(q.setRefresh(!1),-1!==q.addRedisId&&q.addRedisId!==me.db_idx&&(me.db_idx=q.addRedisId,q.setAddRedisId(-1)),Ce())})),(async()=>{await q.getRemote(),q.install?(q.remoteList.length>0&&(ee.value=q.remoteList[0].id),await be(),await je()):g()})(),(e,t)=>{const i=h,d=m,s=_,n=l,o=ae,u=D,c=R,r=C,y=k,p=f,g=b,x=v,j=w;return T(),Z(J(L),null,{default:A((()=>[$(j,null,{default:A((()=>[z("div",ne,[z("div",oe,[$(s,{class:"items-center"},{default:A((()=>[$(i,{type:"primary",onClick:de},{default:A((()=>[P("Add Key")])),_:1}),$(i,{onClick:J(S)},{default:A((()=>[P("Remote DB")])),_:1},8,["onClick"]),$(i,{onClick:pe},{default:A((()=>[P("Backup list")])),_:1}),$(d,{class:"mx-0!",vertical:""}),$(i,{onClick:he},{default:A((()=>[P("Clear DB")])),_:1})])),_:1}),$(s,{class:"items-center"},{default:A((()=>[z("div",ue,[$(n,{name:"base-info",size:"14"}),ce]),$(J(K),{value:J(ee),"onUpdate:value":t[0]||(t[0]=e=>M(ee)?ee.value=e:null),all:!1,"store-key":"database-redis-page",onChange:be},null,8,["value"])])),_:1})]),J(le).length>0?(T(),Z(u,{key:0,value:J(me).db_idx,"onUpdate:value":[t[1]||(t[1]=e=>J(me).db_idx=e),je]},{default:A((()=>[(T(!0),W(O,null,N(J(le),(e=>(T(),Z(o,{key:e.id,name:e.id,tab:`${e.name}(${e.keynum})`},null,8,["name","tab"])))),128))])),_:1},8,["value"])):Q("",!0),$(g,null,{toolsLeft:A((()=>[re])),toolsRight:A((()=>[$(c,{value:J(me).search,"onUpdate:value":t[2]||(t[2]=e=>J(me).search=e),placeholder:"Search key",onSearch:je},null,8,["value"])])),table:A((()=>[$(r,{"checked-row-keys":J(_e),"onUpdate:checkedRowKeys":t[3]||(t[3]=e=>M(_e)?_e.value=e:null),"row-key":"name",loading:J(fe),data:J(ve).data,columns:J(we)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:A((()=>[$(y,{"checked-row-keys":J(_e),"onUpdate:checkedRowKeys":t[4]||(t[4]=e=>M(_e)?_e.value=e:null),"row-key":"name",data:J(ve).data,options:xe},null,8,["checked-row-keys","data"])])),pageRight:A((()=>[$(p,{page:J(me).p,"onUpdate:page":t[5]||(t[5]=e=>J(me).p=e),"page-size":J(me).limit,"onUpdate:pageSize":t[6]||(t[6]=e=>J(me).limit=e),"store-key":"database-redis-page","item-count":J(ve).total,onRefresh:je},null,8,["page","page-size","item-count"])])),_:1}),$(x,{show:J(ie).show,"onUpdate:show":t[7]||(t[7]=e=>J(ie).show=e),title:J(ie).title,width:420,"min-height":340,footer:!0,data:J(ie).data,component:J(a)},null,8,["show","title","data","component"]),$(x,{show:J(ye).show,"onUpdate:show":t[8]||(t[8]=e=>J(ye).show=e),title:J(ye).title,width:920,"min-height":156,footer:!1,data:J(ye).data,component:J(I)},null,8,["show","title","data","component"]),$(x,{show:J(ge).show,"onUpdate:show":t[9]||(t[9]=e=>J(ge).show=e),title:J(ge).title,width:420,"min-height":240,footer:!0,data:J(ge).data,component:J(B)},null,8,["show","title","data","component"])])])),_:1})])),_:1})}}}))}}}));
