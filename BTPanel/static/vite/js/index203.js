import{_ as e}from"./index95.js?v=1742891699271";import{_ as t}from"./index.vue_vue_type_script_setup_true_lang.js?v=1742891699271";import{a as r}from"./public.js?v=1742891699271";import{e as a}from"./setting.js?v=1742891699271";import{m as i}from"./site3.js?v=1742891699271";import{d as s,t as l,O as n,e as o,r as c,j as _,a3 as y,R as m,S as p,P as u,a1 as d,U as f,V as x,a2 as v}from"./vue.js?v=1742891699271";import{bY as g,ch as b}from"./naive.js?v=1742891699271";import"./page_layout.js?v=1742891699271";import"./common.js?v=1742891699271";import"./__commonjsHelpers__.js?v=1742891699271";const w={class:"p-20px pt-24px"},h={class:"w-160px mr-8px"},j={class:"text-desc"},S={class:"w-160px mr-8px"},C={class:"text-desc"},W={class:"w-160px mr-8px"},U={class:"text-desc"},$={class:"text-error"},N={class:"text-error"},P={class:"text-error"},E=s({__name:"index",props:{config:{},siteName:{}},emits:["refresh"],setup(s,{expose:E,emit:k}){const R=s,H=k,O=l(R,"siteName"),{t:T}=n(),V=o((()=>void 0===O.value)),Y=c(null),q=_({retry_cycle:120,retry:10,retry_time:1800}),z={retry_cycle:{trigger:["blur","input"],validator:()=>!!q.retry_cycle||new Error(T("Waf.Site.Config.index_34"))},retry:{trigger:["blur","input"],validator:()=>!!q.retry||new Error(T("Waf.Site.Config.index_56"))},retry_time:{trigger:["blur","input"],validator:()=>!!q.retry_time||new Error(T("Waf.Site.Config.index_37"))}},A=async()=>{const e={retry_cycle:q.retry_cycle,retry:q.retry,retry_time:q.retry_time,is_open_global:O.value?0:1};V.value?await a(e):await i({...e,siteName:O.value||""}),H("refresh")};return(()=>{const{config:e}=R;e&&(q.retry_cycle=e.retry_cycle,q.retry=e.retry,q.retry_time=e.retry_time)})(),E({onConfirm:async({hide:e})=>{var t;await(null==(t=Y.value)?void 0:t.validate());const{siteName:a}=R;if(!a)return r({title:T("Waf.Site.Config.index_57"),content:T("Waf.Site.Config.index_58"),onConfirm:async({hide:t})=>(await A(),t(),e(),!1)}),!1;await A()}}),(r,a)=>{const i=g,s=b,l=t,n=y("i18n-t"),o=e;return m(),p("div",w,[u(l,{ref_key:"formRef",ref:Y,model:x(q),rules:z},{default:d((()=>[u(s,{label:r.$t("Waf.Site.Config.index_14"),path:"retry_cycle"},{default:d((()=>[f("div",h,[u(i,{value:x(q).retry_cycle,"onUpdate:value":a[0]||(a[0]=e=>x(q).retry_cycle=e),min:1,"show-button":!1},null,8,["value"])]),f("span",j,v(r.$t("Public.Unit.Second",x(q).retry_cycle)),1)])),_:1},8,["label"]),u(s,{label:r.$t("Waf.Site.Config.index_53"),path:"retry"},{default:d((()=>[f("div",S,[u(i,{value:x(q).retry,"onUpdate:value":a[1]||(a[1]=e=>x(q).retry=e),min:1,"show-button":!1},null,8,["value"])]),f("span",C,v(r.$t("Public.Unit.Time",x(q).retry)),1)])),_:1},8,["label"]),u(s,{label:r.$t("Waf.Site.Config.index_18"),path:"retry_time"},{default:d((()=>[f("div",W,[u(i,{value:x(q).retry_time,"onUpdate:value":a[2]||(a[2]=e=>x(q).retry_time=e),min:1,"show-button":!1},null,8,["value"])]),f("span",U,v(r.$t("Public.Unit.Second",x(q).retry_time)),1)])),_:1},8,["label"])])),_:1},8,["model"]),u(o,{class:"mt-8px"},{default:d((()=>[u(n,{tag:"li",keypath:"Waf.Site.Config.index_101",scope:"global"},{index_1:d((()=>[f("span",$,v(x(q).retry),1)])),index_2:d((()=>[f("span",N,v(x(q).retry_cycle),1)])),index_3:d((()=>[f("span",P,v(x(q).retry_time),1)])),_:1})])),_:1})])}}});export{E as default};
