import{n as e,c as t,_ as a,p as l,aj as i,cr as s}from"./page_layout.js?v=1747989938512";import{b2 as n,b3 as o}from"./site.js?v=1747989938512";import{u as d}from"./public.js?v=1747989938512";import{a as r,_ as u}from"./index.vue_vue_type_script_setup_true_lang15.js?v=1747989938512";import{e as p}from"./file.js?v=1747989938512";import{d as c,O as m,r as x,e as v,R as _,S,U as f,P as h,a2 as g,F as b,N as y,a1 as w,c as D,V as C,ao as $,ak as T,aj as P,H as j,ay as k}from"./vue.js?v=1747989938512";import{c2 as H,b_ as z,a2 as M,bU as R,cN as U,bY as I}from"./naive.js?v=1747989938512";import"./common.js?v=1747989938512";import"./__commonjsHelpers__.js?v=1747989938512";const N={class:"p-24px"},O={class:"flex"},F={class:"flex-1 ml-14px pt-6px"},V={class:"text-19px font-bold text-#111"},Y={class:"site-content mt-24px"},q={class:"site-size"},A={class:"site-title"},B={class:"site-path"},E={class:"value"},G={class:"font-bold text-error"},J={key:1},K={key:0},L={class:"site-time"},Q={key:0,class:"site-db"},W={class:"db-name"},X={class:"db-size"},Z={class:"db-time"},ee={class:"mt-24px text-13px text-error"},te={key:0},ae={key:1,class:"mt-6px"},le={key:2,class:"mt-6px text-#333"},ie={class:"text-error font-bold"},se={key:3,class:"mt-6px"},ne=l(c({__name:"verify",props:{data:{}},emits:["setConfirm"],setup(l,{expose:i,emit:s}){const{t:o}=m(),d=l,r=s,{rows:u,type:c,delSite:P}=d.data,j=x(!0),k=x(!0),M=v((()=>!!c.find((e=>"database"===e)))),R=v((()=>!!c.find((e=>"path"===e)))),U=x([]),I=x(5);return(()=>{r("setConfirm",{type:"error",disabled:!0,text:o("Site.DelSite.ContentText16",[I.value])});const e=setInterval((()=>{I.value--,r("setConfirm",{text:o("Site.DelSite.ContentText16",[I.value])}),0===I.value&&(clearInterval(e),r("setConfirm",{disabled:!1,text:o("Site.DelSite.ContentText16")}))}),1e3)})(),(async()=>{const{message:e}=await n({ids:u.map((e=>e.id))});t(e)&&(U.value=e.data.map((e=>{const{database:a}=e;return t(a)&&(a.addtime_show=a.addtime.split(" ")[0],a.is_time_rule=Math.round(Date.now()/1e3)-a.st_time>2592e3&&a.total>10240),{...e,addtime_show:e.addtime.split(" ")[0],is_time_rule:Math.round(Date.now()/1e3)-e.st_time>2592e3&&e.total>10240}})))})(),(async()=>{const{message:e}=await p();t(e)&&(j.value=e.status,k.value=e.status_db)})(),i({onConfirm:async({hide:e})=>{await(null==P?void 0:P(e))}}),(l,i)=>{const s=a,n=H,o=z;return _(),S("div",N,[f("div",O,[h(s,{name:"base-warning",size:"34",color:"#f0a020"}),f("div",F,[f("div",V,g(l.$t("Site.DelSite.ContentText7")),1)])]),f("div",Y,[(_(!0),S(b,null,y(C(U),(a=>(_(),S("div",{key:a.name,class:"content-item"},[f("div",q,[f("div",A,[h(n,null,{default:w((()=>[D(g(l.$t("Site.DelSite.index_3"))+": "+g(a.name),1)])),_:2},1024)]),h(o,{trigger:"hover"},{trigger:w((()=>[f("div",B,[f("div",null,g(l.$t("Site.DelSite.index_2"))+":",1),f("div",E,g(a.path),1),f("div",null,[i[1]||(i[1]=f("span",null,"(",-1)),a.limit?(_(),S(b,{key:0},[f("span",G,g(l.$t("Site.DelSite.index_9")),1),i[0]||(i[0]=f("span",{class:"glyphicon glyphicon-info-sign text-error"},null,-1))],64)):(_(),S("span",J,g(C(e)(a.total)),1)),i[2]||(i[2]=f("span",null,")",-1))])])])),default:w((()=>[f("div",null,[a.limit?(_(),S("p",K,g(l.$t("Site.DelSite.ContentText8")),1)):$("",!0),f("p",null,[f("span",null,g(l.$t("Site.DelSite.index_4"))+": "+g(a.path),1),f("span",null," ("+g((a.limit?"greater than ":"")+C(e)(a.total))+")",1)])])])),_:2},1024),f("div",L,[h(o,{trigger:"hover",disabled:!a.is_time_rule},{trigger:w((()=>[f("div",null,[f("span",null,g(l.$t("Site.DelSite.index_5"))+": ",1),f("span",{class:T({"text-error":a.is_time_rule})},g(a.addtime_show),3)])])),default:w((()=>[f("div",null,[f("p",null,g(l.$t("Site.DelSite.ContentText9")),1),f("p",null,g(l.$t("Site.DelSite.index_6"))+": "+g(a.addtime_show),1)])])),_:2},1032,["disabled"])])]),C(M)&&C(t)(a.database)?(_(),S("div",Q,[f("div",W,[h(n,null,{default:w((()=>[D(g(l.$t("Home.index_70"))+": "+g(a.name),1)])),_:2},1024)]),f("div",X,[h(o,{trigger:"hover"},{trigger:w((()=>[D(g(l.$t("Site.DelSite.index_8"))+": "+g(C(e)(a.database.total)),1)])),default:w((()=>[f("div",null,[f("p",null,g(l.$t("Site.DelSite.ContentText10")),1),f("p",null,g(l.$t("Site.PHP.add_site_16"))+": "+g(C(e)(a.database.total)),1)])])),_:2},1024)]),f("div",Z,[h(o,{trigger:"hover",disabled:!a.database.is_time_rule},{trigger:w((()=>[f("div",null,[f("span",null,g(l.$t("Site.DelSite.index_5"))+": ",1),f("span",{class:T({"text-error":a.database.is_time_rule})},g(a.addtime_show),3)])])),default:w((()=>[f("div",null,[f("p",null,g(l.$t("Site.DelSite.ContentText11")),1),f("p",null,g(l.$t("Site.DelSite.index_6"))+": "+g(a.database.addtime_show),1)])])),_:2},1032,["disabled"])])])):$("",!0)])))),128))]),f("div",ee,[C(M)&&!C(k)?(_(),S("div",te,[i[3]||(i[3]=f("span",{class:"glyphicon glyphicon-info-sign"},null,-1)),f("span",null,g(l.$t("Site.DelSite.ContentText12")),1)])):$("",!0),C(R)&&!C(j)?(_(),S("div",ae,[i[4]||(i[4]=f("span",{class:"glyphicon glyphicon-info-sign"},null,-1)),f("span",null,g(l.$t("Site.DelSite.ContentText13")),1)])):$("",!0),C(I)>0?(_(),S("div",le,[f("span",null,g(l.$t("Site.DelSite.ContentText14")),1),f("span",ie,g(C(I)),1),f("span",null,g(l.$t("Site.DelSite.index_1")),1)])):(_(),S("div",se,g(l.$t("Site.DelSite.ContentText15")),1))])])}}}),[["__scopeId","data-v-cda00a56"]]),oe={class:"p-24px"},de={class:"flex pl-12px"},re={class:"flex-1 ml-14px pt-8px"},ue={class:"text-16px font-bold text-#111"},pe={class:"mt-20px"},ce={class:"mr-8px"},me={class:"confirm-calc-box flex items-center h-40px mt-24px mx-12px pl-48px bg-#f0f0f0 text-14px"},xe={class:"confirm-calc-num mx-12px"},ve={class:"w-80px ml-12px"},_e=c({__name:"index",props:{data:{}},setup(e,{expose:t}){const{t:l}=m(),n=e,{rows:p}=n.data,c=i(),b=s(),y=x(null),$=x([]),T=v((()=>1===$.value.length&&"ftp"===$.value[0])),H=x(0),N=x(0),O=x(null),F=x(!1),V=x("");let Y=null;const q=e=>{k((()=>{(e=>{var t;V.value=e,F.value=!0,null==(t=y.value)||t.focus(),Y&&clearTimeout(Y),Y=window.setTimeout((()=>{F.value=!1}),3e3)})(e)}))()},A=async e=>{1===p.length?(await B(p[0],!0),b.setRefresh(!0),null==e||e()):E(e)},B=async(e,t=!1)=>{const a=$.value.reduce(((e,t)=>(e[t]=1,e)),{});return await o(Object.assign({id:e.id,webname:e.name},a),t)},E=e=>{d({title:l("Site.Cert.index_56"),hideClose:!0,component:r,data:{title:l("Site.Cert.index_56"),api:B,data:p,callback:t=>{e(),G(t)}}})},G=e=>{b.setRefresh(!0),d({title:l("Site.DelSite.index_11"),width:440,footer:!0,component:u,data:{title:l("Site.Cert.index_56"),data:e,status:"done",columns:[{key:"name",title:l("Site.TableRow.index_1"),ellipsis:{tooltip:{width:"trigger"}}}]}})};return O.value=null,H.value=Math.round(9*Math.random()+1),N.value=Math.round(9*Math.random()+1),t({onConfirm:async({hide:e})=>null==O.value||null==O.value?(q(l("Site.DelSite.ContentText5")),!1):O.value!==H.value+N.value?(q(l("Site.DelSite.ContentText6")),!1):void(0===$.value.length||T.value?await A(e):(d({title:1===p.length?"".concat(l("Site.DelSite.ContentText3")," [").concat(p[0].name,"]"):l("Site.DelSite.ContentText4"),width:740,footer:!0,data:{rows:p,type:$.value,delSite:A},component:ne}),e()))}),(e,t)=>{const l=a,i=M,s=R,n=U,o=I,d=z;return _(),S("div",oe,[f("div",de,[h(l,{name:"base-warning",size:"34",color:"#f0a020"}),f("div",re,[f("div",ue,[f("div",null,g(e.$t("Site.PHP.index_59")),1),f("div",pe,g(e.$t("Site.PHP.index_60")),1)]),h(n,{value:C($),"onUpdate:value":t[0]||(t[0]=e=>P($)?$.value=e:null)},{default:w((()=>[h(s,{size:32,class:"items-center h-24px mt-24px"},{default:w((()=>[h(i,{value:"ftp"},{default:w((()=>[D(g(e.$t("Site.PHP.add_site_10")),1)])),_:1}),h(i,{value:"database"},{default:w((()=>[f("span",ce,g(e.$t("Site.PHP.add_site_16")),1),t[3]||(t[3]=f("span",{class:"glyphicon glyphicon-info-sign text-error"},null,-1))])),_:1}),h(i,{value:"path"},{default:w((()=>[D(g(e.$t("Site.PHP.index_20")),1)])),_:1})])),_:1})])),_:1},8,["value"])])]),f("div",me,[f("span",null,g(e.$t("Site.DelSite.index_10"))+":",1),f("span",xe,g(C(H))+" + "+g(C(N)),1),t[4]||(t[4]=f("span",null,"=",-1)),f("div",ve,[h(d,{show:C(F),"onUpdate:show":t[2]||(t[2]=e=>P(F)?F.value=e:null),trigger:"manual",placement:"top-start","arrow-point-to-center":!0,style:j({"--n-color":C(c).errorColor,"--n-text-color":"#fff"})},{trigger:w((()=>[h(o,{ref_key:"inputRef",ref:y,value:C(O),"onUpdate:value":t[1]||(t[1]=e=>P(O)?O.value=e:null),size:"small",placeholder:"","show-button":!1,inputProps:{name:"sum"}},null,8,["value"])])),default:w((()=>[f("div",null,g(C(V)),1)])),_:1},8,["show","style"])])])])}}});export{_e as default};
