import{m as a,c5 as e,b as s,bo as n,f as t}from"./page_layout.js?v=1741416570306";import{p as l}from"./soft.js?v=1741416570306";import{c as i,a as o}from"./public.js?v=1741416570306";import{ch as r,T as u,bO as p}from"./naive.js?v=1741416570306";import{d as m,M as v,r as c,P as d,_,$ as f,R as g,a0 as x,N as y,S as b,ae as j,c as P}from"./vue.js?v=1741416570306";const w=m({__name:"index",setup(m,{expose:w}){const{t:C}=v(),F=c(),N=c(),$=c([]),h=()=>{N.value!==F.value?o({title:C("Public.Btn.Install"),content:C("Plugin.Ftp.index_12",[l.title,F.value]),onConfirm:()=>{S()}}):a.error(C("Plugin.Ftp.index_11"))},S=async(a=1)=>{const{message:t}=await e({sName:l.name,version:F.value,type:a});s(t)&&t.result&&n()},{loading:k,setLoading:B}=i(),I=async()=>{try{B(!0);const{message:a}=await t({sName:"pure-ftpd"===l.name?"pureftpd":l.name});s(a)&&($.value=a.versions.map((e=>(1==e.m_version.length?F.value=a.version.split(".")[0]:F.value=a.version.split(".")[0]+"."+a.version.split(".")[1],N.value=F.value,{label:"".concat(a.name," ").concat(e.m_version),value:e.m_version}))))}finally{B(!1)}};return I(),w({init:I}),(a,e)=>{const s=r,n=u,t=p;return d(),_(t,{class:"items-center"},{default:f((()=>[g("span",null,x(a.$t("Plugin.Ftp.index_9")),1),y(s,{class:"w-200px",loading:b(k),value:b(F),"onUpdate:value":e[0]||(e[0]=a=>j(F)?F.value=a:null),options:b($)},null,8,["loading","value","options"]),y(n,{type:"primary",onClick:h},{default:f((()=>[P(x(a.$t("Site.Cert.index_61")),1)])),_:1})])),_:1})}}});export{w as _};
