import{_ as e}from"./index95.js?v=1741416570306";import{_ as s}from"./index.vue_vue_type_script_setup_true_lang.js?v=1741416570306";import{bO as t,G as a,b as i,m as n}from"./page_layout.js?v=1741416570306";import{c as o,u as r}from"./public.js?v=1741416570306";import{aq as l,b2 as d}from"./site.js?v=1741416570306";import{_ as u}from"./index.vue_vue_type_script_setup_true_lang14.js?v=1741416570306";import{d as m,M as p,j as _,r as c,P as v,Q as f,N as P,$ as g,R as x,S as h,a0 as j}from"./vue.js?v=1741416570306";import{ch as S,cb as b}from"./naive.js?v=1741416570306";import"./common.js?v=1741416570306";import"./__commonjsHelpers__.js?v=1741416570306";const H={class:"p-20px"},w={class:"w-200px"},y=m({__name:"batch",props:{data:{}},setup(m,{expose:y}){const{t:$}=p(),E=m,{rows:q}=E.data,M=t(),R=_({version:null}),O={version:{trigger:"change",validator:()=>null!==R.version||new Error($("Site.PHP.add_site_27"))}},k=c([]),{loading:C,setLoading:G}=o();(async()=>{try{G(!0);const{message:e}=await l();a(e)&&e.length>0?(k.value=e.map((e=>({label:e.name,value:e.version}))),R.version=e[0].version):(R.version=null,k.value=[])}finally{G(!1)}})();return y({onConfirm:async({hide:e})=>{const{message:s}=await d((()=>{const{version:e}=R;if(null===e)throw n.error($("Site.PHP.index_67")),new Error($("Site.PHP.index_67"));return{version:e,sites_id:q.map((e=>e.id)).join(",")}})());M.setRefresh(!0),i(s)&&(e=>{const{success:s,error:t}=e,a=[];s.forEach((e=>{const s=q.find((s=>s.name===e));s&&a.push({name:s.name,batchStatus:"success",reqMsg:$("Site.PHP.index_64")})})),Object.entries(t).forEach((([e,s])=>{const t=q.find((s=>s.name===e));t&&a.push({name:t.name,batchStatus:"error",reqMsg:s})})),r({title:$("Site.PHP.index_65"),width:440,footer:!0,component:u,data:{title:$("Site.PHP.index_66"),data:a,status:"done",columns:[{key:"name",title:$("Site.TableRow.index_1"),ellipsis:{tooltip:{width:"trigger"}}}]}})})(s),e()}}),(t,a)=>{const i=S,n=b,o=s,r=e;return v(),f("div",H,[P(o,{model:h(R),rules:O},{default:g((()=>[P(n,{label:t.$t("Site.PHP.add_site_21"),path:"version"},{default:g((()=>[x("div",w,[P(i,{value:h(R).version,"onUpdate:value":a[0]||(a[0]=e=>h(R).version=e),loading:h(C),options:h(k)},null,8,["value","loading","options"])])])),_:1},8,["label"])])),_:1},8,["model"]),P(r,{class:"mt-8px"},{default:g((()=>[x("li",null,j(t.$t("Site.PHP.index_61")),1),x("li",null,j(t.$t("Site.PHP.index_62")),1),x("li",null,j(t.$t("Site.PHP.index_63")),1)])),_:1})])}}});export{y as default};
