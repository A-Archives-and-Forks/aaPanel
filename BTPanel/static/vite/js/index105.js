import{_ as a}from"./index101.js?v=1749179669910";import{_ as e}from"./index.vue_vue_type_script_setup_true_lang.js?v=1749179669910";import{m as t,c as s,_ as l,p as n}from"./page_layout.js?v=1749179669910";import{n as i,b as o,m as r}from"./planned.js?v=1749179669910";import{d as c,a as d}from"./public.js?v=1749179669910";import{bz as u,T as m,c0 as p,cj as _,bY as f,cs as v,y as g,b_ as b,aV as x,bU as y}from"./naive.js?v=1749179669910";import{d as j,O as C,j as w,r as P,n as I,G as S,R as k,S as h,P as $,a1 as N,V as O,a0 as U,U as J,a2 as L,ao as R,c as T}from"./vue.js?v=1749179669910";import"./common.js?v=1749179669910";import"./__commonjsHelpers__.js?v=1749179669910";const V={class:"p-20px h-500px"},z={class:"color-#20a53a"},A=n(j({__name:"index",props:{data:{}},setup(n){const{t:j}=C(),A=w({active:!1,time:3}),D=n,{id:E,getList:F}=D.data,G={time:{trigger:["blur","input"],validator:(a,e)=>e<3?(M(),new Error(j("Crontab.Planned.index_91"))):(Y&&(B.value=e,q.value=100,M()),K(),!0)}},H=()=>{d({title:j("Public.Confirm.Title"),content:j("Crontab.Planned.index_26"),onConfirm:async()=>{await i({id:E}),ea()}})},W=a=>{a?(Y&&M(),K(),t.success(j("Crontab.Planned.index_92"))):(M(),sessionStorage.setItem("timer".concat(E),JSON.stringify({...A,id:E})),t.success(j("Crontab.Planned.index_93")))};let Y;const q=P(100),B=P(A.time),K=()=>{Y=setInterval((()=>{q.value-=100/A.time,B.value-=1,q.value<=0&&(q.value=100,B.value=A.time,ea())}),1e3),sessionStorage.setItem("timer".concat(E),JSON.stringify({...A,id:E}))},M=()=>{clearInterval(Y),Y=void 0},Q=async()=>{await o({id:E}),null==F||F()},{loading:X,setLoading:Z}=c(),aa=P("None"),ea=async()=>{Z(!0);const{message:a}=await r({id:E});s(a)&&(aa.value=a.result?a.result:"None"),Z(!1)};return ea(),I((()=>{const a=sessionStorage.getItem("timer".concat(E));if(a){const e=JSON.parse(a);A.time=e.time,B.value=e.time,A.active=e.active,K()}})),S((()=>{M()})),(t,s)=>{const n=u,i=m,o=l,r=p,c=_,d=f,j=v,C=g,w=e,P=b,I=x,S=y,D=a;return k(),h("div",V,[$(S,{class:"mb-10px"},{default:N((()=>[$(I,null,{default:N((()=>[$(i,{class:"refresh-logs-btn",onClick:ea},{default:N((()=>[O(A).active?(k(),U(n,{key:0,type:"circle",percentage:O(q),unit:""},{default:N((()=>[J("span",z,L(O(B)),1)])),_:1},8,["percentage"])):R("",!0),T(" "+L(t.$t("Ftp.Analysis.Index_32")),1)])),_:1}),$(P,{trigger:"click",placement:"bottom",class:"min-w-250px"},{trigger:N((()=>[$(i,null,{default:N((()=>[$(o,{name:"down"})])),_:1})])),default:N((()=>[$(w,{ref:"formRef",model:O(A),rules:G,"label-width":"120px"},{default:N((()=>[$(c,{label:t.$t("Crontab.Planned.index_89")},{default:N((()=>[$(r,{value:O(A).active,"onUpdate:value":[s[0]||(s[0]=a=>O(A).active=a),W]},null,8,["value"])])),_:1},8,["label"]),O(A).active?(k(),U(c,{key:0,label:t.$t("Crontab.Planned.index_90"),path:"time"},{default:N((()=>[$(C,null,{default:N((()=>[$(d,{class:"w-50px!",value:O(A).time,"onUpdate:value":s[1]||(s[1]=a=>O(A).time=a),"show-button":!1,placeholder:""},null,8,["value"]),$(j,null,{default:N((()=>[T(L(t.$t("Waf.Setting.config_53")),1)])),_:1})])),_:1})])),_:1},8,["label"])):R("",!0)])),_:1},8,["model"])])),_:1})])),_:1}),$(i,{class:"empty-logs-btn",onClick:H},{default:N((()=>[T(L(t.$t("Crontab.Planned.index_25")),1)])),_:1}),$(i,{onClick:Q},{default:N((()=>[T(L(t.$t("Docker.LocalImage.pull.index_12")),1)])),_:1})])),_:1}),$(D,{loading:O(X),log:O(aa)},null,8,["loading","log"])])}}}),[["__scopeId","data-v-a8de5712"]]);export{A as default};
