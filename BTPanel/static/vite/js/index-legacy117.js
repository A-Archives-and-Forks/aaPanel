System.register(["./index-legacy226.js?v=1744703330658","./index-legacy95.js?v=1744703330658","./page_layout-legacy.js?v=1744703330658","./public-legacy.js?v=1744703330658","./vue-legacy.js?v=1744703330658","./common-legacy.js?v=1744703330658","./naive-legacy.js?v=1744703330658","./site-legacy.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1744703330658","./__commonjsHelpers__-legacy.js?v=1744703330658"],(function(e,a){"use strict";var t,n,l,s,i,d,o,p,u,r,c,m,v,b,_,h,x,y,g,f,w,P,A,D,$,k,C,S,j,U,B,I,N,T,E,H,q,z,F,L,R,M,G,O,V,Y,J,K,Q,W,X,Z;return{setters:[e=>{t=e._},e=>{n=e._},e=>{l=e.u,s=e.dA,i=e.m,d=e.c,o=e.dB,p=e.d,u=e.l,r=e.k,c=e.I,m=e.dC,v=e.dD,b=e.dE,_=e.dF,h=e.dG,x=e.dH,y=e.dI},e=>{g=e.a,f=e.e,w=e.c},e=>{P=e.p,A=e.a,D=e.d,$=e.O,k=e.r,C=e.R,S=e.S,j=e.U,U=e.P,B=e.a0,I=e.c,N=e.a1,T=e.V,E=e.j,H=e.af,q=e.F,z=e.ap,F=e.t},e=>{L=e.T},e=>{R=e.bR,M=e.a2,G=e.T,O=e.cn,V=e.bU,Y=e.bN,J=e.bY,K=e.ch,Q=e.b$,W=e._},e=>{X=e.aq},e=>{Z=e._},null],execute:function(){var a=document.createElement("style");a.textContent=".n-button[data-v-ccb3caae]{padding:0 24px;--n-height: 40px;--n-border-radius: 2px;--n-color: #eee;--n-text-color: #333;--n-border: none;--n-color-hover: #20a53a;--n-border-hover: 1px solid #20a53a;--n-text-color-hover: #fff;--n-color-focus: #20a53a;--n-text-color-focus: #fff;--n-border-focus: 1px solid #20a53a}.bg-recommend[data-v-ccb3caae]{position:absolute;width:32px;height:32px;top:-1px;left:-1px;background-image:url(/static/vite/images/recommend.svg);background-repeat:no-repeat;background-position:center;background-size:contain}\n",document.head.appendChild(a);const ee=Symbol("php-admin");function ae(e,a,t,n){return new Promise((l=>{const s=`${e}/index.php?lang=en`,i=document.createElement("form"),d=`\n\t\t\t<input type="text" name="pma_username" id="pma_username" value="${t}" />\n\t\t\t<input type="password" name="pma_password" id="pma_password" value="${n}" />\n\t\t\t<input type="text" name="server" value="1" />\n\t\t\t<input type="text" name="target" value="index.php" />\n\t\t\t<input type="text" name="db" id="db" value="${a}" />\n\t\t`;i.action=s,i.setAttribute("public-data",s),i.method="post",i.target="_blank",i.style.display="none",i.innerHTML=d,document.body.appendChild(i),i.submit(),document.body.removeChild(i),l(i)}))}async function te(e,a){const{data:t}=await L.get("/phpmyadmin/index.php?lang=en"),n={session:"",token:""},l=t.match(/"set_session"\s+value="(\w+)"/),s=t.match(/"token"\s+value="(\w+)"/);l&&l.length>1&&(n.session=l[1]||""),s&&s.length>1&&(n.token=s[1]||"");const i=document.createElement("form");i.action="/phpmyadmin/index.php",i.method="post",i.target="_blank",i.style.display="none";const d=`\n\t\t<input  name="set_session" id="input_session" value="${n.session}" />\n\t\t<input type="text" name="pma_username" id="pma_username" value="${e}" size="24" />\n\t\t<input type="password" name="pma_password" id="pma_password" value="${a}" size="24" />\n\t\t<input  name="token" id="input_token" value="${n.token}" />\n\t\t<input  name="target" id="input_target" value="index.php" />\n\t\t<input  name="server" value="1" id="input_server" />\n\t`;i.innerHTML=d,document.body.appendChild(i),i.submit(),document.body.removeChild(i)}const ne={class:"p-4px"},le={class:"mb-16px"},se={class:"text-error"},ie={class:"mt-20px"},de="phpmyadmin",oe=D({__name:"index",setup(e,{expose:a}){const{t:t}=$(),r=l(),{mysqlInfo:c}=A(ee),m=k(!1),v=e=>{g({title:t("Database.PhpAdmin.index_12",[t(e?"Public.Status.Start":"Public.Status.Stop")]),content:t("Database.PhpAdmin.index_13",[t(e?"Public.Status.start":"Public.Status.stop")]),onConfirm:async()=>{await s({name:de,type:e?"start":"stop"}),_()}})},b=async e=>{const a=i.loading(t("Database.PhpAdmin.index_14"));try{const{message:n}=await d({sName:de}),l=R(n,"ext.url",""),s=R(n,"ext.auth",!1);if("panel"==e){if(s)return i.error(t("Database.PhpAdmin.index_15")),void a.close();if(r.isFree)return f({source:160}),void a.close();if(c.value)await te(c.value.username,c.value.password);else{const{message:e}=await o(),a=R(e,"result","");await te("root",a)}}else if(c.value)await ae(l,c.value.name,c.value.username,c.value.password);else{const{message:e}=await o(),a=R(e,"result","");await ae(l,"","root",a)}a.close()}catch(n){a.close(),console.error(n)}},_=async()=>{const{message:e}=await d({sName:de});p(e)&&(m.value=e.status)};return _(),a({init:_}),(e,a)=>{const t=M,l=n,s=u,i=G;return C(),S("div",ne,[j("div",le,[U(t,{checked:T(m),"onUpdate:checked":v},{default:B((()=>[I(N(e.$t("Database.PhpAdmin.index_4")),1)])),_:1},8,["checked"])]),U(l,{class:"mb-20px"},{default:B((()=>[j("li",se,N(e.$t("Database.PhpAdmin.index_5")),1)])),_:1}),U(s,{dashed:""}),j("div",ie,[U(i,{onClick:a[0]||(a[0]=e=>b("panel"))},{default:B((()=>[j("span",null,N(e.$t("Database.PhpAdmin.index_11")),1),a[2]||(a[2]=j("span",{class:"bg-recommend"},null,-1))])),_:1}),U(i,{class:"ml-24px",onClick:a[1]||(a[1]=e=>b())},{default:B((()=>[I(N(e.$t("Database.PhpAdmin.index_6")),1)])),_:1})]),U(l,{class:"mt-16px"},{default:B((()=>[j("li",null,N(e.$t("Database.PhpAdmin.index_7")),1),j("li",null,N(e.$t("Database.PhpAdmin.index_8")),1),j("li",null,N(e.$t("Database.PhpAdmin.index_9")),1),j("li",null,N(e.$t("Database.PhpAdmin.index_10")),1)])),_:1})])}}}),pe=r(oe,[["__scopeId","data-v-ccb3caae"]]),ue={class:"w-160px"},re=D({__name:"index",setup(e,{expose:a}){const{t:t}=$(),n=E({php_version:null}),l=k([]),{loading:s,setLoading:o}=w(),p=async()=>{try{o(!0);const[e,a]=await Promise.all([X(),d({sName:"phpmyadmin"})]),{message:t}=e;c(t)&&(l.value=t.map((e=>({label:e.name,value:e.version}))));const{message:s}=a;n.php_version=R(s,"ext.phpversion",null)}finally{o(!1)}},u=async()=>{const e=n.php_version;null!==e?(await m({phpversion:e}),p()):i.error(t("Database.PhpAdmin.index_32"))};return p(),a({init:p}),(e,a)=>{const t=O,i=G,d=V;return C(),S("div",null,[U(d,{class:"items-center"},{default:B((()=>[j("span",null,N(e.$t("Database.PhpAdmin.index_31")),1),j("div",ue,[U(t,{value:T(n).php_version,"onUpdate:value":a[0]||(a[0]=e=>T(n).php_version=e),loading:T(s),options:T(l)},null,8,["value","loading","options"])]),U(i,{type:"primary",onClick:u},{default:B((()=>[I(N(e.$t("Public.Btn.Save")),1)])),_:1})])),_:1})])}}}),ce={class:"p-4px"},me={class:"w-142px mr-8px"},ve={class:"w-142px mr-8px"},be={class:"w-240px"},_e={class:"w-240px"},he={class:"w-240px"},xe=D({__name:"index",setup(e,{expose:a}){const{t:t}=$(),l=k(null),s=k(!1),o=k(null),p=k(!1);let r=!1;const c=E({username:"",password:"",repass:""}),m=async()=>{const e=l.value;null!==e?(await v({port:e}),F()):i.error(t("Database.PhpAdmin.index_25"))},f=async e=>{await b({v:e?1:0}),M()},w=async()=>{const e=o.value;null!==e?(await _({port:e}),M()):i.error(t("Database.PhpAdmin.index_26"))},P=e=>{!e&&r?g({title:t("Public.Confirm.Title"),content:t("Database.PhpAdmin.index_27"),onConfirm:async()=>{await h(),F()}}):p.value=e},A=async()=>{""!==c.password.trim()&&""!==c.username.trim()?c.password.length<3||c.username.length<3?i.error(t("Database.PhpAdmin.index_29")):c.password===c.repass?(await x({username:c.username,password:c.password}),F()):i.error(t("Database.PhpAdmin.index_30")):i.error(t("Database.PhpAdmin.index_28"))},D=k(!1),F=async()=>{try{D.value=!0;const{message:e}=await d({sName:"phpmyadmin"}),a=R(e,"ext.port",null);l.value=a?Y(a):null,p.value=R(e,"ext.auth",!1),r=p.value}finally{D.value=!1}},L=k(!1),M=async()=>{try{L.value=!0;const{message:e}=await y();s.value=R(e,"status",!1);const a=R(e,"port",null);o.value=a?Y(a):null}finally{L.value=!1}},O=()=>{Promise.all([F(),M()])};return O(),a({init:O}),(e,a)=>{const t=J,i=G,d=K,r=u,v=Q,b=W,_=n,h=Z;return C(),S("div",ce,[U(h,{"label-width":"160"},{default:B((()=>[U(d,{label:e.$t("Database.PhpAdmin.index_16")},{default:B((()=>[j("div",me,[U(t,{value:T(l),"onUpdate:value":a[0]||(a[0]=e=>H(l)?l.value=e:null),min:0,max:66325,"show-button":!1,loading:T(D),placeholder:""},null,8,["value","loading"])]),U(i,{type:"primary",onClick:m},{default:B((()=>[I(N(e.$t("Public.Btn.Save")),1)])),_:1})])),_:1},8,["label"]),U(r,{dashed:""}),U(d,{class:"mt-20px",label:e.$t("Database.PhpAdmin.index_17")},{default:B((()=>[U(v,{value:T(s),loading:T(L),"onUpdate:value":f},null,8,["value","loading"])])),_:1},8,["label"]),U(d,{label:e.$t("Database.PhpAdmin.index_18")},{default:B((()=>[j("div",ve,[U(t,{value:T(o),"onUpdate:value":a[1]||(a[1]=e=>H(o)?o.value=e:null),min:0,max:66325,"show-button":!1,loading:T(L),placeholder:""},null,8,["value","loading"])]),U(i,{type:"primary",onClick:w},{default:B((()=>[I(N(e.$t("Public.Btn.Save")),1)])),_:1})])),_:1},8,["label"]),U(r,{dashed:""}),U(d,{class:"mt-20px",label:e.$t("Database.PhpAdmin.index_19")},{default:B((()=>[U(v,{value:T(p),loading:T(D),"onUpdate:value":P},null,8,["value","loading"])])),_:1},8,["label"]),T(p)?(C(),S(q,{key:0},[U(d,{label:e.$t("Database.PhpAdmin.index_20")},{default:B((()=>[j("div",be,[U(b,{value:T(c).username,"onUpdate:value":a[2]||(a[2]=e=>T(c).username=e),placeholder:e.$t("Database.PhpAdmin.index_23")},null,8,["value","placeholder"])])])),_:1},8,["label"]),U(d,{label:e.$t("Database.PhpAdmin.index_21")},{default:B((()=>[j("div",_e,[U(b,{value:T(c).password,"onUpdate:value":a[3]||(a[3]=e=>T(c).password=e),type:"password",placeholder:e.$t("Database.PhpAdmin.index_23")},null,8,["value","placeholder"])])])),_:1},8,["label"]),U(d,{label:e.$t("Database.PhpAdmin.index_22")},{default:B((()=>[j("div",he,[U(b,{value:T(c).repass,"onUpdate:value":a[4]||(a[4]=e=>T(c).repass=e),type:"password",placeholder:e.$t("Database.PhpAdmin.index_23")},null,8,["value","placeholder"])])])),_:1},8,["label"]),U(d,{label:" "},{default:B((()=>[U(i,{type:"primary",onClick:A},{default:B((()=>[I(N(e.$t("Public.Btn.Save")),1)])),_:1})])),_:1})],64)):z("",!0),U(_,null,{default:B((()=>[j("li",null,N(e.$t("Database.PhpAdmin.index_24")),1)])),_:1})])),_:1})])}}}),ye={class:"h-580px"};e("default",D({__name:"index",props:{row:{default:void 0}},setup(e){const a=F(e,"row"),{t:n}=$(),l=k("service"),s=[{key:"service",label:n("Database.PhpAdmin.index_1"),component:pe},{key:"php",label:n("Database.PhpAdmin.index_2"),component:re},{key:"safe",label:n("Database.PhpAdmin.index_3"),component:xe}];return P(ee,{mysqlInfo:a}),(e,a)=>{const n=t;return C(),S("div",ye,[U(n,{value:T(l),"onUpdate:value":a[0]||(a[0]=e=>H(l)?l.value=e:null),ref:"tabsRef",data:s},null,8,["value"])])}}}))}}}));
