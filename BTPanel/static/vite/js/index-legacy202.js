System.register(["./index-legacy95.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1744703330658","./vue-legacy.js?v=1744703330658","./page_layout-legacy.js?v=1744703330658","./public-legacy.js?v=1744703330658","./setting-legacy.js?v=1744703330658","./site-legacy3.js?v=1744703330658","./index-legacy183.js?v=1744703330658","./naive-legacy.js?v=1744703330658","./__commonjsHelpers__-legacy.js?v=1744703330658","./common-legacy.js?v=1744703330658"],(function(e,a){"use strict";var l,i,t,n,c,s,o,u,d,_,p,r,f,x,m,v,g,b,y,S,C,W,$,w,h,j,U,k,P,E,M,T,D,N,O,R,B;return{setters:[e=>{l=e._},e=>{i=e._},e=>{t=e.d,n=e.O,c=e.as,s=e.r,o=e.R,u=e.S,d=e.U,_=e.P,p=e.V,r=e.a0,f=e.a1,x=e.F,m=e.k,v=e.v,g=e.c,b=e.t,y=e.e,S=e.j,C=e.a3},e=>{W=e.d,$=e.m,w=e.I},e=>{h=e.a},e=>{j=e.d},e=>{U=e.i,k=e.j,P=e.k,E=e.l},e=>{M=e._},e=>{T=e.cn,D=e.bY,N=e.a2,O=e.ch,R=e.T,B=e.aV},null,null],execute:function(){const a={class:"w-160px"},I={class:"ml-8px"},J={class:"w-300px text-#666 leading-18px"},V={class:"mb-4px"},q={class:"mb-10px"},A={class:"mb-4px"},F={class:"mb-10px"},H={class:"mb-4px"},Y={class:"mb-10px"},z={class:"mb-4px"},G=t({__name:"RequestType",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const{t:l}=n(),i=c(e,"value"),t=s([{label:l("Waf.Site.Config.index_40"),value:1},{label:l("Waf.Site.Config.index_41"),value:2},{label:l("Waf.Site.Config.index_42"),value:3},{label:l("Waf.Site.Config.index_43"),value:4}]);return(e,l)=>{const n=T,c=M;return o(),u(x,null,[d("div",a,[_(n,{value:i.value,"onUpdate:value":l[0]||(l[0]=e=>i.value=e),options:p(t)},null,8,["value","options"])]),d("div",I,[_(c,null,{default:r((()=>[d("div",J,[d("div",V,[d("b",null,f(e.$t("Waf.Site.Config.desc_1")),1)]),d("div",q,f(e.$t("Waf.Site.Config.desc_2")),1),d("div",A,[d("b",null,f(e.$t("Waf.Site.Config.desc_3")),1)]),d("div",F,f(e.$t("Waf.Site.Config.desc_4")),1),d("div",H,[d("b",null,f(e.$t("Waf.Site.Config.desc_5")),1)]),d("div",Y,f(e.$t("Waf.Site.Config.desc_6")),1),d("div",z,[d("b",null,f(e.$t("Waf.Site.Config.desc_7")),1)]),d("div",null,f(e.$t("Waf.Site.Config.desc_8")),1)])])),_:1})])],64)}}}),K={class:"w-100px"},L={class:"ml-8px"},Q={class:"w-300px text-#666 leading-18px"},X={class:"mb-4px"},Z={class:"mb-10px"},ee={class:"mb-4px"},ae=t({__name:"UrlDefense",props:{url:{},urlModifiers:{}},emits:["update:url"],setup(e){const{t:a}=n(),l=c(e,"url"),i=s([{label:a("Public.Status.Enable"),value:1},{label:a("Public.Status.Disable"),value:0}]);return(e,a)=>{const t=T,n=M;return o(),u(x,null,[d("div",K,[_(t,{value:l.value,"onUpdate:value":a[0]||(a[0]=e=>l.value=e),options:p(i)},null,8,["value","options"])]),d("div",L,[_(n,null,{default:r((()=>[d("div",Q,[d("div",X,[d("b",null,f(e.$t("Waf.Site.Config.index_104")),1)]),d("div",Z,f(e.$t("Waf.Site.Config.index_107")),1),d("div",ee,[d("b",null,f(e.$t("Waf.Site.Config.index_105")),1)]),d("div",null,f(e.$t("Waf.Site.Config.index_106")),1)])])),_:1})])],64)}}}),le={class:"flex-1"},ie={class:"flex items-center"},te={class:"w-100px"},ne={class:"ml-8px"},ce={class:"w-300px text-#666 leading-18px"},se={class:"mb-4px"},oe={class:"mb-10px"},ue={class:"mb-4px"},de={class:"w-80px ml-12px"},_e={class:"ml-12px"},pe=t({__name:"IpDefense",props:{open:{},openModifiers:{},max:{},maxModifiers:{},contain:{type:Boolean},containModifiers:{}},emits:["update:open","update:max","update:contain"],setup(e){const{t:a}=n(),l=c(e,"open"),i=s([{label:a("Public.Status.Enable"),value:1},{label:a("Public.Status.Disable"),value:0}]),t=c(e,"max"),x=c(e,"contain");return(e,a)=>{const n=T,c=M,s=D,b=N;return o(),u("div",le,[d("div",ie,[d("div",te,[_(n,{value:l.value,"onUpdate:value":a[0]||(a[0]=e=>l.value=e),options:p(i)},null,8,["value","options"])]),d("div",ne,[_(c,null,{default:r((()=>[d("div",ce,[d("div",se,[d("b",null,f(e.$t("Waf.Site.Config.index_104")),1)]),d("div",oe,f(e.$t("Waf.Site.Config.index_108")),1),d("div",ue,[d("b",null,f(e.$t("Waf.Site.Config.index_105")),1)]),d("div",null,f(e.$t("Waf.Site.Config.index_106")),1)])])),_:1})]),m(d("div",de,[_(s,{value:t.value,"onUpdate:value":a[1]||(a[1]=e=>t.value=e),placeholder:"","show-button":!1},null,8,["value"])],512),[[v,1===l.value]]),m(d("div",{class:"ml-8px text-desc"},f(e.$t("Public.Unit.Time",t.value||0)),513),[[v,1===l.value]]),m(d("div",_e,[_(b,{checked:x.value,"onUpdate:checked":a[2]||(a[2]=e=>x.value=e)},{default:r((()=>[g(f(e.$t("Waf.Site.Config.index_110")),1)])),_:1},8,["checked"])],512),[[v,1===l.value]])]),m(d("div",{class:"mt-12px text-error"},f(e.$t("Waf.Site.Config.index_111")),513),[[v,!t.value||t.value<5e3]])])}}}),re={class:"p-20px"},fe={class:"flex-1"},xe={class:"w-160px"},me={class:"w-160px mr-8px"},ve={class:"text-desc"},ge={class:"w-160px mr-8px"},be={class:"text-desc"},ye={class:"w-160px mr-8px"},Se={class:"text-desc"},Ce={class:"w-320px"},We={class:"flex-1"},$e={class:"w-160px"},we={class:"text-error"},he={class:"text-error"},je={class:"text-error"},Ue={class:"text-error"},ke={class:"text-error"},Pe={class:"text-error"},Ee={class:"text-error"};e("default",t({__name:"index",props:{siteName:{},config:{}},emits:["refresh"],setup(e,{expose:a,emit:t}){const c=e,M=t,{t:N}=n(),I=b(c,"siteName"),J=s(null),V=y((()=>void 0===I.value)),q=S({cc_mode:1,cc_type_status:2,cycle:60,limit:120,endtime:1800,is_cc_url:1,cc_enhance_mode:1,increase_wu_heng:1,country:[],cc_increase_type:"js",cc_ip_max:{open:0,ip_max:1e4,static:!1}}),A={cycle:{trigger:["blur","input"],validator:()=>q.cycle?!(q.cycle<30)||new Error(N("Waf.Site.Config.index_35")):new Error(N("Waf.Site.Config.index_34"))},limit:{trigger:["blur","input"],validator:()=>q.limit?!(q.limit<30)||new Error(N("Waf.Site.Config.index_35")):new Error(N("Waf.Site.Config.index_36"))},endtime:{trigger:["blur","input"],validator:()=>!!q.endtime||new Error(N("Waf.Site.Config.index_37"))}},F=[{label:N("Waf.Site.Config.index_38"),value:1},{label:N("Waf.Site.Config.index_39"),value:2}],H=s([{label:N("Waf.Site.Config.index_46"),value:"browser"},{label:N("Waf.Site.Config.index_47"),value:"js"},{label:N("Waf.Site.Config.index_48"),value:"code"},{label:N("Waf.Site.Config.index_49"),value:"renji"},{label:N("Waf.Site.Config.index_50"),value:"huadong"}]),Y=s([]),z=()=>{q.country=Y.value.map((e=>`${e.value}`))},K=()=>{q.country=[]};let L=!1;const Q=async e=>{if("renji"===e&&!L){const{message:e}=await U();L=!0,W(e)&&e.result&&(q.cc_increase_type="js",H.value[3].disabled=!0,H.value[4].disabled=!0,$.error(N("Waf.Site.Config.index_51")))}},X=async()=>{const{close:e}=$.loading(N("Waf.Site.Config.index_52",[V.value?N("Waf.Site.Config.index_99"):N("Waf.Site.Config.index_100")]));try{const e=(()=>{const e=1===q.cc_mode?{country:q.country.join(","),is_cc_url:q.is_cc_url}:{};return{cc_mode:1===q.cc_mode?1:q.cc_enhance_mode?3:4,cycle:q.cycle,limit:q.limit,endtime:q.endtime,is_open_global:void 0===I.value?1:0,increase:0===q.cc_enhance_mode?0:1,increase_wu_heng:q.increase_wu_heng,cc_increase_type:q.cc_increase_type,cc_type_status:q.cc_type_status,...e,cc_ip_max:JSON.stringify({open:1===q.cc_ip_max.open,ip_max:q.cc_ip_max.ip_max,static:q.cc_ip_max.static})}})();3!==e.cc_mode&&await P(),V.value?await j(e):await E({...e,siteName:I.value||""}),M("refresh")}finally{e()}};return(async()=>{const{message:e}=await k();w(e)&&(Y.value=e.map((e=>({label:e,value:e}))))})(),(()=>{const{config:e}=c;e&&(q.cc_mode=e.cc_mode<=1?1:2,q.cc_type_status=e.cc_type_status,q.cycle=e.cc.cycle,q.limit=e.cc.limit,q.endtime=e.cc.endtime,q.is_cc_url=e.cc.is_cc_url?1:0,q.cc_increase_type=e.cc.cc_increase_type||"js",q.country=Object.keys(e.cc.countrys),e.cc.cc_ip_max&&(q.cc_ip_max.open=e.cc.cc_ip_max.open?1:0,q.cc_ip_max.ip_max=e.cc.cc_ip_max.ip_max,q.cc_ip_max.static=e.cc.cc_ip_max.static))})(),a({onConfirm:async({hide:e})=>{if(await(J.value?.validate()),2===q.cc_mode)return h({title:N("Public.Confirm.Title"),content:()=>_(x,null,[N("Waf.Site.Config.desc_9"),_("br",null,null),N("Waf.Site.Config.desc_10"),_("br",null,null),N("Waf.Site.Config.desc_11")]),onConfirm:async({hide:a})=>(await X(),a(),e(),!1)}),!1;await X()}}),(e,a)=>{const t=T,n=O,c=D,s=R,x=B,b=i,y=C("i18n-t"),S=l;return o(),u("div",re,[_(b,{ref_key:"formRef",ref:J,model:p(q),rules:A,"label-width":"160"},{default:r((()=>[_(n,{label:e.$t("Waf.Site.Config.index_11")},{default:r((()=>[d("div",fe,[d("div",xe,[_(t,{value:p(q).cc_mode,"onUpdate:value":a[0]||(a[0]=e=>p(q).cc_mode=e),options:F},null,8,["value"])]),m(d("div",{class:"w-320px mt-6px text-desc leading-20px"},f(e.$t("Waf.Site.Config.index_12")),513),[[v,2===p(q).cc_mode]])])])),_:1},8,["label"]),_(n,{label:e.$t("Waf.Site.Config.index_13")},{default:r((()=>[_(G,{value:p(q).cc_type_status,"onUpdate:value":a[1]||(a[1]=e=>p(q).cc_type_status=e)},null,8,["value"])])),_:1},8,["label"]),_(n,{label:e.$t("Waf.Site.Config.index_14"),path:"cycle"},{default:r((()=>[d("div",me,[_(c,{value:p(q).cycle,"onUpdate:value":a[2]||(a[2]=e=>p(q).cycle=e),min:30,"show-button":!1},null,8,["value"])]),d("span",ve,f(e.$t("Public.Unit.Second",p(q).cycle)),1)])),_:1},8,["label"]),_(n,{label:e.$t("Waf.Site.Config.index_16"),path:"limit"},{default:r((()=>[d("div",ge,[_(c,{value:p(q).limit,"onUpdate:value":a[3]||(a[3]=e=>p(q).limit=e),min:30,"show-button":!1},null,8,["value"])]),d("span",be,f(e.$t("Public.Unit.Time",p(q).limit)),1)])),_:1},8,["label"]),_(n,{label:e.$t("Waf.Site.Config.index_18"),path:"endtime"},{default:r((()=>[d("div",ye,[_(c,{value:p(q).endtime,"onUpdate:value":a[4]||(a[4]=e=>p(q).endtime=e),min:1,"show-button":!1},null,8,["value"])]),d("span",Se,f(e.$t("Public.Unit.Second",p(q).endtime)),1)])),_:1},8,["label"]),m(_(n,{label:e.$t("Waf.Site.Config.index_19")},{default:r((()=>[_(ae,{url:p(q).is_cc_url,"onUpdate:url":a[5]||(a[5]=e=>p(q).is_cc_url=e)},null,8,["url"])])),_:1},8,["label"]),[[v,1===p(q).cc_mode]]),_(n,{label:e.$t("Waf.Site.Config.index_109")},{default:r((()=>[_(pe,{open:p(q).cc_ip_max.open,"onUpdate:open":a[6]||(a[6]=e=>p(q).cc_ip_max.open=e),max:p(q).cc_ip_max.ip_max,"onUpdate:max":a[7]||(a[7]=e=>p(q).cc_ip_max.ip_max=e),contain:p(q).cc_ip_max.static,"onUpdate:contain":a[8]||(a[8]=e=>p(q).cc_ip_max.static=e)},null,8,["open","max","contain"])])),_:1},8,["label"]),m(_(n,{label:e.$t("Waf.Site.Config.index_20"),"show-feedback":!1},{default:r((()=>[d("div",Ce,[_(t,{value:p(q).country,"onUpdate:value":a[9]||(a[9]=e=>p(q).country=e),options:p(Y),multiple:!0,filterable:!0,"max-tag-count":"responsive",":placeholder":e.$t("Waf.Site.Config.index_21")},{header:r((()=>[_(x,{class:"w-full"},{default:r((()=>[_(s,{class:"flex-1",onClick:z},{default:r((()=>[g(f(e.$t("Public.All")),1)])),_:1}),_(s,{class:"flex-1",onClick:K},{default:r((()=>[g(f(e.$t("Public.Btn.Cancel")),1)])),_:1})])),_:1})])),_:1},8,["value","options",":placeholder"])])])),_:1},8,["label"]),[[v,1===p(q).cc_mode]]),m(_(n,{label:e.$t("Waf.Site.Config.index_22"),"show-feedback":!1},{default:r((()=>[d("div",We,[d("div",$e,[_(t,{value:p(q).cc_increase_type,"onUpdate:value":[a[10]||(a[10]=e=>p(q).cc_increase_type=e),Q],options:p(H)},null,8,["value","options"])]),m(d("div",{class:"mt-6px text-error"},f(e.$t("Waf.Site.Config.index_23")),513),[[v,"code"===p(q).cc_increase_type]])])])),_:1},8,["label"]),[[v,2===p(q).cc_mode]])])),_:1},8,["model"]),_(S,{class:"mt-20px"},{default:r((()=>[d("li",we,f(e.$t("Waf.Site.Config.index_24")),1),m(d("li",{class:"text-error"},f(e.$t("Waf.Site.Config.index_102")),513),[[v,2===p(q).cc_mode]]),_(y,{tag:"li",keypath:"Waf.Site.Config.index_97",scope:"global"},{index_1:r((()=>[d("span",he,f(p(q).limit),1)])),index_2:r((()=>[d("span",je,f(p(q).cycle),1)])),index_3:r((()=>[d("span",Ue,f(p(q).endtime),1)])),_:1}),m(d("li",{class:"text-error"},f(e.$t("Waf.Site.Config.index_29")),513),[[v,1===p(q).cc_mode]]),_(y,{tag:"li",keypath:"Waf.Site.Config.index_98",scope:"global"},{index_1:r((()=>a[11]||(a[11]=[d("span",{class:"text-error"},"JS",-1)]))),index_2:r((()=>[d("span",ke,f(p(q).cycle),1)])),index_3:r((()=>[d("span",Pe,f(e.config.retry),1)])),index_4:r((()=>[d("span",Ee,f(p(q).endtime),1)])),_:1})])),_:1})])}}}))}}}));
