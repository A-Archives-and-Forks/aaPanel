import{_ as a}from"./index.vue_vue_type_script_setup_true_lang.js?v=1741416570306";import{c$ as s,d0 as e,b as l,n as t}from"./page_layout.js?v=1741416570306";import{d as o,M as c,r as i,j as r,P as n,_ as p,$ as m,N as d,R as u,S as _,ao as v,a7 as b}from"./vue.js?v=1741416570306";import{ch as f,cb as x,_ as h,bV as w}from"./naive.js?v=1741416570306";import"./common.js?v=1741416570306";import"./__commonjsHelpers__.js?v=1741416570306";import"./public.js?v=1741416570306";const j={class:"w-280px"},y={class:"w-280px"},A=o({__name:"index",props:{row:{}},setup(o,{expose:A}){const D=o,{row:g}=D,{t:R}=c(),$=i(null),k=r({dataAccess:"127.0.0.1",access:"127.0.0.1",ssl:""}),U=i([{label:R("Database.form.index_12"),value:"127.0.0.1"},{label:R("Database.form.index_13"),value:"%"},{label:R("Database.form.index_14"),value:"ip"}]),E={host:{trigger:["blur","change"],validator:()=>"ip"!==k.dataAccess||(""!==k.access.trim()||new Error(R("Database.form.index_19")))}},S=a=>{k.access="ip"===a?"":a};return(async()=>{const{message:a}=await e({name:g.name});l(a)&&("127.0.0.1"!==a.permission&&"%"!==a.permission?(k.dataAccess="ip",k.access=a.permission.split(",").join("\n")):(k.dataAccess=a.permission,k.access=a.permission),k.ssl=t(a.ssl)?a.ssl:"")})(),A({onConfirm:async({hide:a})=>{var e;try{await(null==(e=$.value)?void 0:e.validate());const l={...b(k),name:g.username,access:"ip"===k.dataAccess?k.access.trim().split("\n").join(","):k.access};await s(b(l)),a()}catch(l){console.error(l)}}}),(s,e)=>{const l=f,t=x,o=h,c=w,i=a;return n(),p(i,{ref_key:"formRef",ref:$,model:_(k),rules:E,class:"px-20px py-24px"},{default:m((()=>[d(t,{label:s.$t("Database.form.index_6"),path:"listen_ip"},{default:m((()=>[u("div",j,[d(l,{value:_(k).dataAccess,"onUpdate:value":[e[0]||(e[0]=a=>_(k).dataAccess=a),S],class:"permission-select",options:_(U)},null,8,["value","options"])])])),_:1},8,["label"]),"ip"===_(k).dataAccess?(n(),p(t,{key:0,label:s.$t("Database.form.index_7"),path:"host"},{default:m((()=>[u("div",y,[d(o,{value:_(k).access,"onUpdate:value":e[1]||(e[1]=a=>_(k).access=a),type:"textarea",autosize:{minRows:3,maxRows:3},"input-props":{name:"address"},placeholder:s.$t("Database.form.index_8")},null,8,["value","placeholder"])])])),_:1},8,["label"])):v("",!0),d(t,{label:s.$t("Database.form.index_11"),"show-feedback":!1},{default:m((()=>[d(c,{value:_(k).ssl,"onUpdate:value":e[2]||(e[2]=a=>_(k).ssl=a),class:"ssl-switch","checked-value":"REQUIRE SSL"},null,8,["value"])])),_:1},8,["label"])])),_:1},8,["model"])}}});export{A as default};
