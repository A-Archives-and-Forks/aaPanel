System.register(["./index-legacy104.js?v=1744703330658","./page_layout-legacy.js?v=1744703330658","./index-legacy.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy12.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1744703330658","./public-legacy.js?v=1744703330658","./mail-legacy.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy3.js?v=1744703330658","./vue-legacy.js?v=1744703330658","./naive-legacy.js?v=1744703330658","./index-legacy95.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1744703330658","./common-legacy.js?v=1744703330658","./__commonjsHelpers__-legacy.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1744703330658"],(function(e,t){"use strict";var a,l,i,n,s,o,d,c,u,r,p,m,_,h,y,g,w,x,v,k,b,f,j,M,E,C,S,R,U,L,$,D,B,W,K,O,I,P,T,z,q,A,G,H,J,N,V,Y,F,Q,X,Z;return{setters:[e=>{a=e._},e=>{l=e.W,i=e.d,n=e.I,s=e.b9,o=e.a,d=e.aS,c=e.i,u=e.m,r=e.o},e=>{p=e._},e=>{m=e._},e=>{_=e._},e=>{h=e._},e=>{y=e._},e=>{g=e.b,w=e.f,x=e.d,v=e.a},e=>{k=e.y,b=e.z,f=e.A,j=e.B,M=e.C,E=e.D,C=e.E},e=>{S=e._},e=>{R=e.d,U=e.O,L=e.r,$=e.j,D=e.P,B=e.c,W=e.f,K=e.R,O=e.S,I=e.a0,P=e.a1,T=e.V,z=e.af,q=e.Y,A=e.o,G=e.U,H=e.$},e=>{J=e.cr,N=e.y,V=e.T,Y=e.ch,F=e._,Q=e.ck},e=>{X=e._},e=>{Z=e._},null,null,null],execute:function(){var ee=document.createElement("style");ee.textContent=".cke_editor_editor .cke_top{padding:2px;height:28px!important}\n",document.head.appendChild(ee);const te=R({__name:"index",setup(e){const a=q((()=>o((()=>t.import("./index-legacy191.js?v=1744703330658")),void 0))),{t:d}=U(),c=L(),u=$({p:1,username:null}),{keys:r,table:j,columns:M,setLoading:E}=g([{type:"selection",width:40},{key:"from",title:d("Mail.Email.index_2"),width:"25%",minWidth:140,ellipsis:{tooltip:!0}},{key:"theme",title:d("Mail.Email.index_3"),minWidth:160,ellipsis:{tooltip:{width:"trigger"}},render:e=>{const t=e.html.replace(/[^\u4e00-\u9fa5]/g,"");return D("span",{class:"cursor-pointer",onClick:()=>{A(e)}},[D("a",{class:"bt-link"},[B(" "),e.subject,B(" ")]),D("span",{class:"text-desc"},[B(" - "),t||e.body])])}},{key:"time",title:d("Mail.Email.index_4"),width:"12%",minWidth:140,render:e=>l(e.time)},w({width:150,options:e=>[{label:d("Mail.Email.index_5"),onClick:()=>{A(e)}},{label:d("Mail.Email.index_6"),onClick:()=>{G(e)}},{label:d("Public.Btn.Del"),onClick:()=>{H(e)}}]})]),C=[{key:"delete",type:"confirm",label:d("Site.Batch.index_21"),confirm:{title:d("Site.Batch.index_21"),desc:d("Site.Batch.index_11"),columns:[{...M.value[1],width:"auto"}],api:e=>k({path:e.path},!1),done:()=>{V()}}}],R=x(),A=e=>{R.data.row=e,R.title=d("Mail.Email.index_7",[e.subject]),R.show=!0},G=e=>{v({title:d("Mail.Email.index_8"),content:d("Mail.Email.index_9"),onConfirm:async()=>{await b({path:e.path,username:u.username||""}),V()}})},H=async e=>{await k({path:e.path}),V()},V=async()=>{try{E(!0);const{message:e}=await f({p:u.p,username:u.username||""});i(e)&&(j.data=n(e.data)?e.data:[],j.total=s(e.page))}finally{E(!1),r.value=[]}},Y=()=>{u.p=1,V()};return E(!0),W((async()=>{await c.value.getList()})),(e,t)=>{const l=J,i=N,n=y,s=h,o=_,d=m,g=p;return K(),O("div",null,[D(d,null,{toolsLeft:I((()=>[D(i,{class:"w-460px"},{default:I((()=>[D(l,null,{default:I((()=>[B(P(e.$t("Mail.Email.index_1")),1)])),_:1}),D(S,{ref_key:"senderRef",ref:c,value:T(u).username,"onUpdate:value":[t[0]||(t[0]=e=>T(u).username=e),Y]},null,8,["value"])])),_:1})])),table:I((()=>[D(n,{"row-key":"time","checked-row-keys":T(r),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>z(r)?r.value=e:null),loading:T(j).loading,data:T(j).data,columns:T(M)},null,8,["checked-row-keys","loading","data","columns"])])),pageRight:I((()=>[D(s,{page:T(u).p,"onUpdate:page":t[2]||(t[2]=e=>T(u).p=e),"item-count":T(j).total,onRefresh:V},null,8,["page","item-count"])])),pageLeft:I((()=>[D(o,{"row-key":"time","checked-row-keys":T(r),"onUpdate:checkedRowKeys":t[3]||(t[3]=e=>z(r)?r.value=e:null),data:T(j).data,options:C},null,8,["checked-row-keys","data"])])),_:1}),D(g,{show:T(R).show,"onUpdate:show":t[4]||(t[4]=e=>T(R).show=e),title:T(R).title,data:T(R).data,width:850,height:680,component:T(a)},null,8,["show","title","data","component"])])}}}),ae=R({__name:"index",setup(e){const a=q((()=>o((()=>t.import("./index-legacy191.js?v=1744703330658")),void 0))),{t:d}=U(),c=L(),u=$({p:1,username:null}),{keys:r,table:v,columns:b,setLoading:f}=g([{type:"selection",width:40},{key:"from",title:d("Mail.Email.index_2"),width:"25%",minWidth:140,ellipsis:{tooltip:!0}},{key:"theme",title:d("Mail.Email.index_3"),minWidth:160,ellipsis:{tooltip:{width:"trigger"}},render:e=>{const t=e.html.replace(/[^\u4e00-\u9fa5]/g,"");return D("span",{class:"cursor-pointer",onClick:()=>{C(e)}},[D("a",{class:"bt-link"},[e.subject]),D("span",{class:"text-desc"},[B(" - "),t||e.body])])}},{key:"time",title:d("Mail.Email.index_4"),width:"12%",minWidth:140,render:e=>l(e.time)},w({width:150,options:e=>[{label:d("Mail.Email.index_5"),onClick:()=>{C(e)}},{label:d("Public.Btn.Del"),onClick:()=>{R(e)}}]})]),M=[{key:"delete",type:"confirm",label:d("Site.Batch.index_21"),confirm:{title:d("Site.Batch.index_21"),desc:d("Site.Batch.index_11"),columns:[{...b.value[1],width:"auto"}],api:e=>k({path:e.path},!1),done:()=>{A()}}}],E=x(),C=e=>{E.data.row=e,E.title=d("Mail.Email.index_7",[e.subject]),E.show=!0},R=async e=>{await k({path:e.path}),A()},A=async()=>{try{f(!0);const{message:e}=await j({p:u.p,username:u.username||""});i(e)&&(v.data=n(e.data)?e.data:[],v.total=s(e.page))}finally{r.value=[],f(!1)}},G=()=>{u.p=1,A()};return f(!0),W((async()=>{await c.value.getList()})),(e,t)=>{const l=J,i=N,n=y,s=h,o=_,d=m,g=p;return K(),O("div",null,[D(d,null,{toolsLeft:I((()=>[D(i,{class:"w-460px"},{default:I((()=>[D(l,null,{default:I((()=>[B(P(e.$t("Mail.Email.index_1")),1)])),_:1}),D(S,{ref_key:"senderRef",ref:c,value:T(u).username,"onUpdate:value":[t[0]||(t[0]=e=>T(u).username=e),G]},null,8,["value"])])),_:1})])),table:I((()=>[D(n,{"row-key":"time","checked-row-keys":T(r),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>z(r)?r.value=e:null),loading:T(v).loading,data:T(v).data,columns:T(b)},null,8,["checked-row-keys","loading","data","columns"])])),pageRight:I((()=>[D(s,{page:T(u).p,"onUpdate:page":t[2]||(t[2]=e=>T(u).p=e),"item-count":T(v).total,onRefresh:A},null,8,["page","item-count"])])),pageLeft:I((()=>[D(o,{"row-key":"time","checked-row-keys":T(r),"onUpdate:checkedRowKeys":t[3]||(t[3]=e=>z(r)?r.value=e:null),data:T(v).data,options:M},null,8,["checked-row-keys","data"])])),_:1}),D(g,{show:T(E).show,"onUpdate:show":t[4]||(t[4]=e=>T(E).show=e),title:T(E).title,data:T(E).data,width:850,height:680,component:T(a)},null,8,["show","title","data","component"])])}}}),le=R({__name:"index",setup(e){const a=q((()=>o((()=>t.import("./index-legacy191.js?v=1744703330658")),void 0))),{t:r}=U(),_=L(),v=$({p:1,username:null}),{table:b,columns:f,setLoading:j}=g([{key:"from",title:r("Mail.Email.index_2"),width:"25%",minWidth:140,ellipsis:{tooltip:!0}},{key:"theme",title:r("Mail.Email.index_3"),minWidth:160,ellipsis:{tooltip:{width:"trigger"}},render:e=>{const t=e.html.replace(/[^\u4e00-\u9fa5]/g,"");return D("span",{class:"cursor-pointer",onClick:()=>{z(e)}},[D("a",{class:"bt-link"},[e.subject]),D("span",{class:"text-desc"},[B(" - "),t||e.body])])}},{key:"time",title:r("Mail.Email.index_4"),width:"12%",minWidth:140,render:e=>l(e.time)},w({width:150,options:e=>[{label:r("Mail.Email.index_5"),onClick:()=>{z(e)}},{label:r("Mail.Email.index_10"),onClick:()=>{A(e)}},{label:r("Public.Btn.Del"),onClick:()=>{G(e)}}]})]),C=async()=>{try{await d.post("/plugin?action=a&name=mail_sys&s=check_rspamd_route",{},{requestOptions:{loading:c.global.t("Component.Pay.index_12"),successMessage:!1}}),window.open("/rspamd")}catch{u.error("Please repair the panel before clicking this function")}},R=x(),z=e=>{R.data.row=e,R.title=r("Mail.Email.index_7",[e.subject]),R.show=!0},A=async e=>{await M({path:e.path,username:v.username||""}),H()},G=async e=>{await k({path:e.path}),H()},H=async()=>{try{j(!0);const{message:e}=await E({p:v.p,username:v.username||""});i(e)&&(b.data=n(e.data)?e.data:[],b.total=s(e.page))}finally{j(!1)}},Y=()=>{v.p=1,H()};return j(!0),W((async()=>{await _.value.getList()})),(e,t)=>{const l=J,i=N,n=V,s=y,o=h,d=m,c=p;return K(),O("div",null,[D(d,null,{toolsLeft:I((()=>[D(i,{class:"w-460px"},{default:I((()=>[D(l,null,{default:I((()=>[B(P(e.$t("Mail.Email.index_1")),1)])),_:1}),D(S,{ref_key:"senderRef",ref:_,value:T(v).username,"onUpdate:value":[t[0]||(t[0]=e=>T(v).username=e),Y]},null,8,["value"])])),_:1}),D(n,{type:"primary",onClick:C},{default:I((()=>t[3]||(t[3]=[B("Rspamd GUI")]))),_:1})])),table:I((()=>[D(s,{loading:T(b).loading,data:T(b).data,columns:T(f)},null,8,["loading","data","columns"])])),pageRight:I((()=>[D(o,{page:T(v).p,"onUpdate:page":t[1]||(t[1]=e=>T(v).p=e),"item-count":T(b).total,onRefresh:H},null,8,["page","item-count"])])),_:1}),D(c,{show:T(R).show,"onUpdate:show":t[2]||(t[2]=e=>T(R).show=e),title:T(R).title,data:T(R).data,width:850,height:680,component:T(a)},null,8,["show","title","data","component"])])}}}),ie=()=>CKEDITOR.instances.editor.getData(),ne={class:"w-350px"},se={class:"w-760px"},oe={class:"w-760px"},de={class:"text-error"},ce=R({__name:"index",setup(e){const{t:t}=U(),a=L(),l=L(null),i=$({sender:null,mail_to:"",subject:"",content:""}),n={mail_to:{trigger:["blur","input"],validator:()=>""!==i.mail_to.trim()||new Error(t("Mail.Send.index_9"))},subject:{trigger:["blur","input"],validator:()=>""!==i.subject.trim()||new Error(t("Mail.Send.index_10"))},content:{validator:()=>""!==ie()||new Error(t("Mail.Send.index_11"))}},s=async()=>{await(l.value?.validate());const e={mail_from:i.sender||"",mail_to:JSON.stringify(i.mail_to.split(",")),subject:i.subject,content:ie(),subtype:"html",smtp_server:"localhost"};var t;await C(e),i.mail_to="",i.subject="",t="",CKEDITOR.instances.editor.setData(t)};return W((()=>{(async e=>{await r("/static/ckeditor/ckeditor.js?v=1744703330658"),CKEDITOR.replace(e,{customConfig:"/static/ckeditor/config.js?v1.0"})})("editor"),a.value.getList()})),A((()=>{CKEDITOR.remove(CKEDITOR.instances.editor)})),(e,t)=>{const o=Y,d=F,c=V,u=Z,r=X;return K(),O("div",null,[D(u,{ref_key:"formRef",ref:l,class:"pt-8px",model:T(i),rules:n},{default:I((()=>[D(o,{label:e.$t("Mail.Send.index_1"),path:"sender"},{default:I((()=>[G("div",ne,[D(S,{ref_key:"senderRef",ref:a,value:T(i).sender,"onUpdate:value":t[0]||(t[0]=e=>T(i).sender=e),placeholder:e.$t("Mail.Send.index_2")},null,8,["value","placeholder"])])])),_:1},8,["label"]),D(o,{label:e.$t("Mail.Send.index_3"),path:"mail_to"},{default:I((()=>[G("div",se,[D(d,{value:T(i).mail_to,"onUpdate:value":t[1]||(t[1]=e=>T(i).mail_to=e),placeholder:e.$t("Mail.Send.index_4")},null,8,["value","placeholder"])])])),_:1},8,["label"]),D(o,{label:e.$t("Mail.Send.index_5"),path:"subject"},{default:I((()=>[G("div",oe,[D(d,{value:T(i).subject,"onUpdate:value":t[2]||(t[2]=e=>T(i).subject=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"]),D(o,{label:e.$t("Mail.Send.index_6"),path:"content"},{default:I((()=>t[3]||(t[3]=[G("div",{class:"w-760px h-392px"},[G("textarea",{class:"hidden",name:"editor",id:"editor",rows:"10"})],-1)]))),_:1},8,["label"]),D(o,{label:" ","show-feedback":!1},{default:I((()=>[D(c,{type:"primary",size:"large",onClick:s},{default:I((()=>[B(P(e.$t("Mail.Send.index_7")),1)])),_:1})])),_:1})])),_:1},8,["model"]),D(r,{class:"ml-24px mt-24px"},{default:I((()=>[G("li",de,P(e.$t("Mail.Send.index_8")),1)])),_:1})])}}});e("default",R({__name:"index",setup(e){const t=L("inbox"),l=[{key:"inbox",label:"Inbox",component:te},{key:"outbox",label:"Outbox",component:ae},{key:"spam",label:"Spam",component:le},{key:"sender",label:"Sender",component:ce}];return(e,i)=>{const n=a,s=Q;return K(),H(s,{class:"p-16px"},{default:I((()=>[D(n,{value:T(t),"onUpdate:value":i[0]||(i[0]=e=>z(t)?t.value=e:null),options:l},null,8,["value"])])),_:1})}}}))}}}));
