System.register(["./index-legacy104.js?v=1742891699271","./page_layout-legacy.js?v=1742891699271","./index-legacy.js?v=1742891699271","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1742891699271","./index.vue_vue_type_script_setup_true_lang-legacy12.js?v=1742891699271","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1742891699271","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1742891699271","./public-legacy.js?v=1742891699271","./mail-legacy.js?v=1742891699271","./index.vue_vue_type_script_setup_true_lang-legacy3.js?v=1742891699271","./vue-legacy.js?v=1742891699271","./naive-legacy.js?v=1742891699271","./index-legacy95.js?v=1742891699271","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1742891699271","./common-legacy.js?v=1742891699271","./__commonjsHelpers__-legacy.js?v=1742891699271","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1742891699271"],(function(e,t){"use strict";var a,l,i,n,s,o,d,c,u,r,p,m,_,h,y,g,x,w,v,k,b,f,j,M,E,C,S,R,U,L,D,$,B,W,K,O,I,T,P,z,A,H,J,N,V,Y,q,F,G;return{setters:[e=>{a=e._},e=>{l=e.W,i=e.b,n=e.I,s=e.b7,o=e.a,d=e.o},e=>{c=e._},e=>{u=e._},e=>{r=e._},e=>{p=e._},e=>{m=e._},e=>{_=e.b,h=e.f,y=e.d,g=e.a},e=>{x=e.y,w=e.z,v=e.A,k=e.B,b=e.C,f=e.D,j=e.E},e=>{M=e._},e=>{E=e.d,C=e.O,S=e.r,R=e.j,U=e.P,L=e.c,D=e.f,$=e.R,B=e.S,W=e.a1,K=e.a2,O=e.V,I=e.af,T=e.Y,P=e.o,z=e.U,A=e.a0},e=>{H=e.cr,J=e.y,N=e.ch,V=e._,Y=e.T,q=e.ck},e=>{F=e._},e=>{G=e._},null,null,null],execute:function(){var Q=document.createElement("style");Q.textContent=".cke_editor_editor .cke_top{padding:2px;height:28px!important}\n",document.head.appendChild(Q);const X=E({__name:"index",setup(e){const a=T((()=>o((()=>t.import("./index-legacy191.js?v=1742891699271")),void 0))),{t:d}=C(),k=S(),b=R({p:1,username:null}),{keys:f,table:j,columns:E,setLoading:P}=_([{type:"selection",width:40},{key:"from",title:d("Mail.Email.index_2"),width:"25%",minWidth:140,ellipsis:{tooltip:!0}},{key:"theme",title:d("Mail.Email.index_3"),minWidth:160,ellipsis:{tooltip:{width:"trigger"}},render:e=>{const t=e.html.replace(/[^\u4e00-\u9fa5]/g,"");return U("span",{class:"cursor-pointer",onClick:()=>{N(e)}},[U("a",{class:"bt-link"},[L(" "),e.subject,L(" ")]),U("span",{class:"text-desc"},[L(" - "),t||e.body])])}},{key:"time",title:d("Mail.Email.index_4"),width:"12%",minWidth:140,render:e=>l(e.time)},h({width:150,options:e=>[{label:d("Mail.Email.index_5"),onClick:()=>{N(e)}},{label:d("Mail.Email.index_6"),onClick:()=>{V(e)}},{label:d("Public.Btn.Del"),onClick:()=>{Y(e)}}]})]),z=[{key:"delete",type:"confirm",label:d("Site.Batch.index_21"),confirm:{title:d("Site.Batch.index_21"),desc:d("Site.Batch.index_11"),columns:[{...E.value[1],width:"auto"}],api:e=>x({path:e.path},!1),done:()=>{q()}}}],A=y(),N=e=>{A.data.row=e,A.title=d("Mail.Email.index_7",[e.subject]),A.show=!0},V=e=>{g({title:d("Mail.Email.index_8"),content:d("Mail.Email.index_9"),onConfirm:async()=>{await w({path:e.path,username:b.username||""}),q()}})},Y=async e=>{await x({path:e.path}),q()},q=async()=>{try{P(!0);const{message:e}=await v({p:b.p,username:b.username||""});i(e)&&(j.data=n(e.data)?e.data:[],j.total=s(e.page))}finally{P(!1),f.value=[]}},F=()=>{b.p=1,q()};return P(!0),D((async()=>{await k.value.getList()})),(e,t)=>{const l=H,i=J,n=m,s=p,o=r,d=u,_=c;return $(),B("div",null,[U(d,null,{toolsLeft:W((()=>[U(i,{class:"w-460px"},{default:W((()=>[U(l,null,{default:W((()=>[L(K(e.$t("Mail.Email.index_1")),1)])),_:1}),U(M,{ref_key:"senderRef",ref:k,value:O(b).username,"onUpdate:value":[t[0]||(t[0]=e=>O(b).username=e),F]},null,8,["value"])])),_:1})])),table:W((()=>[U(n,{"row-key":"time","checked-row-keys":O(f),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>I(f)?f.value=e:null),loading:O(j).loading,data:O(j).data,columns:O(E)},null,8,["checked-row-keys","loading","data","columns"])])),pageRight:W((()=>[U(s,{page:O(b).p,"onUpdate:page":t[2]||(t[2]=e=>O(b).p=e),"item-count":O(j).total,onRefresh:q},null,8,["page","item-count"])])),pageLeft:W((()=>[U(o,{"row-key":"time","checked-row-keys":O(f),"onUpdate:checkedRowKeys":t[3]||(t[3]=e=>I(f)?f.value=e:null),data:O(j).data,options:z},null,8,["checked-row-keys","data"])])),_:1}),U(_,{show:O(A).show,"onUpdate:show":t[4]||(t[4]=e=>O(A).show=e),title:O(A).title,data:O(A).data,width:850,height:680,component:O(a)},null,8,["show","title","data","component"])])}}}),Z=E({__name:"index",setup(e){const a=T((()=>o((()=>t.import("./index-legacy191.js?v=1742891699271")),void 0))),{t:d}=C(),g=S(),w=R({p:1,username:null}),{keys:v,table:b,columns:f,setLoading:j}=_([{type:"selection",width:40},{key:"from",title:d("Mail.Email.index_2"),width:"25%",minWidth:140,ellipsis:{tooltip:!0}},{key:"theme",title:d("Mail.Email.index_3"),minWidth:160,ellipsis:{tooltip:{width:"trigger"}},render:e=>{const t=e.html.replace(/[^\u4e00-\u9fa5]/g,"");return U("span",{class:"cursor-pointer",onClick:()=>{z(e)}},[U("a",{class:"bt-link"},[e.subject]),U("span",{class:"text-desc"},[L(" - "),t||e.body])])}},{key:"time",title:d("Mail.Email.index_4"),width:"12%",minWidth:140,render:e=>l(e.time)},h({width:150,options:e=>[{label:d("Mail.Email.index_5"),onClick:()=>{z(e)}},{label:d("Public.Btn.Del"),onClick:()=>{A(e)}}]})]),E=[{key:"delete",type:"confirm",label:d("Site.Batch.index_21"),confirm:{title:d("Site.Batch.index_21"),desc:d("Site.Batch.index_11"),columns:[{...f.value[1],width:"auto"}],api:e=>x({path:e.path},!1),done:()=>{N()}}}],P=y(),z=e=>{P.data.row=e,P.title=d("Mail.Email.index_7",[e.subject]),P.show=!0},A=async e=>{await x({path:e.path}),N()},N=async()=>{try{j(!0);const{message:e}=await k({p:w.p,username:w.username||""});i(e)&&(b.data=n(e.data)?e.data:[],b.total=s(e.page))}finally{v.value=[],j(!1)}},V=()=>{w.p=1,N()};return j(!0),D((async()=>{await g.value.getList()})),(e,t)=>{const l=H,i=J,n=m,s=p,o=r,d=u,_=c;return $(),B("div",null,[U(d,null,{toolsLeft:W((()=>[U(i,{class:"w-460px"},{default:W((()=>[U(l,null,{default:W((()=>[L(K(e.$t("Mail.Email.index_1")),1)])),_:1}),U(M,{ref_key:"senderRef",ref:g,value:O(w).username,"onUpdate:value":[t[0]||(t[0]=e=>O(w).username=e),V]},null,8,["value"])])),_:1})])),table:W((()=>[U(n,{"row-key":"time","checked-row-keys":O(v),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>I(v)?v.value=e:null),loading:O(b).loading,data:O(b).data,columns:O(f)},null,8,["checked-row-keys","loading","data","columns"])])),pageRight:W((()=>[U(s,{page:O(w).p,"onUpdate:page":t[2]||(t[2]=e=>O(w).p=e),"item-count":O(b).total,onRefresh:N},null,8,["page","item-count"])])),pageLeft:W((()=>[U(o,{"row-key":"time","checked-row-keys":O(v),"onUpdate:checkedRowKeys":t[3]||(t[3]=e=>I(v)?v.value=e:null),data:O(b).data,options:E},null,8,["checked-row-keys","data"])])),_:1}),U(_,{show:O(P).show,"onUpdate:show":t[4]||(t[4]=e=>O(P).show=e),title:O(P).title,data:O(P).data,width:850,height:680,component:O(a)},null,8,["show","title","data","component"])])}}}),ee=E({__name:"index",setup(e){const a=T((()=>o((()=>t.import("./index-legacy191.js?v=1742891699271")),void 0))),{t:d}=C(),r=S(),g=R({p:1,username:null}),{table:w,columns:v,setLoading:k}=_([{key:"from",title:d("Mail.Email.index_2"),width:"25%",minWidth:140,ellipsis:{tooltip:!0}},{key:"theme",title:d("Mail.Email.index_3"),minWidth:160,ellipsis:{tooltip:{width:"trigger"}},render:e=>{const t=e.html.replace(/[^\u4e00-\u9fa5]/g,"");return U("span",{class:"cursor-pointer",onClick:()=>{E(e)}},[U("a",{class:"bt-link"},[e.subject]),U("span",{class:"text-desc"},[L(" - "),t||e.body])])}},{key:"time",title:d("Mail.Email.index_4"),width:"12%",minWidth:140,render:e=>l(e.time)},h({width:150,options:e=>[{label:d("Mail.Email.index_5"),onClick:()=>{E(e)}},{label:d("Mail.Email.index_10"),onClick:()=>{I(e)}},{label:d("Public.Btn.Del"),onClick:()=>{P(e)}}]})]),j=y(),E=e=>{j.data.row=e,j.title=d("Mail.Email.index_7",[e.subject]),j.show=!0},I=async e=>{await b({path:e.path,username:g.username||""}),z()},P=async e=>{await x({path:e.path}),z()},z=async()=>{try{k(!0);const{message:e}=await f({p:g.p,username:g.username||""});i(e)&&(w.data=n(e.data)?e.data:[],w.total=s(e.page))}finally{k(!1)}},A=()=>{g.p=1,z()};return k(!0),D((async()=>{await r.value.getList()})),(e,t)=>{const l=H,i=J,n=m,s=p,o=u,d=c;return $(),B("div",null,[U(o,null,{toolsLeft:W((()=>[U(i,{class:"w-460px"},{default:W((()=>[U(l,null,{default:W((()=>[L(K(e.$t("Mail.Email.index_1")),1)])),_:1}),U(M,{ref_key:"senderRef",ref:r,value:O(g).username,"onUpdate:value":[t[0]||(t[0]=e=>O(g).username=e),A]},null,8,["value"])])),_:1})])),table:W((()=>[U(n,{loading:O(w).loading,data:O(w).data,columns:O(v)},null,8,["loading","data","columns"])])),pageRight:W((()=>[U(s,{page:O(g).p,"onUpdate:page":t[1]||(t[1]=e=>O(g).p=e),"item-count":O(w).total,onRefresh:z},null,8,["page","item-count"])])),_:1}),U(d,{show:O(j).show,"onUpdate:show":t[2]||(t[2]=e=>O(j).show=e),title:O(j).title,data:O(j).data,width:850,height:680,component:O(a)},null,8,["show","title","data","component"])])}}}),te=()=>CKEDITOR.instances.editor.getData(),ae={class:"w-350px"},le={class:"w-760px"},ie={class:"w-760px"},ne={class:"text-error"},se=E({__name:"index",setup(e){const{t:t}=C(),a=S(),l=S(null),i=R({sender:null,mail_to:"",subject:"",content:""}),n={mail_to:{trigger:["blur","input"],validator:()=>""!==i.mail_to.trim()||new Error(t("Mail.Send.index_9"))},subject:{trigger:["blur","input"],validator:()=>""!==i.subject.trim()||new Error(t("Mail.Send.index_10"))},content:{validator:()=>""!==te()||new Error(t("Mail.Send.index_11"))}},s=async()=>{await(l.value?.validate());const e={mail_from:i.sender||"",mail_to:JSON.stringify(i.mail_to.split(",")),subject:i.subject,content:te(),subtype:"html",smtp_server:"localhost"};var t;await j(e),i.mail_to="",i.subject="",t="",CKEDITOR.instances.editor.setData(t)};return D((()=>{(async e=>{await d("/static/ckeditor/ckeditor.js?v=1742891699271"),CKEDITOR.replace(e,{customConfig:"/static/ckeditor/config.js?v1.0"})})("editor"),a.value.getList()})),P((()=>{CKEDITOR.remove(CKEDITOR.instances.editor)})),(e,t)=>{const o=N,d=V,c=Y,u=G,r=F;return $(),B("div",null,[U(u,{ref_key:"formRef",ref:l,class:"pt-8px",model:O(i),rules:n},{default:W((()=>[U(o,{label:e.$t("Mail.Send.index_1"),path:"sender"},{default:W((()=>[z("div",ae,[U(M,{ref_key:"senderRef",ref:a,value:O(i).sender,"onUpdate:value":t[0]||(t[0]=e=>O(i).sender=e),placeholder:e.$t("Mail.Send.index_2")},null,8,["value","placeholder"])])])),_:1},8,["label"]),U(o,{label:e.$t("Mail.Send.index_3"),path:"mail_to"},{default:W((()=>[z("div",le,[U(d,{value:O(i).mail_to,"onUpdate:value":t[1]||(t[1]=e=>O(i).mail_to=e),placeholder:e.$t("Mail.Send.index_4")},null,8,["value","placeholder"])])])),_:1},8,["label"]),U(o,{label:e.$t("Mail.Send.index_5"),path:"subject"},{default:W((()=>[z("div",ie,[U(d,{value:O(i).subject,"onUpdate:value":t[2]||(t[2]=e=>O(i).subject=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"]),U(o,{label:e.$t("Mail.Send.index_6"),path:"content"},{default:W((()=>t[3]||(t[3]=[z("div",{class:"w-760px h-392px"},[z("textarea",{class:"hidden",name:"editor",id:"editor",rows:"10"})],-1)]))),_:1},8,["label"]),U(o,{label:" ","show-feedback":!1},{default:W((()=>[U(c,{type:"primary",size:"large",onClick:s},{default:W((()=>[L(K(e.$t("Mail.Send.index_7")),1)])),_:1})])),_:1})])),_:1},8,["model"]),U(r,{class:"ml-24px mt-24px"},{default:W((()=>[z("li",ne,K(e.$t("Mail.Send.index_8")),1)])),_:1})])}}});e("default",E({__name:"index",setup(e){const t=S("inbox"),l=[{key:"inbox",label:"Inbox",component:X},{key:"outbox",label:"Outbox",component:Z},{key:"spam",label:"Spam",component:ee},{key:"sender",label:"Sender",component:se}];return(e,i)=>{const n=a,s=q;return $(),A(s,{class:"p-16px"},{default:W((()=>[U(n,{value:O(t),"onUpdate:value":i[0]||(i[0]=e=>I(t)?t.value=e:null),options:l},null,8,["value"])])),_:1})}}}))}}}));
