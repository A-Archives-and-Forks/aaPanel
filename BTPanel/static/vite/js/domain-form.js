import{_ as e}from"./index.vue_vue_type_script_setup_true_lang.js?v=1749179669910";import{X as r,aq as a}from"./public.js?v=1749179669910";import{a as l,t as o,h as t,c as p}from"./utils2.js?v=1749179669910";import{d,e as i,O as s,r as u,j as n,R as c,a0 as _,a1 as v,P as m,U as y,V as x,ao as b}from"./vue.js?v=1749179669910";import{_ as h,cj as f,cp as S,bY as g,c0 as w}from"./naive.js?v=1749179669910";import"./page_layout.js?v=1749179669910";import"./common.js?v=1749179669910";import"./__commonjsHelpers__.js?v=1749179669910";const j={class:"w-300px"},L={class:"w-300px"},D=d({__name:"domain-form",props:{row:{},isEdit:{type:Boolean},onRefresh:{}},setup(d,{expose:D}){const $=d,{isEdit:U,row:P,onRefresh:X}=$,k=i((()=>U&&P?P.provider_name.includes("CloudFlare"):l.value.includes("CloudFlare"))),{t:q}=s(),M=u(null),C=n({record_type:"A",record_value:"",ttl:1,ps:"",proxy:0,priority:10,record:""}),R={record:{required:!0,trigger:"change",message:q("SSL.Domain.index_12")},record_value:{required:!0,trigger:"blur",message:q("SSL.Domain.index_14")},ttl:{required:!0,trigger:"blur",type:"number",message:q("SSL.Domain.index_15")},priority:{required:!0,trigger:"blur",type:"number",message:"Please enter the priority"}},T=()=>({id:U&&P?P.id:null,pid:t.value,domain:p.value,record:C.record,record_type:C.record_type,record_value:C.record_value,ttl:C.ttl,ps:C.ps,proxy:k.value&&"MX"!==C.record_type?C.proxy:-1,priority:"MX"===C.record_type?C.priority:-1});return(()=>{const{row:e,isEdit:r}=$;r&&e&&(C.record=e.record,C.record_type=e.record_type,C.record_value=e.record_value,C.ttl=e.ttl,C.ps=e.ps,C.proxy=e.proxy,C.priority="MX"===C.record_type?e.priority:-1)})(),D({onConfirm:async()=>{var e;await(null==(e=M.value)?void 0:e.validate()),U&&P?await r(T()):await a(T()),X()}}),(r,a)=>{const l=h,t=f,p=S,d=g,i=w,s=e;return c(),_(s,{class:"p-20px",ref_key:"formRef",ref:M,model:x(C),rules:R},{default:v((()=>[m(t,{label:r.$t("SSL.Domain.index_11"),path:"record"},{default:v((()=>[y("div",j,[m(l,{value:x(C).record,"onUpdate:value":a[0]||(a[0]=e=>x(C).record=e),placeholder:r.$t("SSL.Domain.index_12")},null,8,["value","placeholder"])])])),_:1},8,["label"]),m(t,{label:r.$t("Ftp.Table.index_3"),path:"record_type"},{default:v((()=>[m(p,{class:"w-300px",value:x(C).record_type,"onUpdate:value":a[1]||(a[1]=e=>x(C).record_type=e),options:x(o),disabled:x(U)},null,8,["value","options","disabled"])])),_:1},8,["label"]),m(t,{label:r.$t("SSL.Domain.index_13"),path:"record_value"},{default:v((()=>[y("div",L,[m(l,{value:x(C).record_value,"onUpdate:value":a[2]||(a[2]=e=>x(C).record_value=e),placeholder:r.$t("SSL.Domain.index_14")},null,8,["value","placeholder"])])])),_:1},8,["label"]),m(t,{label:"TTL",path:"ttl"},{default:v((()=>[m(d,{min:1,max:1800,"show-button":!1,class:"w-300px!",value:x(C).ttl,"onUpdate:value":a[3]||(a[3]=e=>x(C).ttl=e),placeholder:r.$t("SSL.Domain.index_15")},null,8,["value","placeholder"])])),_:1}),"MX"===x(C).record_type?(c(),_(t,{key:0,label:"Priority",path:"priority"},{default:v((()=>[m(d,{"show-button":!1,class:"w-300px!",value:x(C).priority,"onUpdate:value":a[4]||(a[4]=e=>x(C).priority=e),placeholder:"Please enter the priority",min:1,max:65535},null,8,["value"])])),_:1})):b("",!0),m(t,{label:r.$t("Public.Table.Ps"),path:"ps"},{default:v((()=>[m(l,{class:"w-300px!",value:x(C).ps,"onUpdate:value":a[5]||(a[5]=e=>x(C).ps=e),placeholder:r.$t("Crontab.arrange.index_27")},null,8,["value","placeholder"])])),_:1},8,["label"]),x(k)&&"MX"!==x(C).record_type?(c(),_(t,{key:1,label:r.$t("SSL.Domain.index_16"),path:"proxy"},{default:v((()=>[m(i,{value:x(C).proxy,"onUpdate:value":a[6]||(a[6]=e=>x(C).proxy=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"])):b("",!0)])),_:1},8,["model"])}}});export{D as default};
