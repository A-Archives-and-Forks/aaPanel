import{_ as e}from"./index226.js?v=1744703330658";import{_ as a,a as t}from"./index.vue_vue_type_script_setup_true_lang21.js?v=1744703330658";import{_ as n}from"./index.vue_vue_type_script_setup_true_lang22.js?v=1744703330658";import{_ as s}from"./index123.js?v=1744703330658";import{_ as l}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1744703330658";import{_ as o}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1744703330658";import{d as i,O as u,r,R as p,$ as d,a0 as _,c as m,a1 as c,P as v,V as x,af as g,an as f,e as y,S as b,F as j,N as w,U as h,ap as k}from"./vue.js?v=1744703330658";import{b as P,f as D,w as B,c as U}from"./public.js?v=1744703330658";import{p as C}from"./soft.js?v=1744703330658";import{h as M,e6 as S,ev as $,d as z,m as F,ew as L,bC as O,ex as H,ey as I,K as N,k as K,ez as T}from"./page_layout.js?v=1744703330658";import{_ as R,T as V,bU as q,b$ as A}from"./naive.js?v=1744703330658";import{_ as E}from"./index95.js?v=1744703330658";import{_ as G}from"./index96.js?v=1744703330658";import{_ as J}from"./index103.js?v=1744703330658";import"./php.js?v=1744703330658";import"./alarm.js?v=1744703330658";import"./index.vue_vue_type_script_setup_true_lang.js?v=1744703330658";import"./index.vue_vue_type_script_setup_true_lang11.js?v=1744703330658";import"./index.vue_vue_type_script_setup_true_lang15.js?v=1744703330658";import"./theme-chrome.js?v=1744703330658";import"./__commonjsHelpers__.js?v=1744703330658";import"./file.js?v=1744703330658";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1744703330658";import"./common.js?v=1744703330658";const Q=i({__name:"index",setup(e,{expose:a}){const{t:t}=u(),n=r(""),{table:i,columns:y}=P([{key:"name",title:t("Database.index_12")},{key:"sizeOnDisk",title:t("Site.DelSite.index_8"),render:e=>M(e.sizeOnDisk)},D({options:e=>[{label:t("Public.Btn.Del"),onClick:()=>{B({title:t("Database.index_30"),content:t("Plugin.MongoDB.index_8",[e.name]),onConfirm:async()=>{await S("mongodb",{name:e.name,id:e.id}),h()}})}}]})]),b=async()=>{n.value?(await L("mongodb",{sid:0,name:n.value,db_user:n.value,password:O(16),active:!1,ssl:"",ps:n.value}),h()):F.error(t("Database.form.index_15"))},{loading:j,setLoading:w}=U(),h=async()=>{if(C.s_status)try{w(!0);const{message:e}=await $();z(e)&&(i.data=e.databases)}finally{w(!1)}};return h(),a({init:h}),(e,a)=>{const t=R,u=V,r=q,w=o,h=l,k=s;return p(),d(k,{install:x(C).s_status},{desc:_((()=>[m(c(e.$t("Plugin.MongoDB.index_7")),1)])),default:_((()=>[v(h,null,{toolsLeft:_((()=>[v(r,{class:"flex-nowrap!"},{default:_((()=>[v(t,{value:x(n),"onUpdate:value":a[0]||(a[0]=e=>g(n)?n.value=e:null),placeholder:e.$t("Database.index_12"),onKeyup:f(b,["enter"])},null,8,["value","placeholder"]),v(u,{type:"primary",onClick:b},{default:_((()=>[m(c(e.$t("Database.mongo.index_4")),1)])),_:1})])),_:1})])),table:_((()=>[v(w,{data:x(i).data,columns:x(y),loading:x(j),"max-height":400},null,8,["data","columns","loading"])])),_:1})])),_:1},8,["install"])}}}),W={class:"w-100px! text-right"},X={class:"w-150px! color-#666"},Y={class:"w-100px! text-right"},Z={class:"text-center my-10px"},ee=K(i({__name:"index",setup(e,{expose:a}){const{t:t}=u(),n={bindIp:t("Plugin.MongoDB.index_2"),dbPath:t("Plugin.MongoDB.index_3"),path:t("Plugin.MongoDB.index_4"),pidFilePath:t("Plugin.MongoDB.index_5"),port:t("Plugin.MongoDB.index_6")},s=r(),l=async()=>{const e=s.value.reduce(((e,a)=>(e[a.name]=a.value,e)),{});await H(e)},o=y((()=>{const e=s.value.find((e=>"authorization"===e.name));return!!e&&"enabled"===e.value})),i=()=>{const e=s.value.find((e=>"pwd"===e.name));e&&(e.value=O(16))},{loading:g,setLoading:f}=U(),P=async()=>{try{f(!0);const{message:e}=await I();z(e)&&(s.value=Object.entries(e).map((([e,a])=>({name:e,value:a,ps:n[e]}))))}finally{f(!1)}};return P(),a({init:P}),(e,a)=>{const t=R,n=A,u=q,r=G,f=V,y=E,P=N;return p(),d(P,{show:x(g)},{default:_((()=>[(p(!0),b(j,null,w(x(s),((e,a)=>(p(),b("div",{key:a},["pwd"!==e.name?(p(),d(u,{key:0,class:"list_box"},{default:_((()=>[h("div",W,c(e.name),1),"authorization"!==e.name?(p(),d(t,{key:0,class:"w-300px!",value:e.value,"onUpdate:value":a=>e.value=a},null,8,["value","onUpdate:value"])):(p(),d(n,{key:1,value:e.value,"onUpdate:value":a=>e.value=a,"checked-value":"enabled","unchecked-value":"disabled"},null,8,["value","onUpdate:value"])),h("div",X,c(e.ps),1)])),_:2},1024)):k("",!0),"pwd"===e.name&&x(o)?(p(),d(u,{key:1,class:"list_box"},{default:_((()=>[h("div",Y,c(e.name),1),v(r,{"icon-name":"refresh",value:e.value,"onUpdate:value":a=>e.value=a,class:"w-300px!",onClick:i,placeholder:"Please enter root password"},null,8,["value","onUpdate:value"])])),_:2},1024)):k("",!0)])))),128)),h("div",Z,[v(f,{type:"primary",onClick:l},{default:_((()=>[m(c(e.$t("Public.Btn.Save")),1)])),_:1})]),v(y,null,{default:_((()=>[h("li",null,c(e.$t("Plugin.MongoDB.index_1")),1)])),_:1})])),_:1},8,["show"])}}}),[["__scopeId","data-v-872a97b6"]]),ae=i({__name:"index",setup(e,{expose:a}){const t=r("None"),{loading:n,setLoading:s}=U(),l=async()=>{try{s(!0);const{message:e}=await T();z(e)&&(t.value=e.result?e.result:"None")}finally{s(!1)}};return l(),a({init:l}),(e,a)=>{const s=J,l=N;return p(),d(l,{class:"h-610px",show:x(n)},{default:_((()=>[v(s,{log:x(t)},null,8,["log"])])),_:1},8,["show"])}}}),te=i({__name:"index",setup(s){const{t:l}=u(),o=r("service"),i=[{key:"service",label:l("Security.History.Index_10"),component:a},{key:"version",label:l("Plugin.Ftp.index_9"),component:n},{key:"database",label:l("Site.PHP.add_site_16"),component:Q},{key:"config",label:l("Public.Btn.Config"),component:ee},{key:"file",label:l("Site.Config.index_15"),data:{path:"/www/server/mongodb/config.conf"},component:t},{key:"log",label:l("Ftp.Table.index_15"),component:ae}];return(a,t)=>{const n=e;return p(),d(n,{value:x(o),"onUpdate:value":t[0]||(t[0]=e=>g(o)?o.value=e:null),data:i},null,8,["value"])}}});export{te as default};
