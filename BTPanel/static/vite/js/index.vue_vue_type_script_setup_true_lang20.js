import{d as t,c as a,u as e,_ as s}from"./public.js?v=1753954525509";import{g as l}from"./php.js?v=1753954525509";import{e0 as n,b as u,c as i,e1 as o,w as r,e2 as d,e3 as _,p as c}from"./page_layout.js?v=1753954525509";import{p}from"./soft.js?v=1753954525509";import{bY as m,ay as v,c5 as f,cA as g,cF as x,cE as y,c1 as h,cI as b,av as $}from"./naive.js?v=1753954525509";import{k as P,P as S,r as k,U as w,V as C,Q as j,a2 as q,j as U,a3 as A,X as M,W as R,H as L,a1 as F,al as N,F as B,e as T,ah as z,q as D,o as E}from"./vue.js?v=1753954525509";import{a as H,s as I,b as Q}from"./alarm.js?v=1753954525509";import{_ as V}from"./index.vue_vue_type_script_setup_true_lang.js?v=1753954525509";import{_ as W}from"./index.vue_vue_type_script_setup_true_lang10.js?v=1753954525509";import{_ as X}from"./index.vue_vue_type_script_setup_true_lang14.js?v=1753954525509";const Y=P({__name:"index",setup(a){const{t:e}=S(),s=k(!0),o=(a,s)=>{const l=e("Plugin.Mysql.index_5",[a,p.title]);t({title:e("Node.index_65"),content:l,onConfirm:async()=>{await n({name:p.s_version,type:s}),r()}})},r=async()=>{if("memcached"===p.name){const{message:t}=await u({sName:"memcached"});return void(i(t)&&(s.value=t.status,p.s_version=t.s_version,p.s_status=t.status))}const{message:t}=await l({name:p.name});i(t)&&(s.value=t.s_status,p.s_version=t.s_version,p.s_status=t.s_status)};return r(),(t,a)=>{const e=m,l=v;return w(),C(B,null,[j(e,{class:"items-center",size:0},{default:q((()=>[U(A(t.$t("Node.index_57"))+"ï¼š"+A(M(s)?t.$t("Public.Status.Start"):t.$t("Public.Status.Stop")),1),R("span",{class:L(["iconfont","icon-".concat(M(s)?"start":"stop")])},null,2)])),_:1}),j(e,{class:"mt-16px"},{default:q((()=>[j(l,{onClick:a[0]||(a[0]=a=>o(M(s)?t.$t("Public.Status.Stop"):t.$t("Public.Status.Start"),M(s)?"stop":"start"))},{default:q((()=>[U(A(M(s)?t.$t("Public.Status.Stop"):t.$t("Public.Status.Start")),1)])),_:1}),j(l,{onClick:a[1]||(a[1]=a=>o(t.$t("Public.Status.Restart"),"restart"))},{default:q((()=>[U(A(t.$t("Public.Status.Restart")),1)])),_:1}),"mongodb"!==M(p).name?(w(),F(l,{key:0,onClick:a[2]||(a[2]=a=>o(t.$t("Public.Status.Reload"),"reload"))},{default:q((()=>[U(A(t.$t("Public.Status.Reload")),1)])),_:1})):N("",!0)])),_:1})],64)}}}),G={class:"p-20px pt-28px pb-8px"},J={class:"w-250px"},K=P({__name:"set",props:{open:{type:Boolean,default:!1},taskList:{default:()=>[]}},emits:["refresh"],setup(t,{expose:a,emit:e}){const s=t,{open:l,taskList:n}=s,u=e,{t:i}=S(),r=k(null),d=T({status:!0,day_num:3,interval:600,method:[],count:1}),_={day_num:{trigger:"input",type:"number",required:!0,message:i("Config.Alarm.index_22")},interval:{trigger:"input",type:"number",required:!0,message:i("Config.Alarm.index_23")},method:{trigger:"change",type:"array",required:!0,message:i("Config.Safe.index_7")}},c=t=>({template_id:"5",status:t?d.status?1:0:null,task_id:t?n[0].id:null,title:t?n[0].title:null,task_data:{task_data:{tid:"5",type:"services",title:"Service Stop Alert",status:d.status,count:d.count,interval:d.interval,project:p.name,help:600},sender:d.method,number_rule:{day_num:d.day_num,total:0},time_rule:{send_interval:0,time_range:[]}}});return n.length>0&&(d.status=l||n[0].status,d.method=n[0].sender,d.count=n[0].task_data.count,d.day_num=n[0].number_rule.day_num,d.interval=n[0].task_data.interval),a({onConfirm:async()=>{var t;await(null==(t=r.value)?void 0:t.validate()),n.length?await o(c(!0)):await H(c(!1)),u("refresh")}}),(t,a)=>{const e=f,s=g,l=x,n=y,u=h,i=b,o=$,c=W,p=V;return w(),C("div",G,[j(p,{ref_key:"formRef",ref:r,model:M(d),rules:_},{default:q((()=>[j(s,{label:t.$t("Mail.Setting.index_51")},{default:q((()=>[j(e,{value:M(d).status,"onUpdate:value":a[0]||(a[0]=t=>M(d).status=t)},null,8,["value"])])),_:1},8,["label"]),j(s,{label:t.$t("Plugin.Mysql.index_4")},{default:q((()=>[j(n,{value:M(d).count,"onUpdate:value":a[1]||(a[1]=t=>M(d).count=t)},{default:q((()=>[j(l,{value:1},{default:q((()=>[U(A(t.$t("Config.Panel.index_83_1")),1)])),_:1}),j(l,{value:2},{default:q((()=>[U(A(t.$t("Config.Panel.index_83_2")),1)])),_:1})])),_:1},8,["value"])])),_:1},8,["label"]),j(s,{label:t.$t("Plugin.Mysql.index_29"),path:"interval"},{default:q((()=>[j(o,null,{default:q((()=>[j(u,{value:M(d).interval,"onUpdate:value":a[2]||(a[2]=t=>M(d).interval=t),class:"w-100px",min:0,"show-button":!1,placeholder:""},null,8,["value"]),j(i,{class:"min-w-52px text-center"},{default:q((()=>[U(A(t.$t("Public.Unit.Seconds")),1)])),_:1})])),_:1})])),_:1},8,["label"]),j(s,{label:t.$t("Config.Alarm.index_28"),path:"day_num"},{default:q((()=>[j(o,null,{default:q((()=>[j(u,{value:M(d).day_num,"onUpdate:value":a[3]||(a[3]=t=>M(d).day_num=t),class:"w-100px",min:0,"show-button":!1,placeholder:""},null,8,["value"]),j(i,{class:"min-w-52px text-center"},{default:q((()=>[U(A(t.$t("Public.Unit.Times")),1)])),_:1})])),_:1})])),_:1},8,["label"]),j(s,{label:t.$t("Config.Safe.index_6"),path:"method"},{default:q((()=>[R("div",J,[j(c,{value:M(d).method,"onUpdate:value":a[4]||(a[4]=t=>M(d).method=t)},null,8,["value"])])])),_:1},8,["label"])])),_:1},8,["model"])])}}}),O={class:"text-13px"},Z=P({__name:"index",setup(t){const{t:s}=S(),l=k(!1),n=k([]),u=async t=>{t?i(!0):(await I({task_id:n.value[0].id,status:0}),l.value=!1,n.value[0].status=!1)},i=(t=!1)=>{e({title:s("Plugin.Mysql.index_3"),width:480,footer:!0,confirmText:s("Public.Btn.Save"),data:{open:t,taskList:n.value,onRefresh:_},component:K})},{loading:o,setLoading:d}=a(),_=async()=>{try{d(!0);const{message:t}=await Q({keyword:p.name});r(t)&&(t.length?(l.value=t[0].status,n.value=t):(l.value=!1,n.value=[]))}finally{d(!1)}};return _(),(t,a)=>{const e=f,s=m;return w(),F(s,{class:"items-center"},{default:q((()=>[R("div",O,A(t.$t("Plugin.Mysql.index_2")),1),j(e,{value:M(l),loading:M(o),"onUpdate:value":u},null,8,["value","loading"]),R("span",{class:"bt-link",onClick:a[0]||(a[0]=t=>i(M(l)))},A(t.$t("Database.Mysql.index_26")),1)])),_:1})}}}),tt=P({__name:"index",setup(t,{expose:e}){const l=k(!1),n=async t=>{try{await d({name:p.name,status:t?1:0})}catch(a){l.value=!l.value}},{loading:u,setLoading:o}=a(),r=async()=>{try{o(!0);const{message:t}=await _({name:p.name});i(t)&&(l.value=!!t.status)}finally{o(!1)}};return r(),e({init:r}),(t,a)=>{const e=f,i=m,o=s;return w(),C(B,null,[j(i,{class:"items-center"},{default:q((()=>[R("span",null,A(t.$t("Plugin.Apache.index_10")),1),j(e,{value:M(l),"onUpdate:value":[a[0]||(a[0]=t=>z(l)?l.value=t:null),n],loading:M(u)},null,8,["value","loading"]),a[1]||(a[1]=R("span",null,null,-1))])),_:1,__:[1]}),j(o,{class:"mt-10px"},{default:q((()=>[R("li",null,A(t.$t("Plugin.Apache.index_14")),1),R("li",null,A(t.$t("Plugin.Apache.index_11",[M(p).title])),1)])),_:1})],64)}}}),at=P({__name:"index",setup:t=>(t,a)=>{const e=c;return w(),C(B,null,[j(Y),j(e,{class:"py-26px"}),t.$slots.center?(w(),C(B,{key:0},[D(t.$slots,"center"),j(e,{class:"py-26px"})],64)):N("",!0),j(Z),j(e,{class:"py-26px"}),j(tt)],64)}}),et={class:"mt-8px"},st=P({__name:"index",props:{path:{},height:{default:480}},setup(t,{expose:a}){const e=k(null),l=t,n=k(l.path),u=async()=>{var t;null==(t=e.value)||t.getContent()},i=()=>{var t;null==(t=e.value)||t.saveFile()};return E((()=>{u()})),a({init:u}),(t,a)=>{const u=v,o=s;return w(),C("div",null,[j(X,{ref_key:"configRef",ref:e,path:M(n),"onUpdate:path":a[0]||(a[0]=t=>z(n)?n.value=t:null),height:l.height},null,8,["path","height"]),R("div",et,[j(u,{type:"primary",onClick:i},{default:q((()=>[U(A(t.$t("Site.Cert.index_60")),1)])),_:1})]),j(o,{class:"mt-16px"},{default:q((()=>[R("li",null,A(t.$t("Plugin.Mysql.index_1",[M(p).name])),1)])),_:1})])}}});export{at as _,st as a};
