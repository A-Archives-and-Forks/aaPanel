import{_ as a}from"./index226.js?v=1742891699271";import{_ as s}from"./index95.js?v=1742891699271";import{_ as e,b as t,m as l,eN as n,K as o,k as i}from"./page_layout.js?v=1742891699271";import{t as r,v as c}from"./ssl.js?v=1742891699271";import{c as m}from"./public.js?v=1742891699271";import{bU as u,cS as d,cj as p,T as f}from"./naive.js?v=1742891699271";import{d as v,O as h,at as _,r as x,j as S,e as y,a3 as g,R as j,S as w,U as b,P as L,a1 as k,V as R,a2 as U,ap as z,c as N,af as $,a0 as H}from"./vue.js?v=1742891699271";import"./common.js?v=1742891699271";import"./__commonjsHelpers__.js?v=1742891699271";const O={key:0,class:"text-#20a53a"},T={class:"mt-10px"},A=i(v({__name:"index",props:{row:{},onRefresh:{type:Function}},setup(a){const{t:i}=h(),v=a,{row:H}=_(v),A=x("all"),C=S({domains:H.value.use_for.sites}),F=x([]),I=x([]),J=y((()=>"matched"===A.value?I.value:F.value)),K=({option:a})=>{const s=a.match?"ssl-lock":"ssl-unlock",t=a.match?"text-#20a53a":"text-error";return L(u,{size:5,class:"items-center flex-nowrap!"},{default:()=>[L(e,{name:s,class:t,size:18},null),L("div",{class:"truncate w-full"},[a.label])]})},{loading:P,setLoading:V}=m(),q=async()=>{try{const{message:a}=await r({hash:H.value.hash,domains:JSON.stringify(C.domains)});t(a)&&(a.faild?l.error("".concat(i("SSL.index_31"),"（").concat(a.faildList.map((a=>a.siteName)).join(","),"）")):l.success(i("SSL.index_32")),v.onRefresh())}catch(a){console.error(a)}},B=a=>a.map((a=>({label:a.name,value:a.name,match:a.match})));return(async()=>{try{V(!0);const{message:a}=await c({hash:H.value.hash});if(t(a)){const s=a.sites.filter((a=>a.match)),e=a.sites.filter((a=>!a.match));F.value=B([...s,...e]),I.value=B(s)}}finally{V(!1)}})(),(a,t)=>{const l=g("i18n-t"),i=d,r=p,c=n,m=o,u=f,v=e,h=s;return j(),w("div",null,[b("div",null,[L(l,{keypath:"SSL.index_26",tag:"span",scope:"global"},{a:k((()=>[R(H).verify_domains.length?(j(),w("span",O,U(R(H).verify_domains.join(",")),1)):z("",!0)])),_:1})]),L(r,{type:"segment",animated:"",value:R(A),"onUpdate:value":t[0]||(t[0]=a=>$(A)?A.value=a:null),class:"my-10px"},{default:k((()=>[L(i,{name:"all"},{default:k((()=>[N(U(a.$t("SSL.index_28")),1)])),_:1}),L(i,{name:"matched"},{default:k((()=>[N(U(a.$t("SSL.index_27")),1)])),_:1})])),_:1},8,["value"]),L(m,{show:R(P)},{default:k((()=>[L(c,{"render-source-label":K,"render-target-label":K,value:R(C).domains,"onUpdate:value":t[1]||(t[1]=a=>R(C).domains=a),options:J.value,"source-filterable":"","virtual-scroll":""},null,8,["value","options"])])),_:1},8,["show"]),b("div",T,[L(u,{type:"primary",onClick:q},{default:k((()=>[N(U(a.$t("SSL.index_29")),1)])),_:1})]),L(h,{class:"mt-20px"},{default:k((()=>[b("li",null,[L(v,{name:"ssl-lock",class:"text-#20a53a",size:18}),t[2]||(t[2]=b("span",{class:"ml-8px"},"This SSL is applicable to the this domain",-1))]),b("li",null,[L(v,{name:"ssl-unlock",class:"text-error",size:18}),t[3]||(t[3]=b("span",{class:"ml-8px"},'After using this SSL, accessing the domain will show a "Not Secure" warning',-1))])])),_:1})])}}}),[["__scopeId","data-v-2920fdd8"]]),C=v({__name:"index",props:{data:{}},setup(s){const{t:e}=h(),t=s,{row:l,onRefresh:n,menu:o}=t.data,i=x("site"),r=[{key:"site",label:e("Home.index_68"),component:A,data:{row:l,onRefresh:n}}];return i.value=o||"site",(s,e)=>{const t=a;return j(),H(t,{value:R(i),"onUpdate:value":e[0]||(e[0]=a=>$(i)?i.value=a:null),data:r},null,8,["value"])}}});export{C as default};
