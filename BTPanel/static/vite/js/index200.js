import{_ as e}from"./index.vue_vue_type_script_setup_true_lang.js?v=1749179669910";import{_ as a}from"./index97.js?v=1749179669910";import{d as r,O as l,r as s,j as o,R as t,S as n,P as p,a1 as d,c as u,a2 as c,U as i,ak as v,V as _,at as f,M as m}from"./vue.js?v=1749179669910";import{ac as x}from"./public.js?v=1749179669910";import{m as S,p as g}from"./page_layout.js?v=1749179669910";import{c3 as h,cj as y,bU as w}from"./naive.js?v=1749179669910";import"./__commonjsHelpers__.js?v=1749179669910";import"./common.js?v=1749179669910";const L={class:"p-20px"},b=g(r({__name:"index",props:{onRefresh:{}},setup(r,{expose:g}){const{t:b}=l(),j=r,{onRefresh:k}=j,D=s(!1),R=s(!1),U=(e,a)=>{var r,l;a.preventDefault(),D.value="key"!==e&&D.value,R.value="cert"!==e&&R.value;const s=null==(r=a.dataTransfer)?void 0:r.files;if(!s||0===s.length)return S.error(b("SSL.index_38"));const o=s[0],t=null==(l=o.name.split(".").pop())?void 0:l.toLowerCase();if(![".pem",".crt",".cer",".key",".der",".pfx",".p12",".p7b",".p7c",".csr"].includes(".".concat(t)))return S.error(b("SSL.index_38"));if(window.FileReader){const a=new FileReader;a.onload=a=>{var r;(null==(r=a.target)?void 0:r.result)&&(C[e]=a.target.result)},a.onerror=()=>{S.error(b("SSL.index_39"))},a.readAsText(o)}else S.error(b("SSL.index_40"))},$=s(null),C=o({key:"",cert:""}),F={key:{required:!0,trigger:"change",message:b("SSL.index_35")},cert:{required:!0,trigger:"change",message:b("SSL.index_37")}};return g({onConfirm:async()=>{var e;await(null==(e=$.value)?void 0:e.validate()),await x(m(C)),S.success(b("Component.UploadFile.index_9")),null==k||k()}}),(r,l)=>{const s=h,o=a,m=y,x=w,S=e;return t(),n("div",L,[p(s,{type:"success","show-icon":!1},{default:d((()=>[u(c(r.$t("SSL.index_33"))+" ",1),l[8]||(l[8]=i("div",{class:"pt-5px"},"Supported formats: pem, crt, cer, key, der, pfx, p12, p7b, p7c, csr. ",-1))])),_:1}),p(S,{ref_key:"formRef",ref:$,model:_(C),rules:F,"label-placement":"top"},{default:d((()=>[p(x,{class:"w-full flex-nowrap!"},{default:d((()=>[p(m,{label:r.$t("SSL.index_34"),path:"key",class:"w-full"},{default:d((()=>[i("div",{class:v(["drag-box",{hover:_(D)}]),onDrop:l[1]||(l[1]=e=>U("key",e)),onDragover:l[2]||(l[2]=f((e=>D.value=!0),["prevent"])),onDragleave:l[3]||(l[3]=f((e=>D.value=!1),["prevent"]))},[p(o,{value:_(C).key,"onUpdate:value":l[0]||(l[0]=e=>_(C).key=e),rows:16,placeholder:r.$t("SSL.index_35")},null,8,["value","placeholder"])],34)])),_:1},8,["label"]),p(m,{label:r.$t("SSL.index_36"),path:"cert",class:"w-full"},{default:d((()=>[i("div",{class:v(["drag-box",{hover:_(R)}]),onDrop:l[5]||(l[5]=e=>U("cert",e)),onDragover:l[6]||(l[6]=f((e=>R.value=!0),["prevent"])),onDragleave:l[7]||(l[7]=f((e=>R.value=!1),["prevent"]))},[p(o,{value:_(C).cert,"onUpdate:value":l[4]||(l[4]=e=>_(C).cert=e),rows:16,placeholder:r.$t("SSL.index_37")},null,8,["value","placeholder"])],34)])),_:1},8,["label"])])),_:1})])),_:1},8,["model"])])}}}),[["__scopeId","data-v-a1f4ee4d"]]);export{b as default};
