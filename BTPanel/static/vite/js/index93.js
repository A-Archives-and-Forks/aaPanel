const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index144.js?v=1747989938512","js/page_layout.js?v=1747989938512","js/vue.js?v=1747989938512","js/__commonjsHelpers__.js?v=1747989938512","js/naive.js?v=1747989938512","js/common.js?v=1747989938512","js/public.js?v=1747989938512","css/public.css?v=1747989938512","css/page_layout.css?v=1747989938512","css/index66.css?v=1747989938512"])))=>i.map(i=>d[i]);
import{bv as e,d7 as a,c as t,N as n,p as l,l as s,df as i,dg as o,_ as c,o as r,m as u,dh as d,cK as p,cL as v,J as y,di as m,F as x,dj as _,dm as f,a4 as h,dk as g,dn as b,dc as C,d9 as k,bu as w,j as P,da as L,a as U,d8 as $,u as j}from"./page_layout.js?v=1747989938512";import{d as M,_ as O,r as S,y as I,R as z,S as B,U as F,V as T,ao as A,a2 as N,F as R,N as V,O as D,ak as Y,e as H,ad as E,ae as q,P as G,a1 as J,a0 as K,H as Q,i as W,t as X,c as Z,m as ee,k as ae,v as te,f as ne,aj as le,x as se,j as ie,n as oe,Y as ce,o as re}from"./vue.js?v=1747989938512";import{u as ue,d as de}from"./public.js?v=1747989938512";import{ck as pe,bq as ve,cl as ye,T as me,bR as xe,cv as _e,a2 as fe,cp as he,bU as ge}from"./naive.js?v=1747989938512";import{a as be,l as Ce}from"./paypal-js.js?v=1747989938512";import{P as ke}from"./open.js?v=1747989938512";import{_ as we,a as Pe,b as Le,c as Ue}from"./weChat-pay.js?v=1747989938512";import"./common.js?v=1747989938512";import"./__commonjsHelpers__.js?v=1747989938512";import"./index102.js?v=1747989938512";import"./index97.js?v=1747989938512";const $e={class:"relative w-240px py-40px pl-22px pr-8px bg-#FFF5E1"},je={class:"mb-38px"},Me={class:"flex mb-10px text-20px text-#e8a833"},Oe={key:0,class:"glyphicon glyphicon-vip"},Se={class:"ml-8px"},Ie={key:0,class:"min-h-34px text-#888"},ze={key:0},Be={class:"mb-16px text-15px text-default"},Fe={class:"text-13px"},Te={class:"flex-1 ml-8px overflow-hidden text-#666"},Ae={key:1,class:"mt-36px text-default"},Ne={class:"mb-16px text-15px"},Re=["innerHTML"],Ve={key:2,class:"pay-info-bg"},De={key:3,class:"contrast",href:"https://aapanel.com/new/pricing.html",target:"_blank",rel:"noreferer noopener"},Ye={key:4,class:"pay-info-recom"},He={class:"buy"},Ee={class:"text"},qe=l(M({__name:"index",setup(l){const s=e(),{type:i,label:o,desc:c,plugins:r}=O(s),u=S([]);return I((()=>{"pro"===i.value&&(async()=>{const{message:e}=await a({product_id:s.pid});t(e)&&(u.value=n(e.res)?e.res:[])})()})),(e,a)=>(z(),B("div",$e,[F("div",je,[F("div",Me,["pro"===T(i)?(z(),B("span",Oe)):A("",!0),F("span",Se,N(T(o)),1)]),"pro"===T(i)?(z(),B("div",Ie,N(T(c)),1)):A("",!0)]),"pro"===T(i)&&T(u).length>0?(z(),B("div",ze,[F("div",Be,N(e.$t("Component.Pay.index_3"))+":",1),F("div",Fe,[(z(!0),B(R,null,V(T(u),(e=>(z(),B("div",{key:e,class:"flex py-10px"},[a[0]||(a[0]=F("span",{class:"glyphicon glyphicon-ok text-#feaa04"},null,-1)),F("span",Te,N(e),1)])))),128))])])):A("",!0),"plugin"===T(i)&&T(r).length>0?(z(),B("div",Ae,[F("div",Ne,N(100===T(r)[0].type?e.$t("Mail.Overview.today_17"):e.$t("Component.Pay.index_4"))+": ",1),F("div",{class:"w-186px leading-22px text-13px",innerHTML:T(r)[0].ps},null,8,Re)])):A("",!0),"pro"===T(i)?(z(),B("div",Ve)):A("",!0),"pro"===T(i)?(z(),B("a",De,N(e.$t("Component.Pay.index_5")),1)):A("",!0),"plugin"===T(i)&&100!==T(r)[0].type?(z(),B("div",Ye,[F("div",He,N(e.$t("Component.Pay.index_6")),1),F("div",Ee,[F("span",null,N(e.$t("Component.Pay.index_7")),1)])])):A("",!0)]))}}),[["__scopeId","data-v-1e82318a"]]),Ge={class:"pay-menu"},Je=["onClick"],Ke={class:"name"},Qe={key:0,class:"glyphicon glyphicon-vip"},We={class:"text"},Xe={class:"desc"},Ze=l(M({__name:"index",emits:["change"],setup(a,{emit:t}){const n=t,l=e(),{t:s}=D(),i=S("pro"),o=S([{key:"pro",label:s("Component.Pay.index_1"),desc:s("Component.Pay.index_2"),pid:"100000058"}]),c=e=>{l.setMenu(e),i.value=e.key,n("change")};return(()=>{const{plugins:e}=l;if(e.length>0){const a=e[0],t={key:"plugin",label:a.name,desc:100!==a.type?s("Component.Pay.index_17"):s("Mail.Overview.today_16",[a.name]),pid:"".concat(a.pid)};return o.value=100===a.type?[t]:[...o.value,t],void c(o.value[o.value.length-1])}c(o.value[0])})(),(e,a)=>(z(),B("div",Ge,[(z(!0),B(R,null,V(T(o),(e=>(z(),B("div",{key:e.key,class:Y(["menu-item",["pro"===e.key?e.key:"",T(i)===e.key?"active":""]]),onClick:a=>c(e)},[F("div",Ke,["pro"===e.key?(z(),B("span",Qe)):A("",!0),F("div",We,N(e.label),1)]),F("div",Xe,N(e.desc),1)],10,Je)))),128))]))}}),[["__scopeId","data-v-7e948b4d"]]),ea={class:"new-price"},aa={class:"number"},ta={class:"time"},na={class:"old-price"},la={key:0,class:"tips"},sa=l(M({__name:"item",props:{data:{},active:{type:Boolean,default:!1},showTips:{type:Boolean,default:!1}},setup(e){const a=e,{t:t}=D(),n=H((()=>{const{data:e}=a,n=s(e.cycle);return 999===n?t("Component.Auth.index_6"):"year"===e.cycle_unit?t("Component.Pay.index_14",[n,t("Public.Unit.Year",n)]):t("Component.Pay.index_15",[n,t("Public.Unit.Month",n)])})),l=H((()=>{const{data:e}=a;return e.children[0]}));return(e,a)=>e.data.children.length>0?(z(),B("li",{key:0,class:Y(["radio-item pro",{active:e.active}])},[F("div",ea,[F("span",aa,[a[0]||(a[0]=F("span",{class:"symbol"},"$",-1)),F("span",null,N(T(l).price.toFixed(2)),1)]),a[1]||(a[1]=F("span",{class:"ml-4px mr-2px"},"/",-1)),F("span",ta,N(T(n)),1)]),F("div",na,N(T(t)("Component.Pay.index_16",["$".concat(T(l).market_price)])),1),e.showTips?(z(),B("div",la,N(e.$t("Component.Pay.index_10")),1)):A("",!0),a[2]||(a[2]=F("div",{class:"checked"},null,-1))],2)):A("",!0)}}),[["__scopeId","data-v-c87d6893"]]),ia={class:"mb-20px"},oa={class:"mb-16px text-14px"},ca=l(M({__name:"index",props:E({data:{default:()=>[]}},{cycle:{default:0},cycleModifiers:{}}),emits:E(["change"],["update:cycle"]),setup(e,{emit:a}){const t=a,n=q(e,"cycle");return(e,a)=>{const l=i,s=o;return z(),B("div",ia,[F("div",oa,N(e.$t("Component.Pay.index_9")),1),G(s,{"slides-per-view":3,effect:"slide","space-between":20,loop:!1,"show-dots":!1,draggable:!0,"show-arrow":!0},{default:J((()=>[(z(!0),B(R,null,V(e.data,((e,a)=>(z(),K(l,{key:"".concat(e.cycle+e.cycle_unit),class:"pt-8px",style:Q({width:3===a?"190px":"180px"})},{default:J((()=>[G(sa,{data:e,active:a===n.value,"show-tips":0===a,onClick:e=>(e=>{const a=n.value;n.value=e,t("change",e,a)})(a)},null,8,["data","active","show-tips","onClick"])])),_:2},1032,["style"])))),128))])),_:1})])}}}),[["__scopeId","data-v-e645f1d7"]]),ra={key:0,class:"discount"},ua=l(M({__name:"item",props:{data:{},active:{type:Boolean,default:!1}},setup(a){const t=a,n=e(),{plugins:l}=n,s=S(!1);l.length&&100===l[0].type&&(s.value=!0);const{t:i}=D(),o=H((()=>{const{data:e}=t,a=Math.round(100-100*e.discount_rate);return i("Component.Pay.index_13",["".concat(a,"%")])}));return(e,a)=>(z(),B("li",{class:Y(["radio-item pro",{active:e.active}])},[F("span",null,N((T(s)?e.data.num*(T(l)[0].num||1):e.data.num).toLocaleString()),1),a[0]||(a[0]=F("div",{class:"checked"},null,-1)),e.data.discount_rate<1?(z(),B("div",ra,N(T(o)),1)):A("",!0)],2))}}),[["__scopeId","data-v-7e0db0d2"]]),da={class:"mb-16px"},pa={class:"mb-16px text-14px"},va={class:"relative flex"},ya=M({__name:"index",props:E({data:{default:()=>[]}},{number:{},numberModifiers:{}}),emits:E(["change"],["update:number"]),setup(a,{emit:t}){const n=e(),{plugins:l}=n,s=S(!1);l.length&&100===l[0].type&&(s.value=!0);const i=t,o=q(a,"number");return(e,a)=>(z(),B("div",da,[F("div",pa,N(T(s)?T(l)[0].title:e.$t("Component.Pay.index_11")),1),F("ul",va,[(z(!0),B(R,null,V(e.data,((e,a)=>(z(),K(ua,{key:"".concat(e.num),data:e,active:a===o.value,onClick:e=>(e=>{o.value=e,i("change")})(a)},null,8,["data","active","onClick"])))),128))])]))}});function ma(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!W(e)}const xa=M({props:{value:String,onUpdateValue:Function,"onUpdate:value":Function,list:{type:Array,default:()=>[]}},emits:["change"],setup:(e,{emit:a})=>({doUpdateValue:a=>{const{onUpdateValue:t,"onUpdate:value":n}=e;null==t||t(a),null==n||n(a)},onChange:e=>{a("change",e)}}),render(){let e;return G(ye,{value:this.value,class:"pay-menu pro",type:"card",defaultValue:"",placement:"left",onUpdateValue:e=>{this.doUpdateValue(e)}},ma(e=this.list.map((e=>{let a;return G(pe,{name:e.key,tab:e.label,"display-directive":e.isLazy?"show:lazy":"if","tab-props":{onClick:()=>{this.onChange(e.key)}}},ma(a=ve(e.content))?a:{default:()=>[a]})})))?e:{default:()=>[e]})}}),_a={key:0,class:"mb-12px text-desc text-13px"},fa={class:"font-bold"},ha={class:"flex flex-wrap justify-center items-baseline"},ga={class:"mr-4px text-14px"},ba={class:"mr-4px pay-price-color"},Ca={class:"text-24px font-bold"},ka={key:0,class:"ml-8px pay-price-color font-bold"},wa=l(M({__name:"total",props:E({data:{},order:{},payType:{},showSubscription:{type:Boolean,default:!0},showCurrency:{type:Boolean,default:!0},changeSub:{type:Boolean,default:!0}},{subscribe:{type:Boolean,default:!1},subscribeModifiers:{},currency:{type:Boolean,default:!1},currencyModifiers:{}}),emits:["update:subscribe","update:currency"],setup(a){const t=a,n=e(),{t:l}=D(),{plugins:i}=n,o=S(!1);i.length&&100===i[0].type&&(o.value=!0);const c=q(a,"subscribe"),r=q(a,"currency"),u=X((()=>t.data)),d=X((()=>t.order)),p=H((()=>c.value&&s(y.value)>0?y.value:d.value.price)),v=H((()=>{const{cycle_unit:e}=u.value;return"year"===e?90:10})),y=H((()=>"paypal"===t.payType?u.value.paypal_first_subscription_price>0?u.value.paypal_first_subscription_price.toFixed(2):u.value.paypal_subscription_price.toFixed(2):u.value.first_subscription_price>0?u.value.first_subscription_price.toFixed(2):u.value.subscription_price.toFixed(2))),m=H((()=>{const{data:e}=t,a=s(e.cycle);return 999===a?l("Component.Auth.index_6"):"year"===e.cycle_unit?l("Component.Pay.index_14",[a,l("Public.Unit.Year",a)]):l("Component.Pay.index_15",[a,l("Public.Unit.Month",a)])})),x=H((()=>{const{data:e}=t;return 2===e.charge_type?l("Component.Auth.index_6").toLocaleLowerCase():"year"===e.cycle_unit?l("Public.Unit.Year").toLocaleLowerCase():l("Public.Unit.Month").toLocaleLowerCase()}));return I((()=>{const{changeSub:e}=t;if(!e)return;const{num:a,cycle:n}=t.data;1===a&&1===n?(c.value=!0,r.value=!1):(c.value=!1,r.value=!1)})),(e,a)=>(z(),B(R,null,[c.value&&!T(o)?(z(),B("div",_a,[F("span",null,N(e.$t("Component.Pay.index_43")),1),F("span",fa,N(e.$t("Component.Pay.index_44",[T(v)])),1)])):A("",!0),F("div",ha,[F("span",ga,N(e.$t("Component.Pay.index_25")),1),F("span",ba,[a[0]||(a[0]=F("span",{class:"mr-2px text-18px font-bold"},"$",-1)),F("span",Ca,N(T(p)),1)]),F("span",null,"/"+N(T(m)),1),!c.value&&T(d).couponPrice?(z(),B("span",ka,N(e.$t("Component.Pay.index_19",[T(d).couponPrice,T(x)])),1)):A("",!0)])],64))}}),[["__scopeId","data-v-4870b600"]]),Pa={class:"mb-24px text-18px"},La=M({__name:"ssl",setup(e){const{t:a}=D(),t=()=>{ue({title:a("Config.Safe.index_11"),width:600,footer:!0,component:ke})};return(e,a)=>{const n=me;return z(),B(R,null,[F("div",Pa,N(e.$t("Component.Pay.index_41")),1),G(n,{type:"primary",class:"h-36px",size:"large",onClick:t},{default:J((()=>[Z(N(e.$t("Component.Pay.index_42")),1)])),_:1})],64)}}}),Ua={class:"relative w-full h-full"},$a={class:"absolute left-0 top-0 flex-center flex-col w-full h-full bg-#fff z-20"},ja={class:"mt-16px text-14px"},Ma=l(M({__name:"index",props:{loading:{type:Boolean,default:!1}},setup:e=>(e,a)=>{const t=c;return z(),B("div",Ua,[ee(e.$slots,"default",{},void 0,!0),ae(F("div",$a,[G(t,{class:"loading-icon",name:"base-loading",size:"40"}),F("div",ja,N(e.$t("Component.Pay.index_12")),1)],512),[[te,e.loading]])])}}),[["__scopeId","data-v-44975752"]]),Oa={class:"relative flex-center flex-col h-full"},Sa={class:"absolute left-0 bottom-12px w-full text-center text-desc"},Ia={class:"ml-8px"},za=M({__name:"index",props:{data:{},order:{},getOrder:{}},emits:["setMenu"],setup(a,{expose:n,emit:l}){const{t:s}=D(),i=a,o=l,c=X(i,"order"),p=X(i,"data"),v=e(),{ssl:y,orderLoad:m}=O(v);let x=null;const _=S(!0),f=S(!1),h=async()=>{if(!x)return;const e=u.loading(s("Component.Pay.index_12"));try{const{message:e}=await d({order_no:c.value.order_no,subscribe:_.value&&p.value.subscription_price>0?1:0,...f.value?{adaptive_pricing:1}:{}});t(e)&&(e.id?x.redirectToCheckout({sessionId:e.id}):u.error(s("Component.Pay.index_28")))}finally{e.close()}},g=()=>{o("setMenu","paypal")},b=async()=>{try{v.setOrderLoad(!0),await i.getOrder();const e=be(c.value.stripe_publishable_key);x=await e}finally{v.setOrderLoad(!1)}};return ne((()=>{b()})),n({init:b}),(e,a)=>{const t=me,n=r;return z(),K(Ma,{loading:T(m)},{default:J((()=>[F("div",Oa,[T(y)?(z(),B(R,{key:0},[G(wa,{subscribe:T(_),"onUpdate:subscribe":a[0]||(a[0]=e=>le(_)?_.value=e:null),currency:T(f),"onUpdate:currency":a[1]||(a[1]=e=>le(f)?f.value=e:null),"pay-type":"stripe",data:e.data,order:T(c)},null,8,["subscribe","currency","data","order"]),G(t,{class:"mt-16px w-150px h-34px text-14px",type:"primary",color:"#ff8f00",onClick:h},{default:J((()=>[Z(N(e.$t("Component.Pay.index_26")),1)])),_:1}),a[3]||(a[3]=F("div",{class:"h-36px"},null,-1)),F("div",Sa,[F("span",Ia,N(e.$t("Component.Pay.index_27",["Stripe"])),1),G(n,{onClick:g},{default:J((()=>a[2]||(a[2]=[Z("PayPal")]))),_:1})])],64)):(z(),K(La,{key:1}))])])),_:1},8,["loading"])}}}),Ba={class:"relative flex-center flex-col h-full"},Fa={class:"absolute left-0 bottom-12px w-full text-center text-desc"},Ta={class:"ml-8px"},Aa=M({__name:"index",props:{data:{},order:{},getOrder:{}},emits:["setMenu"],setup(a,{expose:n,emit:l}){const{t:s}=D(),i=a,o=l,c=X(i,"data"),d=X(i,"order"),_=e(),{ssl:f,orderLoad:h}=O(_),g=S(!0),b=S(!1),C=S(null),k=e=>new Promise(((a,n)=>{const{message:l}=e;if(t(l)){if(l.status)return a(l.res);u.error(l.msg)}n(l)})),w=async e=>{e?await $():await U()},P=()=>{o("setMenu","stripe")},L=async()=>{try{_.setOrderLoad(!0),await i.getOrder(),c.value.paypal_subscription_price>0&&g.value?await $():await U()}finally{_.setOrderLoad(!1)}},U=async()=>{var e,a;const t=await Ce({clientId:d.value.paypal_client_id});t&&C.value&&(C.value.innerHTML="",null==(a=t.Buttons)||a.call(t,{style:{height:34},fundingSource:null==(e=t.FUNDING)?void 0:e.PAYPAL,createOrder:()=>p({oid:d.value.order_id}).then(k).then((e=>e)),onApprove:e=>v({paypal_order_id:e.orderID}).then((()=>{u.success(s("Component.Pay.index_7")),y()}))}).render(C.value))},$=async()=>{var e,a;const t=await Ce({clientId:d.value.paypal_client_id,vault:!0,intent:"subscription"});t&&C.value&&(C.value.innerHTML="",null==(a=t.Buttons)||a.call(t,{style:{height:34},fundingSource:null==(e=t.FUNDING)?void 0:e.PAYPAL,createSubscription:(e,a)=>a.subscription.create({custom_id:"".concat(d.value.order_id),plan_id:c.value.paypal_subscription_plan_id}),onApprove:()=>(M(),Promise.resolve())}).render(C.value))};let j=null;const M=async()=>{const{close:e}=u.loading("Loading..."),a=async()=>{const{message:a}=await m({order_id:d.value.order_id});if(t(a)&&1===a.res)return j&&clearTimeout(j),e(),u.success(s("Component.Pay.index_7")),await x({force:1}),void y();n()},n=()=>{j=window.setTimeout((async()=>{await a()}),1e3)};j&&clearTimeout(j),await a(),n()};return ne((async()=>{await L()})),n({init:L}),(e,a)=>{const t=r;return z(),K(Ma,{loading:T(h)},{default:J((()=>[F("div",Ba,[T(f)?(z(),B(R,{key:0},[G(wa,{subscribe:T(g),"onUpdate:subscribe":[a[0]||(a[0]=e=>le(g)?g.value=e:null),w],currency:T(b),"onUpdate:currency":a[1]||(a[1]=e=>le(b)?b.value=e:null),"pay-type":"paypal",data:e.data,order:T(d),"show-currency":!1},null,8,["subscribe","currency","data","order"]),F("div",{ref_key:"payBtnRef",ref:C,class:"relative w-150px h-34px mt-16px z-10"},null,512),a[3]||(a[3]=F("div",{class:"h-36px"},null,-1)),F("div",Fa,[F("span",Ta,N(e.$t("Component.Pay.index_27",["Paypal"])),1),G(t,{onClick:P},{default:J((()=>a[2]||(a[2]=[Z("Stripe")]))),_:1})])],64)):(z(),K(La,{key:1}))])])),_:1},8,["loading"])}}}),Na={class:"relative flex-center flex-col h-full"},Ra={class:"mb-8px text-desc"},Va={class:"absolute left-0 bottom-12px w-full text-center text-desc"},Da={class:"ml-8px"},Ya=M({__name:"index",props:{data:{},order:{},getOrder:{}},emits:["setMenu"],setup(a,{expose:n,emit:l}){const{t:s}=D(),i=a,o=l,c=X(i,"order"),p=X(i,"data"),v=e(),{ssl:y,orderLoad:m}=O(v);let x=null;const _=S(!1),f=S(!0),h=async()=>{if(!x)return;const e=u.loading(s("Component.Pay.index_12"));try{const{message:e}=await d({order_no:c.value.order_no,subscribe:_.value&&p.value.subscription_price>0?1:0,...f.value?{adaptive_pricing:1}:{}});t(e)&&(e.id?x.redirectToCheckout({sessionId:e.id}):u.error(s("Component.Pay.index_28")))}finally{e.close()}},g=e=>{o("setMenu",e)},b=async()=>{try{v.setOrderLoad(!0),await i.getOrder();const e=be(c.value.stripe_publishable_key);x=await e}finally{v.setOrderLoad(!1)}};return ne((()=>{b()})),n({init:b}),(e,a)=>{const t=me,n=r;return z(),K(Ma,{loading:T(m)},{default:J((()=>[F("div",Na,[T(y)?(z(),B(R,{key:0},[a[7]||(a[7]=F("div",{class:"flex gap-16px mb-8px"},[F("img",{class:"h-32px",src:we,alt:""}),F("img",{class:"h-32px",src:Pe,alt:""}),F("img",{class:"h-32px",src:Le,alt:""}),F("img",{class:"h-32px",src:Ue,alt:""})],-1)),F("div",Ra,N(e.$t("Component.Pay.index_46")),1),G(wa,{subscribe:T(_),"onUpdate:subscribe":a[0]||(a[0]=e=>le(_)?_.value=e:null),currency:T(f),"onUpdate:currency":a[1]||(a[1]=e=>le(f)?f.value=e:null),"pay-type":"stripe",data:e.data,order:T(c),"change-sub":!1},null,8,["subscribe","currency","data","order"]),G(t,{class:"mt-16px w-150px h-34px text-14px",type:"primary",color:"#ff8f00",onClick:h},{default:J((()=>[Z(N(e.$t("Component.Pay.index_47")),1)])),_:1}),a[8]||(a[8]=F("div",{class:"h-32px"},null,-1)),F("div",Va,[F("span",Da,N(e.$t("Component.Pay.index_27",[""])),1),G(n,{onClick:a[2]||(a[2]=e=>g("stripe"))},{default:J((()=>a[4]||(a[4]=[Z("Stripe")]))),_:1}),a[6]||(a[6]=F("span",null," or ",-1)),G(n,{onClick:a[3]||(a[3]=e=>g("paypal"))},{default:J((()=>a[5]||(a[5]=[Z("PayPal")]))),_:1})])],64)):(z(),K(La,{key:1}))])])),_:1},8,["loading"])}}}),Ha=l(M({__name:"item",props:{data:{},active:{type:Boolean,default:!1}},setup(e){const a=e,t=X((()=>a.data)),n=H((()=>{const{cycle:e,charge_type:a}=t.value;return 2===a?"Lifetime":"".concat(e," ").concat(t.value.cycle_unit).concat(e>1?"s":"")}));return(e,a)=>(z(),B("div",{class:Y(["radio-item pro",{active:e.active}])},[F("span",null,N(T(n)),1),a[0]||(a[0]=F("div",{class:"checked"},null,-1))],2))}}),[["__scopeId","data-v-bc452aeb"]]),Ea={class:"h-full p-20px"},qa={class:"mb-10px text-14px text-#444"},Ga={class:"min-h-30px max-h-80px overflow-auto pr-20px pt-1px pl-1px"},Ja={class:"auth-list"},Ka=["onClick"],Qa={class:"flex justify-center mt-20px"},Wa=l(M({__name:"index",props:{list:{default:()=>[]}},setup(a,{expose:t}){const l=a,s=e(),i=S(0),o=se(l.list),c=async()=>{if(0===o.value.length)return;const e=o.value[i.value];await _({pid:"".concat(e.product_id),code:e.code,coupon_id:e.id,cycle:e.cycle,cycle_unit:e.cycle_unit,charge_type:e.charge_type}),await x({force:1}),y()},{loading:r,setLoading:u}=de(),d=async()=>{try{u(!0);const{message:e}=await f({pid:s.pid});o.value=n(e)?e:[]}finally{u(!1)}};return 0===o.value.length&&d(),t({init:d}),(e,a)=>{const t=me;return z(),K(Ma,{loading:T(r)},{default:J((()=>[F("div",Ea,[F("div",qa,N(e.$t("Component.Pay.index_37")),1),F("div",Ga,[F("div",Ja,[(z(!0),B(R,null,V(T(o),((e,a)=>(z(),B("div",{key:e.id,class:Y(["auth-item",{active:a===T(i)}]),onClick:e=>(e=>{i.value=e})(a)},[G(Ha,{data:e,active:a===T(i)},null,8,["data","active"])],10,Ka)))),128))])]),F("div",Qa,[G(t,{class:"w-150px h-34px text-14px",type:"primary",color:"#ff8f00",disabled:0===T(o).length,onClick:c},{default:J((()=>[Z(N(0===T(o).length?e.$t("Component.Pay.index_38"):e.$t("Component.Pay.index_39")),1)])),_:1},8,["disabled"])])])])),_:1},8,["loading"])}}}),[["__scopeId","data-v-3c053001"]]),Xa=l(M({__name:"item",props:{data:{},active:{type:Boolean,default:!1}},setup(e){const a=e,{t:t}=D(),n=X((()=>a.data)),l=H((()=>{const{charge_type:e,end_time:a}=n.value;return 2===e?t("Component.Auth.index_6"):h(a)}));return(e,a)=>(z(),B("div",{class:Y(["radio-item pro",{active:e.active}])},[F("span",null,N(T(l)),1),a[0]||(a[0]=F("div",{class:"checked"},null,-1))],2))}}),[["__scopeId","data-v-7c145be1"]]),Za={class:"h-full p-20px"},et={class:"mb-10px text-14px text-#444"},at={class:"min-h-30px max-h-80px overflow-auto pr-20px pt-1px pl-1px"},tt={class:"auth-list"},nt=["onClick"],lt={class:"flex justify-center mt-20px"},st=l(M({__name:"index",props:{list:{default:()=>[]}},setup(a,{expose:t}){const l=a,s=e(),i=S(0),o=se(l.list),c=async()=>{if(0===o.value.length)return;const{serial_no:e}=o.value[i.value];await g({serial_no:e}),await x({force:1}),y()},{loading:r,setLoading:u}=de(),d=async()=>{try{u(!0);const{message:e}=await b({pid:s.pid});o.value=n(e)?e:[]}finally{u(!1)}};return 0===o.value.length&&d(),t({init:d}),(e,a)=>{const t=me;return z(),K(Ma,{loading:T(r)},{default:J((()=>[F("div",Za,[F("div",et,N(e.$t("Component.Pay.index_34")),1),F("div",at,[F("div",tt,[(z(!0),B(R,null,V(T(o),((e,a)=>(z(),B("div",{key:e.id,class:Y(["auth-item",{active:a===T(i)}]),onClick:e=>(e=>{i.value=e})(a)},[G(Xa,{data:e,active:a===T(i)},null,8,["data","active"])],10,nt)))),128))])]),F("div",lt,[G(t,{class:"w-150px h-34px text-14px",type:"primary",color:"#ff8f00",disabled:0===T(o).length,onClick:c},{default:J((()=>[Z(N(0===T(o).length?e.$t("Component.Pay.index_35"):e.$t("Component.Pay.index_36")),1)])),_:1},8,["disabled"])])])])),_:1},8,["loading"])}}}),[["__scopeId","data-v-82518682"]]),it=l(M({__name:"index",props:{data:{},couponId:{default:-1},couponPrice:{default:""},isUseCoupon:{type:Boolean,default:!1}},setup(a,{expose:l}){const{t:s}=D(),i=a,o=X(i,"data"),c=X(i,"couponId"),r=X(i,"isUseCoupon"),u=X(i,"couponPrice"),d=e(),p=ie({time:0,order_no:"",stripe_publishable_key:"",order_id:0,paypal_client_id:"",price:"",market_price:"",cycle:1,cycle_unit:"month",couponPrice:""}),v=S(""),y=e=>{v.value=e},m=[{key:"stripe",label:"Stripe",isLazy:!0,content:()=>G(za,{ref:e=>_(e,"stripe"),data:o.value,order:p,getOrder:h,onSetMenu:y},null)},{key:"paypal",label:"Paypal",isLazy:!0,content:()=>G(Aa,{ref:e=>_(e,"paypal"),data:o.value,order:p,getOrder:h,onSetMenu:y},null)},{key:"other",label:s("Component.Pay.index_45"),isLazy:!0,content:()=>G(Ya,{ref:e=>_(e,"other"),data:o.value,order:p,getOrder:h,onSetMenu:y},null)},{key:"voucher",label:s("Component.Pay.index_21"),content:()=>G(Wa,{ref:e=>_(e,"voucher"),list:P.value},null)},{key:"authorization",label:s("Component.Pay.index_22"),content:()=>G(st,{ref:e=>_(e,"authorization"),list:w.value},null)}],x={},_=(e,a)=>{x[a]=e},h=async()=>{if(0===p.time)try{await(async()=>{try{const{message:e}=await k();if(t(e)&&(d.setSsl(e.result),!e.result))return Promise.reject(!1)}catch(e){d.setSsl(!1)}})();let e={pid:d.pid,cycle:o.value.cycle,cycle_unit:o.value.cycle_unit,charge_type:o.value.charge_type,num:o.value.num,source:d.source};r.value&&-1!==c.value&&(e=Object.assign(e,{coupon_id:c.value}));const{message:a}=await C(e);t(a)&&(p.order_no=a.order_no,p.stripe_publishable_key=a.stripe_publishable_key,p.order_id=a.order_id,p.paypal_client_id=a.paypal_client_id,p.price=a.price,p.market_price=a.market_price,p.cycle=xe(a,"transaction.cycle",1),p.cycle_unit=xe(a,"transaction.cycle_unit",""),p.couponPrice=u.value)}finally{p.time=Date.now()}},g=async e=>{var a,t;"authorization"===e&&(w.value=[]),null==(t=null==(a=x[e])?void 0:a.init)||t.call(a)},w=S([]),P=S([]),{loading:L,setLoading:U}=de();return l({init:async()=>{var e,a;p.time=0,null==(a=null==(e=x[v.value])?void 0:e.init)||a.call(e),(async()=>{try{U(!0);const{message:e}=await b({pid:d.pid});if(n(e)&&e.length>0)return w.value=e,void(v.value="authorization");const{message:a}=await f({pid:d.pid});if(n(a)&&a.length>0)return P.value=a,void(v.value="voucher");v.value="stripe"}finally{U(!1)}})()}}),(e,a)=>(z(),K(Ma,{class:"h-auto!",loading:T(L)},{default:J((()=>[G(T(xa),{value:T(v),"onUpdate:value":a[0]||(a[0]=e=>le(v)?v.value=e:null),list:m,onChange:g},null,8,["value"])])),_:1},8,["loading"]))}}),[["__scopeId","data-v-9c952ed8"]]),ot={class:"ml-16px"};function ct(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!W(e)}const rt=M({__name:"time",props:{endtime:{default:0}},emits:["finish"],setup(e,{emit:a}){const t=e,n=a,{t:l}=D(),s=H((()=>{const e=Date.now(),a=1e3*t.endtime;return Math.max(0,a-e)})),i=e=>e.toString().padStart(2,"0"),o=({hours:e,minutes:a,seconds:t})=>{let n,s,o,c;const r=Math.floor(e/24);return e%=24,G("div",{class:"text-desc"},[G("span",{class:"mr-6px"},[l("Component.Pay.index_40")]),r>0?G(_e,{type:"error",size:"small",class:"px-4px",bordered:!1},ct(n=i(r))?n:{default:()=>[n]}):"",r>0?G("span",{class:"mx-4px"},[Z(":")]):"",G(_e,{type:"error",size:"small",class:"px-4px",bordered:!1},ct(s=i(e))?s:{default:()=>[s]}),G("span",{class:"mx-4px"},[Z(":")]),G(_e,{type:"error",size:"small",class:"px-4px",bordered:!1},ct(o=i(a))?o:{default:()=>[o]}),G("span",{class:"mx-4px"},[Z(":")]),G(_e,{type:"error",size:"small",class:"px-4px",bordered:!1},ct(c=i(t))?c:{default:()=>[c]})])},c=()=>{t.endtime>0&&n("finish")};return(e,a)=>{const t=w;return z(),B("div",ot,[G(t,{duration:T(s),render:o,"on-finish":c},null,8,["duration"])])}}}),ut=l(M({__name:"index",props:E({loading:{type:Boolean,default:!1},data:{default:()=>[]}},{value:{},valueModifiers:{},checked:{type:Boolean},checkedModifiers:{}}),emits:E(["change","finish"],["update:value","update:checked"]),setup(a,{emit:t}){const n=a,l=t,{t:s}=D(),i=e(),o=X(n,"data"),c=q(a,"value"),r=q(a,"checked"),u=H((()=>{if(-1!==c.value){const e=o.value.find((e=>e.id===c.value));if(e)return e.end_time}return 0})),d=H((()=>o.value.length>0?o.value.map((e=>{const a=(e=>2===e.charge_type?s("Component.Auth.index_6").toLocaleLowerCase():"year"===e.cycle_unit?s("Public.Unit.Year").toLocaleLowerCase():s("Public.Unit.Month").toLocaleLowerCase())(e);return{label:s("Component.Pay.index_19",[e.deduct_amount,a]),value:e.id}})):[{label:s("Component.Pay.index_20"),value:-1}])),p=H((()=>0===n.data.length)),v=()=>{p.value||i.orderLoad||(r.value=!r.value,l("change"))},y=e=>{e.stopPropagation()},m=e=>{i.orderLoad||(r.value=e,l("change"))},x=()=>{l("change")},_=()=>{l("finish")};return(e,a)=>{const t=P,n=fe,l=he;return z(),B(R,null,[ae(G(t,{class:"mb-12px",height:"36px"},null,512),[[te,e.loading]]),ae(F("div",{class:Y(["coupon-box mb-12px",{active:r.value}]),onClick:v},[G(n,{checked:r.value,disabled:T(p),onClick:y,"onUpdate:checked":m},{default:J((()=>[F("span",null,N(e.$t("Component.Pay.index_18",[e.data.length])),1)])),_:1},8,["checked","disabled"]),F("div",{class:"w-220px ml-16px",onClick:y},[G(l,{value:c.value,"onUpdate:value":[a[0]||(a[0]=e=>c.value=e),x],options:T(d),disabled:T(p),"menu-props":{style:{"--n-option-check-color":"#e4a93c","--n-option-text-color-active":"#e4a93c"}}},null,8,["value","options","disabled"])]),ae(G(rt,{endtime:T(u),onFinish:_},null,8,["endtime"]),[[te,T(u)>0]])],2),[[te,!e.loading]])],64)}}}),[["__scopeId","data-v-cb50c3ff"]]),dt={class:"flex flex-col flex-1 overflow-hidden"},pt={class:"relative flex-1 px-24px py-20px"},vt={class:"mb-16px text-15px"},yt=M({__name:"index",setup(a){const l=e(),s=S(0),i=S([]),o=S(0),c=H((()=>i.value.length>0?i.value[s.value].children:[])),r=async()=>{const{message:e}=await $({product_id:l.pid});i.value=n(e)?e:[]},u=S(-1),d=S(!1),p=S([]),v=S([]),y=S(!1),m=H((()=>{if(d.value){const e=v.value.find((e=>e.id===u.value));if(e)return e.deduct_amount}return""})),_=(e=!1)=>{var a;v.value=[];if(null==(a=c.value[o.value].usable_coupons)||a.forEach((e=>{const a=p.value.find((a=>a.id===e&&"".concat(a.product_id)===l.pid));a&&v.value.push(a)})),v.value.sort(((e,a)=>Number(a.deduct_amount)-Number(e.deduct_amount))),v.value.length>0)u.value=v.value[0].id,d.value=!0;else if(u.value=-1,d.value=!1,e&&p.value.length>0){const e=p.value[0];for(let a=0;a<i.value.length;a++){const t=2===e.charge_type?"999":"".concat(e.cycle);if(i.value[a].cycle===t&&i.value[a].cycle_unit===e.cycle_unit){s.value=a,P(s.value,-1);break}}}},f=async()=>{try{y.value=!0;const{message:e}=await L();n(e)&&(p.value=e,_(!0))}finally{y.value=!1}},h=async()=>{await x({force:1}),window.location.reload()},{loading:g,setLoading:b}=de(),C=S(0),k=async()=>{s.value=0,o.value=0,await(async()=>{try{b(!0),await r(),await f(),I(),C.value=Date.now()}finally{b(!1)}})(),oe((()=>{var e,a;null==(a=null==(e=w.value)?void 0:e.init)||a.call(e)}))},w=S(),P=async(e,a)=>{var t,n;e!==a&&(o.value=0),_(),null==(n=null==(t=w.value)?void 0:t.init)||n.call(t)},j=()=>{_(),w.value.init()},M=async()=>{w.value.init()},O=async()=>{await f(),w.value.init()},I=async()=>{const e=await l.getReceiveCoupon();if(t(e)){if(!l.showCouponModal)return;if(l.plugins.length&&100===l.plugins[0].type)return;await oe(),ue({width:400,bgColor:"transparent",data:{obtainId:e.obtain_id,endTime:e.end_time,couponList:e.coupons,couponQuota:e.package_quota,onReceive:async()=>{try{b(!0),await r(),await f(),oe((()=>{w.value.init()}))}finally{b(!1)}}},component:ce((()=>U((()=>import("./index144.js?v=1747989938512")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))))})}};return(e,a)=>{const t=ge,n=me;return z(),B("div",dt,[G(Ze,{onChange:k}),F("div",pt,[G(Ma,{loading:T(g)},{default:J((()=>[G(t,{class:"justify-between! flex-nowrap!"},{default:J((()=>[F("div",vt,N(e.$t("Component.Pay.index_8",["support@aapanel.com"])),1)])),_:1}),G(ca,{cycle:T(s),"onUpdate:cycle":a[0]||(a[0]=e=>le(s)?s.value=e:null),data:T(i),onChange:P},null,8,["cycle","data"]),G(ya,{number:T(o),"onUpdate:number":a[1]||(a[1]=e=>le(o)?o.value=e:null),data:T(c),onChange:j},null,8,["number","data"]),G(ut,{value:T(u),"onUpdate:value":a[2]||(a[2]=e=>le(u)?u.value=e:null),checked:T(d),"onUpdate:checked":a[3]||(a[3]=e=>le(d)?d.value=e:null),loading:T(y),data:T(v),onChange:M,onFinish:O},null,8,["value","checked","loading","data"]),T(C)>0?(z(),K(it,{key:0,ref_key:"payChannelRef",ref:w,"coupon-id":T(u),"coupon-price":T(m),"is-use-coupon":T(d),data:T(c)[T(o)]},null,8,["coupon-id","coupon-price","is-use-coupon","data"])):A("",!0),G(t,{class:"items-center justify-end! mt-10px"},{default:J((()=>[a[5]||(a[5]=F("span",{class:"text-desc"},"License didn't changed?",-1)),G(n,{type:"primary",ghost:"",onClick:h},{default:J((()=>a[4]||(a[4]=[Z("Refresh License State")]))),_:1})])),_:1})])),_:1},8,["loading"])])])}}}),mt={class:"flex h-full"},xt=M({__name:"index",props:{source:{},username:{},plugin:{}},setup(a){const t=a,{source:n,username:l,plugin:s}=t,i=e(),o=j();return i.setSource(o.aaPanelPro?210:n),i.setUsername(l),s&&i.setPlugins(s),re((()=>{i.reset()})),(e,a)=>(z(),B("div",mt,[G(qe),G(yt)]))}});export{xt as default};
