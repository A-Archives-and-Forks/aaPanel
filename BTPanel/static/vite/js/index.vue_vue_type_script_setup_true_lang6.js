import{n as e,bx as a,by as s,J as l,a1 as t}from"./page_layout.js?v=1742891699271";import{bX as i,ct as o}from"./naive.js?v=1742891699271";import{d as u,ar as p,as as r,O as n,at as g,r as d,e as c,au as m,j as f,P as v,w as h,R as y,a0 as x,a1 as w,m as P,u as S,V as z,M as _,n as b}from"./vue.js?v=1742891699271";const K=u({__name:"index",props:p({data:{default:()=>[]},rowKey:{default:"id"},loading:{type:Boolean,default:!1},loadingNum:{default:10},isPage:{type:Boolean,default:!1},maxHeight:{},columns:{default:()=>[]},rowProps:{},storeKey:{}},{page:{default:()=>({page:1,pageSize:10})},pageModifiers:{}}),emits:["update:page"],setup(u){const p=u,K=r(u,"page"),{t:j}=n(),{columns:k,data:$}=g(p),B=()=>i(_(k.value)),C=d(B()),E=B(),H=c((()=>{const{rowKey:a}=p;return e(a)?e=>e[a]:a})),J=c((()=>{const{storeKey:e}=p;return e?"".concat(e,"-page"):""})),M=d([]),N=m(),O=f({style:{width:"100%"},showSizePicker:!0,showQuickJumper:!0,pageSizes:[10,20,50,100],prefix:()=>{var e;return null==(e=N.pagePrefix)?void 0:e.call(N)},suffix:e=>v("span",{class:"text-13px text-default"},[j("Public.Table.Page.index_4",[e.itemCount])]),onChange:e=>{K.value.page=e},onUpdatePageSize:e=>{K.value.page=1,K.value.pageSize=e,J.value&&a(J.value,String(e))}});(()=>{if(J.value){const e=s(J.value);e&&(K.value.pageSize=l(e))}})();const Q=c((()=>({...O,page:K.value.page,pageSize:K.value.pageSize})));return h((()=>$.value),(e=>{p.loading||(M.value=e)}),{deep:!0}),h((()=>p.loading),(a=>{if(a){if(C.value.forEach((e=>{"selection"!==e.type&&(e.ellipsis&&delete e.ellipsis,e.render=()=>v(t,null,null))})),0===$.value.length)for(let s=0;s<p.loadingNum;s++){const a={},{rowKey:l}=p;a[e(l)?l:"id"]=s,M.value.push(a)}}else M.value=[],b((()=>{C.value.forEach(((e,a)=>{if("selection"===e.type)return;const s=E[a];s.ellipsis&&(e.ellipsis=s.ellipsis),e.render=s.render})),M.value=$.value}))}),{immediate:!0}),h((()=>p.columns),(()=>{C.value=B(),E.splice(0,E.length),E.push(...B())}),{deep:!0}),(e,a)=>{const s=o;return y(),x(s,S(e.$attrs,{data:z(M),"max-height":e.maxHeight,"row-key":z(H),columns:z(C),pagination:!!e.isPage&&z(Q),"row-props":e.rowProps}),{empty:w((()=>[P(e.$slots,"empty")])),default:w((()=>[P(e.$slots,"pagePrefix")])),_:3},16,["data","max-height","row-key","columns","pagination","row-props"])}}});export{K as _};
