import{n as e,aP as a,aQ as s,H as l,$ as t}from"./page_layout.js?v=1741416570306";import{bR as i,cn as o}from"./naive.js?v=1741416570306";import{d as u,aq as p,ar as n,M as r,as as g,r as d,e as c,at as m,j as f,N as v,w as h,P as y,_ as x,$ as w,m as P,u as S,S as z,a7 as _,n as K}from"./vue.js?v=1741416570306";const $=u({__name:"index",props:p({data:{default:()=>[]},rowKey:{default:"id"},loading:{type:Boolean,default:!1},loadingNum:{default:10},isPage:{type:Boolean,default:!1},maxHeight:{},columns:{default:()=>[]},rowProps:{},storeKey:{}},{page:{default:()=>({page:1,pageSize:10})},pageModifiers:{}}),emits:["update:page"],setup(u){const p=u,$=n(u,"page"),{t:j}=r(),{columns:k,data:b}=g(p),H=()=>i(_(k.value)),N=d(H()),B=H(),C=c((()=>{const{rowKey:a}=p;return e(a)?e=>e[a]:a})),E=c((()=>{const{storeKey:e}=p;return e?"".concat(e,"-page"):""})),M=d([]),Q=m(),q=f({style:{width:"100%"},showSizePicker:!0,showQuickJumper:!0,pageSizes:[10,20,50,100],prefix:()=>{var e;return null==(e=Q.pagePrefix)?void 0:e.call(Q)},suffix:e=>v("span",{class:"text-13px text-default"},[j("Public.Table.Page.index_4",[e.itemCount])]),onChange:e=>{$.value.page=e},onUpdatePageSize:e=>{$.value.page=1,$.value.pageSize=e,E.value&&a(E.value,String(e))}});(()=>{if(E.value){const e=s(E.value);e&&($.value.pageSize=l(e))}})();const J=c((()=>({...q,page:$.value.page,pageSize:$.value.pageSize})));return h((()=>b.value),(e=>{p.loading||(M.value=e)}),{deep:!0}),h((()=>p.loading),(a=>{if(a){if(N.value.forEach((e=>{"selection"!==e.type&&(e.ellipsis&&delete e.ellipsis,e.render=()=>v(t,null,null))})),0===b.value.length)for(let s=0;s<p.loadingNum;s++){const a={},{rowKey:l}=p;a[e(l)?l:"id"]=s,M.value.push(a)}}else M.value=[],K((()=>{N.value.forEach(((e,a)=>{if("selection"===e.type)return;const s=B[a];s.ellipsis&&(e.ellipsis=s.ellipsis),e.render=s.render})),M.value=b.value}))}),{immediate:!0}),h((()=>p.columns),(()=>{N.value=H(),B.splice(0,B.length),B.push(...H())}),{deep:!0}),(e,a)=>{const s=o;return y(),x(s,S(e.$attrs,{data:z(M),"max-height":e.maxHeight,"row-key":z(C),columns:z(N),pagination:!!e.isPage&&z(J),"row-props":e.rowProps}),{empty:w((()=>[P(e.$slots,"empty")])),default:w((()=>[P(e.$slots,"pagePrefix")])),_:3},16,["data","max-height","row-key","columns","pagination","row-props"])}}});export{$ as _};
