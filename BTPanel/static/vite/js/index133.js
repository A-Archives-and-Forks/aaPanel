import{_ as a}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1744703330658";import{_ as e}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1744703330658";import{_ as t}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1744703330658";import{bj as s,h as i,e0 as n,cz as o,e1 as l,e2 as p,d,I as r,b9 as _,bn as m}from"./page_layout.js?v=1744703330658";import{b as c,f as u,a as b,c as f}from"./public.js?v=1744703330658";import{T as g}from"./naive.js?v=1744703330658";import{d as y,O as x,j as h,M as j,R as v,S as w,P as k,a0 as R,c as C,a1 as z,V as D}from"./vue.js?v=1744703330658";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1744703330658";import"./common.js?v=1744703330658";import"./__commonjsHelpers__.js?v=1744703330658";const S={class:"p-20px"},L=y({__name:"index",props:{data:{}},setup(y){const{t:L}=x(),T=y,{row:U}=T.data,B=s(),F=async()=>{await m(B.type,{id:U.id}),V(),B.setRefresh(!0)},P=h({p:1,limit:10,search:U.id}),{table:H,columns:I}=c([{key:"filename",title:L("Component.UploadFile.index_3"),ellipsis:{tooltip:{width:"trigger"}}},{key:"size",title:L("Site.TableRow.index_23"),width:90,render:a=>i(a.size)},{key:"addtime",title:L("Site.TableRow.index_25"),width:146},u({width:180,options:a=>[{label:L("Database.tools.index_3"),onClick:()=>{b({title:L("Database.tools.index_17"),content:L("Database.tools.index_18"),onConfirm:async({hide:e})=>{await n(B.type,{file:a.filename,name:U.name}),B.setRefresh(!0),e()}})}},{label:L("Ftp.Label.index_11"),onClick:()=>{o(a.filename,a.name)}},{label:L("Public.Btn.Del"),onClick:()=>{b({title:L("Site.Batch.index_18"),content:L("Database.tools.index_19"),onConfirm:async({hide:e})=>{await l({id:a.id}),V(),B.setRefresh(!0),e()}})}}]})]),{loading:M,setLoading:O}=f(),V=async()=>{try{O(!0);const{message:a}=await p(j(P));d(a)?(H.data=r(a.data)?a.data:[],H.total=_(a.page)):(H.data=[],H.total=0),U.backup_count=H.total}finally{O(!1)}};return V(),(s,i)=>{const n=g,o=t,l=e,p=a;return v(),w("div",S,[k(p,null,{toolsLeft:R((()=>[k(n,{class:"backup-btn",type:"primary",onClick:F},{default:R((()=>[C(z(s.$t("Database.index_16")),1)])),_:1})])),table:R((()=>[k(o,{loading:D(M),"loading-num":6,data:D(H).data,columns:D(I)},null,8,["loading","data","columns"])])),pageRight:R((()=>[k(l,{page:D(P).p,"onUpdate:page":i[0]||(i[0]=a=>D(P).p=a),"page-size":D(P).limit,"onUpdate:pageSize":i[1]||(i[1]=a=>D(P).limit=a),"item-count":D(H).total,onRefresh:V},null,8,["page","page-size","item-count"])])),_:1})])}}});export{L as default};
