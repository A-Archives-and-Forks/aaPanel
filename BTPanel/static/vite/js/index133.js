import{_ as a}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1741416570306";import{_ as e}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1741416570306";import{_ as t}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1741416570306";import{aA as s,h as i,de as n,bQ as o,df as l,dg as p,b as d,G as r,av as _,aE as m}from"./page_layout.js?v=1741416570306";import{b as u,f as c,a as f,c as g}from"./public.js?v=1741416570306";import{T as b}from"./naive.js?v=1741416570306";import{d as y,M as x,j as h,a7 as j,P as v,Q as w,N as k,$ as C,c as R,a0 as D,S as z}from"./vue.js?v=1741416570306";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1741416570306";import"./common.js?v=1741416570306";import"./__commonjsHelpers__.js?v=1741416570306";const S={class:"p-20px"},L=y({__name:"index",props:{data:{}},setup(y){const{t:L}=x(),T=y,{row:U}=T.data,B=s(),F=async()=>{await m(B.type,{id:U.id}),G(),B.setRefresh(!0)},P=h({p:1,limit:10,search:U.id}),{table:Q,columns:$}=u([{key:"filename",title:L("Component.UploadFile.index_3"),ellipsis:{tooltip:{width:"trigger"}}},{key:"size",title:L("Site.TableRow.index_23"),width:90,render:a=>i(a.size)},{key:"addtime",title:L("Site.TableRow.index_25"),width:146},c({width:180,options:a=>[{label:L("Database.tools.index_3"),onClick:()=>{f({title:L("Database.tools.index_17"),content:L("Database.tools.index_18"),onConfirm:async({hide:e})=>{await n(B.type,{file:a.filename,name:U.name}),B.setRefresh(!0),e()}})}},{label:L("Ftp.Label.index_11"),onClick:()=>{o(a.filename,a.name)}},{label:L("Public.Btn.Del"),onClick:()=>{f({title:L("Site.Batch.index_18"),content:L("Database.tools.index_19"),onConfirm:async({hide:e})=>{await l({id:a.id}),G(),B.setRefresh(!0),e()}})}}]})]),{loading:A,setLoading:E}=g(),G=async()=>{try{E(!0);const{message:a}=await p(j(P));d(a)?(Q.data=r(a.data)?a.data:[],Q.total=_(a.page)):(Q.data=[],Q.total=0),U.backup_count=Q.total}finally{E(!1)}};return G(),(s,i)=>{const n=b,o=t,l=e,p=a;return v(),w("div",S,[k(p,null,{toolsLeft:C((()=>[k(n,{class:"backup-btn",type:"primary",onClick:F},{default:C((()=>[R(D(s.$t("Database.index_16")),1)])),_:1})])),table:C((()=>[k(o,{loading:z(A),"loading-num":6,data:z(Q).data,columns:z($)},null,8,["loading","data","columns"])])),pageRight:C((()=>[k(l,{page:z(P).p,"onUpdate:page":i[0]||(i[0]=a=>z(P).p=a),"page-size":z(P).limit,"onUpdate:pageSize":i[1]||(i[1]=a=>z(P).limit=a),"item-count":z(Q).total,onRefresh:G},null,8,["page","page-size","item-count"])])),_:1})])}}});export{L as default};
