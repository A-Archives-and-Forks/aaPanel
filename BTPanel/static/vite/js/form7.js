import{_ as e}from"./index95.js?v=1741416570306";import{G as a,j as s,I as l}from"./page_layout.js?v=1741416570306";import{_ as t}from"./index.vue_vue_type_script_setup_true_lang.js?v=1741416570306";import{d as i,M as r,r as u,e as p,j as n,P as o,_,$ as m,N as d,S as v,R as c,k as f,v as y,c as g}from"./vue.js?v=1741416570306";import{e as h,a as b,g as j}from"./index65.js?v=1741416570306";import{c as k}from"./public.js?v=1741416570306";import{bV as w,cb as x,ch as I,_ as P}from"./naive.js?v=1741416570306";import"./common.js?v=1741416570306";import"./__commonjsHelpers__.js?v=1741416570306";import"./index104.js?v=1741416570306";import"./index.js?v=1741416570306";import"./index.vue_vue_type_script_setup_true_lang4.js?v=1741416570306";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1741416570306";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1741416570306";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1741416570306";const A={class:"w-300px"},U={class:"w-300px"},C=i({__name:"form",props:{row:{},isEdit:{type:Boolean}},emits:["refresh"],setup(i,{expose:C,emit:E}){const K=i,q=E,{isEdit:D,row:F}=K;r();const N=u(null),L=u([]),R=p((()=>"CloudFlareDns"===B.name)),B=n({name:"",api_user:"",api_key:"",permission:"global",status:1}),G={name:{required:!0,trigger:"change",message:"请选择Name"},api_user:{required:!0,trigger:"blur",validator:(e,a)=>!("CloudFlareDns"!==B.name&&!a)||new Error("请输入API User")},api_key:{required:!0,trigger:"blur",message:"请输入API Key"}},H=()=>({id:D&&F?F.id:null,name:B.name,api_user:B.api_user,api_key:B.api_key,permission:"CloudFlareDns"===B.name?B.permission:"",status:B.status}),{loading:M,setLoading:S}=k();return(async()=>{try{S(!0);const{message:e}=await j();a(e)&&e.length>0&&(B.name=e[0],L.value=e.map((e=>({label:e,value:e}))))}finally{(()=>{const{row:e,isEdit:a}=K;a&&e&&(B.name=e.name,B.api_user=e.api_user,B.api_key=e.api_key,B.permission=e.permission,B.status=e.status)})(),S(!1)}})(),C({onConfirm:async()=>{var e;await(null==(e=N.value)?void 0:e.validate()),D&&F?await h(H()):await b(H()),q("refresh")}}),(a,i)=>{const r=w,u=x,p=I,n=P,h=t,b=s,j=e,k=l;return o(),_(k,{class:"p-20px",show:v(M)},{default:m((()=>[d(h,{ref_key:"formRef",ref:N,model:v(B),rules:G},{default:m((()=>[d(u,{label:"状态",path:"status"},{default:m((()=>[d(r,{value:v(B).status,"onUpdate:value":i[0]||(i[0]=e=>v(B).status=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1}),d(u,{label:"Name",path:"name"},{default:m((()=>[d(p,{class:"w-300px",value:v(B).name,"onUpdate:value":i[1]||(i[1]=e=>v(B).name=e),options:v(L),disabled:v(D)},null,8,["value","options","disabled"])])),_:1}),d(u,{label:"API User",path:"api_user"},{default:m((()=>[c("div",A,[d(n,{value:v(B).api_user,"onUpdate:value":i[2]||(i[2]=e=>v(B).api_user=e),disabled:v(D),placeholder:"请输入API User"},null,8,["value","disabled"])])])),_:1}),d(u,{label:"API Key",path:"api_key"},{default:m((()=>[c("div",U,[d(n,{value:v(B).api_key,"onUpdate:value":i[3]||(i[3]=e=>v(B).api_key=e),placeholder:"请输入API Key"},null,8,["value"])])])),_:1}),f(d(u,{label:"API-Limit",path:"permission"},{default:m((()=>[d(r,{value:v(B).permission,"onUpdate:value":i[4]||(i[4]=e=>v(B).permission=e),"checked-value":"limit","unchecked-value":"global"},null,8,["value"])])),_:1},512),[[y,v(R)]])])),_:1},8,["model"]),d(j,null,{default:m((()=>[c("li",null,[d(b,{target:"_blank",href:"https://www.aapanel.com/forum/d/3375-3375-set-the-clouldflare-apt-token-for-dns-editing-permissions"},{default:m((()=>i[5]||(i[5]=[g("如何获取API Key")]))),_:1})])])),_:1})])),_:1},8,["show"])}}});export{C as default};
