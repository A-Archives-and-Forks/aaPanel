import{_ as e}from"./index95.js?v=1744703330658";import{_ as a}from"./index.vue_vue_type_script_setup_true_lang.js?v=1744703330658";import{d as i,O as l,as as t,r as n,R as c,S as s,U as o,P as d,V as _,a0 as u,a1 as p,F as r,k as f,v as x,c as m,t as v,e as b,j as g,a3 as S}from"./vue.js?v=1744703330658";import{d as C,m as W,I as y}from"./page_layout.js?v=1744703330658";import{a as w}from"./public.js?v=1744703330658";import{d as $}from"./setting.js?v=1744703330658";import{i as h,j,k as U,l as k}from"./site3.js?v=1744703330658";import{_ as P}from"./index183.js?v=1744703330658";import{cn as E,bY as M,a2 as T,ch as D,T as N,aV as O}from"./naive.js?v=1744703330658";import"./__commonjsHelpers__.js?v=1744703330658";import"./common.js?v=1744703330658";const R={class:"w-160px"},B={class:"ml-8px"},I={class:"w-300px text-#666 leading-18px"},J={class:"mb-4px"},V={class:"mb-10px"},q={class:"mb-4px"},A={class:"mb-10px"},F={class:"mb-4px"},H={class:"mb-10px"},Y={class:"mb-4px"},z=i({__name:"RequestType",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const{t:a}=l(),i=t(e,"value"),f=n([{label:a("Waf.Site.Config.index_40"),value:1},{label:a("Waf.Site.Config.index_41"),value:2},{label:a("Waf.Site.Config.index_42"),value:3},{label:a("Waf.Site.Config.index_43"),value:4}]);return(e,a)=>{const l=E,t=P;return c(),s(r,null,[o("div",R,[d(l,{value:i.value,"onUpdate:value":a[0]||(a[0]=e=>i.value=e),options:_(f)},null,8,["value","options"])]),o("div",B,[d(t,null,{default:u((()=>[o("div",I,[o("div",J,[o("b",null,p(e.$t("Waf.Site.Config.desc_1")),1)]),o("div",V,p(e.$t("Waf.Site.Config.desc_2")),1),o("div",q,[o("b",null,p(e.$t("Waf.Site.Config.desc_3")),1)]),o("div",A,p(e.$t("Waf.Site.Config.desc_4")),1),o("div",F,[o("b",null,p(e.$t("Waf.Site.Config.desc_5")),1)]),o("div",H,p(e.$t("Waf.Site.Config.desc_6")),1),o("div",Y,[o("b",null,p(e.$t("Waf.Site.Config.desc_7")),1)]),o("div",null,p(e.$t("Waf.Site.Config.desc_8")),1)])])),_:1})])],64)}}}),G={class:"w-100px"},K={class:"ml-8px"},L={class:"w-300px text-#666 leading-18px"},Q={class:"mb-4px"},X={class:"mb-10px"},Z={class:"mb-4px"},ee=i({__name:"UrlDefense",props:{url:{},urlModifiers:{}},emits:["update:url"],setup(e){const{t:a}=l(),i=t(e,"url"),f=n([{label:a("Public.Status.Enable"),value:1},{label:a("Public.Status.Disable"),value:0}]);return(e,a)=>{const l=E,t=P;return c(),s(r,null,[o("div",G,[d(l,{value:i.value,"onUpdate:value":a[0]||(a[0]=e=>i.value=e),options:_(f)},null,8,["value","options"])]),o("div",K,[d(t,null,{default:u((()=>[o("div",L,[o("div",Q,[o("b",null,p(e.$t("Waf.Site.Config.index_104")),1)]),o("div",X,p(e.$t("Waf.Site.Config.index_107")),1),o("div",Z,[o("b",null,p(e.$t("Waf.Site.Config.index_105")),1)]),o("div",null,p(e.$t("Waf.Site.Config.index_106")),1)])])),_:1})])],64)}}}),ae={class:"flex-1"},ie={class:"flex items-center"},le={class:"w-100px"},te={class:"ml-8px"},ne={class:"w-300px text-#666 leading-18px"},ce={class:"mb-4px"},se={class:"mb-10px"},oe={class:"mb-4px"},de={class:"w-80px ml-12px"},_e={class:"ml-12px"},ue=i({__name:"IpDefense",props:{open:{},openModifiers:{},max:{},maxModifiers:{},contain:{type:Boolean},containModifiers:{}},emits:["update:open","update:max","update:contain"],setup(e){const{t:a}=l(),i=t(e,"open"),r=n([{label:a("Public.Status.Enable"),value:1},{label:a("Public.Status.Disable"),value:0}]),v=t(e,"max"),b=t(e,"contain");return(e,a)=>{const l=E,t=P,n=M,g=T;return c(),s("div",ae,[o("div",ie,[o("div",le,[d(l,{value:i.value,"onUpdate:value":a[0]||(a[0]=e=>i.value=e),options:_(r)},null,8,["value","options"])]),o("div",te,[d(t,null,{default:u((()=>[o("div",ne,[o("div",ce,[o("b",null,p(e.$t("Waf.Site.Config.index_104")),1)]),o("div",se,p(e.$t("Waf.Site.Config.index_108")),1),o("div",oe,[o("b",null,p(e.$t("Waf.Site.Config.index_105")),1)]),o("div",null,p(e.$t("Waf.Site.Config.index_106")),1)])])),_:1})]),f(o("div",de,[d(n,{value:v.value,"onUpdate:value":a[1]||(a[1]=e=>v.value=e),placeholder:"","show-button":!1},null,8,["value"])],512),[[x,1===i.value]]),f(o("div",{class:"ml-8px text-desc"},p(e.$t("Public.Unit.Time",v.value||0)),513),[[x,1===i.value]]),f(o("div",_e,[d(g,{checked:b.value,"onUpdate:checked":a[2]||(a[2]=e=>b.value=e)},{default:u((()=>[m(p(e.$t("Waf.Site.Config.index_110")),1)])),_:1},8,["checked"])],512),[[x,1===i.value]])]),f(o("div",{class:"mt-12px text-error"},p(e.$t("Waf.Site.Config.index_111")),513),[[x,!v.value||v.value<5e3]])])}}}),pe={class:"p-20px"},re={class:"flex-1"},fe={class:"w-160px"},xe={class:"w-160px mr-8px"},me={class:"text-desc"},ve={class:"w-160px mr-8px"},be={class:"text-desc"},ge={class:"w-160px mr-8px"},Se={class:"text-desc"},Ce={class:"w-320px"},We={class:"flex-1"},ye={class:"w-160px"},we={class:"text-error"},$e={class:"text-error"},he={class:"text-error"},je={class:"text-error"},Ue={class:"text-error"},ke={class:"text-error"},Pe={class:"text-error"},Ee=i({__name:"index",props:{siteName:{},config:{}},emits:["refresh"],setup(i,{expose:t,emit:P}){const T=i,R=P,{t:B}=l(),I=v(T,"siteName"),J=n(null),V=b((()=>void 0===I.value)),q=g({cc_mode:1,cc_type_status:2,cycle:60,limit:120,endtime:1800,is_cc_url:1,cc_enhance_mode:1,increase_wu_heng:1,country:[],cc_increase_type:"js",cc_ip_max:{open:0,ip_max:1e4,static:!1}}),A={cycle:{trigger:["blur","input"],validator:()=>q.cycle?!(q.cycle<30)||new Error(B("Waf.Site.Config.index_35")):new Error(B("Waf.Site.Config.index_34"))},limit:{trigger:["blur","input"],validator:()=>q.limit?!(q.limit<30)||new Error(B("Waf.Site.Config.index_35")):new Error(B("Waf.Site.Config.index_36"))},endtime:{trigger:["blur","input"],validator:()=>!!q.endtime||new Error(B("Waf.Site.Config.index_37"))}},F=[{label:B("Waf.Site.Config.index_38"),value:1},{label:B("Waf.Site.Config.index_39"),value:2}],H=n([{label:B("Waf.Site.Config.index_46"),value:"browser"},{label:B("Waf.Site.Config.index_47"),value:"js"},{label:B("Waf.Site.Config.index_48"),value:"code"},{label:B("Waf.Site.Config.index_49"),value:"renji"},{label:B("Waf.Site.Config.index_50"),value:"huadong"}]),Y=n([]),G=()=>{q.country=Y.value.map((e=>"".concat(e.value)))},K=()=>{q.country=[]};let L=!1;const Q=async e=>{if("renji"===e&&!L){const{message:e}=await h();L=!0,C(e)&&e.result&&(q.cc_increase_type="js",H.value[3].disabled=!0,H.value[4].disabled=!0,W.error(B("Waf.Site.Config.index_51")))}},X=async()=>{const{close:e}=W.loading(B("Waf.Site.Config.index_52",[V.value?B("Waf.Site.Config.index_99"):B("Waf.Site.Config.index_100")]));try{const e=(()=>{const e=1===q.cc_mode?{country:q.country.join(","),is_cc_url:q.is_cc_url}:{};return{cc_mode:1===q.cc_mode?1:q.cc_enhance_mode?3:4,cycle:q.cycle,limit:q.limit,endtime:q.endtime,is_open_global:void 0===I.value?1:0,increase:0===q.cc_enhance_mode?0:1,increase_wu_heng:q.increase_wu_heng,cc_increase_type:q.cc_increase_type,cc_type_status:q.cc_type_status,...e,cc_ip_max:JSON.stringify({open:1===q.cc_ip_max.open,ip_max:q.cc_ip_max.ip_max,static:q.cc_ip_max.static})}})();3!==e.cc_mode&&await U(),V.value?await $(e):await k({...e,siteName:I.value||""}),R("refresh")}finally{e()}};return(async()=>{const{message:e}=await j();y(e)&&(Y.value=e.map((e=>({label:e,value:e}))))})(),(()=>{const{config:e}=T;e&&(q.cc_mode=e.cc_mode<=1?1:2,q.cc_type_status=e.cc_type_status,q.cycle=e.cc.cycle,q.limit=e.cc.limit,q.endtime=e.cc.endtime,q.is_cc_url=e.cc.is_cc_url?1:0,q.cc_increase_type=e.cc.cc_increase_type||"js",q.country=Object.keys(e.cc.countrys),e.cc.cc_ip_max&&(q.cc_ip_max.open=e.cc.cc_ip_max.open?1:0,q.cc_ip_max.ip_max=e.cc.cc_ip_max.ip_max,q.cc_ip_max.static=e.cc.cc_ip_max.static))})(),t({onConfirm:async({hide:e})=>{var a;if(await(null==(a=J.value)?void 0:a.validate()),2===q.cc_mode)return w({title:B("Public.Confirm.Title"),content:()=>d(r,null,[B("Waf.Site.Config.desc_9"),d("br",null,null),B("Waf.Site.Config.desc_10"),d("br",null,null),B("Waf.Site.Config.desc_11")]),onConfirm:async({hide:a})=>(await X(),a(),e(),!1)}),!1;await X()}}),(i,l)=>{const t=E,n=D,r=M,v=N,b=O,g=a,C=S("i18n-t"),W=e;return c(),s("div",pe,[d(g,{ref_key:"formRef",ref:J,model:_(q),rules:A,"label-width":"160"},{default:u((()=>[d(n,{label:i.$t("Waf.Site.Config.index_11")},{default:u((()=>[o("div",re,[o("div",fe,[d(t,{value:_(q).cc_mode,"onUpdate:value":l[0]||(l[0]=e=>_(q).cc_mode=e),options:F},null,8,["value"])]),f(o("div",{class:"w-320px mt-6px text-desc leading-20px"},p(i.$t("Waf.Site.Config.index_12")),513),[[x,2===_(q).cc_mode]])])])),_:1},8,["label"]),d(n,{label:i.$t("Waf.Site.Config.index_13")},{default:u((()=>[d(z,{value:_(q).cc_type_status,"onUpdate:value":l[1]||(l[1]=e=>_(q).cc_type_status=e)},null,8,["value"])])),_:1},8,["label"]),d(n,{label:i.$t("Waf.Site.Config.index_14"),path:"cycle"},{default:u((()=>[o("div",xe,[d(r,{value:_(q).cycle,"onUpdate:value":l[2]||(l[2]=e=>_(q).cycle=e),min:30,"show-button":!1},null,8,["value"])]),o("span",me,p(i.$t("Public.Unit.Second",_(q).cycle)),1)])),_:1},8,["label"]),d(n,{label:i.$t("Waf.Site.Config.index_16"),path:"limit"},{default:u((()=>[o("div",ve,[d(r,{value:_(q).limit,"onUpdate:value":l[3]||(l[3]=e=>_(q).limit=e),min:30,"show-button":!1},null,8,["value"])]),o("span",be,p(i.$t("Public.Unit.Time",_(q).limit)),1)])),_:1},8,["label"]),d(n,{label:i.$t("Waf.Site.Config.index_18"),path:"endtime"},{default:u((()=>[o("div",ge,[d(r,{value:_(q).endtime,"onUpdate:value":l[4]||(l[4]=e=>_(q).endtime=e),min:1,"show-button":!1},null,8,["value"])]),o("span",Se,p(i.$t("Public.Unit.Second",_(q).endtime)),1)])),_:1},8,["label"]),f(d(n,{label:i.$t("Waf.Site.Config.index_19")},{default:u((()=>[d(ee,{url:_(q).is_cc_url,"onUpdate:url":l[5]||(l[5]=e=>_(q).is_cc_url=e)},null,8,["url"])])),_:1},8,["label"]),[[x,1===_(q).cc_mode]]),d(n,{label:i.$t("Waf.Site.Config.index_109")},{default:u((()=>[d(ue,{open:_(q).cc_ip_max.open,"onUpdate:open":l[6]||(l[6]=e=>_(q).cc_ip_max.open=e),max:_(q).cc_ip_max.ip_max,"onUpdate:max":l[7]||(l[7]=e=>_(q).cc_ip_max.ip_max=e),contain:_(q).cc_ip_max.static,"onUpdate:contain":l[8]||(l[8]=e=>_(q).cc_ip_max.static=e)},null,8,["open","max","contain"])])),_:1},8,["label"]),f(d(n,{label:i.$t("Waf.Site.Config.index_20"),"show-feedback":!1},{default:u((()=>[o("div",Ce,[d(t,{value:_(q).country,"onUpdate:value":l[9]||(l[9]=e=>_(q).country=e),options:_(Y),multiple:!0,filterable:!0,"max-tag-count":"responsive",":placeholder":i.$t("Waf.Site.Config.index_21")},{header:u((()=>[d(b,{class:"w-full"},{default:u((()=>[d(v,{class:"flex-1",onClick:G},{default:u((()=>[m(p(i.$t("Public.All")),1)])),_:1}),d(v,{class:"flex-1",onClick:K},{default:u((()=>[m(p(i.$t("Public.Btn.Cancel")),1)])),_:1})])),_:1})])),_:1},8,["value","options",":placeholder"])])])),_:1},8,["label"]),[[x,1===_(q).cc_mode]]),f(d(n,{label:i.$t("Waf.Site.Config.index_22"),"show-feedback":!1},{default:u((()=>[o("div",We,[o("div",ye,[d(t,{value:_(q).cc_increase_type,"onUpdate:value":[l[10]||(l[10]=e=>_(q).cc_increase_type=e),Q],options:_(H)},null,8,["value","options"])]),f(o("div",{class:"mt-6px text-error"},p(i.$t("Waf.Site.Config.index_23")),513),[[x,"code"===_(q).cc_increase_type]])])])),_:1},8,["label"]),[[x,2===_(q).cc_mode]])])),_:1},8,["model"]),d(W,{class:"mt-20px"},{default:u((()=>[o("li",we,p(i.$t("Waf.Site.Config.index_24")),1),f(o("li",{class:"text-error"},p(i.$t("Waf.Site.Config.index_102")),513),[[x,2===_(q).cc_mode]]),d(C,{tag:"li",keypath:"Waf.Site.Config.index_97",scope:"global"},{index_1:u((()=>[o("span",$e,p(_(q).limit),1)])),index_2:u((()=>[o("span",he,p(_(q).cycle),1)])),index_3:u((()=>[o("span",je,p(_(q).endtime),1)])),_:1}),f(o("li",{class:"text-error"},p(i.$t("Waf.Site.Config.index_29")),513),[[x,1===_(q).cc_mode]]),d(C,{tag:"li",keypath:"Waf.Site.Config.index_98",scope:"global"},{index_1:u((()=>l[11]||(l[11]=[o("span",{class:"text-error"},"JS",-1)]))),index_2:u((()=>[o("span",Ue,p(_(q).cycle),1)])),index_3:u((()=>[o("span",ke,p(i.config.retry),1)])),index_4:u((()=>[o("span",Pe,p(_(q).endtime),1)])),_:1})])),_:1})])}}});export{Ee as default};
