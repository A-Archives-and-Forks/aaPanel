import{_ as e}from"./index95.js?v=1741416570306";import{_ as t}from"./index.vue_vue_type_script_setup_true_lang.js?v=1741416570306";import{_ as o}from"./index99.js?v=1741416570306";import{cj as a,eL as r,eM as l,b as s,eN as n,G as i,m as p,eO as d,j as _}from"./page_layout.js?v=1741416570306";import{_ as c}from"./index.vue_vue_type_script_setup_true_lang10.js?v=1741416570306";import{v as u}from"./index240.js?v=1741416570306";import{o as m}from"./new.js?v=1741416570306";import{d as v,M as j,r as x,j as w,e as f,P as g,Q as h,N as b,$ as N,R as $,S as y,a0 as k,_ as C,ao as U,c as q}from"./vue.js?v=1741416570306";import{cb as D,_ as E,ch as M,bS as O}from"./naive.js?v=1741416570306";import"./common.js?v=1741416570306";import"./__commonjsHelpers__.js?v=1741416570306";import"./public.js?v=1741416570306";import"./index96.js?v=1741416570306";import"./index123.js?v=1741416570306";import"./index.js?v=1741416570306";import"./index.vue_vue_type_script_setup_true_lang4.js?v=1741416570306";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1741416570306";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1741416570306";import"./index.vue_vue_type_script_setup_true_lang12.js?v=1741416570306";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1741416570306";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1741416570306";import"./site.js?v=1741416570306";import"./soft.js?v=1741416570306";const P={class:"p-20px"},R={class:"w-360px"},A={class:"w-360px"},S={class:"w-200px"},F={class:"ml-10px text-default"},G={class:"w-440px"},H={class:"w-200px"},I={class:"ml-10px text-default"},L={class:"w-150px"},Q={class:"ml-10px text-default"},z={class:"w-150px"},B={class:"ml-10px text-default"},J={class:"w-440px"},K={class:"w-440px"},T=v({__name:"index",setup(v,{expose:T}){const{t:V}=j(),W=a(),X=x(null),Y=x(""),Z=w({project_cwd:"/www/wwwroot",project_name:"",project_script:null,project_script_two:"",port:null,run_user:"www",nodejs_version:null,project_ps:"",domains:""}),ee={project_cwd:{trigger:["blur","input"],required:!0,message:V("Node.index_28")},project_name:{trigger:["blur","input"],required:!0,message:V("Node.index_29")},project_script:{trigger:["change"],required:!0,message:V("Node.index_30")},project_script_two:{trigger:["blur","input"],required:!0,message:V("Node.index_31")},port:u(),nodejs_version:{trigger:["change"],required:!0,message:V("Node.index_32")},domains:{trigger:["blur"],validator:()=>{const e=Z.domains.trim().split("\n");if(""===Z.domains.trim())return!0;for(let t=0;t<e.length;t++)if(!r(e[t]))return new Error("[".concat(e[t],"] ").concat(V("Node.index_82")));return!0}}},te=()=>{const e=Z.project_cwd.split("/"),t=e[e.length-1];Z.project_name=t,Z.project_ps=t,Y.value=Z.project_cwd,re()},oe=x([]),ae=f((()=>0===oe.value.length)),re=async()=>{const{message:e}=await l({project_cwd:Z.project_cwd});if(s(e)){const t=Object.keys(e).map((t=>({label:"".concat(t," [").concat(e[t],"]"),value:t})));Z.project_script=t.length?t[0].value:"custom",t.push({label:V("Node.index_33"),value:"custom"}),oe.value=t}},le=[{label:"www",value:"www"},{label:"root",value:"root"}],se=x([]),ne=e=>{Z.project_ps=e};return(async()=>{const{message:e}=await n();i(e)&&e.length>0?(se.value=e.map((e=>({label:e,value:e}))),Z.nodejs_version=e[0]):(se.value=[],Z.nodejs_version=null,p.error({close:!0,content:V("Node.index_34"),onClose:()=>{m()}}))})(),T({onConfirm:async({hide:e})=>{var t;await(null==(t=X.value)?void 0:t.validate());const o=(()=>{const{project_script:e,port:t,nodejs_version:o}=Z;if(null===e)throw p.error(V("Node.index_35")),new Error(V("Node.index_35"));if(null===t)throw p.error(V("Node.index_36")),new Error(V("Node.index_36"));if(null===o)throw p.error(V("Node.index_37")),new Error(V("Node.index_37"));const a=Z.domains.trim()?Z.domains.trim().split("\n").map((e=>e.trim())).map((e=>e.indexOf(":")>-1?e:e+":80")):[];return{project_cwd:Z.project_cwd,project_name:Z.project_name,project_script:"custom"===Z.project_script?Z.project_script_two:e,port:"".concat(t),run_user:Z.run_user,nodejs_version:o,project_ps:Z.project_ps,domains:a,bind_extranet:a.length?1:0,is_power_on:1,max_memory_limit:4096,project_env:""}})();await d(o),W.setRefresh(!0),e()}}),(a,r)=>{const l=c,s=D,n=E,i=M,p=O,d=_,u=o,v=t,j=e;return g(),h("div",P,[b(v,{ref_key:"formRef",ref:X,model:y(Z),rules:ee},{default:N((()=>[b(s,{label:a.$t("Docker.Container.index_17"),path:"project_cwd"},{default:N((()=>[$("div",R,[b(l,{value:y(Z).project_cwd,"onUpdate:value":r[0]||(r[0]=e=>y(Z).project_cwd=e),readonly:!0,onChange:te},null,8,["value"])])])),_:1},8,["label"]),b(s,{label:a.$t("Config.Alarm.index_43"),path:"project_name"},{default:N((()=>[$("div",A,[b(n,{value:y(Z).project_name,"onUpdate:value":[r[1]||(r[1]=e=>y(Z).project_name=e),ne],placeholder:a.$t("Node.index_11")},null,8,["value","placeholder"])])])),_:1},8,["label"]),b(s,{label:a.$t("Node.index_12"),path:"project_script","show-feedback":!("custom"===y(Z).project_script)},{default:N((()=>[$("div",S,[b(i,{value:y(Z).project_script,"onUpdate:value":r[2]||(r[2]=e=>y(Z).project_script=e),placeholder:a.$t("Node.index_13"),disabled:y(ae),options:y(oe)},null,8,["value","placeholder","disabled","options"])]),$("div",F,"* "+k(a.$t("Node.index_14")),1)])),_:1},8,["label","show-feedback"]),"custom"===y(Z).project_script?(g(),C(s,{key:0,class:"mt-8px",label:" ",path:"project_script_two"},{default:N((()=>[$("div",G,[b(l,{defaultPath:y(Y),"checked-type":["file"],value:y(Z).project_script_two,"onUpdate:value":r[3]||(r[3]=e=>y(Z).project_script_two=e)},null,8,["defaultPath","value"])])])),_:1})):U("",!0),b(s,{label:a.$t("Docker.Container.create.index_7"),path:"port"},{default:N((()=>[$("div",H,[b(p,{value:y(Z).port,"onUpdate:value":r[4]||(r[4]=e=>y(Z).port=e),min:1,max:65535,"show-button":!1,placeholder:a.$t("Node.index_15")},null,8,["value","placeholder"])]),$("div",I,"* "+k(a.$t("Node.index_15")),1)])),_:1},8,["label"]),b(s,{label:a.$t("Ftp.Analysis.Index_27")},{default:N((()=>[$("div",L,[b(i,{value:y(Z).run_user,"onUpdate:value":r[5]||(r[5]=e=>y(Z).run_user=e),options:le},null,8,["value"])]),$("div",Q,"* "+k(a.$t("Node.index_16")),1)])),_:1},8,["label"]),b(s,{label:"Node",path:"nodejs_version"},{default:N((()=>[$("div",z,[b(i,{value:y(Z).nodejs_version,"onUpdate:value":r[6]||(r[6]=e=>y(Z).nodejs_version=e),options:y(se)},null,8,["value","options"])]),$("div",B,[$("span",null,"* "+k(a.$t("Node.index_17"))+", ",1),b(d,{onClick:y(m)},{default:N((()=>[q(k(a.$t("Node.index_18")),1)])),_:1},8,["onClick"])])])),_:1}),b(s,{label:a.$t("Docker.Container.create.index_46"),path:"project_ps"},{default:N((()=>[$("div",J,[b(n,{value:y(Z).project_ps,"onUpdate:value":r[7]||(r[7]=e=>y(Z).project_ps=e),placeholder:a.$t("Node.index_19")},null,8,["value","placeholder"])])])),_:1},8,["label"]),b(s,{label:a.$t("Mail.Domain.index_3"),path:"domains"},{default:N((()=>[$("div",K,[b(u,{value:y(Z).domains,"onUpdate:value":r[8]||(r[8]=e=>y(Z).domains=e),rows:5},{default:N((()=>[$("p",null,k(a.$t("Node.index_20")),1),$("p",null,k(a.$t("Node.index_21")),1),$("p",null,k(a.$t("Node.index_22")),1),$("p",null,k(a.$t("Node.index_23")),1)])),_:1},8,["value"])])])),_:1},8,["label"])])),_:1},8,["model"]),b(j,{class:"mt-8px"},{default:N((()=>[$("li",null,k(a.$t("Node.index_24")),1),$("li",null,k(a.$t("Node.index_25")),1),$("li",null,k(a.$t("Node.index_26")),1),$("li",null,k(a.$t("Node.index_27")),1)])),_:1})])}}});export{T as default};
