import{m as a,U as s,d as e,V as n,c as t}from"./page_layout.js?v=1756367574781";import{p as l}from"./soft.js?v=1756367574781";import{d as i,a as o}from"./public.js?v=1756367574781";import{dV as r,aC as u,da as p}from"./naive.js?v=1756367574781";import{k as m,P as v,r as c,a2 as d,V as _,a3 as f,S as g,W as x,a4 as y,U as j,ak as P,j as C}from"./vue.js?v=1756367574781";const b=m({__name:"index",setup(m,{expose:b}){const{t:k}=v(),w=c(),F=c(),U=c([]),V=()=>{F.value!==w.value?o({title:k("Public.Btn.Install"),content:k("Plugin.Ftp.index_12",[l.title,w.value]),onConfirm:()=>{N()}}):a.error(k("Plugin.Ftp.index_11"))},N=async(a=1)=>{const{message:t}=await s({sName:l.name,version:w.value,type:a});e(t)&&t.result&&n()},{loading:S,setLoading:$}=i(),h=async()=>{try{$(!0);const{message:a}=await t({sName:"pure-ftpd"===l.name?"pureftpd":l.name});e(a)&&(U.value=a.versions.map(s=>(1==s.m_version.length?w.value=a.version.split(".")[0]:w.value=a.version.split(".")[0]+"."+a.version.split(".")[1],F.value=w.value,{label:"".concat(a.name," ").concat(s.m_version),value:s.m_version})))}finally{$(!1)}};return h(),b({init:h}),(a,s)=>{const e=r,n=u,t=p;return _(),d(t,{class:"items-center"},{default:f(()=>[g("span",null,y(a.$t("Plugin.Ftp.index_9")),1),x(e,{class:"w-200px",loading:j(S),value:j(w),"onUpdate:value":s[0]||(s[0]=a=>P(w)?w.value=a:null),options:j(U)},null,8,["loading","value","options"]),x(n,{type:"primary",onClick:V},{default:f(()=>[C(y(a.$t("Site.Cert.index_61")),1)]),_:1})]),_:1})}}});export{b as _};
