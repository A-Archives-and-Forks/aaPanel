import{_ as a}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1747989938512";import{_ as e}from"./index.vue_vue_type_script_setup_true_lang8.js?v=1747989938512";import{c as t,f as s,a as i,d as n,h as o}from"./public.js?v=1747989938512";import{b6 as l,n as p,eE as d,ct as r,eF as m,eG as _,c,N as u,b3 as b,ba as f}from"./page_layout.js?v=1747989938512";import{T as g}from"./naive.js?v=1747989938512";import{d as y,O as x,j as h,M as j,R as w,S as k,P as v,a1 as R,c as C,a2 as D,V as z}from"./vue.js?v=1747989938512";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1747989938512";import"./common.js?v=1747989938512";import"./__commonjsHelpers__.js?v=1747989938512";const S={class:"p-20px"},F=y({__name:"index",props:{data:{}},setup(y){const{t:F}=x(),L=y,{row:T}=L.data,U=l(),B=async()=>{await f(U.type,{id:T.id}),N(),U.setRefresh(!0)},P=h({p:1,limit:10,search:T.id}),{table:E,columns:G}=t([{key:"filename",title:F("Component.UploadFile.index_3"),ellipsis:{tooltip:{width:"trigger"}}},{key:"size",title:F("Site.TableRow.index_23"),width:90,render:a=>p(a.size)},{key:"addtime",title:F("Site.TableRow.index_25"),width:146},s({width:180,options:a=>[{label:F("Database.tools.index_3"),onClick:()=>{i({title:F("Database.tools.index_17"),content:F("Database.tools.index_18"),onConfirm:async({hide:e})=>{await d(U.type,{file:a.filename,name:T.name}),U.setRefresh(!0),e()}})}},{label:F("Ftp.Label.index_11"),onClick:()=>{r(a.filename,a.name)}},{label:F("Public.Btn.Del"),onClick:()=>{i({title:F("Site.Batch.index_18"),content:F("Database.tools.index_19"),onConfirm:async({hide:e})=>{await m({id:a.id}),N(),U.setRefresh(!0),e()}})}}]})]),{loading:H,setLoading:M}=n(),N=async()=>{try{M(!0);const{message:a}=await _(j(P));c(a)?(E.data=u(a.data)?a.data:[],E.total=b(a.page)):(E.data=[],E.total=0),T.backup_count=E.total}finally{M(!1)}};return N(),(t,s)=>{const i=g,n=o,l=e,p=a;return w(),k("div",S,[v(p,null,{toolsLeft:R((()=>[v(i,{class:"backup-btn",type:"primary",onClick:B},{default:R((()=>[C(D(t.$t("Database.index_16")),1)])),_:1})])),table:R((()=>[v(n,{loading:z(H),"loading-num":6,data:z(E).data,columns:z(G)},null,8,["loading","data","columns"])])),pageRight:R((()=>[v(l,{page:z(P).p,"onUpdate:page":s[0]||(s[0]=a=>z(P).p=a),"page-size":z(P).limit,"onUpdate:pageSize":s[1]||(s[1]=a=>z(P).limit=a),"item-count":z(E).total,onRefresh:N},null,8,["page","page-size","item-count"])])),_:1})])}}});export{F as default};
