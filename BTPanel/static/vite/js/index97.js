import{d as e,r as o,R as t,a0 as n,V as a,O as s,P as p,c as l,i,_ as c,S as u,U as r,a2 as d,F as x,N as m,ap as v}from"./vue.js?v=1742891699271";import{a0 as f,M as C,di as _,dj as b,k as y}from"./page_layout.js?v=1742891699271";import{a as g}from"./public.js?v=1742891699271";import{cp as h,cn as j}from"./naive.js?v=1742891699271";import"./__commonjsHelpers__.js?v=1742891699271";import"./common.js?v=1742891699271";function w(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!i(e)}const k=e({__name:"time",props:{endtime:{default:0}},setup(e){const i=e,c=o(0),u=e=>e.toString().padStart(2,"0"),r=({hours:e,minutes:o,seconds:t})=>{let n,a,i;const{t:c}=s();return p("div",{class:"flex justify-center items-center text-default text-16px"},[p("span",null,[c("Component.Coupon.index_10")]),p(h,{type:"error",size:"small",class:"h-30px mx-10px px-4px text-18px font-bold",bordered:!1},w(n=u(e))?n:{default:()=>[n]}),p("span",null,[l(":")]),p(h,{type:"error",size:"small",class:"h-30px mx-10px px-4px text-18px font-bold",bordered:!1},w(a=u(o))?a:{default:()=>[a]}),p("span",null,[l(":")]),p(h,{type:"error",size:"small",class:"h-30px mx-10px px-4px text-18px font-bold",bordered:!1},w(i=u(t))?i:{default:()=>[i]})])};return c.value=1e3*i.endtime-Math.floor(Date.now()),(e,o)=>{const s=f;return t(),n(s,{duration:a(c),render:r},null,8,["duration"])}}}),D={class:"coupon-box"},$={class:"pt-24px bg-#fff rounded-4px"},Q={class:"px-36px"},S={class:"text-20px text-[#FFB04C]"},L={class:"coupon-list"},M={class:"decoration"},R={class:"coupon-amount"},q={class:"coupon-price"},z={class:"text-34px"},F={class:"coupon-info"},O={class:"coupon-name"},P={class:"coupon-time"},T={class:"text-error text-20px"},U={class:"pt-14px"},B={class:"mt-24px text-center"},H={key:0,class:"coupon-number"},I={class:"px-36px pb-16px bg-#fff rounded-8px"},N={class:"w-200px mt-10px mx-auto"},V=y(e({__name:"index",props:{couponList:{default:()=>[]},couponQuota:{default:()=>({quota:0,total:0,received:0})}},emits:["close","receive"],setup(e,{emit:n}){const{t:l}=s(),i=n,f=C(),{receiveCoupon:y}=c(f),h=e=>Math.floor(e/86400),w=o(null),V=[{label:l("Component.Coupon.index_6"),value:"today"},{label:l("Component.Coupon.index_7"),value:"week"},{label:l("Component.Coupon.index_8"),value:"forver"}],A=async()=>{await _({obtain_id:"".concat(y.value.obtain_id)}),f.getReceiveCoupon(),i("close"),i("receive")},E=(e,o)=>{g({title:l("Public.Confirm.Title"),content:"".concat(l("Component.Coupon.index_9",[o.label])),onConfirm:async()=>{let o=0;switch(e){case"today":o=new Date((new Date).toLocaleDateString()).getTime()+864e5-1;break;case"week":o=new Date((new Date).toLocaleDateString()).getTime()+6048e5-1;break;case"forver":o=-100}o=Math.floor(o>0?o/1e3:o),await b({limit_time:o}),f.getReceiveCoupon(),i("close")}})};return(e,o)=>{const n=j;return t(),u("div",D,[r("div",$,[r("div",Q,[r("div",S,d(e.$t("Component.Coupon.index_1")),1),r("div",L,[(t(!0),u(x,null,m(e.couponList,((n,a)=>(t(),u("div",{key:"".concat(a),class:"coupon-item"},[r("div",M,d(e.$t("Component.Coupon.index_2")),1),r("div",R,[r("div",q,[o[0]||(o[0]=r("span",{class:"text-20px mr-4px"},"$",-1)),r("span",z,d(n.deduct_amount),1)])]),r("div",F,[r("div",O,d(n.title),1),r("div",P,[r("span",null,d(e.$t("Component.Coupon.index_3")),1),r("span",T,d(h(n.expires)),1),r("span",null,d(e.$t("Public.Unit.Day",h(n.expires))),1)])])])))),128))])])]),r("div",U,[r("div",B,[p(k,{endtime:a(y).end_time},null,8,["endtime"])]),e.couponQuota.total>0?(t(),u("div",H," ‚è≥Remaining: "+d(e.couponQuota.quota)+" / "+d(e.couponQuota.total)+" (üéÅ "+d(e.couponQuota.received)+" peoples have get it) ",1)):v("",!0),r("div",I,[r("div",{class:"coupon-btn",onClick:A},d(e.$t("Component.Coupon.index_5"))+" (Last "+d(e.couponQuota.quota)+" coupons) ",1),r("div",N,[p(n,{value:a(w),options:V,"consistent-menu-width":!1,placeholder:e.$t("Component.Coupon.index_13"),"onUpdate:value":E},null,8,["value","placeholder"])])])])])}}}),[["__scopeId","data-v-d6694de8"]]);export{V as default};
