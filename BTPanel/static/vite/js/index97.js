import{d as e,r as t,R as o,$ as n,V as a,O as s,P as p,c as l,i,at as c,e as u,_ as r,S as d,U as x,a1 as m,F as v,N as f,ap as C}from"./vue.js?v=1744703330658";import{a0 as _,M as b,di as y,dj as g,k as h}from"./page_layout.js?v=1744703330658";import{a as j}from"./public.js?v=1744703330658";import{cp as w,cn as k}from"./naive.js?v=1744703330658";import"./__commonjsHelpers__.js?v=1744703330658";import"./common.js?v=1744703330658";function D(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!i(e)}const $=e({__name:"time",props:{endtime:{default:0}},setup(e){const i=e,c=t(0),u=e=>e.toString().padStart(2,"0"),r=({hours:e,minutes:t,seconds:o})=>{let n,a,i;const{t:c}=s();return p("div",{class:"flex justify-center items-center text-default text-16px"},[p("span",null,[c("Component.Coupon.index_10")]),p(w,{type:"error",size:"small",class:"h-30px mx-10px px-4px text-18px font-bold",bordered:!1},D(n=u(e))?n:{default:()=>[n]}),p("span",null,[l(":")]),p(w,{type:"error",size:"small",class:"h-30px mx-10px px-4px text-18px font-bold",bordered:!1},D(a=u(t))?a:{default:()=>[a]}),p("span",null,[l(":")]),p(w,{type:"error",size:"small",class:"h-30px mx-10px px-4px text-18px font-bold",bordered:!1},D(i=u(o))?i:{default:()=>[i]})])};return c.value=1e3*i.endtime-Math.floor(Date.now()),(e,t)=>{const s=_;return o(),n(s,{duration:a(c),render:r},null,8,["duration"])}}}),S={class:"coupon-box"},L={class:"pt-24px bg-#fff rounded-4px"},M={class:"px-36px"},R={class:"text-20px text-[#FFB04C]"},q={class:"coupon-list"},z={class:"decoration"},F={class:"coupon-amount"},O={class:"coupon-price"},P={class:"text-34px"},T={class:"coupon-info"},U={class:"coupon-name"},Q={class:"coupon-time"},B={class:"text-error text-20px"},H={class:"pt-14px"},I={class:"mt-24px text-center"},N={key:0,class:"coupon-number"},V={class:"px-36px pb-16px bg-#fff rounded-8px"},A={class:"w-200px mt-10px mx-auto"},E=h(e({__name:"index",props:{couponList:{default:()=>[]},couponQuota:{default:()=>({quota:0,total:0,received:0})}},emits:["close","receive"],setup(e,{emit:n}){const{t:l}=s(),i=e,{couponList:_,couponQuota:h}=c(i),w=u((()=>h.value.total-h.value.quota)),D=n,E=b(),{receiveCoupon:G}=r(E),J=e=>Math.floor(e/86400),K=t(null),W=[{label:l("Component.Coupon.index_6"),value:"today"},{label:l("Component.Coupon.index_7"),value:"week"},{label:l("Component.Coupon.index_8"),value:"forver"}],X=async()=>{await y({obtain_id:"".concat(G.value.obtain_id)}),E.getReceiveCoupon(),D("close"),D("receive")},Y=(e,t)=>{j({title:l("Public.Confirm.Title"),content:"".concat(l("Component.Coupon.index_9",[t.label])),onConfirm:async()=>{let t=0;switch(e){case"today":t=new Date((new Date).toLocaleDateString()).getTime()+864e5-1;break;case"week":t=new Date((new Date).toLocaleDateString()).getTime()+6048e5-1;break;case"forver":t=-100}t=Math.floor(t>0?t/1e3:t),await g({limit_time:t}),E.getReceiveCoupon(),D("close")}})};return(e,t)=>{const n=k;return o(),d("div",S,[x("div",L,[x("div",M,[x("div",R,m(e.$t("Component.Coupon.index_1")),1),x("div",q,[(o(!0),d(v,null,f(a(_),((n,a)=>(o(),d("div",{key:"".concat(a),class:"coupon-item"},[x("div",z,m(e.$t("Component.Coupon.index_2")),1),x("div",F,[x("div",O,[t[0]||(t[0]=x("span",{class:"text-20px mr-4px"},"$",-1)),x("span",P,m(n.deduct_amount),1)])]),x("div",T,[x("div",U,m(n.title),1),x("div",Q,[x("span",null,m(e.$t("Component.Coupon.index_3")),1),x("span",B,m(J(n.expires)),1),x("span",null,m(e.$t("Public.Unit.Day",J(n.expires))),1)])])])))),128))])])]),x("div",H,[x("div",I,[p($,{endtime:a(G).end_time},null,8,["endtime"])]),a(h).total>0?(o(),d("div",N," ‚è≥Remaining: "+m(a(w))+" / "+m(a(h).total)+" (üéÅ "+m(a(w))+" peoples have get it) ",1)):C("",!0),x("div",V,[x("div",{class:"coupon-btn",onClick:X},m(e.$t("Component.Coupon.index_5"))+" (Last "+m(a(h).quota)+" coupons) ",1),x("div",A,[p(n,{value:a(K),options:W,"consistent-menu-width":!1,placeholder:e.$t("Component.Coupon.index_13"),"onUpdate:value":Y},null,8,["value","placeholder"])])])])])}}}),[["__scopeId","data-v-ddc4e582"]]);export{E as default};
