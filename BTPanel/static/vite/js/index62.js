import{s as e,o as s,u as t,a,b as n,c as o,d as i,_ as r,R as l}from"./tableColumns.js?v=1741416570306";import{b_ as p,k as _,u,bo as c,b$ as m,c0 as d,b as f,av as v,j as g}from"./page_layout.js?v=1741416570306";import{d as x,r as y,P as b,_ as k,$ as h,R as w,a0 as S,Q as j,L as C,af as $,S as R,F as L,Y as I,N as z,c as H,ao as N,M as P,w as U,a7 as M}from"./vue.js?v=1741416570306";import{bO as B,T,ce as A}from"./naive.js?v=1741416570306";import{e as E,b as F,f as J,I as K,J as O,K as Q,L as Y,M as q,k as D,a as G,c as V,N as W}from"./public.js?v=1741416570306";import{_ as X}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1741416570306";import{_ as Z}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1741416570306";import{_ as ee}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1741416570306";import{b as se}from"./soft.js?v=1741416570306";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1741416570306";import"./soft2.js?v=1741416570306";import"./index.js?v=1741416570306";import"./common.js?v=1741416570306";import"./__commonjsHelpers__.js?v=1741416570306";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1741416570306";const te={class:"w-80px inline-block"},ae=["onClick"],ne=_(x({__name:"app-sort",setup(t){const a=p(),n=y(e.type);return(()=>{const s=Number(localStorage.getItem("soft-app"));s&&(n.value=s,e.type=s)})(),(t,o)=>{const i=B;return b(),k(i,{class:"py-16px items-center"},{default:h((()=>[w("span",te,S(t.$t("Soft.index_7")),1),(b(!0),j(L,null,C(R(s),(s=>(b(),j("div",{class:$(["list",{active:R(n)===s.value}]),key:s.value,onClick:t=>{return o=s.value,n.value=o,e.p=1,e.type=o,localStorage.setItem("soft-app",o.toString()),void a.setRefresh(!0);var o}},S(s.label),11,ae)))),128))])),_:1})}}}),[["__scopeId","data-v-bea40fc8"]]),oe={key:0,class:"box"},ie={key:0,class:"mr-15px"},re={key:1,class:"mr-10px"},le=_(x({__name:"index",setup(e){const s=u(),{isPro:t,authExpired:a}=I(s);return(e,s)=>{const n=T;return"Lifetime"!==R(a)?(b(),j("div",oe,[R(t)?(b(),j("span",ie,S(e.$t("Soft.index_16",[R(a)])),1)):(b(),j("span",re,S(e.$t("Soft.index_17")),1)),z(n,{type:"primary",size:"small",onClick:s[0]||(s[0]=e=>{E({source:t.value?30:29})})},{default:h((()=>[H(S(R(t)?e.$t("Soft.index_18"):e.$t("Home.index_22")),1)])),_:1})])):N("",!0)}}}),[["__scopeId","data-v-0a779056"]]),pe=x({__name:"index",setup(s){const{t:r}=P(),l=p(),_=u(),{keys:x,table:y,columns:w}=F([t(),{key:"name",title:r("Soft.index_9"),width:"100",ellipsis:{tooltip:{width:"trigger"}},render:e=>e.author?e.author:r("Soft.index_11")},{key:"name",title:r("Soft.index_10"),ellipsis:{tooltip:{width:"trigger"}},render:e=>z("span",{innerHTML:e.ps},null)},{key:"name",title:r("Soft.index_12"),width:"60",render:e=>"0.00"===e.price||0===e.price?z("span",null,[r("Soft.index_13")]):z("span",{class:"color-#fc6d26"},["$".concat(e.price)])},a(),n(),o(),i(),J({width:180,align:"right",options:e=>[{label:r("Home.index_5"),show:K(e),onClick:()=>{const s=O(e),t={name:e.name,title:e.title,m_version:e.versions[s].m_version,version:e.versions[s].version,update_msg:e.versions[s].update_msg};Q(t,(()=>{$()}))}},{label:r("Layout.Sider.mail_12"),show:e.setup&&!Y(e),onClick:()=>{se(e)}},{label:-1===e.endtime?r("Component.Auth.index_3"):r("Soft.index_18"),show:Y(e),onClick:()=>{const s={source:-1===e.endtime?31:32,plugin:{name:e.title,pid:e.pid,type:e.type,plugin:!0,renew:e.endtime,ps:e.ps}};E(s)}},{label:q(e),show:!e.setup&&!Y(e),onClick:()=>{"1"===e.task?D(e.name,(()=>{$()})):c()}},{label:r("Public.Btn.Uninstall"),show:e.setup,onClick:()=>{G({title:r("Public.Btn.Uninstall"),content:r("Soft.index_15",[e.title,e.version]),onConfirm:async()=>{e.version=e.name.includes("php-")?e.versions[0].m_version:e.version,await m({sName:e.name,version:e.version}),$()}})}}]})]),{loading:j,setLoading:C}=V();U((()=>l.isRefresh),(e=>{e&&(l.setRefresh(!1),$())})),U((()=>_.taskCount),(e=>{e&&console.log(e),$()}));const $=async()=>{try{C(!0);const{message:s}=await d(M(e),!!e.force);f(s)&&(y.data=s.list.data,y.total=v(s.list.page))}finally{x.value=[],e.force=0,C(!1)}};return $(),(s,t)=>{const a=g,n=ee,o=Z,i=X;return b(),k(i,{class:"py-16px"},{table:h((()=>[z(n,{"row-key":"name",loading:R(j),data:R(y).data,columns:R(w)},{empty:h((()=>[z(a,{onClick:R(W)},{default:h((()=>[H(S(s.$t("Soft.index_26")),1)])),_:1},8,["onClick"])])),_:1},8,["loading","data","columns"])])),pageRight:h((()=>[z(o,{page:R(e).p,"onUpdate:page":t[0]||(t[0]=s=>R(e).p=s),"page-size":R(e).row,"onUpdate:pageSize":t[1]||(t[1]=s=>R(e).row=s),"item-count":R(y).total,onRefresh:$},null,8,["page","page-size","item-count"])])),_:1})}}}),_e=x({__name:"index",setup:e=>(e,s)=>{const t=A;return b(),k(t,{class:"p-16px"},{default:h((()=>[z(r),z(l),z(ne),z(le),z(pe)])),_:1})}});export{_e as default};
