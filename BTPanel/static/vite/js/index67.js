import{_ as e,a}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1721298337096";import{u as s,dF as r,ab as t,e as l,n as u}from"./index.js?v=1721298337096";import{_ as o}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1721298337096";import{l as p,r as d,f as i,k as n,S as m,U as _,V as v,P as c,_ as f,W as g,B as b,M as h,q as w,t as j}from"./vue.js?v=1721298337096";import{s as x}from"./pinia.js?v=1721298337096";import{g as y}from"./index63.js?v=1721298337096";import{_ as U}from"./Select.js?v=1721298337096";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1721298337096";import"./InputGroupLabel.js?v=1721298337096";import"./InputGroup.js?v=1721298337096";import"./index64.js?v=1721298337096";import"./useTableColumns.js?v=1721298337096";import"./Progress.js?v=1721298337096";import"./Tag.js?v=1721298337096";import"./Empty.js?v=1721298337096";const q={class:"w-240px"},k={class:"w-240px"},C={class:"w-240px"},E={class:"w-240px"},P={class:"ml-8px"},R=p({__name:"index",props:{data:{}},setup(p,{expose:R}){const B=p,{status:D}=B.data,G=s(),{remoteList:I}=x(G),L=d(null),N=i({sid:I.value.length>0?I.value[0].id:null,name:"",db_user:"",password:"",active:!1,ssl:""}),S=n((()=>I.value.map((e=>({label:"".concat(e.ps," (").concat(e.db_host,")"),value:e.id}))))),T={name:{required:!0,message:"请输入数据库名",trigger:["blur","change"]},db_user:{required:!0,message:"请输入用户名",trigger:["blur","change"]},password:{required:!0,message:"请输入管理员密码",trigger:["blur","change"]},sid:{trigger:"change",validator:(e,a)=>null!==a||new Error("请选择远程服务器")}},A=e=>{N.db_user=e},F=()=>{y()};return R({onConfirm:async({hide:e})=>{var a;try{await(null==(a=L.value)?void 0:a.validate());const s=(()=>{const{sid:e}=N;if(null===e)throw u.error("请选择远程服务器"),new Error("请选择远程服务器");return{...j(N),sid:e,ps:N.name}})();await r(G.type,s),G.setRefresh(!0),e()}catch(s){console.error(s)}}}),(s,r)=>{const u=t,p=e,d=o,i=U,n=l,j=a;return m(),_(j,{ref_key:"formRef",ref:L,model:g(N),rules:T,class:"p-20px"},{default:v((()=>[c(p,{label:"DBName",path:"name"},{default:v((()=>[f("div",q,[c(u,{value:g(N).name,"onUpdate:value":[r[0]||(r[0]=e=>g(N).name=e),A],placeholder:"New database name"},null,8,["value"])])])),_:1}),b(c(p,{label:"Username",path:"db_user"},{default:v((()=>[f("div",k,[c(u,{value:g(N).db_user,"onUpdate:value":r[1]||(r[1]=e=>g(N).db_user=e),placeholder:"Database user"},null,8,["value"])])])),_:1},512),[[h,g(D)]]),b(c(p,{label:"Password",path:"password"},{default:v((()=>[f("div",C,[c(d,{value:g(N).password,"onUpdate:value":r[2]||(r[2]=e=>g(N).password=e)},null,8,["value"])])])),_:1},512),[[h,g(D)]]),c(p,{label:"Add to",path:"sid"},{default:v((()=>[f("div",E,[c(i,{value:g(N).sid,"onUpdate:value":r[3]||(r[3]=e=>g(N).sid=e),options:g(S)},null,8,["value","options"])]),f("div",P,[c(n,{onClick:F},{default:v((()=>[w("Remote servers")])),_:1})])])),_:1})])),_:1},8,["model"])}}});export{R as default};
