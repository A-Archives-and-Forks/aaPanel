const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/form8.js?v=1753954525509","js/public.js?v=1753954525509","js/page_layout.js?v=1753954525509","js/vue.js?v=1753954525509","js/__commonjsHelpers__.js?v=1753954525509","js/naive.js?v=1753954525509","js/common.js?v=1753954525509","css/page_layout.css?v=1753954525509","css/public.css?v=1753954525509","js/index.vue_vue_type_script_setup_true_lang.js?v=1753954525509","js/ssl-log.js?v=1753954525509","js/index101.js?v=1753954525509","css/index18.css?v=1753954525509","js/domain-form.js?v=1753954525509","js/utils3.js?v=1753954525509"])))=>i.map(i=>d[i]);
import{_ as a}from"./index102.js?v=1753954525509";import{c as e,a as t,_ as i,e as n,o as l,u as s}from"./page_layout.js?v=1753954525509";import{_ as o}from"./index.js?v=1753954525509";import{_ as d}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1753954525509";import{_ as r}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1753954525509";import{e as u,b as p,S as c,h as m,d as _,T as h,U as g,f as v,V as y,W as f,X as w,Y as x,Z as S}from"./public.js?v=1753954525509";import{h as b,a as k,m as L,r as D,b as C,d as U,l as j,c as E,e as P,g as T,u as R,f as z}from"./utils3.js?v=1753954525509";import{c5 as $,c6 as M,ay as V,cG as I,c0 as A,bY as B,c3 as O,cD as W}from"./naive.js?v=1753954525509";import{k as F,P as H,e as N,r as X,Q as Y,b as G,U as Q,V as Z,a2 as q,X as J,W as K,j as aa,a3 as ea,_ as ta,ab as ia,ac as na,a1 as la,s as sa,ah as oa,o as da,al as ra,F as ua,$ as pa}from"./vue.js?v=1753954525509";import{_ as ca}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1753954525509";import{T as ma}from"./transition.js?v=1753954525509";import"./common.js?v=1753954525509";import"./__commonjsHelpers__.js?v=1753954525509";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1753954525509";const _a={class:"flex items-center"},ha=F({__name:"index",setup(a){const n=ta((()=>t((()=>import("./form8.js?v=1753954525509")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])))),l=ta((()=>t((()=>import("./ssl-log.js?v=1753954525509")),__vite__mapDeps([10,11,3,4,2,5,6,1,8,7,12])))),{t:s}=H(),y=N({p:1,limit:10}),f=u("",{isEdit:!1,onRefresh:()=>{P()}}),w=u(s("SSL.Domain.index_5")),x=()=>{f.data.isEdit=!1,f.title=s("SSL.Domain.index_4"),f.show=!0},S=X(!1),{table:C,columns:U}=p([{key:"alias",title:s("Config.Panel.index_36"),render:a=>a.alias?Y("span",{class:"bt-link",onClick:()=>{b.value=a.id,k.value=a.name,L.value="manage"}},[a.alias]):"--"},{key:"api_user",title:s("Home.index_2"),render:a=>a.api_user?a.api_user:"--"},D((a=>{w.data.path=a,w.show=!0})),{key:"status",title:s("Public.Table.Status"),render:a=>Y($,{uncheckedValue:0,checkedValue:1,value:a.status,"onUpdate:value":[e=>a.status=e,async e=>{try{await c({id:a.id,status:e})}catch(t){a.status=1===e?0:1}}]},null)},{key:"permission",title:s("Database.index_21"),align:"center",render:a=>a.permission?a.permission:"--"},{key:"domains",title:s("Layout.Sider.domain_1"),align:"center",render:a=>a.domains.length},m({width:250,options:a=>[{label:s("SSL.Domain.index_7"),onClick:()=>{b.value=a.id,k.value=a.name,L.value="manage"}},{label:s("Public.Btn.Edit"),onClick:()=>{j(a)}},{label:s("Public.Btn.Del"),onClick:()=>{_({title:s("SSL.Domain.index_8"),content:s("SSL.Domain.index_9"),onConfirm:async()=>{await h({id:a.id}),P()}})}}]})]),j=a=>{f.data.isEdit=!0,f.data.row=a,f.title=s("SSL.Domain.index_10"),f.show=!0};let E=null;const P=async()=>{try{S.value||(C.loading=!0);const{message:a}=await g(y);e(a)&&(S.value=a.data.some((a=>a.task.some((a=>100!==a.task_status)))),S.value?T():E&&clearTimeout(E),C.data=a.data,C.total=a.total)}finally{C.loading=!1}},T=async()=>{E=window.setTimeout((()=>{P()}),5e3)};return P(),G((()=>{E&&clearTimeout(E)})),(a,e)=>{const t=i,s=M,u=V,p=v,c=r,m=d,_=o;return Q(),Z("div",null,[Y(s,{"show-icon":!1,class:"mb-10px"},{default:q((()=>[K("div",_a,[Y(t,{name:"base-info",size:17,class:"mr-8px"}),e[4]||(e[4]=K("span",{class:"leading-17px"},"aaPanel Domain Name Management Center, allowing you to unify accounts across multiple domain providers without switching DNS platforms",-1))])])),_:1}),Y(m,{feedback:!0},{toolsLeft:q((()=>[Y(u,{type:"primary",onClick:x},{default:q((()=>[aa(ea(a.$t("SSL.Domain.index_4")),1)])),_:1})])),table:q((()=>[Y(p,{loading:J(C).loading,data:J(C).data,columns:J(U)},null,8,["loading","data","columns"])])),pageRight:q((()=>[Y(c,{page:J(y).p,"onUpdate:page":e[0]||(e[0]=a=>J(y).p=a),"page-size":J(y).limit,"onUpdate:pageSize":e[1]||(e[1]=a=>J(y).limit=a),"item-count":J(C).total,onRefresh:P},null,8,["page","page-size","item-count"])])),_:1}),Y(_,{show:J(f).show,"onUpdate:show":e[2]||(e[2]=a=>J(f).show=a),title:J(f).title,data:J(f).data,width:540,"min-height":300,footer:!0,component:J(n)},null,8,["show","title","data","component"]),Y(_,{show:J(w).show,"onUpdate:show":e[3]||(e[3]=a=>J(w).show=a),title:J(w).title,data:J(w).data,width:700,height:450,footer:!1,component:J(l)},null,8,["show","title","data","component"])])}}}),ga=F({__name:"host-select",props:{value:{},valueModifiers:{}},emits:ia(["change"],["update:value"]),setup(a,{emit:e}){const t=na(a,"value"),i=e,n=(a,e)=>{i("change",a,e.label)},l=a=>a.label+" ("+a.alias+")";return(a,e)=>{const i=I;return Q(),la(i,sa({class:"w-300px"},a.$attrs,{filterable:"",value:t.value,"onUpdate:value":[e[0]||(e[0]=a=>t.value=a),n],options:J(C),"consistent-menu-width":!1,"render-label":l}),null,16,["value","options"])}}}),va=F({__name:"domain-select",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(a){const e=na(a,"value"),{t:t}=H(),i=a=>Y(B,{class:"items-center justify-between!"},{default:()=>[Y("span",{class:"w-225px truncate"},[t("Mail.Mass.index_45"),aa("ï¼š"),a.label]),a.ssl_info&&-1!==a.ssl_info?Y(A,{type:a.ssl_info>30?"success":a.ssl_info>0?"warning":"error",class:"px-10px"},{default:()=>[a.ssl_info?a.ssl_info+" "+t("Crontab.arrange.index_41"):t("Config.Safe.index_166")]}):""]});return(a,t)=>{const n=I;return Q(),la(n,sa(a.$attrs,{class:"w-350px",size:"large",filterable:"",value:e.value,"onUpdate:value":t[0]||(t[0]=a=>e.value=a),options:J(U),"consistent-menu-width":!1,loading:J(j),disabled:!J(U).length,"render-label":i}),null,16,["value","options","loading","disabled"])}}}),ya=n(F({__name:"domain",emits:["change"],setup(a,{emit:n}){const l=ta((()=>t((()=>import("./domain-form.js?v=1753954525509")),__vite__mapDeps([13,9,5,3,4,6,1,2,7,8,14])))),s=n,{t:c}=H(),h=N({p:1,limit:10,domain:E,search:""}),g=u("",{isEdit:!1,onRefresh:()=>{z()}}),x=()=>{g.data.isEdit=!1,g.title=c("SSL.Domain.index_17"),g.show=!0},S=()=>{s("change"),P.value=!1},L=()=>{h.p=1,z()},D=async()=>{z()},C=async(a,e)=>{k.value=e,b.value=a,E.value="",h.p=1,await T(),z()},{table:U,columns:j}=p([{key:"record",title:c("SSL.Domain.index_11"),width:"20%"},{key:"record_type",title:c("Ftp.Table.index_3"),width:"10%"},{key:"record_value",title:c("SSL.Domain.index_13"),width:"20%",ellipsis:{tooltip:!0}},{key:"ttl",title:"TTL",width:100,render:a=>1===a.ttl?c("Mail.Mass.index_34"):a.ttl},{key:"priority",title:"Priority",width:100,render:a=>-1===a.priority?"--":a.priority},{key:"proxy",title:c("SSL.Domain.index_16"),render:a=>-1===a.proxy?"--":Y($,{"checked-value":1,"unchecked-value":0,value:a.proxy,"onUpdate:value":[e=>a.proxy=e,async e=>{const t={id:a.id,pid:b.value,domain:E.value,record:a.record,record_type:a.record_type,record_value:a.record_value,ttl:a.ttl,priority:a.priority,proxy:e,ps:a.ps};try{await y(t)}catch(i){a.proxy=1===e?0:1}}]},null)},{key:"ps",title:c("Public.Table.Ps")},m({width:150,options:a=>[{label:c("Public.Btn.Edit"),onClick:()=>{R(a)}},{label:c("Public.Btn.Del"),onClick:()=>{_({title:c("SSL.Domain.index_19"),content:c("SSL.Domain.index_20"),onConfirm:async()=>{await f({id:a.id}),z(),s("change")}})}}]})]),R=a=>{g.data.isEdit=!0,g.data.row=a,g.title=c("SSL.Domain.index_21"),g.show=!0},z=async()=>{try{if(""===E.value)return void(U.data=[]);U.loading=!0;const{message:a}=await w({...h,search_pid:b.value});e(a)&&(U.data=a.data,U.total=a.total)}finally{U.loading=!1}};return(async()=>{await T(),await z()})(),(a,e)=>{const t=i,n=V,s=O,u=B,p=ca,c=v,m=r,_=d,y=o;return Q(),Z("div",null,[Y(u,{class:"select-box"},{default:q((()=>[Y(ga,{value:J(b),"onUpdate:value":e[0]||(e[0]=a=>oa(b)?b.value=a:null),onChange:C},null,8,["value"]),Y(u,null,{default:q((()=>[Y(va,{value:J(h).domain,"onUpdate:value":[e[1]||(e[1]=a=>J(h).domain=a),L]},null,8,["value"]),Y(s,{trigger:"hover"},{trigger:q((()=>[Y(n,{onClick:D,class:"h-40px w-40px"},{default:q((()=>[Y(t,{name:"base-refresh"})])),_:1})])),default:q((()=>[K("span",null,ea(a.$t("SSL.Domain.index_22")),1)])),_:1})])),_:1})])),_:1}),Y(_,null,{toolsLeft:q((()=>[Y(n,{type:"primary",onClick:x},{default:q((()=>[aa(ea(a.$t("SSL.Domain.index_17")),1)])),_:1}),Y(n,{onClick:S},{default:q((()=>[aa(ea(a.$t("SSL.Domain.index_18")),1)])),_:1})])),toolsRight:q((()=>[Y(p,{value:J(h).search,"onUpdate:value":e[2]||(e[2]=a=>J(h).search=a),onSearch:L},null,8,["value"])])),table:q((()=>[Y(c,{loading:J(U).loading,data:J(U).data,columns:J(j)},null,8,["loading","data","columns"])])),pageRight:q((()=>[Y(m,{page:J(h).p,"onUpdate:page":e[3]||(e[3]=a=>J(h).p=a),"page-size":J(h).limit,"onUpdate:pageSize":e[4]||(e[4]=a=>J(h).limit=a),"item-count":J(U).total,onRefresh:z},null,8,["page","page-size","item-count"])])),_:1}),Y(y,{show:J(g).show,"onUpdate:show":e[5]||(e[5]=a=>J(g).show=a),title:J(g).title,data:J(g).data,width:540,"min-height":300,footer:!0,component:J(l)},null,8,["show","title","data","component"])])}}}),[["__scopeId","data-v-261b1844"]]),fa=F({__name:"index",setup(a){const i=ta((()=>t((()=>import("./ssl-log.js?v=1753954525509")),__vite__mapDeps([10,11,3,4,2,5,6,1,8,7,12])))),{t:n}=H(),s=N({p:1,limit:10,domain:"",id:b}),c=async()=>{await S({id:s.id}),L(),_.show=!0},_=u(n("SSL.Domain.index_23"),{path:"/www/server/panel/logs/dns_sync.log"}),h=a=>{E.value=a,P.value=!0},g=(a,e)=>{k.value=e,b.value=a,s.p=1,L()},y=()=>{s.p=1,L()},{table:f,columns:w}=p([{key:"name",title:n("Mail.Mass.index_45"),render:a=>Y(l,{onClick:()=>h(a.name)},{default:()=>[a.name]})},R({key:"ssl_info.end_time",title:"SSL Days"}),{key:"ssl_info.end_date",title:"SSL Expiration Time",render:a=>a.ssl_info.end_date?a.ssl_info.end_date:"--"},{key:"records",title:n("SSL.Domain.index_24"),align:"center"},m({width:150,options:a=>[{label:n("SSL.index_58"),onClick:()=>{h(a.name)}}]})]),L=async()=>{if(b.value)try{f.loading=!0;const{message:a}=await x(s);e(a)&&(a.data.length>0?(f.data=a.data,f.total=a.total):(f.data=[],f.total=0))}finally{f.loading=!1}};return da((async()=>{await z(),L()})),(a,e)=>{const t=V,n=ca,l=v,u=r,p=d,m=o;return Q(),Z(ua,null,[J(P)?ra("",!0):(Q(),la(p,{key:0},{toolsLeft:q((()=>[Y(ga,{value:J(s).id,"onUpdate:value":e[0]||(e[0]=a=>J(s).id=a),onChange:g},null,8,["value"]),Y(t,{onClick:c,type:"primary",ghost:""},{default:q((()=>[aa(ea(a.$t("SSL.Domain.index_22")),1)])),_:1}),Y(t,{onClick:e[1]||(e[1]=a=>J(_).show=!0)},{default:q((()=>[aa(ea(a.$t("SSL.Domain.index_23")),1)])),_:1})])),toolsRight:q((()=>[Y(n,{value:J(s).domain,"onUpdate:value":e[2]||(e[2]=a=>J(s).domain=a),onSearch:y,placeholder:a.$t("WP.index_4")},null,8,["value","placeholder"])])),table:q((()=>[Y(l,{loading:J(f).loading,data:J(f).data,columns:J(w)},null,8,["loading","data","columns"])])),pageRight:q((()=>[Y(u,{page:J(s).p,"onUpdate:page":e[3]||(e[3]=a=>J(s).p=a),"page-size":J(s).limit,"onUpdate:pageSize":e[4]||(e[4]=a=>J(s).limit=a),"item-count":J(f).total,onRefresh:L},null,8,["page","page-size","item-count"])])),_:1})),J(P)?(Q(),la(ya,{key:1,onChange:L})):ra("",!0),Y(m,{show:J(_).show,"onUpdate:show":e[5]||(e[5]=a=>J(_).show=a),title:J(_).title,data:J(_).data,width:650,"min-height":450,component:J(i)},null,8,["show","title","data","component"])],64)}}}),wa=F({__name:"index",setup(e){const t=s(),{userInfo:i}=pa(t),{t:n}=H(),l=[{key:"host",label:n("SSL.Domain.index_27"),component:ha},{key:"manage",label:n("SSL.Domain.index_7"),component:fa}],o=a=>{"host"===a&&(P.value=!1)};return(e,t)=>{const n=a,s=W;return J(i).status?(Q(),la(s,{key:0,class:"p-16px"},{default:q((()=>[Y(n,{value:J(L),"onUpdate:value":[t[0]||(t[0]=a=>oa(L)?L.value=a:null),o],options:l},null,8,["value"])])),_:1})):(Q(),la(ma,{key:1}))}}});export{wa as default};
