System.register(["./page_layout-legacy.js?v=1753954525509","./index-legacy.js?v=1753954525509","./public-legacy.js?v=1753954525509","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1753954525509","./backup-info-legacy.js?v=1753954525509","./utils-legacy.js?v=1753954525509","./vue-legacy.js?v=1753954525509","./naive-legacy.js?v=1753954525509"],(function(e,t){"use strict";var a,s,o,l,n,i,r,p,d,u,c,_,g,h,m,w,f,x,b,y,v,C,k,M,j,q,T,U,$,D,O,P,R,S,z,A,B,I;return{setters:[e=>{a=e.n,s=e._,o=e.O,l=e.v,n=e.i,i=e.c,r=e.a},e=>{p=e._},e=>{d=e.e,u=e.q,c=e._},e=>{_=e._},e=>{g=e.default},e=>{h=e.u},e=>{m=e.k,w=e.P,f=e.$,x=e.U,b=e.a1,y=e.a2,v=e.Q,C=e.X,k=e.j,M=e.a3,j=e.W,q=e.r,T=e.e,U=e.a4,$=e._},e=>{D=e.c0,O=e.c3,P=e.bY,R=e.cA,S=e.cD,z=e.c6,A=e.aq,B=e.c1,I=e.ay}],execute:function(){const Q=m({__name:"index",setup(e){const{t:t}=w(),l=h(),{loading:n,backupData:i}=f(l);return l.getData(),(e,l)=>{const r=D,p=s,d=O,u=P,c=R,h=_,m=o;return x(),b(m,{show:C(n),class:"p-16px"},{default:y((()=>[v(h,{ref:"formRef"},{default:y((()=>[v(c,{label:C(t)("Config.Migrate.index_10")},{default:y((()=>[v(u,null,{default:y((()=>[v(r,{class:"mr-8px"},{default:y((()=>[k(M(C(a)(C(i).disk_use)),1)])),_:1}),j("div",null,[j("span",null,M(C(t)("Config.Migrate.index_11")),1),v(r,{type:"success",class:"ml-16px mr-8px"},{default:y((()=>[k(M(C(a)(C(i).disk_free)),1)])),_:1}),v(d,{trigger:"hover",placement:"top-start"},{trigger:y((()=>[v(p,{name:"base-warning",class:"text-warning mr-4px",size:"16"})])),default:y((()=>[j("span",null,[j("li",null,M(C(t)("Config.Migrate.index_12"))+" "+M(C(a)(1.5*C(i).disk_use)),1),j("li",null,M(C(t)("Config.Migrate.index_13")),1)])])),_:1})])])),_:1})])),_:1},8,["label"]),v(c,{label:"Backup Data"},{default:y((()=>[v(g,{class:"w-600px"})])),_:1})])),_:1},512)])),_:1},8,["show"])}}}),W=(e("g",(()=>l.post("/mod/backup_restore/com/get_migrate_progress"))),e("c",(()=>l.post("/mod/backup_restore/com/stop_migrate",{},{requestOptions:{loading:n.global.t("Component.Pay.index_12"),successMessage:!0}}))),e("a",(()=>l.post("/mod/backup_restore/com/close_migrate_popup",{},{requestOptions:{loading:n.global.t("Component.Pay.index_12"),successMessage:!1}}))),m({__name:"index",setup(e){const a=$((()=>r((()=>t.import("./index-legacy108.js?v=1753954525509")),void 0))),s=$((()=>r((()=>t.import("./migrate-success-legacy.js?v=1753954525509")),void 0))),o=$((()=>r((()=>t.import("./migrate-error-legacy.js?v=1753954525509")),void 0))),{t:g}=w(),h=d(g("Config.Migrate.index_4")),m=d(g("Config.Migrate.index_5"),{onRefresh:(e,t)=>{"success"===e?(f.data=t,f.show=!0):(D.data.errData=t,D.show=!0)}}),f=d(g("Config.Migrate.index_6")),D=d(g("Config.Migrate.index_7"),{onRetry:e=>{D.show=!1,m.show=!1,W.ip=e.server_ip,W.port=e.ssh_port,W.account=e.ssh_user,W.password=e.password,F()}}),O=q(null),W=T({ip:"",port:22,account:"",password:""}),X={ip:{required:!0,message:g("Term.index_9"),trigger:["blur","input"]},port:{required:!0,type:"number",message:g("Security.Conf.Index_28"),trigger:["blur","input"]},account:{required:!0,message:g("Term.index_11"),trigger:["blur","input"]},password:{required:!0,message:g("Term.index_14"),trigger:["blur","input"]}},Y=()=>{h.show=!0},E=()=>({auth_type:"password",server_ip:W.ip,ssh_port:W.port,ssh_user:W.account,password:W.password,ps:W.ip}),F=async()=>{await(O.value?.validate()),u({title:g("Config.Migrate.index_8"),content:()=>v("span",null,[v(U("i18n-t"),{keypath:"Config.Migrate.index_9",scope:"global"},{default:()=>[v("b",{class:"color-warning text-2xl"},[k(" "),W.ip,k(" ")])]})]),onConfirm:async()=>{var e;await(e=E(),l.post("/mod/backup_restore/com/ssh_auth_check",e,{requestOptions:{loading:n.global.t("Component.Pay.index_12"),successMessage:!0}})),await(e=>l.post("/mod/backup_restore/com/add_migrate_task",e,{requestOptions:{loading:n.global.t("Component.Pay.index_12"),successMessage:!0}}))(E()),m.show=!0}})};return(async()=>{const{message:e}=await l.post("/mod/backup_restore/com/get_migrate_status");i(e)&&e.is_running&&(m.show=!0,W.ip=e.server_ip,W.port=e.ssh_port,W.account=e.ssh_user,W.password=e.password)})(),(e,t)=>{const l=A,n=R,i=B,r=P,d=I,u=_,w=c,q=p,T=S;return x(),b(T,{class:"p-16px"},{default:y((()=>[v(C(z),{type:"warning",class:"mb-16px"},{default:y((()=>[j("span",null,M(C(g)("Config.Migrate.index_1")),1)])),_:1}),v(u,{ref_key:"formRef",ref:O,model:C(W),rules:X},{default:y((()=>[v(r,null,{default:y((()=>[v(n,{label:e.$t("Term.index_8"),path:"ip"},{default:y((()=>[v(l,{class:"w-190px!",value:C(W).ip,"onUpdate:value":t[0]||(t[0]=e=>C(W).ip=e),placeholder:e.$t("Term.index_9")},null,8,["value","placeholder"])])),_:1},8,["label"]),v(n,{path:"port"},{default:y((()=>[v(i,{"show-button":!1,class:"w-80px!",value:C(W).port,"onUpdate:value":t[1]||(t[1]=e=>C(W).port=e),placeholder:e.$t("Docker.Container.create.index_7")},null,8,["value","placeholder"])])),_:1})])),_:1}),v(n,{label:e.$t("Term.index_10"),path:"account"},{default:y((()=>[v(l,{class:"w-280px!",value:C(W).account,"onUpdate:value":t[2]||(t[2]=e=>C(W).account=e),placeholder:e.$t("Term.index_11")},null,8,["value","placeholder"])])),_:1},8,["label"]),v(n,{label:e.$t("Database.index_14"),path:"password"},{default:y((()=>[v(l,{class:"w-280px!",value:C(W).password,"onUpdate:value":t[3]||(t[3]=e=>C(W).password=e),placeholder:e.$t("Term.index_14")},null,8,["value","placeholder"])])),_:1},8,["label"]),v(n,{label:" "},{default:y((()=>[v(d,{type:"primary",onClick:F},{default:y((()=>[k(M(C(g)("Config.Migrate.index_2")),1)])),_:1})])),_:1})])),_:1},8,["model"]),v(w,null,{default:y((()=>[t[8]||(t[8]=j("li",{class:"text-warning font-bold"},"Please use root user",-1)),j("li",null,[v(d,{type:"primary",text:"",onClick:Y},{default:y((()=>[k(M(C(g)("Config.Migrate.index_3")),1)])),_:1})])])),_:1,__:[8]}),v(q,{show:C(h).show,"onUpdate:show":t[4]||(t[4]=e=>C(h).show=e),title:C(h).title,data:C(h).data,width:"850","min-height":250,component:Q},null,8,["show","title","data"]),v(q,{show:C(m).show,"onUpdate:show":t[5]||(t[5]=e=>C(m).show=e),title:C(m).title,hideClose:!0,data:C(m).data,width:"750","min-height":250,component:C(a)},null,8,["show","title","data","component"]),v(q,{show:C(f).show,"onUpdate:show":t[6]||(t[6]=e=>C(f).show=e),title:C(f).title,hideClose:!0,data:C(f).data,width:"750","min-height":250,component:C(s)},null,8,["show","title","data","component"]),v(q,{show:C(D).show,"onUpdate:show":t[7]||(t[7]=e=>C(D).show=e),title:C(D).title,hideClose:!0,data:C(D).data,width:"750","min-height":250,component:C(o)},null,8,["show","title","data","component"])])),_:1})}}})),X=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));e("i",X)}}}));
