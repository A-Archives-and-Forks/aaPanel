System.register(["./index-legacy95.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1744703330658","./page_layout-legacy.js?v=1744703330658","./vue-legacy.js?v=1744703330658","./mail-legacy.js?v=1744703330658","./public-legacy.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1744703330658","./index-legacy48.js?v=1744703330658","./ssl-legacy.js?v=1744703330658","./naive-legacy.js?v=1744703330658","./common-legacy.js?v=1744703330658","./__commonjsHelpers__-legacy.js?v=1744703330658","./index-legacy.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1744703330658"],(function(e,a){"use strict";var l,t,i,s,o,d,n,r,u,c,p,m,_,v,y,h,f,x,g,b,w,M,k,j,D,q,A,S,$,E,U,T,X,B,P,R,C,N,z,G,W,Y,F,L;return{setters:[e=>{l=e._},e=>{t=e._},e=>{i=e.d,s=e.K,o=e.u,d=e.m,n=e.h,r=e.J,u=e._},e=>{c=e.d,p=e.ai,m=e.r,_=e.e,v=e.R,y=e.$,h=e.a0,f=e.V,x=e.S,g=e.ap,b=e.P,w=e.U,M=e.c,k=e.O,j=e.j,D=e.k,q=e.v,A=e.a1},e=>{S=e.ac,$=e.ad},e=>{E=e.b,U=e.c,T=e.e},e=>{X=e._},e=>{B=e.g},e=>{P=e.g},e=>{R=e.T,C=e.bU,N=e.cq,z=e.cm,G=e.cl,W=e.ch,Y=e._,F=e.bY,L=e.cn},null,null,null,null,null,null],execute:function(){const a={key:0,class:"color-desc"},O={key:3,class:"color-desc"},V=c({__name:"automatic",props:{domain:{}},setup(e,{expose:l}){const t=p(),o=e,{table:d,columns:n}=E([{key:"type",title:"Type",width:50},{key:"record",title:"Record",width:120,ellipsis:{tooltip:!0}},{key:"value",title:"Value",ellipsis:{tooltip:!0}},{key:"priority",title:"MX priority",render:e=>-1!==e.priority?e.priority:"-",width:90},{key:"status",title:"Status",width:110}]),r=m(),u=_((()=>r.value?.support.includes("auto"))),c=()=>{t.push("/ssl_domain/domain")},{loading:k,setLoading:j}=U();return l({getParseStatus:async()=>{const{message:e}=await P({domain:o.domain});if(i(e)&&(r.value=e,u.value))try{j(!0);const{message:a}=await B({domain:o.domain,hash:e.hash});i(a)&&(d.data=[{type:"A",record:a.A.record,value:a.A.record_value,priority:a.A.priority,status:a.A.status?"Added":"Waiting to add"},{type:"MX",record:a.MX.record,value:a.MX.record_value,priority:a.MX.priority,status:a.MX.status?"Added":"Waiting to add"},...a.TXT.map((e=>({type:"TXT",record:e.record,value:e.record_value,priority:e.priority,status:e.status?"Added":"Waiting to add"})))])}finally{j(!1)}},parseStatus:r,isSupportAuto:u}),(e,l)=>{const t=R,i=C,o=N,p=s,m=X;return v(),y(i,null,{default:h((()=>[f(r)?g("",!0):(v(),x("span",a," *The program will use the APl to automatically add the required DNS records forthe mail server and complete the installation of the SSL certifcate. ")),f(r)?(v(),y(i,{key:1},{default:h((()=>[f(u)?(v(),y(o,{key:1,type:"success"},{default:h((()=>l[2]||(l[2]=[M(" Your domain has been connccted to the domain managementccnter, and you can use this fcature to complcte onc-click deployment. ")]))),_:1})):(v(),y(o,{key:0,type:"error"},{default:h((()=>[b(i,{class:"items-center flex-nowrap!"},{default:h((()=>[l[1]||(l[1]=w("span",null,"Your domain has not yet been integrated with the Domain Name Management Center.",-1)),b(t,{type:"primary",size:"small",ghost:"",onClick:c},{default:h((()=>l[0]||(l[0]=[M("Add Now")]))),_:1})])),_:1})])),_:1})),f(k)?(v(),y(i,{key:2,class:"items-center!"},{default:h((()=>[l[3]||(l[3]=w("span",{class:"color-desc"},"Checking for records to be added",-1)),b(p,{size:"small"})])),_:1})):g("",!0),!f(k)&&f(u)?(v(),x("span",O,"The records that will be automatically added")):g("",!0),!f(k)&&f(u)?(v(),y(m,{key:4,data:f(d).data,columns:f(n)},null,8,["data","columns"])):g("",!0)])),_:1})):g("",!0)])),_:1})}}}),H={class:"p-20px"},I={class:"flex h-15px items-center mr-16px"},J={class:"w-320px"},K={class:"w-100px ml-20px"},Q={class:"w-320px"},Z={class:"text-error"};e("default",c({__name:"index",props:{row:{},isEdit:{type:Boolean}},emits:["refresh"],setup(e,{expose:a,emit:i}){const s=o(),c=e,p=i,_=m(null),E=m(""),U=()=>{""!==P.domain.trim()?E.value!==P.domain&&2===P.dns_record&&(_.value?.getParseStatus(),E.value=P.domain):E.value=""},{t:X}=k(),B=m(null),P=j({domain:"",a_record:"",dns_record:2,quota:5,quota_unit:"GB",mailboxes:50,email:"",ips:""}),R=[{label:"GB",value:"GB"},{label:"MB",value:"MB"}],N={domain:{trigger:["blur","input"],validator:()=>""!==P.domain.trim()||new Error(X("Mail.Domain.index_27"))}},O=()=>{T({source:351})},ee=()=>({domain:P.domain,a_record:P.a_record,ips:c.isEdit&&!P.ips?"del":P.ips,quota:P.quota+" "+P.quota_unit,mailboxes:P.mailboxes,email:P.email,automatic:2===P.dns_record?1:null,hash:2===P.dns_record?_.value?.parseStatus?.hash:null});return(()=>{const{isEdit:e,row:a}=c;if(e&&a){const e=a.ip_address.ipv4.join(""),l=a.ip_address.ipv6.join("");P.domain=a.domain,P.a_record=a.a_record,P.ips=e.length>0?e:l;const t=n(a.quota);P.quota=r(t.split(" ")[0]),P.quota_unit=t.split(" ")[1],P.mailboxes=a.mailboxes,P.email=a.email,P.dns_record=1}})(),a({onConfirm:async()=>{if(await(B.value?.validate()),!_.value?.isSupportAuto&&2===P.dns_record&&!c.isEdit)return d.error("This domain does not support automatic resolution, please choose manual resolution"),!1;const{isEdit:e}=c;e?await S(ee()):await $(ee()),p("refresh")}}),(e,a)=>{const i=u,o=z,d=G,n=W,r=Y,c=C,p=F,m=L,k=t,j=l;return v(),x("div",H,[b(k,{ref_key:"formRef",ref:B,model:f(P),rules:N,"label-width":"150px"},{default:h((()=>[e.isEdit?g("",!0):(v(),y(n,{key:0,label:"DNS record"},{default:h((()=>[b(d,{value:f(P).dns_record,"onUpdate:value":[a[0]||(a[0]=e=>f(P).dns_record=e),U]},{default:h((()=>[b(o,{value:2},{default:h((()=>[w("div",I,[a[8]||(a[8]=w("div",null,"Automatic",-1)),b(i,{name:"ssl-stars",size:22})])])),_:1}),b(o,{value:1},{default:h((()=>a[9]||(a[9]=[M("Manual")]))),_:1})])),_:1},8,["value"])])),_:1})),b(n,{label:e.$t("Mail.Domain.index_3"),path:"domain"},{default:h((()=>[w("div",J,[b(r,{value:f(P).domain,"onUpdate:value":a[1]||(a[1]=e=>f(P).domain=e),disabled:e.isEdit,placeholder:e.$t("Mail.Domain.index_18"),onBlur:U},null,8,["value","disabled","placeholder"])])])),_:1},8,["label"]),D(b(n,{label:e.$t("Mail.Domain.index_19")},{default:h((()=>[b(c,null,{default:h((()=>[b(r,{class:"w-320px!",value:f(P).a_record,"onUpdate:value":a[2]||(a[2]=e=>f(P).a_record=e),disabled:e.isEdit,placeholder:e.$t("Mail.Domain.index_20")},null,8,["value","disabled","placeholder"]),a[10]||(a[10]=w("span",{class:"color-#777777"}," *Resolve the domain to the mail server's lP address for server communication ormail client connections. ",-1))])),_:1})])),_:1},8,["label"]),[[q,1===f(P).dns_record]]),D(b(n,{label:" "},{default:h((()=>[b(V,{ref_key:"automaticRef",ref:_,domain:f(P).domain},null,8,["domain"])])),_:1},512),[[q,2===f(P).dns_record]]),e.isEdit?(v(),y(n,{key:1,label:"IP"},{default:h((()=>[b(c,{class:"items-center"},{default:h((()=>[b(r,{class:"w-320px!",value:f(P).ips,"onUpdate:value":a[3]||(a[3]=e=>f(P).ips=e),disabled:f(s).isFree,placeholder:e.$t("Mail.Domain.index_65")},null,8,["value","disabled","placeholder"]),f(s).isFree?(v(),x("span",{key:0,class:"cursor-pointer color-#ffb800",onClick:O}," PRO ")):g("",!0)])),_:1})])),_:1})):g("",!0),b(n,{label:e.$t("Mail.Domain.index_21")},{default:h((()=>[b(p,{value:f(P).quota,"onUpdate:value":a[4]||(a[4]=e=>f(P).quota=e),class:"w-200px",min:0,"show-button":!1},null,8,["value"]),w("div",K,[b(m,{value:f(P).quota_unit,"onUpdate:value":a[5]||(a[5]=e=>f(P).quota_unit=e),options:R},null,8,["value"])])])),_:1},8,["label"]),b(n,{label:e.$t("Mail.Domain.index_22")},{default:h((()=>[b(p,{value:f(P).mailboxes,"onUpdate:value":a[6]||(a[6]=e=>f(P).mailboxes=e),class:"w-320px",min:0,"show-button":!1},null,8,["value"])])),_:1},8,["label"]),b(n,{label:e.$t("Mail.Domain.index_7")},{default:h((()=>[w("div",Q,[b(r,{value:f(P).email,"onUpdate:value":a[7]||(a[7]=e=>f(P).email=e),placeholder:e.$t("Mail.Domain.index_23")},null,8,["value","placeholder"])])])),_:1},8,["label"])])),_:1},8,["model"]),b(j,null,{default:h((()=>[w("li",Z,A(e.$t("Mail.Domain.index_24")),1),w("li",null,A(e.$t("Mail.Domain.index_25")),1),w("li",null,A(e.$t("Mail.Domain.index_26")),1)])),_:1})])}}}))}}}));
