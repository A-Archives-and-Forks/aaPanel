import{_ as e}from"./index102.js?v=1753954525509";import{c as a,d as s,_ as l,b as t,ao as i,ap as n,f as o}from"./public.js?v=1753954525509";import{_ as r}from"./index100.js?v=1753954525509";import{ae as d,af as c}from"./mail2.js?v=1753954525509";import{s as u}from"./index50.js?v=1753954525509";import{m as p,e as _,c as m}from"./page_layout.js?v=1753954525509";import{bY as f,c5 as y,c6 as v,ay as h,cA as x}from"./naive.js?v=1753954525509";import{k as b,P as w,r as k,c as j,U as g,V as C,X as S,a1 as $,a2 as D,Q as P,W as L,a3 as U,al as z,ah as A,j as M,aj as B,e as V}from"./vue.js?v=1753954525509";import{_ as G}from"./index.vue_vue_type_script_setup_true_lang.js?v=1753954525509";import"./common.js?v=1753954525509";import"./__commonjsHelpers__.js?v=1753954525509";import"./index.js?v=1753954525509";import"./index.vue_vue_type_script_setup_true_lang4.js?v=1753954525509";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1753954525509";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1753954525509";const N={class:"cert-info"},O={class:"cert-label"},R={class:"cert-value"},Y={class:"cert-info"},q={class:"cert-label"},H={class:"cert-value"},I={class:"cert-info mt-10px"},Q={class:"cert-label mr-10px"},T={class:"w-48%"},W={class:"mb-8px"},X={class:"w-48%"},E={class:"mb-8px"},F=_(b({__name:"index",props:{row:{}},emits:["close","refresh"],setup(e,{emit:t}){const i=e,n=t,{row:o}=i,{t:_}=w(),m=k(o.ssl_info.key||""),x=k(o.ssl_info.src||""),b=j((()=>(o.ssl_info.dns||[]).join(", "))),B=async()=>{""!==m.value&&""!==x.value?(await d({domain:o.domain,key:m.value,csr:x.value}),n("refresh"),n("close")):p.error(_("Mail.Domain.index_31"))},V=()=>{s({title:_("Mail.Domain.index_32"),content:_("Mail.Domain.index_33"),onConfirm:async()=>{await c({domain:o.domain,key:m.value,csr:x.value}),n("refresh"),n("close")}})},{loading:G,setLoading:F}=a(),J=async e=>{try{F(!0),await u({domain:o.domain,open:e}),o.ssl_alarm=e}catch(a){o.ssl_alarm=1===e?0:1}finally{F(!1)}};return(e,a)=>{const s=f,t=y,i=v,n=r,d=h,c=l;return g(),C("div",null,[S(o).ssl_status?(g(),$(i,{key:0,class:"mb-16px",type:"success","show-icon":!1},{default:D((()=>[P(s,{class:"items-center"},{default:D((()=>[L("div",N,[L("span",O,U(e.$t("Site.Cert.index_30"))+U(e.$t("Public.Punctuation.Colon")),1),L("span",R,U(S(o).ssl_info.issuer),1)]),L("div",Y,[L("span",q,U(e.$t("Site.Cert.index_46"))+U(e.$t("Public.Punctuation.Colon")),1),L("span",H,U(S(b)),1)])])),_:1}),L("div",I,[L("span",Q,U(e.$t("SSL.Domain.index_26")),1),P(t,{size:"small",loading:S(G),"rubber-band":!1,value:S(o).ssl_alarm,"onUpdate:value":J,"checked-value":1,"unchecked-value":0},null,8,["loading","value"])])])),_:1})):z("",!0),P(s,{class:"mb-16px",size:10,justify:"space-between"},{default:D((()=>[L("div",T,[L("div",W,U(e.$t("Site.Cert.index_50")),1),P(n,{value:S(m),"onUpdate:value":a[0]||(a[0]=e=>A(m)?m.value=e:null),rows:10},null,8,["value"])]),L("div",X,[L("div",E,U(e.$t("Site.Cert.index_51")),1),P(n,{value:S(x),"onUpdate:value":a[1]||(a[1]=e=>A(x)?x.value=e:null),rows:10},null,8,["value"])])])),_:1}),P(s,{class:"mb-12px"},{default:D((()=>[P(d,{type:"primary",onClick:B},{default:D((()=>[M(U(e.$t("Public.Btn.Save")),1)])),_:1}),P(d,{onClick:V},{default:D((()=>[M(U(e.$t("Public.Btn.Delete")),1)])),_:1})])),_:1}),P(c,null,{default:D((()=>[L("li",null,U(e.$t("Site.Cert.index_33")),1),L("li",null,U(e.$t("Site.Cert.index_34")),1),L("li",null,U(e.$t("Site.Cert.index_35")),1),L("li",null,U(e.$t("Site.Cert.index_36")),1)])),_:1})])}}}),[["__scopeId","data-v-ec749ad6"]]),J={key:0},K={key:1},Z={class:"color-#3c763d"},ee={class:"color-#3c763d"},ae=b({__name:"index",props:{row:{}},emits:["refresh"],setup(e,{emit:a}){const s=e,l=a,{row:r}=s,d=B(),c=V({ssl_method:"2"}),u=k({}),p=j((()=>r.ssl_hash&&Object.keys(u.value).length>0)),{table:_,columns:y}=t([{key:"type",title:"Type",width:50},{key:"record",title:"Record",width:120,ellipsis:{tooltip:!0}},{key:"value",title:"Value",ellipsis:{tooltip:!0}},{key:"necessary",title:"Necessary"}]),b=()=>{d.push("/ssl_domain/domain")},w=async()=>{},A=async()=>{await i({hash:r.ssl_hash,domain:r.domain}),l("refresh")};return(async()=>{if(r.ssl_hash){const{message:e}=await n({hash:r.ssl_hash});m(e)&&(u.value=e,c.ssl_method="2")}})(),(e,a)=>{const s=v,l=x,t=h,i=f,n=o,d=G;return g(),$(d,{model:S(c),"label-width":"180px"},{default:D((()=>[P(l,{label:"Domain name"},{default:D((()=>[P(s,{class:"min-w-250px h-36px",type:"default","show-icon":!1},{default:D((()=>[L("span",null,U(S(r).domain),1)])),_:1})])),_:1}),P(l,{label:"SSL to be applied for"},{default:D((()=>[P(s,{class:"min-w-250px h-36px",type:"default","show-icon":!1},{default:D((()=>[S(u).dns?(g(),C("span",J,U(S(u).dns.join(",")),1)):(g(),C("span",K,"--"))])),_:1})])),_:1}),"1"===S(c).ssl_method?(g(),$(l,{key:0,label:" "},{default:D((()=>[P(i,{class:"flex-col!"},{default:D((()=>[P(s,{type:"warning"},{default:D((()=>[P(i,{class:"items-center flex-nowrap!"},{default:D((()=>[a[1]||(a[1]=L("span",null,"After clicking Generate, the system will submit a verification request to Lets encrypt for you, please follow the prompts to your domain name hosting provider to add the corresponding resolution",-1)),P(t,{type:"primary",size:"small",ghost:"",onClick:w},{default:D((()=>a[0]||(a[0]=[M("Generate")]))),_:1,__:[0]})])),_:1,__:[1]})])),_:1}),P(n,{columns:S(y),data:S(_).data},null,8,["columns","data"])])),_:1})])),_:1})):(g(),$(l,{key:1,label:" "},{default:D((()=>[P(i,{class:"flex-col!"},{default:D((()=>[S(p)?(g(),$(s,{key:1,type:"success"},{default:D((()=>a[4]||(a[4]=[L("span",{class:"color-#3c763d font-bold"},"Does the system find a matching certificate for you and deploy it immediately?",-1)]))),_:1,__:[4]})):(g(),$(s,{key:0,type:"error"},{default:D((()=>[P(i,{class:"items-center flex-nowrap!"},{default:D((()=>[a[3]||(a[3]=L("span",null,"Your domain has not yet been integrated with the domain management center.",-1)),P(t,{type:"primary",size:"small",ghost:"",onClick:b},{default:D((()=>a[2]||(a[2]=[M("Add Now")]))),_:1,__:[2]})])),_:1,__:[3]})])),_:1})),S(p)?(g(),$(i,{key:2,class:"flex-col!"},{default:D((()=>[a[7]||(a[7]=L("div",null,"Valid certificate",-1)),P(s,{type:"success","show-icon":!1},{default:D((()=>[L("div",Z,[a[5]||(a[5]=L("span",{class:"font-bold"},"Brand：",-1)),M(U(S(u).info.issuer_O+" "+S(u).info.issuer),1)]),L("div",ee,[a[6]||(a[6]=L("span",{class:"font-bold"},"Certificate domain(s)：",-1)),M(" "+U(S(u).dns.join(",")),1)])])),_:1})])),_:1,__:[7]})):z("",!0)])),_:1})])),_:1})),P(l,{label:" "},{default:D((()=>[P(t,{type:"primary",onClick:A,disabled:!S(p)},{default:D((()=>[M(U(e.$t("SSL.index_29")),1)])),_:1},8,["disabled"])])),_:1})])),_:1},8,["model"])}}}),se={class:"h-full p-16px"},le=b({__name:"index",props:{row:{}},emits:["close","refresh"],setup(a,{emit:s}){const l=a,t=s,{row:i}=l,{t:n}=w(),o={row:i,onClose:()=>{t("close")},onRefresh:()=>{t("refresh")}},r=k("other"),d=[{key:"other",label:n("Mail.Domain.index_30"),component:F},{key:"apply",label:"Apply for SSL",component:ae}];return(a,s)=>{const l=e;return g(),C("div",se,[P(l,{value:S(r),"onUpdate:value":s[0]||(s[0]=e=>A(r)?r.value=e:null),data:o,options:d},null,8,["value"])])}}});export{le as default};
