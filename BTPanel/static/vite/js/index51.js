const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index192.js?v=1741416570306","js/index.vue_vue_type_script_setup_true_lang.js?v=1741416570306","js/vue.js?v=1741416570306","js/__commonjsHelpers__.js?v=1741416570306","js/naive.js?v=1741416570306","js/common.js?v=1741416570306","js/mail.js?v=1741416570306","js/page_layout.js?v=1741416570306","js/public.js?v=1741416570306","css/public.css?v=1741416570306","css/page_layout.css?v=1741416570306","js/index193.js?v=1741416570306","js/index99.js?v=1741416570306","css/index16.css?v=1741416570306","js/index144.js?v=1741416570306","js/index.vue_vue_type_script_setup_true_lang6.js?v=1741416570306","js/file.js?v=1741416570306","js/index194.js?v=1741416570306","js/index.js?v=1741416570306","css/index90.css?v=1741416570306","js/index95.js?v=1741416570306","js/index103.js?v=1741416570306","css/index20.css?v=1741416570306"])))=>i.map(i=>d[i]);
import{k as e,bS as a,m as t,b as l,G as i,j as n,_ as s,u as o,I as u,bT as d,a as r,U as c,n as p,a5 as _}from"./page_layout.js?v=1741416570306";import{_ as m}from"./index123.js?v=1741416570306";import{_ as v}from"./index104.js?v=1741416570306";import{d as x,P as f,Q as h,R as g,a0 as y,m as w,M as b,r as k,_ as M,$ as S,N as $,S as C,ae as P,c as U,j as R,Y as B,e as j,ah as T,a1 as E,af as L,ao as D,F as z,x as I,W as F,ar as W,k as V,v as A,a7 as q}from"./vue.js?v=1741416570306";import{i as H}from"./soft2.js?v=1741416570306";import{c as O,d as N,a as G,b as Q,_ as Y,f as J,e as K,u as X,G as Z,H as ee}from"./public.js?v=1741416570306";import{G as ae,H as te,I as le,J as ie,K as ne,x as se,L as oe,M as ue,N as de,O as re,P as ce,Q as pe,R as _e,S as me,T as ve,U as xe,V as fe,W as he,X as ge,Y as ye,Z as we,_ as be,$ as ke,a0 as Me,a1 as Se,a2 as $e,a3 as Ce,a4 as Pe,a5 as Ue,a6 as Re,a7 as Be,a8 as je,a9 as Te}from"./mail.js?v=1741416570306";import{cg as Ee,cf as Le,bS as De,cl as ze,y as Ie,T as Fe,_ as We,cb as Ve,ch as Ae,a2 as qe,bW as He,bO as Oe,bV as Ne,ce as Ge}from"./naive.js?v=1741416570306";import{_ as Qe}from"./index.js?v=1741416570306";import{_ as Ye}from"./index.vue_vue_type_script_setup_true_lang.js?v=1741416570306";import{b as Je}from"./site.js?v=1741416570306";import{_ as Ke}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1741416570306";import{_ as Xe}from"./index.vue_vue_type_script_setup_true_lang15.js?v=1741416570306";import{a as Ze,g as ea,s as aa}from"./alarm.js?v=1741416570306";import{_ as ta}from"./index.vue_vue_type_script_setup_true_lang11.js?v=1741416570306";import{_ as la}from"./index195.js?v=1741416570306";import{_ as ia}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1741416570306";import{o as na}from"./upload.js?v=1741416570306";import{d as sa}from"./file.js?v=1741416570306";import{_ as oa}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1741416570306";import{_ as ua}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1741416570306";import{_ as da}from"./index99.js?v=1741416570306";import{_ as ra}from"./index.vue_vue_type_script_setup_true_lang3.js?v=1741416570306";import{_ as ca}from"./index.vue_vue_type_script_setup_true_lang17.js?v=1741416570306";import"./common.js?v=1741416570306";import"./__commonjsHelpers__.js?v=1741416570306";import"./theme-chrome.js?v=1741416570306";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1741416570306";const pa={class:"setting-card"},_a={class:"setting-title"},ma=e(x({__name:"index",props:{title:{default:""}},setup:e=>(e,a)=>(f(),h("div",pa,[g("div",_a,y(e.title),1),w(e.$slots,"default",{},void 0,!0)]))}),[["__scopeId","data-v-7c578c97"]]),va={class:"flex items-center"},xa=x({__name:"index",setup(e){const{t:i}=b(),n=a(),s=k(0),o=k(null),u=async()=>{o.value||0===o.value?(await ae({save_day:0===s.value?0:o.value}),d()):t.error(i("Mail.Setting.index_27"))},d=async()=>{const{message:e}=await te();l(e)&&(0===e.result?(s.value=0,o.value=null):(s.value=1,o.value=e.result))};return n.setup&&d(),(e,a)=>{const t=Ee,l=Le,i=De,n=ze,d=Ie,r=Fe;return f(),M(ma,{title:e.$t("Mail.Setting.index_24")},{default:S((()=>[g("div",va,[$(l,{value:C(s),"onUpdate:value":a[0]||(a[0]=e=>P(s)?s.value=e:null)},{default:S((()=>[$(t,{value:0},{default:S((()=>[U(y(e.$t("Mail.Setting.index_25")),1)])),_:1}),$(t,{class:"ml-24px",value:1},{default:S((()=>[U(y(e.$t("Mail.Setting.index_26")),1)])),_:1})])),_:1},8,["value"]),$(d,{class:"w-240px"},{default:S((()=>[$(i,{value:C(o),"onUpdate:value":a[1]||(a[1]=e=>P(o)?o.value=e:null),class:"flex-1 ml-16px",min:0,disabled:0===C(s),"show-button":!1,placeholder:e.$t("Mail.Setting.index_27")},null,8,["value","disabled","placeholder"]),$(n,null,{default:S((()=>[U(y(e.$t("Public.Unit.Day",null===C(o)?2:C(o))),1)])),_:1})])),_:1}),$(r,{class:"ml-24px",type:"primary",ghost:"",onClick:u},{default:S((()=>[U(y(e.$t("Public.Btn.Save")),1)])),_:1})])])),_:1},8,["title"])}}}),fa={class:"p-20px pt-24px pb-8px"},ha={class:"w-280px"},ga={class:"w-280px"},ya=x({__name:"install",emits:["refresh"],setup(e,{expose:a,emit:t}){const i=t,{t:n}=b(),s=k(null),o=R({domain:"",php_version:null}),u={domain:{trigger:"change",validator:()=>""!==o.domain.trim()||new Error(n("Mail.Setting.index_20"))},php_version:{trigger:"change",validator:()=>null!==o.php_version||new Error(n("Mail.Setting.index_21"))}},d=k([]),r=async()=>{const{message:e}=await Je();if(l(e)){d.value=e.versions.reverse().map((e=>({label:e.name,value:e.version})));const a=e.versions.findIndex((e=>"74"===e.version));o.php_version=-1!==a?e.versions[a].version:e.versions[0].version}},{loading:c,setLoading:p}=O();return(async()=>{try{p(!0),await Promise.all([r()])}finally{p(!1)}})(),a({onConfirm:async()=>{var e;await(null==(e=s.value)?void 0:e.validate()),await le({site_name:o.domain||"",php_version:o.php_version||""}),i("refresh")}}),(e,a)=>{const t=We,l=Ve,i=Ae,n=Ye;return f(),h("div",fa,[$(n,{ref_key:"formRef",ref:s,model:C(o),rules:u},{default:S((()=>[$(l,{label:e.$t("Mail.Setting.index_18"),path:"domain"},{default:S((()=>[g("div",ha,[$(t,{value:C(o).domain,"onUpdate:value":a[0]||(a[0]=e=>C(o).domain=e)},null,8,["value"])])])),_:1},8,["label"]),$(l,{label:e.$t("Mail.Setting.index_19"),path:"php_version"},{default:S((()=>[g("div",ga,[$(i,{value:C(o).php_version,"onUpdate:value":a[1]||(a[1]=e=>C(o).php_version=e),loading:C(c),options:C(d)},null,8,["value","loading","options"])])])),_:1},8,["label"])])),_:1},8,["model"])])}}}),wa={class:"p-20px pt-24px pb-8px"},ba={class:"w-280px"},ka=x({__name:"config",emits:["refresh"],setup(e,{expose:a,emit:t}){const n=t,{t:s}=b(),o=k(null),u=R({id:0,domain:null,path:""}),d={domain:{trigger:"change",validator:()=>null!==u.domain||new Error(s("Mail.Setting.index_23"))}},r=k([]),c=async()=>{const{message:e}=await ne();i(e)&&(r.value=e.map((e=>({label:e.name,value:e.name,data:e}))),e.length&&(u.domain=e[0].name,u.path=e[0].path,u.id=e[0].id))},p=(e,a)=>{const{data:t}=a;l(t)&&(u.id=t.id,u.path=t.path)},{loading:_,setLoading:m}=O();return(async()=>{try{m(!0),await Promise.all([c()])}finally{m(!1)}})(),a({onConfirm:async()=>{var e;await(null==(e=o.value)?void 0:e.validate()),await ie({id:u.id,site_name:u.domain||"",path:u.path}),n("refresh")}}),(e,a)=>{const t=Ae,l=Ve,i=Ye;return f(),h("div",wa,[$(i,{ref_key:"formRef",ref:o,model:C(u),rules:d},{default:S((()=>[$(l,{label:e.$t("Mail.Setting.index_22"),path:"domain"},{default:S((()=>[g("div",ba,[$(t,{value:C(u).domain,"onUpdate:value":[a[0]||(a[0]=e=>C(u).domain=e),p],loading:C(_),options:C(r)},null,8,["value","loading","options"])])])),_:1},8,["label"])])),_:1},8,["model"])])}}}),Ma={class:"flex items-center mr-32px text-13px"},Sa={class:"mr-4px"},$a={key:0,class:"mr-24px text-13px"},Ca={class:"mr-10px"},Pa=x({__name:"index",setup(e){const{t:t}=b(),i=a(),{setup:o}=B(i),u=R({id:0,site_name:"",status:!1,ssl_status:!1}),d=j((()=>"".concat(u.ssl_status?"https":"http","://").concat(u.site_name))),r=T(),c=()=>{r.push("/site/php")},p=async()=>{const{message:e}=await se();l(e)&&(u.id=e.id,u.status=e.status,u.site_name=e.site_name,u.ssl_status=e.ssl_status)},_=N(t("Mail.Setting.index_14"),{onRefresh:p}),m=()=>{_.show=!0},v=()=>{const e=k(!1);G({title:t("Mail.Setting.index_15"),width:420,content:()=>$(z,null,[$("div",{class:"mb-16px"},[t("Mail.Setting.index_16",[u.site_name])]),$(qe,{checked:e.value,onUpdateChecked:a=>{e.value=a}},{default:()=>[$("div",{class:"text-desc leading-[1.4]"},[t("Mail.Setting.index_17")])]})]),onConfirm:async()=>{await oe({id:u.id,site_name:u.site_name,force:e.value?1:0}),p()}})},x=N(t("Mail.Setting.index_12"),{onRefresh:p}),w=()=>{x.show=!0};return o.value&&p(),(e,a)=>{const t=n,l=E("i18n-t"),i=Fe,o=s,r=He,p=Oe,b=Qe;return f(),M(ma,{class:"pt-0!",title:"WebMail"},{default:S((()=>[$(p,{class:"items-center",size:0},{default:S((()=>[g("div",Ma,[g("span",Sa,y(e.$t("Mail.Setting.index_6")),1),g("span",{class:L(C(u).status?"text-primary":"text-error")},y(C(u).status?e.$t("Mail.Setting.index_7"):e.$t("Mail.Setting.index_8")),3)]),C(u).status?(f(),h("div",$a,[g("span",Ca,y(e.$t("Mail.Setting.index_9")),1),$(t,{href:C(d),target:"_blank"},{default:S((()=>[U(y(C(d)),1)])),_:1},8,["href"]),C(u).ssl_status?D("",!0):(f(),M(l,{key:0,tag:"span",class:"ml-6px text-desc",keypath:"Mail.Setting.index_10",scope:"global"},{link_1:S((()=>[$(t,{onClick:c},{default:S((()=>[U(y(e.$t("Mail.Setting.index_11")),1)])),_:1})])),_:1}))])):D("",!0),C(u).status?(f(),M(i,{key:1,onClick:v},{default:S((()=>[U(y(e.$t("Public.Btn.Uninstall")),1)])),_:1})):(f(),h(z,{key:2},[$(i,{type:"primary",ghost:"",onClick:m},{default:S((()=>[U(y(e.$t("Public.Btn.Install")),1)])),_:1}),$(i,{class:"ml-10px",onClick:w},{default:S((()=>[g("span",null,y(e.$t("Mail.Setting.index_12")),1)])),_:1}),$(r,null,{trigger:S((()=>[$(o,{class:"ml-6px",name:"common-ask",size:"16"})])),default:S((()=>[U(y(e.$t("Mail.Setting.index_13")),1)])),_:1})],64))])),_:1}),$(b,{show:C(_).show,"onUpdate:show":a[0]||(a[0]=e=>C(_).show=e),title:C(_).title,data:C(_).data,width:480,footer:!0,"confirm-text":e.$t("Public.Btn.Install"),component:ya},null,8,["show","title","data","confirm-text"]),$(b,{show:C(x).show,"onUpdate:show":a[1]||(a[1]=e=>C(x).show=e),title:C(x).title,data:C(x).data,width:480,footer:!0,component:ka},null,8,["show","title","data"])])),_:1})}}}),Ua={class:"p-16px"},Ra=x({__name:"config",props:{row:{}},setup(e,{expose:a}){const t=e,{row:i}=t,n=k(""),s=k("utf-8"),{loading:o,setLoading:u}=O();return(async()=>{try{u(!0);const{message:e}=await ue({service:i.key});l(e)&&(n.value=e.data,s.value=e.encoding)}finally{u(!1)}})(),a({onConfirm:async()=>{await de({service:i.key,data:n.value})}}),(e,a)=>(f(),h("div",Ua,[$(Xe,{value:C(n),"onUpdate:value":a[0]||(a[0]=e=>P(n)?n.value=e:null),encoding:C(s),"onUpdate:encoding":a[1]||(a[1]=e=>P(s)?s.value=e:null),height:550,load:C(o),"show-encoding":!0},null,8,["value","encoding","load"])]))}}),Ba={class:"text-13px"},ja=x({__name:"index",setup(e){const{t:t}=b(),i=a(),n=k(!1),s=k(0),o=async e=>{e?G({width:380,title:t("Mail.Setting.index_29"),content:t("Mail.Setting.index_30"),onConfirm:async()=>{s.value?await re({id:s.value,if_stop:!1}):await ce()},onPublicClose:()=>{n.value=!e}}):await re({id:s.value,if_stop:!0})},{loading:u,setLoading:d}=O();return i.setup&&(async()=>{try{d(!0);const{message:e}=await pe();l(e)&&("result"in e&&"boolean"==typeof e.result?(n.value=e.result,s.value=0):l(e)&&(s.value=e.id,n.value=!!e.status))}finally{d(!1)}})(),(e,a)=>{const t=Ne,l=Oe;return f(),M(l,{class:"items-center",size:24},{default:S((()=>[g("div",Ba,y(e.$t("Mail.Setting.index_28")),1),$(t,{value:C(n),"onUpdate:value":[a[0]||(a[0]=e=>P(n)?n.value=e:null),o],loading:C(u)},null,8,["value","loading"])])),_:1})}}}),Ta=x({__name:"index",setup(e){const t=a(),i=o(),{isPro:n}=B(i),{t:s}=b(),{table:u,columns:d}=Q([{key:"name",title:s("Mail.Setting.index_31")},{key:"status",title:s("Mail.Setting.index_32"),render:e=>$(Y,{value:e.status,checkedValue:!0,onClick:()=>{r(e)}},null)},J({width:200,options:e=>[{label:e.status?s("Public.Status.Stop"):s("Public.Status.Start"),show:"blacklists"!==e.key,onClick:()=>{r(e)}},{label:s("Public.Status.Restart"),show:"blacklists"!==e.key,onClick:()=>{c(e)}},{label:s("Public.Btn.Repair"),show:"blacklists"!==e.key,onClick:()=>{p(e)}},{label:s("Public.Btn.Config"),show:"blacklists"!==e.key,onClick:()=>{m(e)}}]})]),r=e=>{G({title:s("Mail.Setting.index_33",[e.name,e.status?s("Public.Status.Stop"):s("Public.Status.Start")]),content:s("Mail.Setting.index_34",[e.name,e.status?s("Public.Status.Stop").toLowerCase():s("Public.Status.Start").toLowerCase()]),onConfirm:async()=>{if("blacklists"===e.key){if(!n.value)return void K({source:321});await _e({operation:e.status?0:1})}else await me({service:e.key,type:e.status?"stop":"start"});h()}})},c=e=>{G({title:s("Mail.Setting.index_33",[e.key,s("Public.Status.Restart")]),content:s("Mail.Setting.index_34",[e.key,s("Public.Status.Restart").toLowerCase()]),onConfirm:async()=>{await me({service:e.key,type:"restart"}),h()}})},p=e=>{let a=s("Mail.Setting.index_34",[e.key,s("Public.Btn.Repair").toLowerCase()]);"dovecot"===e.key?a=s("Mail.Setting.index_35"):"postfix"===e.key&&(a=s("Mail.Setting.index_36")),G({title:s("Mail.Setting.index_33",[e.key,s("Public.Btn.Repair")]),content:a,onConfirm:async()=>{await ve({service:e.key,type:"repair"}),h()}})},_=N(),m=e=>{_.data.row=e,_.title=s("Mail.Setting.index_37",["".concat(e.key,"_config_file")]),_.show=!0},{loading:v,setLoading:x}=O(),h=async()=>{try{x(!0);const{message:e}=await xe();l(e)&&(u.data=[],u.data.push({key:"dovecot",name:"Dovecot",status:e.dovecot}),e.change_rspamd&&u.data.push({key:"opendkim",name:"Opendkim",status:e.opendkim}),u.data.push({key:"rspamd",name:"Rspamd",status:e.rspamd}),u.data.push({key:"postfix",name:"Postfix",status:e.postfix}),u.data.push({key:"blacklists",name:s("Mail.Setting.index_57"),status:e.alarm_black_switch}))}finally{x(!1)}};return t.setup&&h(),(e,a)=>{const t=Ke,l=Qe;return f(),M(ma,{title:"Service Status"},{default:S((()=>[$(ja,{class:"mb-10px"}),$(t,{loading:C(v),"loading-num":3,data:C(u).data,columns:C(d)},null,8,["loading","data","columns"]),$(l,{show:C(_).show,"onUpdate:show":a[0]||(a[0]=e=>C(_).show=e),title:C(_).title,data:C(_).data,width:800,height:624,footer:!0,"confirm-text":e.$t("Public.Btn.Save"),component:Ra},null,8,["show","title","data","confirm-text"])])),_:1})}}}),Ea={class:"p-20px pt-28px pb-8px"},La={class:"w-250px"},Da=x({__name:"set",props:{open:{type:Boolean,default:!1},taskList:{default:()=>[]},keyWorld:{}},emits:["refresh"],setup(e,{expose:a,emit:t}){const l=e,n=t,{t:s}=b(),o=k(null),r=R({status:!0,day_num:3,interval:600,time_range:[(new Date).setHours(0,0,0,0),(new Date).setHours(23,59,59,0)],method:[]}),c={day_num:{trigger:"input",type:"number",required:!0,message:s("Config.Alarm.index_22")},interval:{trigger:"input",type:"number",required:!0,message:s("Config.Alarm.index_23")},method:{trigger:"change",type:"array",required:!0,message:s("Config.Safe.index_7")}},p=I([]),{loading:_,setLoading:m}=O();return(()=>{const{open:e,taskList:a}=l;a.length>0&&(r.status=e||a[0].status,r.method=a[0].sender)})(),(async()=>{try{m(!0);const{message:e}=await ea();p.value=i(e)?e:[]}finally{m(!1)}})(),a({onConfirm:async()=>{var e;await(null==(e=o.value)?void 0:e.validate()),await Ze((()=>{const e=p.value.filter((e=>e.source===l.keyWorld))[0];return{template_id:e.id,task_data:{task_data:{tid:e.id,type:e.source,title:e.title,status:r.status,count:0,interval:r.interval,project:"",help:600},sender:r.method,number_rule:{day_num:r.day_num,total:0},time_rule:{send_interval:0,time_range:[d(r.time_range[0]),d(r.time_range[1])]}}}})()),n("refresh")}}),(e,a)=>{const t=Ne,l=Ve,i=De,n=ze,s=Ie,d=la,p=ta,m=Ye,v=u;return f(),h("div",Ea,[$(v,{show:C(_)},{default:S((()=>[$(m,{ref_key:"formRef",ref:o,model:C(r),rules:c},{default:S((()=>[$(l,{label:e.$t("Mail.Setting.index_51")},{default:S((()=>[$(t,{value:C(r).status,"onUpdate:value":a[0]||(a[0]=e=>C(r).status=e)},null,8,["value"])])),_:1},8,["label"]),$(l,{label:e.$t("Plugin.Mysql.index_29"),path:"interval"},{default:S((()=>[$(s,null,{default:S((()=>[$(i,{value:C(r).interval,"onUpdate:value":a[1]||(a[1]=e=>C(r).interval=e),class:"w-100px",min:0,"show-button":!1,placeholder:""},null,8,["value"]),$(n,{class:"min-w-52px text-center"},{default:S((()=>[U(y(e.$t("Public.Unit.Seconds")),1)])),_:1})])),_:1})])),_:1},8,["label"]),$(l,{label:e.$t("Config.Alarm.index_28"),path:"day_num"},{default:S((()=>[$(s,null,{default:S((()=>[$(i,{value:C(r).day_num,"onUpdate:value":a[2]||(a[2]=e=>C(r).day_num=e),class:"w-100px",min:0,"show-button":!1,placeholder:""},null,8,["value"]),$(n,{class:"min-w-52px text-center"},{default:S((()=>[U(y(e.$t("Public.Unit.Times")),1)])),_:1})])),_:1})])),_:1},8,["label"]),$(l,{label:e.$t("Config.Alarm.index_33"),path:"time_range"},{default:S((()=>[$(d,{value:C(r).time_range,"onUpdate:value":a[3]||(a[3]=e=>C(r).time_range=e)},null,8,["value"])])),_:1},8,["label"]),$(l,{label:e.$t("Config.Safe.index_6"),path:"method"},{default:S((()=>[g("div",La,[$(p,{value:C(r).method,"onUpdate:value":a[4]||(a[4]=e=>C(r).method=e)},null,8,["value"])])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["show"])])}}}),za={class:"text-13px"},Ia=x({__name:"index",props:{title:{},modelTips:{},keyWorld:{}},setup(e){const{t:a}=b(),t=o(),{isPro:i}=B(t),n=e,s=k(!1),u=k([]),d=async e=>{e?r(!0):(await aa({task_id:u.value[0].id,status:0}),s.value=!1,u.value[0].status=!1)},r=(e=!1)=>{i.value||"mail_domain_black"!==n.keyWorld?X({title:n.modelTips,width:480,footer:!0,confirmText:a("Public.Btn.Save"),data:{open:e,taskList:u.value,onRefresh:_,keyWorld:n.keyWorld},component:Da}):K({source:322})},{loading:c,setLoading:p}=O(),_=async()=>{try{p(!0);const{message:e}=await fe({keyword:n.keyWorld});l(e)?(s.value=e.status,u.value=[e]):(s.value=!1,u.value=[])}finally{p(!1)}};return _(),(e,a)=>{const t=Ne,l=Oe;return f(),M(l,{class:"items-center",size:24},{default:S((()=>[g("div",za,y(n.title),1),$(t,{value:C(s),loading:C(c),"onUpdate:value":d},null,8,["value","loading"])])),_:1})}}}),Fa=x({__name:"index",setup:e=>(e,a)=>(f(),M(ma,{title:e.$t("Mail.Setting.index_52")},{default:S((()=>[$(Ia,{title:e.$t("Mail.Setting.index_53"),"model-tips":e.$t("Mail.Setting.index_54"),"key-world":"mail_domain_black"},null,8,["title","model-tips"]),$(Ia,{class:"my-10px",title:e.$t("Mail.Setting.index_55"),"model-tips":e.$t("Mail.Setting.index_56"),"key-world":"mail_server_status"},null,8,["title","model-tips"]),D("",!0)])),_:1},8,["title"]))}),Wa=e(x({__name:"index",setup:e=>(e,a)=>(f(),h(z,null,[$(Pa),$(xa),$(Fa),$(Ta)],64))}),[["__scopeId","data-v-4e97a64e"]]),Va=x({__name:"index",setup(e){const a=F((()=>r((()=>import("./index192.js?v=1741416570306")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10])))),{t:t}=b(),n=R({p:1,size:10}),s=N("",{isEdit:!1,row:void 0,onRefresh:()=>{m()}}),o=()=>{s.data.isEdit=!1,s.title=t("Mail.Bcc.index_1"),s.show=!0},u=new Map([["sender",t("Mail.Bcc.index_2")],["recipient",t("Mail.Bcc.index_3")]]),{table:d,columns:c}=Q([{key:"user",title:t("Mail.Bcc.index_4"),ellipsis:{tooltip:!0}},{key:"forward_user",title:t("Mail.Bcc.index_5"),ellipsis:{tooltip:!0}},{key:"domain",title:t("Mail.Bcc.index_6"),ellipsis:{tooltip:!0}},{key:"type",title:t("Mail.Bcc.index_7"),render:e=>u.get(e.type)},{key:"active",title:t("Public.Table.Status"),render:e=>$("div",{class:[1===e.active?"text-primary":"text-error"]},[$("span",{class:["glyphicon","glyphicon-".concat(1===e.active?"ok":"remove")]},null)])},J({width:150,options:e=>[{label:t("Public.Btn.Edit"),onClick:()=>{p(e)}},{label:t("Public.Btn.Del"),onClick:()=>{_(e)}}]})]),p=e=>{s.data.isEdit=!0,s.data.row=e,s.title=t("Mail.Bcc.index_8"),s.show=!0},_=async e=>{G({title:t("Mail.Bcc.index_9"),content:t("Mail.Bcc.index_10"),onConfirm:async()=>{await he({type:e.type,user:e.user,forward_user:e.forward_user}),m()}})},m=async()=>{try{d.loading=!0;const{message:e}=await ge();d.data=[],l(e)&&Object.entries(e).forEach((([e,a])=>{i(a)&&d.data.push(...a.map((a=>({...a,type:e}))))}))}finally{d.loading=!1}},v=()=>{n.p=1,m()};return m(),(e,t)=>{const l=Fe,i=Ke,n=ia,u=Qe;return f(),h("div",null,[$(n,null,{toolsLeft:S((()=>[$(l,{type:"primary",onClick:o},{default:S((()=>[U(y(e.$t("Mail.Bcc.index_1")),1)])),_:1})])),toolsRight:S((()=>[$(l,{onClick:v},{default:S((()=>[U(y(e.$t("Public.Btn.Refresh")),1)])),_:1})])),table:S((()=>[$(i,{loading:C(d).loading,data:C(d).data,columns:C(c)},null,8,["loading","data","columns"])])),_:1}),$(u,{show:C(s).show,"onUpdate:show":t[0]||(t[0]=e=>C(s).show=e),title:C(s).title,data:C(s).data,width:540,"min-height":228,footer:!0,component:C(a)},null,8,["show","title","data","component"])])}}}),Aa=x({__name:"index",setup(e){const a=F((()=>r((()=>import("./index193.js?v=1741416570306")),__vite__mapDeps([11,1,2,3,4,5,12,7,8,9,10,13,6])))),{t:t}=b(),l=R({p:1,size:10}),n=N("",{isEdit:!1,row:void 0,onRefresh:()=>{p()}}),s=()=>{n.data.isEdit=!1,n.title=t("Mail.Forward.index_1"),n.show=!0},{table:o,columns:u}=Q([{key:"address",title:t("Mail.Forward.index_2"),ellipsis:{tooltip:!0}},{key:"goto",title:t("Mail.Forward.index_3"),ellipsis:{tooltip:!0}},{key:"domain",title:t("Mail.Forward.index_4"),ellipsis:{tooltip:!0}},{key:"created",title:t("Mail.Forward.index_5")},{key:"modified",title:t("Mail.Forward.index_6")},{key:"active",title:t("Public.Table.Status"),render:e=>$(Ne,{value:e.active,size:"small",checkedValue:1,uncheckedValue:0,onUpdateValue:async a=>{await ye({user:e.address,forward_user:e.goto,active:a}),e.active=a}},null)},J({width:150,options:e=>[{label:t("Public.Btn.Edit"),onClick:()=>{d(e)}},{label:t("Public.Btn.Del"),onClick:()=>{c(e)}}]})]),d=e=>{n.data.isEdit=!0,n.data.row=e,n.title=t("Mail.Forward.index_7"),n.show=!0},c=async e=>{G({title:t("Mail.Forward.index_8"),content:t("Mail.Forward.index_9"),onConfirm:async()=>{await we({user:e.address}),p()}})},p=async()=>{try{o.loading=!0;const{message:e}=await be();o.data=i(e)?e:[]}finally{o.loading=!1}},_=()=>{l.p=1,p()};return p(),(e,t)=>{const l=Fe,i=Ke,d=ia,r=Qe;return f(),h("div",null,[$(d,null,{toolsLeft:S((()=>[$(l,{type:"primary",onClick:s},{default:S((()=>[U(y(e.$t("Mail.Forward.index_1")),1)])),_:1})])),toolsRight:S((()=>[$(l,{onClick:_},{default:S((()=>[U(y(e.$t("Public.Btn.Refresh")),1)])),_:1})])),table:S((()=>[$(i,{loading:C(o).loading,data:C(o).data,columns:C(u)},null,8,["loading","data","columns"])])),_:1}),$(r,{show:C(n).show,"onUpdate:show":t[0]||(t[0]=e=>C(n).show=e),title:C(n).title,data:C(n).data,width:480,"min-height":236,footer:!0,component:C(a)},null,8,["show","title","data","component"])])}}}),qa={class:"w-100px"},Ha={class:"w-120px"},Oa=x({__name:"period",props:{value:{default:()=>({cycle:"week",week:"1",hour:1,minute:30})},valueModifiers:{}},emits:["update:value"],setup(e){const a=W(e,"value"),{t:t}=b(),l=[{label:t("Public.Unit.Weekly"),value:"week"},{label:t("Public.Unit.Daily"),value:"day"}],i=[{label:t("Public.Unit.Monday"),value:"1"},{label:t("Public.Unit.Tuesday"),value:"2"},{label:t("Public.Unit.Wednesday"),value:"3"},{label:t("Public.Unit.Thursday"),value:"4"},{label:t("Public.Unit.Friday"),value:"5"},{label:t("Public.Unit.Saturday"),value:"6"},{label:t("Public.Unit.Sunday"),value:"0"}];return(e,t)=>{const n=Ae,s=De,o=ze,u=Ie,d=Oe;return f(),M(d,{size:20},{default:S((()=>[g("div",qa,[$(n,{value:a.value.cycle,"onUpdate:value":t[0]||(t[0]=e=>a.value.cycle=e),options:l},null,8,["value"])]),V(g("div",Ha,[$(n,{value:a.value.week,"onUpdate:value":t[1]||(t[1]=e=>a.value.week=e),options:i},null,8,["value"])],512),[[A,"week"===a.value.cycle]]),$(u,{class:"w-100px"},{default:S((()=>[$(s,{value:a.value.hour,"onUpdate:value":t[2]||(t[2]=e=>a.value.hour=e),min:0,"show-button":!1},null,8,["value"]),$(o,null,{default:S((()=>[U(y(e.$t("Public.Unit.Hour",a.value.hour)),1)])),_:1})])),_:1}),$(u,{class:"w-120px"},{default:S((()=>[$(s,{value:a.value.minute,"onUpdate:value":t[3]||(t[3]=e=>a.value.minute=e),min:0,"show-button":!1},null,8,["value"]),$(o,null,{default:S((()=>[U(y(e.$t("Public.Unit.Minute",a.value.minute)),1)])),_:1})])),_:1})])),_:1})}}}),Na={class:"backup-title mt-8px"},Ga={class:"flex-1"},Qa={class:"w-140px"},Ya=e(x({__name:"plan",setup(e){const{t:a}=b(),t=k(!1),n=R({open:!1,cycle:"week",week:"1",hour:1,minute:30,backupTo:"localhost",save:3}),s=k([]),o=async()=>{await ke({type:n.cycle,hour:n.hour,minute:n.minute,backupTo:n.backupTo,save:n.save,..."week"===n.cycle?{week:n.week}:{}}),r()},u=e=>{t.value&&!1===e&&G({title:a("Mail.Backup.index_6"),content:a("Mail.Backup.index_7"),onConfirm:async()=>{await Me(),n.open=!1},onPublicClose:()=>{n.open=!e}})},d=()=>{s.value.unshift({label:a("Mail.Backup.index_8"),value:"localhost"})},r=async()=>{try{const{message:e}=await $e();l(e)&&(t.value=!0,n.open=!0,n.cycle=e.type,n.week=e.where1,n.hour=e.where_hour,n.minute=e.where_minute,n.backupTo=e.backupTo,n.save=e.save)}catch(e){t.value=!1,n.open=!1,console.error(e)}};return r(),(async()=>{d();const{message:e}=await Se();i(e)&&(s.value=e.map((e=>({label:e.name,value:e.value})))),d()})(),(e,a)=>{const t=Ne,l=Ve,i=Ae,d=De,r=ze,c=Ie,p=Oe,_=Fe,m=Ye;return f(),h(z,null,[g("div",Na,y(e.$t("Mail.Backup.index_1")),1),$(m,{model:C(n)},{default:S((()=>[$(l,{label:e.$t("Mail.Backup.index_2")},{default:S((()=>[$(t,{value:C(n).open,"onUpdate:value":[a[0]||(a[0]=e=>C(n).open=e),u]},null,8,["value"])])),_:1},8,["label"]),$(l,{label:e.$t("Mail.Backup.index_3")},{default:S((()=>[g("div",Ga,[$(Oa,{value:C(n),"onUpdate:value":a[1]||(a[1]=e=>P(n)?n.value=e:null)},null,8,["value"])])])),_:1},8,["label"]),$(p,{size:24},{default:S((()=>[$(l,{label:e.$t("Mail.Backup.index_4")},{default:S((()=>[g("div",Qa,[$(i,{value:C(n).backupTo,"onUpdate:value":a[2]||(a[2]=e=>C(n).backupTo=e),options:C(s)},null,8,["value","options"])])])),_:1},8,["label"]),$(l,{label:e.$t("Mail.Backup.index_5"),"label-width":"auto"},{default:S((()=>[$(c,{class:"w-100px"},{default:S((()=>[$(d,{value:C(n).save,"onUpdate:value":a[3]||(a[3]=e=>C(n).save=e),"show-button":!1},null,8,["value"]),$(r,null,{default:S((()=>[U(y(e.$t("Public.Unit.Part",C(n).save)),1)])),_:1})])),_:1})])),_:1},8,["label"])])),_:1}),$(l,{label:" ","show-feedback":!1},{default:S((()=>[$(_,{type:"primary",onClick:o},{default:S((()=>[U(y(e.$t("Public.Btn.Save")),1)])),_:1})])),_:1})])),_:1},8,["model"])],64)}}}),[["__scopeId","data-v-1cd99818"]]),Ja={class:"backup-title mt-32px"},Ka={class:"px-20px py-16px"},Xa=e(x({__name:"import",setup(e){const{t:a}=b(),t=R({path:"/www/backup/path/vmail/"}),n=()=>{na({path:t.path,uploadData:{accept:".gz,.tar,.tar.gz,.zip",multiple:!0},onUploadSuccess:()=>{x()}})},s=()=>{(e=>{const{t:a}=b();X({title:a("Component.SelectPath.index_7"),width:720,height:540,footer:!0,data:{path:e.path||"/www/wwwroot",checkedType:e.checkedType||["dir"],callback:e.onCheckedSuccess},component:F((()=>r((()=>import("./index144.js?v=1741416570306")),__vite__mapDeps([14,15,7,2,3,4,5,8,9,10,16]))))})})({checkedType:["file"],onCheckedSuccess:async e=>{await Ce({file_path:e})}})},{table:o,columns:u}=Q([{key:"name",title:a("Mail.Backup.index_11"),ellipsis:!0},{key:"mtime",title:a("Mail.Backup.index_12"),render:e=>c(e.mtime)},J({width:120,options:e=>[{label:a("Mail.Backup.index_13"),onClick:()=>{d(e)}},{label:a("Public.Btn.Delete"),onClick:()=>{_(e)}}]})]),d=e=>{G({title:a("Mail.Backup.index_14"),content:a("Mail.Backup.index_15"),onConfirm:async()=>{await Ce({file_path:"".concat(t.path,"/").concat(e.name)})}})},_=e=>{G({title:a("Mail.Backup.index_16"),content:a("Mail.Backup.index_17"),onConfirm:async()=>{await sa({path:"".concat(t.path,"/").concat(e.name)}),x()}})},{loading:m,setLoading:v}=O(),x=async()=>{try{v(!0),await(async()=>{const{message:e}=await Ue();l(e)&&(t.path=p(e.result)?e.result:"/www/backup/path/vmail/")})();const{message:e}=await Pe(q(t));o.data=i(e)?e:[]}finally{v(!1)}};return x(),(e,a)=>{const t=Fe,l=Ke,i=ia;return f(),h(z,null,[g("div",Ja,y(e.$t("Mail.Backup.index_18")),1),g("div",Ka,[$(i,null,{toolsLeft:S((()=>[$(t,{onClick:n},{default:S((()=>[U(y(e.$t("Mail.Backup.index_9")),1)])),_:1}),$(t,{onClick:s},{default:S((()=>[U(y(e.$t("Mail.Backup.index_10")),1)])),_:1})])),table:S((()=>[$(l,{"max-height":340,bordered:!0,loading:C(m),data:C(o).data,columns:C(u)},null,8,["loading","data","columns"])])),_:1})])],64)}}}),[["__scopeId","data-v-b049e3dd"]]),Za=x({__name:"index",setup:e=>(e,a)=>(f(),h("div",null,[$(Ya),$(Xa)]))}),et={class:"p-20px"},at={class:"color-#999999 ml-10px"},tt=x({__name:"index",props:{row:{},isEdit:{type:Boolean}},emits:["refresh"],setup(e,{expose:a,emit:t}){const l=e,i=t,{isEdit:n,row:s}=l,{t:o}=b(),u=k(null),d=R({start_time:Date.now(),end_time:new Date((new Date).setHours(23,59,59,999)).getTime(),time1:!1,time2:!1,interval:0,username:"",full_name:"",subject:"",content:""}),r={interval:{required:!0,trigger:"input",type:"number",message:o("Mail.Responder.index_11")},username:{required:!0,trigger:"input",message:"Please select Autoresponder"},full_name:{required:!0,trigger:"input",message:o("Mail.Responder.index_12")},subject:{required:!0,trigger:"input",message:o("Mail.Responder.index_13")},content:{required:!0,trigger:"input",message:o("Mail.Responder.index_16")}},c=()=>({username:d.username,full_name:d.full_name,content:d.content,subject:d.subject,start_time:d.time1?0:Math.floor(d.start_time/1e3),end_time:d.time2?-1:Math.floor(d.end_time/1e3),interval:3600*d.interval});return(()=>{const{row:e,isEdit:a}=l;a&&e&&(d.interval=e.interval/3600,d.username=e.username,d.full_name=e.full_name,d.subject=e.subject,d.content=e.content,d.time1=0===e.start_time,d.time2=-1===e.end_time,d.start_time=0===e.start_time?Date.now():1e3*e.start_time,d.end_time=-1===e.end_time?new Date((new Date).setHours(23,59,59,999)).getTime():1e3*e.end_time)})(),a({onConfirm:async()=>{var e;await(null==(e=u.value)?void 0:e.validate()),n&&s?await Re(c()):await Be(c()),i("refresh")}}),(e,a)=>{const t=qe,l=_,i=Ve,s=De,o=ze,c=Ie,p=We,m=da,v=Ye;return f(),h("div",et,[$(v,{ref_key:"formRef",ref:u,model:C(d),rules:r},{default:S((()=>[$(i,{label:e.$t("Mail.Responder.index_5"),path:"start_time"},{default:S((()=>[$(t,{checked:C(d).time1,"onUpdate:checked":a[0]||(a[0]=e=>C(d).time1=e),class:"mr-10px"},{default:S((()=>a[9]||(a[9]=[U(" Start now ")]))),_:1},8,["checked"]),C(d).time1?D("",!0):(f(),M(l,{key:0,value:C(d).start_time,"onUpdate:value":a[1]||(a[1]=e=>C(d).start_time=e),type:"datetime"},null,8,["value"]))])),_:1},8,["label"]),$(i,{label:e.$t("Mail.Responder.index_6"),path:"start_time"},{default:S((()=>[$(t,{checked:C(d).time2,"onUpdate:checked":a[2]||(a[2]=e=>C(d).time2=e),class:"mr-10px"},{default:S((()=>a[10]||(a[10]=[U(" Never end ")]))),_:1},8,["checked"]),C(d).time2?D("",!0):(f(),M(l,{key:0,value:C(d).end_time,"onUpdate:value":a[3]||(a[3]=e=>C(d).end_time=e),type:"datetime"},null,8,["value"]))])),_:1},8,["label"]),$(i,{label:e.$t("Mail.Responder.index_4"),path:"interval"},{default:S((()=>[$(c,{class:"w-120px!"},{default:S((()=>[$(s,{value:C(d).interval,"onUpdate:value":a[4]||(a[4]=e=>C(d).interval=e),min:0,"show-button":!1},null,8,["value"]),$(o,null,{default:S((()=>[U(y(e.$t("Crontab.arrange.index_43")),1)])),_:1})])),_:1}),g("span",at,"0: "+y(e.$t("Mail.Responder.index_17")),1)])),_:1},8,["label"]),$(i,{label:e.$t("Mail.Responder.index_2"),path:"username"},{default:S((()=>[$(ra,{class:"w-330px!","is-init":!0,value:C(d).username,"onUpdate:value":a[5]||(a[5]=e=>C(d).username=e),disabled:C(n)},null,8,["value","disabled"])])),_:1},8,["label"]),$(i,{label:e.$t("Mail.Responder.index_10"),path:"full_name"},{default:S((()=>[$(p,{class:"w-330px!",value:C(d).full_name,"onUpdate:value":a[6]||(a[6]=e=>C(d).full_name=e),placeholder:e.$t("Mail.Responder.index_10")},null,8,["value","placeholder"])])),_:1},8,["label"]),$(i,{label:e.$t("Mail.Responder.index_3"),path:"subject"},{default:S((()=>[$(p,{class:"w-330px!",value:C(d).subject,"onUpdate:value":a[7]||(a[7]=e=>C(d).subject=e),placeholder:e.$t("Mail.Responder.index_14")},null,8,["value","placeholder"])])),_:1},8,["label"]),$(i,{label:e.$t("Docker.LocalImage.build_5"),path:"content"},{default:S((()=>[$(m,{class:"w-330px!",value:C(d).content,"onUpdate:value":a[8]||(a[8]=e=>C(d).content=e),placeholder:e.$t("Mail.Responder.index_15")},null,8,["value","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"])])}}}),lt={class:"w-220px mr-8px"},it=x({__name:"index",setup(e){const{t:a}=b(),t=R({p:1,size:10,search:"",domain:""}),i=N("",{isEdit:!1,row:void 0,onRefresh:()=>{d()}}),n=()=>{i.data.isEdit=!1,i.title=a("Mail.Responder.index_1"),i.show=!0},{table:s,columns:o}=Q([{key:"username",title:a("Mail.Responder.index_2"),ellipsis:{tooltip:!0}},{key:"subject",title:a("Mail.Responder.index_3"),ellipsis:{tooltip:!0}},Z({key:"active",title:a("Site.TableRow.index_14"),onClick:async(e,a)=>{const t={username:a.username,full_name:a.full_name,content:a.content,subject:a.subject,interval:a.interval,start_time:a.start_time,end_time:a.end_time,active:e?1:0};await Re(t)}}),{key:"interval",title:a("Mail.Responder.index_4"),align:"center",render:e=>0===e.interval?"0":(e.interval/3600).toFixed(0)+" "+a("Crontab.arrange.index_43")},{key:"type",title:a("Mail.Responder.index_5"),render:e=>0===e.start_time?"Start now":c(e.start_time)},{key:"type",title:a("Mail.Responder.index_6"),render:e=>-1===e.end_time?"Never end":c(e.end_time)},J({width:150,options:e=>[{label:a("Public.Btn.Edit"),onClick:()=>{u(e)}},{label:a("Public.Btn.Del"),onClick:()=>{G({title:a("Mail.Responder.index_7"),content:a("Mail.Responder.index_8"),onConfirm:async()=>{await je({username:e.username}),d()}})}}]})]),u=e=>{i.data.isEdit=!0,i.data.row=e,i.title=a("Mail.Responder.index_9"),i.show=!0},d=async()=>{try{s.loading=!0;const{message:e}=await Te(t);l(e)&&(s.data=e.data,s.total=e.total)}finally{s.loading=!1}},r=()=>{t.p=1,d()};return d(),(e,a)=>{const l=Fe,u=ua,c=oa,p=Ke,_=ia,m=Qe;return f(),h("div",null,[$(_,null,{toolsLeft:S((()=>[$(l,{type:"primary",onClick:n},{default:S((()=>[U(y(e.$t("Mail.Responder.index_1")),1)])),_:1})])),toolsRight:S((()=>[g("div",lt,[$(ca,{value:C(t).domain,"onUpdate:value":[a[0]||(a[0]=e=>C(t).domain=e),r]},null,8,["value"])]),$(u,{value:C(t).search,"onUpdate:value":a[1]||(a[1]=e=>C(t).search=e),placeholder:e.$t("Public.Btn.Search"),onSearch:r},null,8,["value","placeholder"])])),pageRight:S((()=>[$(c,{page:C(t).p,"onUpdate:page":a[2]||(a[2]=e=>C(t).p=e),"page-size":C(t).size,"onUpdate:pageSize":a[3]||(a[3]=e=>C(t).size=e),"item-count":C(s).total,onRefresh:d},null,8,["page","page-size","item-count"])])),table:S((()=>[$(p,{loading:C(s).loading,data:C(s).data,columns:C(o)},null,8,["loading","data","columns"])])),_:1}),$(m,{show:C(i).show,"onUpdate:show":a[4]||(a[4]=e=>C(i).show=e),title:C(i).title,data:C(i).data,width:540,"min-height":380,footer:!0,component:tt},null,8,["show","title","data"])])}}}),nt={class:"mr-8px"},st={class:"mr-8px"},ot=x({__name:"index",setup(e){const{t:t}=b(),l=a(),{setup:i,install:n,update:s,version:u,lastVersion:d}=B(l),c=o(),{userInfo:p}=B(c),_=k("common"),x=[{key:"common",label:"Common settings",component:Wa},{key:"bcc",label:"BCC",component:Va},{key:"forward",label:"Mail forward",component:Aa},{key:"responder",label:"Auto Responder",component:it},{key:"backup",label:"Backup",component:Za}],w=()=>{n.value&&!s.value?X({title:t("Mail.Setting.index_5"),width:560,height:550,component:F((()=>r((()=>import("./index194.js?v=1741416570306")),__vite__mapDeps([17,18,2,3,5,8,7,4,10,9,19,20,15,6,1,21,22]))))}):H("mail_sys")},R=()=>{ee()};return(e,a)=>{const t=Fe,l=v,o=Ge,r=m;return f(),M(r,{install:C(i)},{desc:S((()=>[C(p).status?(f(),h(z,{key:1},[g("span",st,y(C(n)?C(s)?e.$t("Mail.Setting.index_4",[C(u),C(d)]):e.$t("Mail.Setting.index_5"):e.$t("Mail.Setting.index_3")),1),$(t,{class:"px-8px h-24px",type:"primary",size:"small",onClick:w},{default:S((()=>[U(y(e.$t("Public.Btn.Install")),1)])),_:1})],64)):(f(),h(z,{key:0},[g("span",nt,y(e.$t("Mail.Setting.index_1")),1),$(t,{class:"px-8px h-24px",type:"primary",size:"small",onClick:R},{default:S((()=>[U(y(e.$t("Mail.Setting.index_2")),1)])),_:1})],64))])),default:S((()=>[$(o,{class:"p-16px"},{default:S((()=>[$(l,{value:C(_),"onUpdate:value":a[0]||(a[0]=e=>P(_)?_.value=e:null),options:x},null,8,["value"])])),_:1})])),_:1},8,["install"])}}});export{ot as default};
