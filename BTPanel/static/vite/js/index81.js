const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index218.js?v=1749179669910","js/page_layout.js?v=1749179669910","js/vue.js?v=1749179669910","js/__commonjsHelpers__.js?v=1749179669910","js/naive.js?v=1749179669910","js/common.js?v=1749179669910","js/public.js?v=1749179669910","css/public.css?v=1749179669910","css/page_layout.css?v=1749179669910","js/site.js?v=1749179669910","js/index.vue_vue_type_script_setup_true_lang15.js?v=1749179669910","js/file.js?v=1749179669910","css/index91.css?v=1749179669910","js/set4.js?v=1749179669910","js/index.js?v=1749179669910","css/index96.css?v=1749179669910","js/index.vue_vue_type_script_setup_true_lang.js?v=1749179669910","js/index219.js?v=1749179669910","js/index103.js?v=1749179669910","css/index19.css?v=1749179669910","js/index.vue_vue_type_script_setup_true_lang11.js?v=1749179669910","js/index96.js?v=1749179669910","css/index12.css?v=1749179669910","js/index97.js?v=1749179669910","css/index13.css?v=1749179669910","js/soft.js?v=1749179669910","js/domain-input.js?v=1749179669910","css/domain-input.css?v=1749179669910","css/index89.css?v=1749179669910","js/index220.js?v=1749179669910","js/index228.js?v=1749179669910","css/index56.css?v=1749179669910","js/index.vue_vue_type_script_setup_true_lang5.js?v=1749179669910","js/index.vue_vue_type_script_setup_true_lang6.js?v=1749179669910","css/index14.css?v=1749179669910","js/index.vue_vue_type_script_setup_true_lang13.js?v=1749179669910","js/index.vue_vue_type_script_setup_true_lang7.js?v=1749179669910","js/theme-chrome.js?v=1749179669910","js/index122.js?v=1749179669910","css/index21.css?v=1749179669910","js/cert.js?v=1749179669910","js/php.js?v=1749179669910","js/form.vue_vue_type_script_setup_true_lang2.js?v=1749179669910","js/index101.js?v=1749179669910","css/index17.css?v=1749179669910","js/logs.vue_vue_type_script_setup_true_lang.js?v=1749179669910","js/ssl.js?v=1749179669910","js/utils2.js?v=1749179669910","js/index202.js?v=1749179669910","js/paypal-js.js?v=1749179669910","css/index45.css?v=1749179669910","js/ssl-lets-progress.js?v=1749179669910","css/ssl-lets-progress.css?v=1749179669910","css/index90.css?v=1749179669910","js/index221.js?v=1749179669910","js/ssl-log.js?v=1749179669910","js/batch3.js?v=1749179669910","js/batch4.js?v=1749179669910","js/batch5.js?v=1749179669910"])))=>i.map(i=>d[i]);
import{o as e,a1 as t,p as a,i,a as n,N as s,cs as l,u as o,c as d,b4 as r,_ as u}from"./page_layout.js?v=1749179669910";import{_ as c}from"./index122.js?v=1749179669910";import{_}from"./index.js?v=1749179669910";import{_ as p}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1749179669910";import{_ as m}from"./index.vue_vue_type_script_setup_true_lang8.js?v=1749179669910";import{_ as h}from"./index.vue_vue_type_script_setup_true_lang13.js?v=1749179669910";import{u as w,d as P,e as v,c as f,a as x,r as y,s as g,f as b,ab as S,m as k,h as H}from"./public.js?v=1749179669910";import{_ as j}from"./index.vue_vue_type_script_setup_true_lang9.js?v=1749179669910";import{_ as C}from"./index120.js?v=1749179669910";import{d as B,t as E,r as O,e as R,R as D,a0 as T,a1 as U,P as I,c as V,a2 as L,V as $,U as A,aj as M,Y as W,O as z,ah as K,S as q,_ as N,j as Y,w as F,o as G,M as J,n as Q,ao as X}from"./vue.js?v=1749179669910";import{l as Z}from"./site4.js?v=1749179669910";import{s as ee,c as te,d as ae,e as ie,f as ne,h as se}from"./site.js?v=1749179669910";import"./soft.js?v=1749179669910";import{S as le,a as oe,B as de,P as re,V as ue,b as ce,A as _e}from"./columns.js?v=1749179669910";import{o as pe,a as me}from"./utils3.js?v=1749179669910";import{b_ as he,T as we,aV as Pe,cp as ve,cm as fe,b$ as xe}from"./naive.js?v=1749179669910";import{Y as ye,j as ge,c as be}from"./common.js?v=1749179669910";import"./__commonjsHelpers__.js?v=1749179669910";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1749179669910";import"./php.js?v=1749179669910";import"./useModal2.js?v=1749179669910";const Se={class:"flex justify-end"},ke=a(B({__name:"index",props:{row:{}},setup(a){const i=E(a,"row"),n=O(null),s=O(null),l=new Date;l.setHours(0,0,0,0);const o=R((()=>{const e=new Date(i.value.edate);return"0000-00-00"!==i.value.edate&&ye(e,l)})),d=R((()=>{const e=new Date(i.value.edate);return"0000-00-00"!==i.value.edate&&ye(e,ge(l,7))})),r=e=>ye(e,ge(l,1)),u=()=>{n.value="0000-00-00"===i.value.edate?null:new Date(i.value.edate).getTime()},c=async()=>{var e;await ee({id:i.value.id,edate:"0000-00-00"}),i.value.edate="0000-00-00",null==(e=s.value)||e.setShow(!1)},_=async()=>{var e;if(null===n.value)return;const t=be(n.value,"yyyy-MM-dd");await ee({id:i.value.id,edate:t}),i.value.edate=t,null==(e=s.value)||e.setShow(!1)};return(a,l)=>{const p=e,m=we,h=Pe,w=t,P=he;return D(),T(P,{ref_key:"popoverRef",ref:s,placement:"bottom",trigger:"click"},{trigger:U((()=>[I(p,{type:$(o)?"error":$(d)?"warning":"primary",onClick:u},{default:U((()=>[V(L("0000-00-00"===$(i).edate?a.$t("Site.PHP.index_34"):$(o)?a.$t("Site.PHP.index_28"):$(i).edate),1)])),_:1},8,["type"])])),default:U((()=>[I(w,{value:$(n),"onUpdate:value":l[0]||(l[0]=e=>M(n)?n.value=e:null),type:"date",panel:!0,actions:null,"is-date-disabled":r},{footer:U((()=>[A("div",Se,[I(h,{size:"small"},{default:U((()=>[I(m,{onClick:c},{default:U((()=>[V(L(a.$t("Site.PHP.index_34")),1)])),_:1}),I(m,{disabled:null===$(n),onClick:_},{default:U((()=>[V(L(a.$t("Public.Btn.Confirm")),1)])),_:1},8,["disabled"])])),_:1})])])),_:1},8,["value"])])),_:1},512)}}}),[["__scopeId","data-v-0f7e7fa2"]]),{t:He}=i.global;function je(e){w({title:1===e.length?"".concat(He("Site.Cert.index_56")," [").concat(e[0].name,"]"):"".concat(He("Site.Cert.index_57")),width:480,minHeight:248,footer:!0,data:{rows:e},component:W((()=>n((()=>import("./index218.js?v=1749179669910")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))))})}const Ce={class:"w-160px"},Be=B({__name:"index",props:{value:{default:null}},emits:["change","update:value"],setup(e,{emit:t}){const{t:a}=z(),i=W((()=>n((()=>import("./set4.js?v=1749179669910")),__vite__mapDeps([13,14,2,3,5,6,1,4,8,7,15,16,9])))),l=t,o=K(e,"value"),{loading:d,setLoading:r}=P(),u=O([]),c=async e=>{await sessionStorage.setItem("typeValue",e),await l("change"),l("update:value",e)},p=v(a("Site.PHP.index_44"),{setOptions:(e,t)=>{t===o.value&&(o.value=-1),u.value=e.map((e=>({label:e.name,value:e.id}))),h()}}),m=()=>{p.show=!0},h=()=>{u.value.unshift({label:a("Site.PHP.index_45"),value:-1})};return h(),(async()=>{try{r(!0);const{message:e}=await te();s(e)?u.value=e.map((e=>({label:e.name,value:e.id}))):u.value=[],h()}finally{r(!1);const e=sessionStorage.getItem("typeValue");o.value=e?Number(e):-1}})(),(e,t)=>{const a=we,n=ve,s=_;return D(),q("div",Ce,[I(n,{value:$(o),"onUpdate:value":t[0]||(t[0]=e=>M(o)?o.value=e:null),loading:$(d),options:$(u),onUpdateValue:c},{action:U((()=>[I(a,{block:"",onClick:m},{default:U((()=>[V(L(e.$t("Site.PHP.index_43")),1)])),_:1})])),_:1},8,["value","loading","options"]),I(s,{show:$(p).show,"onUpdate:show":t[1]||(t[1]=e=>$(p).show=e),width:350,title:$(p).title,data:$(p).data,component:$(i)},null,8,["show","title","data","component"])])}}}),Ee=B({__name:"index",setup(t){const a=W((()=>n((()=>import("./index219.js?v=1749179669910")),__vite__mapDeps([17,18,2,3,4,5,1,6,7,8,19,16,20,21,22,23,24,9,25,26,27,28])))),i=W((()=>n((()=>import("./index220.js?v=1749179669910").then((e=>e.i))),__vite__mapDeps([29,1,2,3,4,5,6,7,8,30,31,32,33,34,35,23,24,9,14,15,16,20,21,22,18,19,36,37,11,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53])))),B=W((()=>n((()=>import("./index221.js?v=1749179669910")),__vite__mapDeps([54,30,2,3,4,5,1,6,7,8,31,18,19,36,37,11,16,9,41])))),E=W((()=>n((()=>import("./ssl-log.js?v=1749179669910")),__vite__mapDeps([55,43,1,2,3,4,5,6,7,8,44])))),{t:R}=z(),K=l(),q=o(),{web:ee,webserver:te}=N(K),he=O(!1),ve=v(R("Site.PHP.index_9"),{done:async()=>{await Me(),Ke()}}),ye=()=>{ve.show=!0},ge=v(R("Database.Mysql.index_3")),be=()=>{ge.show=!0},Se=v(R("SSL.Domain.index_5")),He=[{label:R("Site.PHP.index_5"),key:"default-page"},{label:R("Site.PHP.index_6"),key:"default-site"},{label:R("Site.PHP.index_7"),key:"php-version"},{label:R("Site.PHP.index_86"),key:"https"}],Ce=e=>{ge.data.config={menu:e},ge.show=!0},Ee=Y({show:!1,title:"",data:{siteInfo:null,config:{menu:"",subMenu:""}}}),Oe=(e,t={})=>{Ee.title=R("Site.PHP.index_13",[e.name,e.addtime]),Ee.data.siteInfo=e,Ee.data.config=Object.assign({menu:"",subMenu:""},t),Ee.show=!0},Re=O([]),{keys:De,table:Te,columns:Ue}=f([{type:"selection",width:40},{key:"name",title:R("Site.PHP.index_17"),width:"12%",minWidth:110,sorter:!0,sortOrder:!1,ellipsis:{tooltip:!0},render:e=>I(le,{row:e,onClick:()=>{Oe(e)}},null)},{key:"status",title:R("Public.Table.Status"),width:"10%",minWidth:95,sorter:!0,sortOrder:!1,render:e=>I(oe,{row:e,onClick:t=>{x({title:"".concat(R("1"===t?"Site.PHP.index_21_2":"Site.PHP.index_21_3")," ").concat(R("Site.PHP.index_21_1",[e.name])),content:R("1"===t?"Site.PHP.index_22":"Site.PHP.index_23"),onConfirm:async()=>{await ae("1"===t,{id:e.id,name:e.name}),e.status=t}})}},null)},{key:"backup_count",title:R("Site.PHP.index_19"),width:"6%",minWidth:70,render:e=>I(de,{row:e},null)},{key:"path",title:R("Site.PHP.index_20"),width:"15%",minWidth:180,ellipsis:{tooltip:!0},render:e=>I(re,{row:e},null)},y({type:"site",minWidth:70,callback:()=>{Me()}}),{key:"edate",title:R("Site.PHP.index_25"),width:"8%",minWidth:96,render:e=>I(ke,{row:e},null)},g({width:"8%",onBlur:async(e,t)=>{await se({id:t.id,ps:e})}}),{key:"php_version",title:R("Site.PHP.index_26"),width:70,render:e=>I(ue,{row:e,onClick:()=>{Oe(e,{menu:"php"})}},null)},{key:"site_ssl",title:R("Site.PHP.index_27"),width:"12%",minWidth:90,sorter:!0,sortOrder:!1,render:e=>I(ce,{row:e,sslInfo:Re.value,callback:e=>{Se.data.path=e,Se.show=!0},onClick:()=>{Oe(e,{menu:"ssl"})}},null)},{key:"attack",title:R("Site.PHP.index_24"),width:"4%",minWidth:80,ellipsis:{tooltip:!0},render:e=>I(_e,{row:e,onClick:()=>{Oe(e,{menu:"logs",subMenu:"security"})}},null)},b({title:R("Public.Table.Operation"),width:"20%",maxWidth:200,options:e=>[{label:R("Site.PHP.index_14"),onClick:()=>{pe()}},{label:R("Site.PHP.index_15"),show:"nginx"===K.webserver||"apache"===K.webserver,onClick:async()=>{me(e)}},{label:R("Site.PHP.index_16"),onClick:()=>{Oe(e)}},{label:R("Public.Btn.Del"),onClick:()=>{je([e])}}]})]),Ie=e=>{Ue.value.forEach((t=>{const a=t;a.key===e.columnKey?a.sortOrder=e.order:a.sortOrder=void 0})),e.order?Le.order="".concat(e.columnKey," ").concat("descend"===e.order?"desc":"asc"):Le.order="",Me()},Ve=[{key:"enable",type:"confirm",label:R("Site.Batch.index_1"),confirm:{title:R("Site.Batch.index_2"),desc:R("Site.Batch.index_3"),columns:[Ue.value[1]],api:e=>ae(!0,{id:e.id,name:e.name},!1),done:()=>{Me()}}},{key:"disable",type:"confirm",label:R("Site.Batch.index_4"),confirm:{title:R("Site.Batch.index_5"),desc:R("Site.Batch.index_6"),columns:[Ue.value[1]],api:e=>ae(!1,{id:e.id,name:e.name},!1),done:()=>{Me()}}},{key:"backup",type:"confirm",label:R("Site.Batch.index_7"),confirm:{title:R("Site.Batch.index_8"),desc:R("Site.Batch.index_9"),columns:[Ue.value[1]],api:e=>ie({id:e.id},!1),done:()=>{Me()}}},{key:"expired",label:R("Site.PHP.index_70"),onBatch:e=>{w({title:R("Site.PHP.index_71"),width:380,minHeight:72,footer:!0,data:{rows:e},component:W((()=>n((()=>import("./batch3.js?v=1749179669910")),__vite__mapDeps([56,16,4,2,3,5,1,6,7,8,9,10]))))})}},{key:"php",label:R("Site.PHP.index_66"),onBatch:e=>{w({title:R("Site.PHP.index_65"),width:500,minHeight:198,footer:!0,data:{rows:e},component:W((()=>n((()=>import("./batch4.js?v=1749179669910")),__vite__mapDeps([57,6,1,2,3,4,5,8,7,16,9,10]))))})}},{key:"category",label:R("Crontab.Planned.index_19"),onBatch:e=>{w({title:R("Site.Batch.index_22"),width:350,minHeight:72,footer:!0,data:{rows:e},component:W((()=>n((()=>import("./batch5.js?v=1749179669910")),__vite__mapDeps([58,16,4,2,3,5,1,6,7,8,9]))))})}},{key:"delete",label:R("Site.Batch.index_10"),onBatch:e=>{je(e)}}],Le=Y({p:1,limit:10,table:"sites",search:"",order:"",type:-1}),{loading:$e,setLoading:Ae}=P(!0),Me=async(e=!1)=>{try{Ae(!(Re.value.length>0||e));const t={...J(Le)},{message:a}=await ne(t);d(a)?(Te.data=s(a.data)?a.data:[],Te.total=r(a.page)):(Te.data=[],Te.total=0)}finally{De.value=[],Ae(!1)}};let We=null;const ze=O(!1),Ke=async()=>{We&&clearTimeout(We);const{message:e}=await S();s(e)&&(Re.value=e,e.length>0?(ze.value=!0,We=window.setTimeout((()=>{Ke()}),3e3)):(ze.value&&Me(!0),We&&clearTimeout(We)))};F((()=>K.isRefresh),(e=>{e&&(K.setRefresh(!1),Me())})),F((()=>q.taskCount),(()=>{qe()}));const qe=async()=>{try{await K.getConfig(),Ae(!1),await Q(),Ae(!0),K.web.setup?(he.value=!0,await Me(),Ke()):(he.value=!1,Ae(!1),Z())}catch(e){Ae(!1)}};return qe(),G((()=>{We&&clearTimeout(We)})),(t,n)=>{const s=e,l=we,o=u,d=xe,r=Pe,w=C,P=j,v=H,f=h,x=m,y=p,g=_,b=c,S=fe;return D(),T(S,null,{default:U((()=>[I(b,{install:$(ee).setup},{desc:U((()=>[A("span",null,L(t.$t("Site.PHP.index_1")),1),I(s,{class:"ml-4px",onClick:n[0]||(n[0]=e=>$(k)("nginx"))},{default:U((()=>[V(L(t.$t("Site.PHP.index_2")),1)])),_:1}),n[13]||(n[13]=A("span",{class:"mx-4px"},"|",-1)),I(s,{onClick:n[1]||(n[1]=e=>$(k)("apache"))},{default:U((()=>[V(L(t.$t("Site.PHP.index_3")),1)])),_:1})])),default:U((()=>[I(y,{class:"p-16px",feedback:!0},{toolsLeft:U((()=>[I(l,{type:"primary",class:"add-site-btn",onClick:ye},{default:U((()=>[V(L(t.$t("Site.PHP.index_4")),1)])),_:1}),I(r,null,{default:U((()=>[I(l,{onClick:be},{default:U((()=>[V(L(t.$t("Database.Mysql.index_3")),1)])),_:1}),I(d,{trigger:"hover",options:He,onSelect:Ce},{default:U((()=>[I(l,null,{default:U((()=>[I(o,{name:"base-arrow-bottom"})])),_:1})])),_:1})])),_:1}),$(he)?(D(),T(w,{key:0,"soft-name":$(te)},null,8,["soft-name"])):X("",!0)])),toolsRight:U((()=>[I(Be,{value:$(Le).type,"onUpdate:value":n[2]||(n[2]=e=>$(Le).type=e),onChange:Me},null,8,["value"]),I(P,{value:$(Le).search,"onUpdate:value":n[3]||(n[3]=e=>$(Le).search=e),placeholder:t.$t("Site.PHP.index_8"),onSearch:n[4]||(n[4]=e=>Me(!1))},null,8,["value","placeholder"])])),table:U((()=>[I(v,{"checked-row-keys":$(De),"onUpdate:checkedRowKeys":n[5]||(n[5]=e=>M(De)?De.value=e:null),loading:$($e),data:$(Te).data,columns:$(Ue),"onUpdate:sorter":Ie},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:U((()=>[I(f,{"checked-row-keys":$(De),"onUpdate:checkedRowKeys":n[6]||(n[6]=e=>M(De)?De.value=e:null),data:$(Te).data,options:Ve},null,8,["checked-row-keys","data"])])),pageRight:U((()=>[I(x,{page:$(Le).p,"onUpdate:page":n[7]||(n[7]=e=>$(Le).p=e),"page-size":$(Le).limit,"onUpdate:pageSize":n[8]||(n[8]=e=>$(Le).limit=e),"item-count":$(Te).total,"store-key":"site-php-page",onRefresh:Me},null,8,["page","page-size","item-count"])])),_:1}),I(g,{show:$(ve).show,"onUpdate:show":n[9]||(n[9]=e=>$(ve).show=e),title:$(ve).title,data:$(ve).data,width:700,height:540,footer:!0,component:$(a)},null,8,["show","title","data","component"]),I(g,{show:$(Ee).show,"onUpdate:show":n[10]||(n[10]=e=>$(Ee).show=e),title:$(Ee).title,data:$(Ee).data,width:860,height:700,component:$(i)},null,8,["show","title","data","component"]),I(g,{show:$(ge).show,"onUpdate:show":n[11]||(n[11]=e=>$(ge).show=e),title:$(ge).title,data:$(ge).data,width:950,height:620,component:$(B)},null,8,["show","title","data","component"]),I(g,{show:$(Se).show,"onUpdate:show":n[12]||(n[12]=e=>$(Se).show=e),title:$(Se).title,data:$(Se).data,width:700,height:450,footer:!1,component:$(E)},null,8,["show","title","data","component"])])),_:1},8,["install"])])),_:1})}}});export{Ee as default};
