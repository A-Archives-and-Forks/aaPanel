const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index213.js?v=1741416570306","js/page_layout.js?v=1741416570306","js/vue.js?v=1741416570306","js/__commonjsHelpers__.js?v=1741416570306","js/naive.js?v=1741416570306","js/common.js?v=1741416570306","js/public.js?v=1741416570306","css/public.css?v=1741416570306","css/page_layout.css?v=1741416570306","js/site.js?v=1741416570306","js/index.vue_vue_type_script_setup_true_lang14.js?v=1741416570306","js/file.js?v=1741416570306","css/index85.css?v=1741416570306","js/index214.js?v=1741416570306","js/index.js?v=1741416570306","css/index90.css?v=1741416570306","js/index103.js?v=1741416570306","css/index20.css?v=1741416570306","js/index.vue_vue_type_script_setup_true_lang4.js?v=1741416570306","js/index.vue_vue_type_script_setup_true_lang8.js?v=1741416570306","css/index19.css?v=1741416570306","js/index.vue_vue_type_script_setup_true_lang5.js?v=1741416570306","js/index.vue_vue_type_script_setup_true_lang12.js?v=1741416570306","js/index.vue_vue_type_script_setup_true_lang6.js?v=1741416570306","js/set4.js?v=1741416570306","js/index.vue_vue_type_script_setup_true_lang.js?v=1741416570306","js/index215.js?v=1741416570306","js/index104.js?v=1741416570306","css/index21.css?v=1741416570306","js/index.vue_vue_type_script_setup_true_lang10.js?v=1741416570306","js/index96.js?v=1741416570306","css/index15.css?v=1741416570306","js/index99.js?v=1741416570306","css/index16.css?v=1741416570306","js/soft.js?v=1741416570306","css/index83.css?v=1741416570306","js/index216.js?v=1741416570306","js/index223.js?v=1741416570306","css/index54.css?v=1741416570306","js/index95.js?v=1741416570306","js/index.vue_vue_type_script_setup_true_lang15.js?v=1741416570306","js/theme-chrome.js?v=1741416570306","js/index123.js?v=1741416570306","css/index23.css?v=1741416570306","js/refersh.js?v=1741416570306","js/php.js?v=1741416570306","js/form.vue_vue_type_script_setup_true_lang2.js?v=1741416570306","js/logs.vue_vue_type_script_setup_true_lang.js?v=1741416570306","css/index84.css?v=1741416570306","js/index217.js?v=1741416570306","js/batch3.js?v=1741416570306","js/batch4.js?v=1741416570306","js/batch5.js?v=1741416570306"])))=>i.map(i=>d[i]);
import{j as e,a5 as t,k as a,d as i,a as n,s as o,b as l,G as s,bO as d,u as r,av as u,_ as c}from"./page_layout.js?v=1741416570306";import{_ as p}from"./index123.js?v=1741416570306";import{_}from"./index.js?v=1741416570306";import{_ as m}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1741416570306";import{_ as h}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1741416570306";import{_ as P}from"./index.vue_vue_type_script_setup_true_lang12.js?v=1741416570306";import{_ as w}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1741416570306";import{_ as f}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1741416570306";import{_ as y}from"./index121.js?v=1741416570306";import{d as x,t as v,r as b,e as k,P as g,_ as S,$ as H,N as j,c as C,a0 as O,S as E,R as B,ae as R,W as D,ah as U,M as I,i as T,ac as L,Q as V,Y as $,j as W,w as A,a7 as M,n as z,ao as K}from"./vue.js?v=1741416570306";import{l as q}from"./site4.js?v=1741416570306";import{u as N,_ as Y,c as G,d as Q,b as F,a as J,o as X,p as Z,f as ee,k as te}from"./public.js?v=1741416570306";import{s as ae,c as ie,d as ne,e as oe,f as le,h as se}from"./site.js?v=1741416570306";import"./soft.js?v=1741416570306";import{o as de,a as re}from"./utils2.js?v=1741416570306";import{bT as ue,T as ce,cs as pe,ch as _e,ce as me,bU as he}from"./naive.js?v=1741416570306";import{Y as Pe,j as we,c as fe}from"./common.js?v=1741416570306";import"./__commonjsHelpers__.js?v=1741416570306";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1741416570306";import"./php.js?v=1741416570306";import"./useModal2.js?v=1741416570306";const ye={class:"flex justify-end"},xe=a(x({__name:"index",props:{row:{}},setup(a){const i=v(a,"row"),n=b(null),o=b(null),l=new Date;l.setHours(0,0,0,0);const s=k((()=>{const e=new Date(i.value.edate);return"0000-00-00"!==i.value.edate&&Pe(e,l)})),d=k((()=>{const e=new Date(i.value.edate);return"0000-00-00"!==i.value.edate&&Pe(e,we(l,7))})),r=e=>Pe(e,we(l,1)),u=()=>{n.value="0000-00-00"===i.value.edate?null:new Date(i.value.edate).getTime()},c=async()=>{var e;await ae({id:i.value.id,edate:"0000-00-00"}),i.value.edate="0000-00-00",null==(e=o.value)||e.setShow(!1)},p=async()=>{var e;if(null===n.value)return;const t=fe(n.value,"yyyy-MM-dd");await ae({id:i.value.id,edate:t}),i.value.edate=t,null==(e=o.value)||e.setShow(!1)};return(a,l)=>{const _=e,m=ce,h=pe,P=t,w=ue;return g(),S(w,{ref_key:"popoverRef",ref:o,placement:"bottom",trigger:"click"},{trigger:H((()=>[j(_,{type:E(s)?"error":E(d)?"warning":"primary",onClick:u},{default:H((()=>[C(O("0000-00-00"===E(i).edate?a.$t("Site.PHP.index_34"):E(s)?a.$t("Site.PHP.index_28"):E(i).edate),1)])),_:1},8,["type"])])),default:H((()=>[j(P,{value:E(n),"onUpdate:value":l[0]||(l[0]=e=>R(n)?n.value=e:null),type:"date",panel:!0,actions:null,"is-date-disabled":r},{footer:H((()=>[B("div",ye,[j(h,{size:"small"},{default:H((()=>[j(m,{onClick:c},{default:H((()=>[C(O(a.$t("Site.PHP.index_34")),1)])),_:1}),j(m,{disabled:null===E(n),onClick:p},{default:H((()=>[C(O(a.$t("Public.Btn.Confirm")),1)])),_:1},8,["disabled"])])),_:1})])])),_:1},8,["value"])])),_:1},512)}}}),[["__scopeId","data-v-0f7e7fa2"]]),{t:ve}=i.global;function be(e){N({title:1===e.length?"".concat(ve("Site.Cert.index_56")," [").concat(e[0].name,"]"):"".concat(ve("Site.Cert.index_57")),width:480,minHeight:248,footer:!0,data:{rows:e},component:D((()=>n((()=>import("./index213.js?v=1741416570306")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))))})}const ke=x({functional:!0,props:{path:{type:String,default:"",required:!0}},setup(e){const t=U();return{goPath:()=>{o("Path",e.path),t.push("/files")}}},render(){return j("a",{class:"text-primary hover:text-primary-hover",href:"javascript:;",onClick:()=>{this.goPath()}},[this.path])}});const ge=({row:e})=>j("a",{href:"javascript:;",class:"bt-link"},[e.name]),Se=({row:e})=>j(Y,{value:e.status},null),He=({row:t})=>{const{t:a}=I();return j(e,{type:t.backup_count>0?"primary":"warning",onClick:()=>{N({title:a("Site.PHP.index_33",[t.name]),width:720,minHeight:200,data:{row:t},component:D((()=>n((()=>import("./index214.js?v=1741416570306")),__vite__mapDeps([13,14,2,3,5,6,1,4,8,7,15,16,17,18,19,20,21,22,23,9]))))})}},{default:()=>[t.backup_count>0?a("Site.PHP.index_31",[t.backup_count]):a("Site.PHP.index_32")]})},je=({row:e})=>j(ke,{path:e.path},null),Ce=({row:t})=>j(e,null,{default:()=>[t.php_version]}),Oe=({row:t})=>{let a;const{t:i}=I(),{ssl:n}=t;return l(n)?j(e,{type:n.endtime<0?"error":"primary"},{default:()=>[n.endtime<0?i("Site.PHP.index_28"):i("Site.PHP.index_29",[n.endtime])]}):j(e,{type:"warning"},"function"==typeof(o=a=i("Site.PHP.index_30"))||"[object Object]"===Object.prototype.toString.call(o)&&!T(o)?a:{default:()=>[a]});var o},Ee=({row:t})=>j(e,{type:t.attack>0?"error":"primary"},{default:()=>[t.attack]}),Be={class:"w-160px"},Re=x({__name:"index",props:{value:{default:null}},setup(e){const{t:t}=I(),a=D((()=>n((()=>import("./set4.js?v=1741416570306")),__vite__mapDeps([24,14,2,3,5,6,1,4,8,7,15,25,9])))),i=L(e,"value"),{loading:o,setLoading:l}=G(),d=b([]),r=e=>{sessionStorage.setItem("typeValue",e)},u=Q(t("Site.PHP.index_44"),{setOptions:(e,t)=>{t===i.value&&(i.value=-1),d.value=e.map((e=>({label:e.name,value:e.id}))),p()}}),c=()=>{u.show=!0},p=()=>{d.value.unshift({label:t("Site.PHP.index_45"),value:-1})};return p(),(async()=>{try{l(!0);const{message:e}=await ie();s(e)?d.value=e.map((e=>({label:e.name,value:e.id}))):d.value=[],p()}finally{l(!1);const e=sessionStorage.getItem("typeValue");i.value=e?Number(e):-1}})(),(e,t)=>{const n=ce,l=_e,s=_;return g(),V("div",Be,[j(l,{value:E(i),"onUpdate:value":t[0]||(t[0]=e=>R(i)?i.value=e:null),loading:E(o),options:E(d),onUpdateValue:r},{action:H((()=>[j(n,{block:"",onClick:c},{default:H((()=>[C(O(e.$t("Site.PHP.index_43")),1)])),_:1})])),_:1},8,["value","loading","options"]),j(s,{show:E(u).show,"onUpdate:show":t[1]||(t[1]=e=>E(u).show=e),width:350,title:E(u).title,data:E(u).data,component:E(a)},null,8,["show","title","data","component"])])}}}),De=x({__name:"index",setup(t){const a=D((()=>n((()=>import("./index215.js?v=1741416570306")),__vite__mapDeps([26,27,2,3,4,5,1,6,7,8,28,25,29,30,31,32,33,9,34,35])))),i=D((()=>n((()=>import("./index216.js?v=1741416570306").then((e=>e.i))),__vite__mapDeps([36,1,2,3,4,5,6,7,8,37,38,18,19,20,22,23,32,33,9,14,15,25,29,30,31,27,28,39,40,41,11,42,43,44,45,46,16,17,47,48])))),o=D((()=>n((()=>import("./index217.js?v=1741416570306")),__vite__mapDeps([49,37,2,3,4,5,1,6,7,8,38,27,28,40,41,11,39,25,9,45])))),{t:x}=I(),v=d(),k=r(),{web:U,webserver:T}=$(v),L=b(!1),V=Q(x("Site.PHP.index_9")),Y=()=>{V.show=!0},ae=Q(x("Database.Mysql.index_3")),ie=()=>{ae.show=!0},ue=[{label:x("Site.PHP.index_5"),key:"default-page"},{label:x("Site.PHP.index_6"),key:"default-site"},{label:x("Site.PHP.index_7"),key:"php-version"},{label:x("Site.PHP.index_86"),key:"https"}],_e=e=>{ae.data.config={menu:e},ae.show=!0},Pe=W({show:!1,title:"",data:{siteInfo:null,config:{menu:"",subMenu:""}}}),we=(e,t={})=>{Pe.title=x("Site.PHP.index_13",[e.name,e.addtime]),Pe.data.siteInfo=e,Pe.data.config=Object.assign({menu:"",subMenu:""},t),Pe.show=!0},{keys:fe,table:ye,columns:ve}=F([{type:"selection",width:40},{key:"name",title:x("Site.PHP.index_17"),width:"12%",minWidth:110,sorter:!0,sortOrder:!1,ellipsis:{tooltip:!0},render:e=>j(ge,{row:e,onClick:()=>{we(e)}},null)},{key:"status",title:x("Public.Table.Status"),width:"10%",minWidth:95,sorter:!0,sortOrder:!1,render:e=>j(Se,{row:e,onClick:t=>{J({title:"".concat(x("1"===t?"Site.PHP.index_21_2":"Site.PHP.index_21_3")," ").concat(x("Site.PHP.index_21_1",[e.name])),content:x("1"===t?"Site.PHP.index_22":"Site.PHP.index_23"),onConfirm:async()=>{await ne("1"===t,{id:e.id,name:e.name}),e.status=t}})}},null)},{key:"backup_count",title:x("Site.PHP.index_19"),width:"6%",minWidth:70,render:e=>j(He,{row:e},null)},{key:"path",title:x("Site.PHP.index_20"),width:"15%",minWidth:180,ellipsis:{tooltip:!0},render:e=>j(je,{row:e},null)},X({type:"site",minWidth:70,callback:()=>{Te()}}),{key:"edate",title:x("Site.PHP.index_25"),width:"8%",minWidth:96,render:e=>j(xe,{row:e},null)},Z({width:"8%",onBlur:async(e,t)=>{await se({id:t.id,ps:e})}}),{key:"php_version",title:x("Site.PHP.index_26"),width:70,render:e=>j(Ce,{row:e,onClick:()=>{we(e,{menu:"php"})}},null)},{key:"site_ssl",title:x("Site.PHP.index_27"),width:"12%",minWidth:90,sorter:!0,sortOrder:!1,render:e=>j(Oe,{row:e,onClick:()=>{we(e,{menu:"ssl"})}},null)},{key:"attack",title:x("Site.PHP.index_24"),width:"4%",minWidth:80,ellipsis:{tooltip:!0},render:e=>j(Ee,{row:e,onClick:()=>{we(e,{menu:"logs",subMenu:"security"})}},null)},ee({title:x("Public.Table.Operation"),width:"20%",maxWidth:200,options:e=>[{label:x("Site.PHP.index_14"),onClick:()=>{de()}},{label:x("Site.PHP.index_15"),show:"nginx"===v.webserver||"apache"===v.webserver,onClick:async()=>{re(e)}},{label:x("Site.PHP.index_16"),onClick:()=>{we(e)}},{label:x("Public.Btn.Del"),onClick:()=>{be([e])}}]})]),ke=e=>{ve.value.forEach((t=>{const a=t;a.key===e.columnKey?a.sortOrder=e.order:a.sortOrder=void 0})),e.order?De.order="".concat(e.columnKey," ").concat("descend"===e.order?"desc":"asc"):De.order="",Te()},Be=[{key:"enable",type:"confirm",label:x("Site.Batch.index_1"),confirm:{title:x("Site.Batch.index_2"),desc:x("Site.Batch.index_3"),columns:[ve.value[1]],api:e=>ne(!0,{id:e.id,name:e.name},!1),done:()=>{Te()}}},{key:"disable",type:"confirm",label:x("Site.Batch.index_4"),confirm:{title:x("Site.Batch.index_5"),desc:x("Site.Batch.index_6"),columns:[ve.value[1]],api:e=>ne(!1,{id:e.id,name:e.name},!1),done:()=>{Te()}}},{key:"backup",type:"confirm",label:x("Site.Batch.index_7"),confirm:{title:x("Site.Batch.index_8"),desc:x("Site.Batch.index_9"),columns:[ve.value[1]],api:e=>oe({id:e.id},!1),done:()=>{Te()}}},{key:"expired",label:x("Site.PHP.index_70"),onBatch:e=>{N({title:x("Site.PHP.index_71"),width:380,minHeight:72,footer:!0,data:{rows:e},component:D((()=>n((()=>import("./batch3.js?v=1741416570306")),__vite__mapDeps([50,25,2,3,4,5,1,6,7,8,9,10]))))})}},{key:"php",label:x("Site.PHP.index_66"),onBatch:e=>{N({title:x("Site.PHP.index_65"),width:500,minHeight:198,footer:!0,data:{rows:e},component:D((()=>n((()=>import("./batch4.js?v=1741416570306")),__vite__mapDeps([51,39,1,2,3,4,5,6,7,8,25,9,10]))))})}},{key:"category",label:x("Crontab.Planned.index_19"),onBatch:e=>{N({title:x("Site.Batch.index_22"),width:350,minHeight:72,footer:!0,data:{rows:e},component:D((()=>n((()=>import("./batch5.js?v=1741416570306")),__vite__mapDeps([52,25,2,3,4,5,1,6,7,8,9]))))})}},{key:"delete",label:x("Site.Batch.index_10"),onBatch:e=>{be(e)}}],De=W({p:1,limit:10,table:"sites",search:"",order:"",type:-1}),{loading:Ue,setLoading:Ie}=G(!0),Te=async()=>{try{Ie(!0);const e={...M(De)},{message:t}=await le(e);l(t)?(ye.data=s(t.data)?t.data:[],ye.total=u(t.page)):(ye.data=[],ye.total=0)}finally{fe.value=[],Ie(!1)}};A((()=>v.isRefresh),(e=>{e&&(v.setRefresh(!1),Te())})),A((()=>k.taskCount),(()=>{Le()}));const Le=async()=>{try{await v.getConfig(),Ie(!1),await z(),Ie(!0),v.web.setup?(L.value=!0,Te()):(L.value=!1,Ie(!1),q())}catch(e){Ie(!1)}};return Le(),(t,n)=>{const l=e,s=ce,d=c,r=he,u=pe,x=y,v=f,b=w,k=P,D=h,I=m,$=_,W=p,A=me;return g(),S(A,null,{default:H((()=>[j(W,{install:E(U).setup},{desc:H((()=>[B("span",null,O(t.$t("Site.PHP.index_1")),1),j(l,{class:"ml-4px",onClick:n[0]||(n[0]=e=>E(te)("nginx"))},{default:H((()=>[C(O(t.$t("Site.PHP.index_2")),1)])),_:1}),n[11]||(n[11]=B("span",{class:"mx-4px"},"|",-1)),j(l,{onClick:n[1]||(n[1]=e=>E(te)("apache"))},{default:H((()=>[C(O(t.$t("Site.PHP.index_3")),1)])),_:1})])),default:H((()=>[j(I,{class:"p-16px",feedback:!0},{toolsLeft:H((()=>[j(s,{type:"primary",class:"add-site-btn",onClick:Y},{default:H((()=>[C(O(t.$t("Site.PHP.index_4")),1)])),_:1}),j(u,null,{default:H((()=>[j(s,{onClick:ie},{default:H((()=>[C(O(t.$t("Database.Mysql.index_3")),1)])),_:1}),j(r,{trigger:"hover",options:ue,onSelect:_e},{default:H((()=>[j(s,null,{default:H((()=>[j(d,{name:"base-arrow-bottom"})])),_:1})])),_:1})])),_:1}),E(L)?(g(),S(x,{key:0,"soft-name":E(T)},null,8,["soft-name"])):K("",!0)])),toolsRight:H((()=>[j(Re,{value:E(De).type,"onUpdate:value":[n[2]||(n[2]=e=>E(De).type=e),Te]},null,8,["value"]),j(v,{value:E(De).search,"onUpdate:value":n[3]||(n[3]=e=>E(De).search=e),placeholder:t.$t("Site.PHP.index_8"),onSearch:Te},null,8,["value","placeholder"])])),table:H((()=>[j(b,{"checked-row-keys":E(fe),"onUpdate:checkedRowKeys":n[4]||(n[4]=e=>R(fe)?fe.value=e:null),loading:E(Ue),data:E(ye).data,columns:E(ve),"onUpdate:sorter":ke},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:H((()=>[j(k,{"checked-row-keys":E(fe),"onUpdate:checkedRowKeys":n[5]||(n[5]=e=>R(fe)?fe.value=e:null),data:E(ye).data,options:Be},null,8,["checked-row-keys","data"])])),pageRight:H((()=>[j(D,{page:E(De).p,"onUpdate:page":n[6]||(n[6]=e=>E(De).p=e),"page-size":E(De).limit,"onUpdate:pageSize":n[7]||(n[7]=e=>E(De).limit=e),"item-count":E(ye).total,"store-key":"site-php-page",onRefresh:Te},null,8,["page","page-size","item-count"])])),_:1}),j($,{show:E(V).show,"onUpdate:show":n[8]||(n[8]=e=>E(V).show=e),title:E(V).title,width:640,height:540,footer:!0,component:E(a)},null,8,["show","title","component"]),j($,{show:E(Pe).show,"onUpdate:show":n[9]||(n[9]=e=>E(Pe).show=e),title:E(Pe).title,data:E(Pe).data,width:860,height:700,component:E(i)},null,8,["show","title","data","component"]),j($,{show:E(ae).show,"onUpdate:show":n[10]||(n[10]=e=>E(ae).show=e),title:E(ae).title,data:E(ae).data,width:950,height:620,component:E(o)},null,8,["show","title","data","component"])])),_:1},8,["install"])])),_:1})}}});export{De as default};
