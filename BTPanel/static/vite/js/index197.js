import{_ as e}from"./index.js?v=1749179669910";import{_ as a,c as l,ar as s,h as t,e as i,as as n,d as o,at as d,au as r}from"./public.js?v=1749179669910";import{c as u,m as p,_ as c,q as m,o as _,O as f,p as S}from"./page_layout.js?v=1749179669910";import{_ as v}from"./index.vue_vue_type_script_setup_true_lang.js?v=1749179669910";import{d as h,O as x,r as y,j as g,R as b,S as w,P as L,a1 as $,V as B,U as C,a2 as k,aj as N,af as M,e as j,w as U,a0 as H,c as A,k as q,v as T,ak as R}from"./vue.js?v=1749179669910";import{_ as P,cj as F,T as E,bU as O,co as z,cn as D,c3 as I}from"./naive.js?v=1749179669910";import{_ as J}from"./index.vue_vue_type_script_setup_true_lang9.js?v=1749179669910";import"./common.js?v=1749179669910";import"./__commonjsHelpers__.js?v=1749179669910";const K={class:"p-20px"},V=h({__name:"custom-domain",props:{onConfirm:{type:Function}},setup(e,{expose:l}){const{t:s}=x(),t=e,i=y(null),n=g({domain:""}),o={domain:[{required:!0,message:s("Mail.Setting.index_50"),trigger:"blur"}]};return l({onConfirm:async()=>{var e;await(null==(e=i.value)?void 0:e.validate()),t.onConfirm(n.domain)}}),(e,l)=>{const s=P,t=F,d=v,r=a;return b(),w("div",K,[L(d,{ref_key:"formRef",ref:i,model:B(n),rules:o},{default:$((()=>[L(t,{label:e.$t("Mail.Mass.index_45"),path:"domain"},{default:$((()=>[L(s,{class:"w-350px!",value:B(n).domain,"onUpdate:value":l[0]||(l[0]=e=>B(n).domain=e),placeholder:"single domain name certificate, for example, www.aapanel.com"},null,8,["value"])])),_:1},8,["label"])])),_:1},8,["model"]),L(r,{class:"mt-16px!"},{default:$((()=>[C("li",null,k(e.$t("SSL.Business.index_9")),1),C("li",null,k(e.$t("SSL.Business.index_10")),1),C("li",null,k(e.$t("SSL.Business.index_11")),1),C("li",null,k(e.$t("SSL.Business.index_12")),1),C("li",null,k(e.$t("SSL.Business.index_13")),1),C("li",null,k(e.$t("SSL.Business.index_14")),1)])),_:1})])}}}),W={class:"p-20px"},Y=h({__name:"exist-domain",props:{onConfirm:{type:Function}},setup(e,{expose:i}){const{t:n}=x(),o=e,d=g({keyword:""}),r=()=>{S()},{keys:c,table:m,columns:_}=l([{type:"selection",width:40,multiple:!1},{title:n("Mail.Mass.index_45"),key:"name"}]),f=e=>({onClick:()=>{c.value=[e.id]}}),S=async()=>{const{message:e}=await s({tojs:"site.get_list",table:"domain",limit:1e4,search:d.keyword,p:1,order:"id desc",type:-1});u(e)&&(m.data=e.data)};S();return i({onConfirm:async()=>{0!==c.value.length?m.data.forEach((e=>{e.id===c.value[0]&&o.onConfirm(e.name)})):p.error(n("SSL.SiteSSL.index_16"))}}),(e,l)=>{const s=J,i=t,n=a;return b(),w("div",W,[L(s,{class:"w-full!",clearable:"",value:B(d).keyword,"onUpdate:value":l[0]||(l[0]=e=>B(d).keyword=e),placeholder:e.$t("Mail.Setting.index_50"),onSearch:r},null,8,["value","placeholder"]),L(i,{class:"my-16px","max-height":250,"checked-row-keys":B(c),"onUpdate:checkedRowKeys":l[1]||(l[1]=e=>N(c)?c.value=e:null),loading:B(m).loading,data:B(m).data,columns:B(_),"row-props":f},null,8,["checked-row-keys","loading","data","columns"]),L(n,null,{default:$((()=>[C("li",null,k(e.$t("SSL.Business.index_9")),1),C("li",null,k(e.$t("SSL.Business.index_10")),1),C("li",null,k(e.$t("SSL.Business.index_11")),1),C("li",null,k(e.$t("SSL.Business.index_12")),1),C("li",null,k(e.$t("SSL.Business.index_13")),1),C("li",null,k(e.$t("SSL.Business.index_14")),1)])),_:1})])}}}),G={class:"color-#20a53a"},Q={class:"color-#20a53a text-12px"},X={class:"mt-16px"},Z=S(h({__name:"index",props:{data:{}},setup(l){const{t:s}=x(),t=l,{row:p}=M(t.data),S=i(s("SSL.Business.index_26"),{onConfirm:e=>{W.domain=e}}),h=i(s("SSL.Business.index_25"),{onConfirm:e=>{W.domain=e}}),w=y(null),N=y(!0),J=j((()=>!p.value.order_info.code.includes("wildcard"))),K=y({}),W=g({domain:"",verifyMethod:"CNAME_CSR_HASH",province:"",city:"",company:"",email:"",phone:"",job:"",postCode:"",country:"",firstName:"",lastName:"",address:"",tel_prefix:""}),Z={domain:[{required:!0,message:s("Mail.Setting.index_50"),trigger:"blur"}],province:[{required:!0,message:s("SSL.Business.index_37"),trigger:"blur"}],city:[{required:!0,message:s("SSL.Business.index_38"),trigger:"blur"}],address:[{required:!0,message:"Address details",trigger:"blur"}],company:[{required:!0,message:s("SSL.Business.index_39"),trigger:"blur"}],firstName:[{required:!0,message:"First Name",trigger:"blur"}],lastName:[{required:!0,message:"Last Name",trigger:"blur"}],email:[{required:!0,message:s("Mail.Unsubscribe.index_5"),trigger:"blur"}],phone:[{required:!0,message:s("SSL.Business.index_40"),trigger:"blur"}],tel_prefix:[{required:!0,message:"Tel Prefix",trigger:"blur"}]};U((()=>W.domain),(async e=>{const{message:a}=await n({domain:e});u(a)&&(K.value=a.auto)}));const ee=async()=>{var e,a,l,s,i;await(null==(e=w.value)?void 0:e.validate());const{message:n}=await d({pdata:JSON.stringify({pid:null==(a=null==p?void 0:p.value)?void 0:a.order_info.pid,oid:null==(l=null==p?void 0:p.value)?void 0:l.order_info.oid,uc_id:null==(s=null==p?void 0:p.value)?void 0:s.order_info.uc_id,domains:[W.domain],dcvMethod:W.verifyMethod,auth_to:"dns",auto:"CNAME_CSR_HASH"===W.verifyMethod?K.value:"",Administrator:{job:W.job,postCode:W.postCode,country:W.country,firstName:W.firstName,lastName:W.lastName,state:W.province,city:W.city,address:W.address,organation:W.company,email:W.email,mobile:W.phone,tel_prefix:W.tel_prefix}})});u(n)&&t.data.onRefresh(n.verify_info,null==(i=p.value)?void 0:i.order_info.uc_id)},{loading:ae,setLoading:le}=o();return(async()=>{try{le(!0);const{message:e}=await r();u(e)&&(W.province=e.state,W.city=e.city,W.company=e.organation,W.firstName=e.firstName,W.lastName=e.lastName,W.email=e.email,W.phone=e.mobile,W.job=e.job,W.postCode=e.postCode,W.country=e.country,W.address=e.address,W.tel_prefix=e.tel_prefix)}finally{le(!1)}})(),(l,s)=>{const t=F,i=P,n=E,o=O,d=z,r=D,u=I,x=c,y=m,g=v,M=_,j=a,U=e,le=f;return b(),H(le,{show:B(ae),class:"p-16px"},{default:$((()=>[L(g,{ref_key:"formRef",ref:w,model:B(W),rules:Z},{default:$((()=>[L(t,{label:l.$t("Config.Safe.index_28")},{default:$((()=>[C("span",G,k(B(p).order_info.title),1)])),_:1},8,["label"]),L(t,{label:l.$t("Mail.Mass.index_45"),path:"domain"},{default:$((()=>[L(o,{class:"w-420px"},{default:$((()=>[L(i,{disabled:"",value:B(W).domain,"onUpdate:value":s[0]||(s[0]=e=>B(W).domain=e),placeholder:l.$t("SSL.Business.index_24")},null,8,["value","placeholder"]),L(o,null,{default:$((()=>[L(n,{size:"small",type:"primary",onClick:s[1]||(s[1]=e=>B(h).show=!0)},{default:$((()=>[A(k(l.$t("SSL.Business.index_25")),1)])),_:1}),L(n,{size:"small",onClick:s[2]||(s[2]=e=>B(S).show=!0)},{default:$((()=>[A(k(l.$t("SSL.Business.index_26")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["label"]),L(t,{label:l.$t("Waf.Setting.config_67"),path:"verifyMethod","show-feedback":!1},{default:$((()=>[L(r,{value:B(W).verifyMethod,"onUpdate:value":s[3]||(s[3]=e=>B(W).verifyMethod=e)},{default:$((()=>[L(d,{value:"CNAME_CSR_HASH"},{default:$((()=>[A(k(l.$t("SSL.index_12")),1)])),_:1}),q(L(d,{value:"HTTP_CSR_HASH"},{default:$((()=>[A(k(l.$t("SSL.SiteSSL.index_17"))+"(HTTP) ",1)])),_:1},512),[[T,B(J)]]),q(L(d,{value:"HTTPS_CSR_HASH"},{default:$((()=>[A(k(l.$t("SSL.SiteSSL.index_17"))+"(HTTPS) ",1)])),_:1},512),[[T,B(J)]])])),_:1},8,["value"])])),_:1},8,["label"]),q(L(t,{label:" ","show-feedback":!1},{default:$((()=>[Object.keys(B(K)).length?(b(),H(u,{key:0,type:"success",class:"w-full"},{default:$((()=>[A(k(B(K).name)+" The parsing record will be added automatically ",1)])),_:1})):(b(),H(u,{key:1,type:"warning",class:"w-full"},{default:$((()=>s[16]||(s[16]=[C("span",null,"Your domain name is not in the Domain management center, please manually add the domain name resolution record",-1)]))),_:1}))])),_:1},512),[[T,B(W).domain&&"CNAME_CSR_HASH"===B(W).verifyMethod]]),L(y,{class:"my-16px!"},{default:$((()=>[L(o,{size:5,class:"items-center flex-nowrap! cursor-pointer",onClick:s[4]||(s[4]=e=>N.value=!B(N))},{default:$((()=>[L(x,{name:"base-arrow-bottom",class:R(["color-#20a53a",{hiden:B(N)}])},null,8,["class"]),C("span",Q,k(l.$t("SSL.Business.index_27")),1)])),_:1})])),_:1}),q(C("div",X,[L(t,{label:l.$t("SSL.Business.index_32"),"show-feedback":!1},{default:$((()=>[L(o,null,{default:$((()=>[L(t,{label:"",path:"province"},{default:$((()=>[L(i,{value:B(W).province,"onUpdate:value":s[5]||(s[5]=e=>B(W).province=e),placeholder:l.$t("SSL.Business.index_28")},null,8,["value","placeholder"])])),_:1}),L(t,{label:"",path:"city"},{default:$((()=>[L(i,{value:B(W).city,"onUpdate:value":s[6]||(s[6]=e=>B(W).city=e),placeholder:l.$t("SSL.Business.index_29")},null,8,["value","placeholder"])])),_:1})])),_:1})])),_:1},8,["label"]),L(t,{label:l.$t("Mail.Forward.index_2"),path:"address"},{default:$((()=>[L(i,{class:"w-420px!",value:B(W).address,"onUpdate:value":s[7]||(s[7]=e=>B(W).address=e),placeholder:"Address details"},null,8,["value"])])),_:1},8,["label"]),L(t,{label:l.$t("SSL.Business.index_30"),path:"company"},{default:$((()=>[L(i,{class:"w-420px!",value:B(W).company,"onUpdate:value":s[8]||(s[8]=e=>B(W).company=e),placeholder:l.$t("SSL.Business.index_30")},null,8,["value","placeholder"])])),_:1},8,["label"]),L(t,{label:l.$t("Config.Alarm.index_43"),"show-feedback":!1},{default:$((()=>[L(o,null,{default:$((()=>[L(t,{label:"",path:"firstName"},{default:$((()=>[L(i,{value:B(W).firstName,"onUpdate:value":s[9]||(s[9]=e=>B(W).firstName=e),placeholder:"First Name"},null,8,["value"])])),_:1}),L(t,{label:"",path:"lastName"},{default:$((()=>[L(i,{value:B(W).lastName,"onUpdate:value":s[10]||(s[10]=e=>B(W).lastName=e),placeholder:"Last Name"},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["label"]),L(t,{label:l.$t("Config.Alarm.index_3"),path:"email"},{default:$((()=>[L(i,{class:"w-420px!",value:B(W).email,"onUpdate:value":s[11]||(s[11]=e=>B(W).email=e),placeholder:l.$t("Config.Alarm.index_3")},null,8,["value","placeholder"])])),_:1},8,["label"]),L(t,{label:l.$t("SSL.Business.index_31"),"show-feedback":!1},{default:$((()=>[L(o,null,{default:$((()=>[L(t,{label:"",path:"tel_prefix"},{default:$((()=>[L(i,{class:"w-120px!",value:B(W).tel_prefix,"onUpdate:value":s[12]||(s[12]=e=>B(W).tel_prefix=e),placeholder:"Tel Prefix"},null,8,["value"])])),_:1}),L(t,{label:"",path:"phone"},{default:$((()=>[L(i,{class:"w-290px!",value:B(W).phone,"onUpdate:value":s[13]||(s[13]=e=>B(W).phone=e),placeholder:"Phone Number"},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["label"])],512),[[T,B(N)]]),L(t,{label:" "},{default:$((()=>[L(n,{type:"primary",onClick:ee},{default:$((()=>[A(k(l.$t("SSL.Business.index_33")),1)])),_:1})])),_:1})])),_:1},8,["model"]),L(j,null,{default:$((()=>[C("li",null,k(l.$t("SSL.Business.index_34")),1),C("li",null,k(l.$t("SSL.Business.index_35")),1),C("li",null,[L(M,{target:"_blank",href:"https://www.aapanel.com/docs/Function/BusinessCertificate.html"},{default:$((()=>[A(k(l.$t("SSL.Business.index_36")),1)])),_:1})])])),_:1}),L(U,{show:B(h).show,"onUpdate:show":s[14]||(s[14]=e=>B(h).show=e),title:B(h).title,data:B(h).data,footer:!0,width:580,component:Y},null,8,["show","title","data"]),L(U,{show:B(S).show,"onUpdate:show":s[15]||(s[15]=e=>B(S).show=e),title:B(S).title,data:B(S).data,footer:!0,width:580,component:V},null,8,["show","title","data"])])),_:1},8,["show"])}}}),[["__scopeId","data-v-58284147"]]);export{Z as default};
