import{G as e}from"./page_layout.js?v=1741416570306";import{c as a,o as t}from"./alarm.js?v=1741416570306";import{c as l}from"./public.js?v=1741416570306";import{d as i,aq as n,M as s,ar as o,r,P as m,_ as p,S as d,N as u,F as c,c as f}from"./vue.js?v=1741416570306";import{ch as h}from"./naive.js?v=1741416570306";const g=i({__name:"index",props:n({multiple:{type:Boolean,default:!0}},{value:{},valueModifiers:{}}),emits:["update:value"],setup(i){const{t:n}=s(),{loading:g,setLoading:v}=l(),w=o(i,"value"),_=r([]),b=r([{name:"mail",title:n("Config.Alarm.index_3"),ps:n("Config.Alarm.index_36"),help:"https://www.bt.cn/bbs/thread-66183-1-1.html",list:[]},{name:"dingding",title:n("Config.Alarm.index_5"),ps:n("Config.Alarm.index_37"),help:"https://www.bt.cn/bbs/thread-108081-1-1.html",list:[]},{name:"weixin",title:n("Config.Alarm.index_6"),ps:n("Config.Alarm.index_38"),help:"https://www.bt.cn/bbs/thread-108116-1-1.html",list:[]},{name:"feishu",title:n("Config.Alarm.index_4"),ps:n("Config.Alarm.index_39"),help:"https://www.aapanel.com/forum/d/16942-aapanel-how-does-set-lark-or-feishu-notification",list:[]},{name:"tg",title:"Telegram",ps:"Use Telegram to send and receive panel notifications",help:"https://www.aapanel.com/forum/d/5115-how-to-add-telegram-to-panel-notifications",list:[]}]),x=async()=>{try{v(!0);const{message:l}=await a({refresh:0});_.value=[],e(l)&&(b.value.forEach((e=>{e.list=l.filter((a=>a.sender_type===e.name))})),b.value.forEach((e=>{const a=l.filter((a=>a.used&&a.sender_type===e.name));a.length>0?a.forEach((a=>{_.value.push({label:"".concat(a.data.title," (").concat(e.title,")"),value:a.id})})):_.value.push({label:()=>u(c,null,[e.title,f("["),u("a",{class:"bt-link",onClick:()=>{t({row:e,onRefresh:x})}},[n("Public.Btn.Conf")]),f("]")]),value:e.name,disabled:!0})})))}finally{v(!1)}};return x(),(e,a)=>{const t=h;return m(),p(t,{value:w.value,"onUpdate:value":a[0]||(a[0]=e=>w.value=e),loading:d(g),options:d(_),multiple:e.multiple,"max-tag-count":"responsive",placeholder:e.$t("Config.Alarm.index_86")},null,8,["value","loading","options","multiple","placeholder"])}}});export{g as _};
