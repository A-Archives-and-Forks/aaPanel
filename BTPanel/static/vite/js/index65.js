const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/form7.js?v=1744703330658","js/index95.js?v=1744703330658","js/page_layout.js?v=1744703330658","js/vue.js?v=1744703330658","js/__commonjsHelpers__.js?v=1744703330658","js/naive.js?v=1744703330658","js/common.js?v=1744703330658","js/public.js?v=1744703330658","css/public.css?v=1744703330658","css/page_layout.css?v=1744703330658","js/index.vue_vue_type_script_setup_true_lang.js?v=1744703330658","js/ssl.js?v=1744703330658","js/ssl-log.js?v=1744703330658","js/index103.js?v=1744703330658","css/index20.css?v=1744703330658","js/domain-form.js?v=1744703330658","js/transition.js?v=1744703330658","css/transition.css?v=1744703330658"])))=>i.map(i=>d[i]);
import{_ as a}from"./index104.js?v=1744703330658";import{d as e,a as t,_ as n,k as i,j as l,u as s}from"./page_layout.js?v=1744703330658";import{_ as o}from"./index.js?v=1744703330658";import{_ as d}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1744703330658";import{_ as u}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1744703330658";import{_ as r}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1744703330658";import{d as p,b as m,f as c,a as _}from"./public.js?v=1744703330658";import{e as h,d as g,a as v,b as f,c as y,f as w,h as x,i as S}from"./ssl.js?v=1744703330658";import{h as b,a as k,m as L,r as D,b as j,d as C,l as U,c as E,e as P,g as R,u as T,f as z,T as $}from"./transition.js?v=1744703330658";import{b$ as M,cq as V,T as I,cn as O,cp as A,bU as B,bZ as F,ck as H}from"./naive.js?v=1744703330658";import{d as N,O as q,j as W,r as Y,P as Z,f as G,o as J,R as K,S as Q,a0 as X,V as aa,U as ea,c as ta,a1 as na,Y as ia,ar as la,as as sa,$ as oa,u as da,af as ua,ap as ra,F as pa,_ as ma}from"./vue.js?v=1744703330658";import{_ as ca}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1744703330658";import"./common.js?v=1744703330658";import"./__commonjsHelpers__.js?v=1744703330658";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1744703330658";const _a={class:"flex items-center"},ha=N({__name:"index",setup(a){const i=ia((()=>t((()=>import("./form7.js?v=1744703330658")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])))),l=ia((()=>t((()=>import("./ssl-log.js?v=1744703330658")),__vite__mapDeps([12,13,2,3,4,5,6,7,8,9,14,11])))),{t:s}=q(),f=W({p:1,limit:10}),y=p("",{isEdit:!1,onRefresh:()=>{P()}}),w=p(s("SSL.Domain.index_5")),x=()=>{y.data.isEdit=!1,y.title=s("SSL.Domain.index_4"),y.show=!0},S=Y(!1),{table:j,columns:C}=m([{key:"alias",title:s("Config.Panel.index_36"),render:a=>a.alias?Z("span",{class:"bt-link",onClick:()=>{b.value=a.id,k.value=a.name,L.value="manage"}},[a.alias]):"--"},{key:"api_user",title:s("Home.index_2"),render:a=>a.api_user?a.api_user:"--"},D((a=>{w.data.path=a,w.show=!0})),{key:"status",title:s("Public.Table.Status"),render:a=>Z(M,{uncheckedValue:0,checkedValue:1,value:a.status,"onUpdate:value":[e=>a.status=e,async e=>{try{await h({id:a.id,status:e})}catch(t){a.status=1===e?0:1}}]},null)},{key:"permission",title:s("Database.index_21"),align:"center",render:a=>a.permission?a.permission:"--"},{key:"domains",title:s("Layout.Sider.domain_1"),align:"center",render:a=>a.domains.length},c({width:250,options:a=>[{label:s("SSL.Domain.index_7"),onClick:()=>{b.value=a.id,k.value=a.name,L.value="manage"}},{label:s("Public.Btn.Edit"),onClick:()=>{U(a)}},{label:s("Public.Btn.Del"),onClick:()=>{_({title:s("SSL.Domain.index_8"),content:s("SSL.Domain.index_9"),onConfirm:async()=>{await g({id:a.id}),P()}})}}]})]),U=a=>{y.data.isEdit=!0,y.data.row=a,y.title=s("SSL.Domain.index_10"),y.show=!0};let E=null;const P=async()=>{try{S.value||(j.loading=!0);const{message:a}=await v(f);e(a)&&(S.value=a.data.some((a=>a.task.some((a=>100!==a.task_status)))),S.value?R():E&&clearTimeout(E),j.data=a.data,j.total=a.total)}finally{j.loading=!1}},R=async()=>{E=window.setTimeout((()=>{P()}),5e3)};return G((()=>{P()})),J((()=>{E&&clearTimeout(E)})),(a,e)=>{const t=n,s=V,p=I,m=r,c=u,_=d,h=o;return K(),Q("div",null,[Z(s,{"show-icon":!1,class:"mb-10px"},{default:X((()=>[ea("div",_a,[Z(t,{name:"base-info",size:17,class:"mr-8px"}),e[4]||(e[4]=ea("span",{class:"leading-17px"},"aaPanel Domain Name Management Center, allowing you to unify accounts across multiple domain providers without switching DNS platforms",-1))])])),_:1}),Z(_,null,{toolsLeft:X((()=>[Z(p,{type:"primary",onClick:x},{default:X((()=>[ta(na(a.$t("SSL.Domain.index_4")),1)])),_:1})])),table:X((()=>[Z(m,{loading:aa(j).loading,data:aa(j).data,columns:aa(C)},null,8,["loading","data","columns"])])),pageRight:X((()=>[Z(c,{page:aa(f).p,"onUpdate:page":e[0]||(e[0]=a=>aa(f).p=a),"page-size":aa(f).limit,"onUpdate:pageSize":e[1]||(e[1]=a=>aa(f).limit=a),"item-count":aa(j).total,onRefresh:P},null,8,["page","page-size","item-count"])])),_:1}),Z(h,{show:aa(y).show,"onUpdate:show":e[2]||(e[2]=a=>aa(y).show=a),title:aa(y).title,data:aa(y).data,width:540,"min-height":300,footer:!0,component:aa(i)},null,8,["show","title","data","component"]),Z(h,{show:aa(w).show,"onUpdate:show":e[3]||(e[3]=a=>aa(w).show=a),title:aa(w).title,data:aa(w).data,width:700,height:450,footer:!1,component:aa(l)},null,8,["show","title","data","component"])])}}}),ga=N({__name:"host-select",props:{value:{},valueModifiers:{}},emits:la(["change"],["update:value"]),setup(a,{emit:e}){const t=sa(a,"value"),n=e,i=(a,e)=>{n("change",a,e.label)},l=a=>a.label+" ("+a.alias+")";return(a,e)=>{const n=O;return K(),oa(n,da({class:"w-300px"},a.$attrs,{filterable:"",value:t.value,"onUpdate:value":[e[0]||(e[0]=a=>t.value=a),i],options:aa(j),"consistent-menu-width":!1,"render-label":l}),null,16,["value","options"])}}}),va=N({__name:"domain-select",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(a){const e=sa(a,"value"),{t:t}=q(),n=a=>Z(B,{class:"items-center justify-between!"},{default:()=>[Z("span",{class:"w-225px truncate"},[t("Mail.Mass.index_45"),ta("ï¼š"),a.label]),a.ssl_info&&-1!==a.ssl_info?Z(A,{type:a.ssl_info>30?"success":a.ssl_info>0?"warning":"error",class:"px-10px"},{default:()=>[a.ssl_info?a.ssl_info+" "+t("Crontab.arrange.index_41"):t("Config.Safe.index_166")]}):""]});return(a,t)=>{const i=O;return K(),oa(i,da(a.$attrs,{class:"w-350px",size:"large",filterable:"",value:e.value,"onUpdate:value":t[0]||(t[0]=a=>e.value=a),options:aa(C),"consistent-menu-width":!1,loading:aa(U),disabled:!aa(C).length,"render-label":n}),null,16,["value","options","loading","disabled"])}}}),fa=i(N({__name:"domain",emits:["change"],setup(a,{emit:i}){const l=ia((()=>t((()=>import("./domain-form.js?v=1744703330658")),__vite__mapDeps([15,10,5,3,4,6,11,2,7,8,9,16,17])))),s=i,{t:h}=q(),g=W({p:1,limit:10,domain:E,search:""}),v=p("",{isEdit:!1,onRefresh:()=>{z()}}),x=()=>{v.data.isEdit=!1,v.title=h("SSL.Domain.index_17"),v.show=!0},S=()=>{s("change"),P.value=!1},L=()=>{g.p=1,z()},D=async()=>{z()},j=async(a,e)=>{k.value=e,b.value=a,E.value="",g.p=1,await R(),z()},{table:C,columns:U}=m([{key:"record",title:h("SSL.Domain.index_11"),width:"20%"},{key:"record_type",title:h("Ftp.Table.index_3"),width:"10%"},{key:"record_value",title:h("SSL.Domain.index_13"),width:"20%",ellipsis:{tooltip:!0}},{key:"ttl",title:"TTL",width:100,render:a=>1===a.ttl?h("Mail.Mass.index_34"):a.ttl},{key:"proxy",title:h("SSL.Domain.index_16"),render:a=>-1===a.proxy?"--":Z(M,{"checked-value":1,"unchecked-value":0,value:a.proxy,"onUpdate:value":[e=>a.proxy=e,async e=>{const t={id:a.id,pid:b.value,domain:E.value,record:a.record,record_type:a.record_type,record_value:a.record_value,ttl:a.ttl,proxy:e,ps:a.ps};try{await f(t)}catch(n){a.proxy=1===e?0:1}}]},null)},{key:"ps",title:h("Public.Table.Ps")},c({width:150,options:a=>[{label:h("Public.Btn.Edit"),onClick:()=>{T(a)}},{label:h("Public.Btn.Del"),onClick:()=>{_({title:h("SSL.Domain.index_19"),content:h("SSL.Domain.index_20"),onConfirm:async()=>{await y({id:a.id}),z(),s("change")}})}}]})]),T=a=>{v.data.isEdit=!0,v.data.row=a,v.title=h("SSL.Domain.index_21"),v.show=!0},z=async()=>{try{if(""===E.value)return void(C.data=[]);C.loading=!0;const{message:a}=await w({...g,search_pid:b.value});e(a)&&(C.data=a.data,C.total=a.total)}finally{C.loading=!1}};return(async()=>{await R(),await z()})(),(a,e)=>{const t=n,i=I,s=F,p=B,m=ca,c=r,_=u,h=d,f=o;return K(),Q("div",null,[Z(p,{class:"select-box"},{default:X((()=>[Z(ga,{value:aa(b),"onUpdate:value":e[0]||(e[0]=a=>ua(b)?b.value=a:null),onChange:j},null,8,["value"]),Z(p,null,{default:X((()=>[Z(va,{value:aa(g).domain,"onUpdate:value":[e[1]||(e[1]=a=>aa(g).domain=a),L]},null,8,["value"]),Z(s,{trigger:"hover"},{trigger:X((()=>[Z(i,{onClick:D,class:"h-40px w-40px"},{default:X((()=>[Z(t,{name:"base-refresh"})])),_:1})])),default:X((()=>[ea("span",null,na(a.$t("SSL.Domain.index_22")),1)])),_:1})])),_:1})])),_:1}),Z(h,null,{toolsLeft:X((()=>[Z(i,{type:"primary",onClick:x},{default:X((()=>[ta(na(a.$t("SSL.Domain.index_17")),1)])),_:1}),Z(i,{onClick:S},{default:X((()=>[ta(na(a.$t("SSL.Domain.index_18")),1)])),_:1})])),toolsRight:X((()=>[Z(m,{value:aa(g).search,"onUpdate:value":e[2]||(e[2]=a=>aa(g).search=a),onSearch:L},null,8,["value"])])),table:X((()=>[Z(c,{loading:aa(C).loading,data:aa(C).data,columns:aa(U)},null,8,["loading","data","columns"])])),pageRight:X((()=>[Z(_,{page:aa(g).p,"onUpdate:page":e[3]||(e[3]=a=>aa(g).p=a),"page-size":aa(g).limit,"onUpdate:pageSize":e[4]||(e[4]=a=>aa(g).limit=a),"item-count":aa(C).total,onRefresh:z},null,8,["page","page-size","item-count"])])),_:1}),Z(f,{show:aa(v).show,"onUpdate:show":e[5]||(e[5]=a=>aa(v).show=a),title:aa(v).title,data:aa(v).data,width:540,"min-height":300,footer:!0,component:aa(l)},null,8,["show","title","data","component"])])}}}),[["__scopeId","data-v-3257b060"]]),ya=N({__name:"index",setup(a){const n=ia((()=>t((()=>import("./ssl-log.js?v=1744703330658")),__vite__mapDeps([12,13,2,3,4,5,6,7,8,9,14,11])))),{t:i}=q(),s=W({p:1,limit:10,domain:"",id:b}),_=async()=>{await S({id:s.id}),L(),h.show=!0},h=p(i("SSL.Domain.index_23"),{path:"/www/server/panel/logs/dns_sync.log"}),g=a=>{E.value=a,P.value=!0},v=(a,e)=>{k.value=e,b.value=a,s.p=1,L()},f=()=>{s.p=1,L()},{table:y,columns:w}=m([{key:"name",title:i("Mail.Mass.index_45"),render:a=>Z(l,{onClick:()=>g(a.name)},{default:()=>[a.name]})},T({key:"ssl_info.end_time",title:"SSL Days"}),{key:"ssl_info.end_date",title:"SSL Expiration Time",render:a=>a.ssl_info.end_date?a.ssl_info.end_date:"--"},{key:"records",title:i("SSL.Domain.index_24"),align:"center"},c({width:150,options:a=>[{label:i("SSL.index_58"),onClick:()=>{g(a.name)}}]})]),L=async()=>{if(b.value)try{y.loading=!0;const{message:a}=await x(s);e(a)&&(a.data.length>0?(y.data=a.data,y.total=a.total):(y.data=[],y.total=0))}finally{y.loading=!1}};return G((async()=>{await z(),L()})),(a,e)=>{const t=I,i=ca,l=r,p=u,m=d,c=o;return K(),Q(pa,null,[aa(P)?ra("",!0):(K(),oa(m,{key:0},{toolsLeft:X((()=>[Z(ga,{value:aa(s).id,"onUpdate:value":e[0]||(e[0]=a=>aa(s).id=a),onChange:v},null,8,["value"]),Z(t,{onClick:_,type:"primary",ghost:""},{default:X((()=>[ta(na(a.$t("SSL.Domain.index_22")),1)])),_:1}),Z(t,{onClick:e[1]||(e[1]=a=>aa(h).show=!0)},{default:X((()=>[ta(na(a.$t("SSL.Domain.index_23")),1)])),_:1})])),toolsRight:X((()=>[Z(i,{value:aa(s).domain,"onUpdate:value":e[2]||(e[2]=a=>aa(s).domain=a),onSearch:f,placeholder:a.$t("WP.index_4")},null,8,["value","placeholder"])])),table:X((()=>[Z(l,{loading:aa(y).loading,data:aa(y).data,columns:aa(w)},null,8,["loading","data","columns"])])),pageRight:X((()=>[Z(p,{page:aa(s).p,"onUpdate:page":e[3]||(e[3]=a=>aa(s).p=a),"page-size":aa(s).limit,"onUpdate:pageSize":e[4]||(e[4]=a=>aa(s).limit=a),"item-count":aa(y).total,onRefresh:L},null,8,["page","page-size","item-count"])])),_:1})),aa(P)?(K(),oa(fa,{key:1,onChange:L})):ra("",!0),Z(c,{show:aa(h).show,"onUpdate:show":e[5]||(e[5]=a=>aa(h).show=a),title:aa(h).title,data:aa(h).data,width:650,"min-height":450,component:aa(n)},null,8,["show","title","data","component"])],64)}}}),wa=N({__name:"index",setup(e){const t=s(),{userInfo:n}=ma(t),{t:i}=q(),l=[{key:"host",label:i("SSL.Domain.index_27"),component:ha},{key:"manage",label:i("SSL.Domain.index_7"),component:ya}],o=a=>{"host"===a&&(P.value=!1)};return(e,t)=>{const i=a,s=H;return aa(n).status?(K(),oa(s,{key:0,class:"p-16px"},{default:X((()=>[Z(i,{value:aa(L),"onUpdate:value":[t[0]||(t[0]=a=>ua(L)?L.value=a:null),o],options:l},null,8,["value"])])),_:1})):(K(),oa($,{key:1}))}}});export{wa as default};
