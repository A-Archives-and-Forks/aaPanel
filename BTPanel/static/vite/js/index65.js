const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/manage-form.js?v=1741416570306","js/index.vue_vue_type_script_setup_true_lang.js?v=1741416570306","js/vue.js?v=1741416570306","js/__commonjsHelpers__.js?v=1741416570306","js/naive.js?v=1741416570306","js/common.js?v=1741416570306","js/index104.js?v=1741416570306","js/page_layout.js?v=1741416570306","js/public.js?v=1741416570306","css/public.css?v=1741416570306","css/page_layout.css?v=1741416570306","css/index21.css?v=1741416570306","js/index.js?v=1741416570306","css/index90.css?v=1741416570306","js/index.vue_vue_type_script_setup_true_lang4.js?v=1741416570306","js/index.vue_vue_type_script_setup_true_lang8.js?v=1741416570306","css/index19.css?v=1741416570306","js/index.vue_vue_type_script_setup_true_lang5.js?v=1741416570306","js/index.vue_vue_type_script_setup_true_lang6.js?v=1741416570306","js/form7.js?v=1741416570306","js/index95.js?v=1741416570306"])))=>i.map(i=>d[i]);
var a;import{_ as e}from"./index104.js?v=1741416570306";import{az as t,d as l,b as s,a as i}from"./page_layout.js?v=1741416570306";import{_ as o}from"./index.js?v=1741416570306";import{_ as n}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1741416570306";import{_ as d}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1741416570306";import{_ as r}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1741416570306";import{r as p,N as u,c,d as _,M as m,j as g,f as v,P as b,Q as f,$ as h,S as y,W as w,k as A,v as x,_ as k,ao as C,ae as j}from"./vue.js?v=1741416570306";import{d as E,b as M,f as P,a as I}from"./public.js?v=1741416570306";import{cj as O,bO as S,bV as R,ch as T,T as U,ce as N}from"./naive.js?v=1741416570306";const z=a=>t.post("/ssl_domain?action=list_dns_api",a),D=a=>t.post("/ssl_domain?action=create_dns_api",a,{requestOptions:{loading:l.global.t("WP.api.tamper_2"),successMessage:!0}}),L=a=>t.post("/ssl_domain?action=edit_dns_api",a,{requestOptions:{loading:l.global.t("Crontab.Api.index_5"),successMessage:!0}}),q=()=>t.post("/ssl_domain?action=get_dns_support"),B=a=>t.post("/ssl_domain?action=create_dns_record",a,{requestOptions:{loading:l.global.t("WP.api.tamper_2"),successMessage:!0}}),X=a=>t.post("/ssl_domain?action=edit_dns_record",a,{requestOptions:{loading:l.global.t("Crontab.Api.index_5"),successMessage:!0}}),V=p(!1),W=p([]),F=p([]),Q=a=>u(S,{class:"items-center justify-between!"},{default:()=>[u("span",null,[a.label]),a.ssl_info?u(O,{type:a.ssl_info>30?"success":a.ssl_info>0?"warning":"error",class:"px-10px"},{default:()=>[a.ssl_info,c(" "),l.global.t("Crontab.arrange.index_41")]}):""]}),$=p("CloudFlareDns"),G=p(null==(a=F.value[0])?void 0:a.value),H=p(!1),J=async a=>{try{H.value=!0,G.value="";const{message:e}=await z({pid:a,p:1,limit:999});if(s(e)){$.value=e.data[0].name;const a=e.data.length>0?e.data[0].domains:[];F.value=a.map((a=>({label:a.name,value:a.name,ssl_info:a.ssl_info.end_time}))),a.length>0?G.value=a[0].name:(G.value="",F.value=[])}}finally{H.value=!1}},K=[{label:"A",value:"A"},{label:"AAAA",value:"AAAA"},{label:"MX",value:"MX"},{label:"TXT",value:"TXT"},{label:"NS",value:"NS"},{label:"CAA",value:"CAA"},{label:"CNAME",value:"CNAME"},{label:"ANAME",value:"ANAME"},{label:"ALIAS",value:"ALIAS"}],Y=_({__name:"manage",props:{rowId:{}},emits:["refresh"],setup(a,{emit:e}){const p=w((()=>i((()=>import("./manage-form.js?v=1741416570306")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18])))),_=a,A=e,{t:x}=m(),k=g({p:1,limit:10,search_pid:_.rowId,domain:G}),C=E("",{isEdit:!1,id:_.rowId,onRefresh:()=>{q()}}),j=async a=>{await J(a),q()},O=()=>{C.data.isEdit=!1,C.title="添加解析",C.show=!0},N=()=>{A("refresh"),V.value=!1},{table:z,columns:D}=M([{key:"record",title:"记录",width:"20%"},{key:"record_type",title:"类型",width:"10%"},{key:"record_value",title:"记录值",width:"20%",ellipsis:{tooltip:!0}},{key:"ttl",title:"TTL",width:100,render:a=>1===a.ttl?"自动":a.ttl},{key:"proxy",title:"代理",render:a=>-1===a.proxy?"--":u(R,{value:a.proxy,"onUpdate:value":[e=>a.proxy=e,async a=>{console.log(a)}]},null)},{key:"ps",title:"备注"},P({width:150,options:a=>[{label:x("Public.Btn.Edit"),onClick:()=>{L(a)}},{label:x("Public.Btn.Del"),onClick:()=>{I({title:"删除解析",content:"确定删除该解析吗？",onConfirm:async()=>{var e;await(e={id:a.id},t.post("/ssl_domain?action=delete_dns_record",e,{requestOptions:{loading:l.global.t("Mail.Api.index_37"),successMessage:!0}})),q()}})}}]})]),L=a=>{C.data.isEdit=!0,C.data.row=a,C.title="编辑解析",C.show=!0},q=async()=>{try{z.loading=!0;const{message:e}=await(a=k,t.post("/ssl_domain?action=list_dns_record",a));s(e)&&(z.data=e.data,z.total=e.total)}finally{z.loading=!1}var a};return v((()=>{(async()=>{await J(_.rowId),q()})()})),(a,e)=>{const t=T,l=S,s=U,i=r,_=d,m=n,g=o;return b(),f("div",null,[u(l,{class:"flex-col! mb-16px"},{default:h((()=>[u(t,{class:"w-200px",filterable:"",value:y(k).search_pid,"onUpdate:value":[e[0]||(e[0]=a=>y(k).search_pid=a),j],options:y(W),"consistent-menu-width":!1},null,8,["value","options"]),u(t,{class:"w-250px",filterable:"",value:y(k).domain,"onUpdate:value":[e[1]||(e[1]=a=>y(k).domain=a),q],options:y(F),"consistent-menu-width":!1,loading:y(H),disabled:!y(F).length,"render-label":y(Q)},null,8,["value","options","loading","disabled","render-label"])])),_:1}),u(m,null,{toolsLeft:h((()=>[u(s,{type:"primary",onClick:O},{default:h((()=>e[5]||(e[5]=[c(" 添加解析 ")]))),_:1}),u(s,{onClick:N},{default:h((()=>e[6]||(e[6]=[c(" 返回 ")]))),_:1})])),table:h((()=>[u(i,{loading:y(z).loading,data:y(z).data,columns:y(D)},null,8,["loading","data","columns"])])),pageRight:h((()=>[u(_,{page:y(k).p,"onUpdate:page":e[2]||(e[2]=a=>y(k).p=a),"page-size":y(k).limit,"onUpdate:pageSize":e[3]||(e[3]=a=>y(k).limit=a),"item-count":y(z).total,onRefresh:q},null,8,["page","page-size","item-count"])])),_:1}),u(g,{show:y(C).show,"onUpdate:show":e[4]||(e[4]=a=>y(C).show=a),title:y(C).title,data:y(C).data,width:540,"min-height":300,footer:!0,component:y(p)},null,8,["show","title","data","component"])])}}}),Z=_({__name:"index",setup(a){const e=w((()=>i((()=>import("./form7.js?v=1741416570306")),__vite__mapDeps([19,20,7,2,3,4,5,8,9,10,1,6,11,12,13,14,15,16,17,18])))),{t:_}=m(),v=p(0),j=g({p:1,limit:10}),O=E("",{isEdit:!1,onRefresh:()=>{D()}}),S=()=>{O.data.isEdit=!1,O.title="接入DNS托管商API",O.show=!0},{table:R,columns:T}=M([{key:"name",title:"托管商"},{key:"status",title:"状态",render:a=>1===a.status?"启用":"禁用"},{key:"api_user",title:"账号"},{key:"permission",title:"权限",align:"center"},{key:"domains",title:"托管域名数",align:"center",render:a=>a.domains.length},P({width:150,options:a=>[{label:"域名管理",onClick:()=>{v.value=a.id,$.value=a.name,V.value=!0}},{label:_("Public.Btn.Edit"),onClick:()=>{N(a)}},{label:_("Public.Btn.Del"),onClick:()=>{I({title:"删除托管商API",content:"确定删除该托管商API吗？",onConfirm:async()=>{var e;await(e={id:a.id},t.post("/ssl_domain?action=delete_dns_api",e,{requestOptions:{loading:l.global.t("Mail.Api.index_37"),successMessage:!0}})),D()}})}}]})]),N=a=>{O.data.isEdit=!0,O.data.row=a,O.title="编辑托管商API",O.show=!0},D=async()=>{try{R.loading=!0;const{message:a}=await z(j);s(a)&&(R.data=a.data,R.total=a.total,W.value=a.data.map((a=>({label:a.api_user?"".concat(a.name," (").concat(a.api_user,")"):a.name,value:a.id}))))}finally{R.loading=!1}};return D(),(a,t)=>{const l=U,s=r,i=d,p=n,_=o;return b(),f("div",null,[A(u(p,null,{toolsLeft:h((()=>[u(l,{type:"primary",onClick:S},{default:h((()=>t[3]||(t[3]=[c(" 接入DNS托管商API ")]))),_:1})])),table:h((()=>[u(s,{loading:y(R).loading,data:y(R).data,columns:y(T)},null,8,["loading","data","columns"])])),pageRight:h((()=>[u(i,{page:y(j).p,"onUpdate:page":t[0]||(t[0]=a=>y(j).p=a),"page-size":y(j).limit,"onUpdate:pageSize":t[1]||(t[1]=a=>y(j).limit=a),"item-count":y(R).total,onRefresh:D},null,8,["page","page-size","item-count"])])),_:1},512),[[x,!y(V)]]),y(V)?(b(),k(Y,{key:0,"row-id":y(v),onRefresh:D},null,8,["row-id"])):C("",!0),u(_,{show:y(O).show,"onUpdate:show":t[2]||(t[2]=a=>y(O).show=a),title:y(O).title,data:y(O).data,width:540,"min-height":280,footer:!0,component:y(e)},null,8,["show","title","data","component"])])}}}),aa=_({__name:"index",setup(a){const t=p("host"),l=p(null),s=[{key:"host",label:"托管商列表",component:Z}];return(a,i)=>{const o=e,n=N;return b(),k(n,{class:"p-16px"},{default:h((()=>[u(o,{ref_key:"tabsInstRef",ref:l,value:y(t),"onUpdate:value":i[0]||(i[0]=a=>j(t)?t.value=a:null),options:s},null,8,["value"])])),_:1})}}}),ea=Object.freeze(Object.defineProperty({__proto__:null,default:aa},Symbol.toStringTag,{value:"Module"}));export{D as a,X as b,B as c,G as d,L as e,q as g,$ as h,ea as i,K as t};
