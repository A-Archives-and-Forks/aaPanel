import{s as e,o as s,u as t,a,b as n,c as o,d as i,_ as l,R as r}from"./tableColumns.js?v=1756367574781";import{cX as p,p as c,u,V as m,cY as d,cZ as _,d as f,x as v,o as g}from"./page_layout.js?v=1756367574781";import{b as x,c as y,f as k,K as h,L as S,M as b,N as w,O as j,m as C,a as R,d as $,P as H,h as L}from"./public.js?v=1756367574781";import{k as P,r as U,a2 as z,V as I,a3 as N,S as B,R as M,a4 as O,O as V,H as A,U as E,F,a0 as K,an as T,W,j as X,P as Y,w as Z,N as q}from"./vue.js?v=1756367574781";import{da as D,aC as G,dS as J}from"./naive.js?v=1756367574781";import{_ as Q}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1756367574781";import{_ as ee}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1756367574781";import{a as se}from"./soft.js?v=1756367574781";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1756367574781";import"./soft2.js?v=1756367574781";import"./index.js?v=1756367574781";import"./common.js?v=1756367574781";import"./__commonjsHelpers__.js?v=1756367574781";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1756367574781";const te={class:"w-80px inline-block"},ae=["onClick"],ne=c(P({__name:"app-sort",setup(t){const a=p(),n=U(e.type);return(()=>{const s=Number(localStorage.getItem("soft-app"));s&&(n.value=s,e.type=s)})(),(t,o)=>{const i=D;return I(),z(i,{class:"py-16px items-center"},{default:N(()=>[B("span",te,O(t.$t("Soft.index_7")),1),(I(!0),M(F,null,V(E(s),s=>(I(),M("div",{class:A(["list",{active:E(n)===s.value}]),key:s.value,onClick:t=>{return o=s.value,n.value=o,e.p=1,e.type=o,localStorage.setItem("soft-app",o.toString()),void a.setRefresh(!0);var o}},O(s.label),11,ae))),128))]),_:1})}}}),[["__scopeId","data-v-f20307d1"]]),oe={key:0,class:"box appStore-pro-tips"},ie={key:0,class:"mr-15px"},le={key:1,class:"mr-10px"},re=c(P({__name:"index",setup(e){const s=u(),{isPro:t,authExpired:a}=K(s);return(e,s)=>{const n=G;return"Lifetime"!==E(a)?(I(),M("div",oe,[E(t)?(I(),M("span",ie,O(e.$t("Soft.index_16",[E(a)])),1)):(I(),M("span",le,O(e.$t("Soft.index_17")),1)),W(n,{type:"primary",size:"small",onClick:s[0]||(s[0]=e=>{x({source:t.value?30:29})})},{default:N(()=>[X(O(E(t)?e.$t("Soft.index_18"):e.$t("Home.index_22")),1)]),_:1})])):T("",!0)}}}),[["__scopeId","data-v-c3090a2b"]]),pe=P({__name:"index",setup(s){const{t:l}=Y(),r=p(),c=u(),{keys:P,table:U,columns:B}=y([t(),{key:"name",title:l("Soft.index_9"),width:"100",ellipsis:{tooltip:{width:"trigger"}},render:e=>e.author?e.author:l("Soft.index_11")},{key:"name",title:l("Soft.index_10"),ellipsis:{tooltip:{width:"trigger"}},render:e=>W("span",{innerHTML:e.ps},null)},{key:"name",title:l("Soft.index_12"),width:"60",render:e=>"0.00"===e.price||0===e.price?W("span",null,[l("Soft.index_13")]):W("span",{class:"color-#fc6d26"},["$".concat(e.price)])},a(),n(),o(),i(),k({width:180,align:"right",options:e=>[{label:l("Home.index_5"),show:h(e),onClick:()=>{const s=w(e),t={name:e.name,title:e.title,m_version:e.versions[s].m_version,version:e.versions[s].version,update_msg:e.versions[s].update_msg};j(t,()=>{A()})}},{label:l("Layout.Sider.mail_12"),show:e.setup&&!S(e),onClick:()=>{se(e)}},{label:-1===e.endtime?l("Component.Auth.index_3"):l("Soft.index_18"),show:S(e),onClick:()=>{const s={source:-1===e.endtime?31:32,plugin:{name:e.title,pid:e.pid,type:e.type,plugin:!0,renew:e.endtime,ps:e.ps}};x(s)}},{label:b(e),show:!e.setup&&!S(e),onClick:()=>{"1"===e.task?C(e.name,()=>{A()}):m()}},{label:l("Public.Btn.Uninstall"),show:e.setup,onClick:()=>{R({title:l("Public.Btn.Uninstall"),content:l("Soft.index_15",[e.title,e.version]),onConfirm:async()=>{const s=e.name.includes("nginx");e.version=e.name.includes("php-")?e.versions[0].m_version:e.version,await d({sName:e.name,version:s?"":e.version}),A()}})}}]})]),{loading:M,setLoading:V}=$();Z(()=>r.isRefresh,e=>{e&&(r.setRefresh(!1),A())}),Z(()=>c.taskCount,e=>{e&&console.log(e),A()});const A=async()=>{try{V(!0);const{message:s}=await _(q(e),!!e.force);f(s)&&(U.data=s.list.data,U.total=v(s.list.page))}finally{P.value=[],e.force=0,V(!1)}};return A(),(s,t)=>{const a=g,n=L,o=ee,i=Q;return I(),z(i,{class:"py-16px"},{table:N(()=>[W(n,{"row-key":"name",loading:E(M),data:E(U).data,columns:E(B)},{empty:N(()=>[W(a,{onClick:E(H)},{default:N(()=>[X(O(s.$t("Soft.index_26")),1)]),_:1},8,["onClick"])]),_:1},8,["loading","data","columns"])]),pageRight:N(()=>[W(o,{page:E(e).p,"onUpdate:page":t[0]||(t[0]=s=>E(e).p=s),"page-size":E(e).row,"onUpdate:pageSize":t[1]||(t[1]=s=>E(e).row=s),"item-count":E(U).total,onRefresh:A},null,8,["page","page-size","item-count"])]),_:1})}}}),ce=P({__name:"index",setup:e=>(e,s)=>{const t=J;return I(),z(t,{class:"p-16px"},{default:N(()=>[W(l),W(r),W(ne),W(re),W(pe)]),_:1})}});export{ce as default};
