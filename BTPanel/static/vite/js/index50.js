const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index191.js?v=1742891699271","js/page_layout.js?v=1742891699271","js/vue.js?v=1742891699271","js/__commonjsHelpers__.js?v=1742891699271","js/naive.js?v=1742891699271","js/common.js?v=1742891699271","js/public.js?v=1742891699271","css/public.css?v=1742891699271","css/page_layout.css?v=1742891699271","css/index81.css?v=1742891699271"])))=>i.map(i=>d[i]);
import{_ as e}from"./index104.js?v=1742891699271";import{W as a,b as t,I as l,b7 as i,a as n,o as s}from"./page_layout.js?v=1742891699271";import{_ as o}from"./index.js?v=1742891699271";import{_ as d}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1742891699271";import{_ as r}from"./index.vue_vue_type_script_setup_true_lang12.js?v=1742891699271";import{_ as u}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1742891699271";import{_ as p}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1742891699271";import{b as c,f as m,d as _,a as h}from"./public.js?v=1742891699271";import{y as w,z as x,A as y,B as f,C as v,D as g,E as b}from"./mail.js?v=1742891699271";import{_ as k}from"./index.vue_vue_type_script_setup_true_lang3.js?v=1742891699271";import{d as j,O as E,r as M,j as R,P as S,c as C,f as U,R as L,S as D,a1 as O,a2 as $,V as B,af as I,Y as W,o as K,U as T,a0 as P}from"./vue.js?v=1742891699271";import{cr as A,y as V,ch as z,_ as H,T as J,ck as N}from"./naive.js?v=1742891699271";import{_ as Y}from"./index95.js?v=1742891699271";import{_ as q}from"./index.vue_vue_type_script_setup_true_lang.js?v=1742891699271";import"./common.js?v=1742891699271";import"./__commonjsHelpers__.js?v=1742891699271";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1742891699271";const F=j({__name:"index",setup(e){const s=W((()=>n((()=>import("./index191.js?v=1742891699271")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])))),{t:f}=E(),v=M(),g=R({p:1,username:null}),{keys:b,table:j,columns:K,setLoading:T}=c([{type:"selection",width:40},{key:"from",title:f("Mail.Email.index_2"),width:"25%",minWidth:140,ellipsis:{tooltip:!0}},{key:"theme",title:f("Mail.Email.index_3"),minWidth:160,ellipsis:{tooltip:{width:"trigger"}},render:e=>{const a=e.html.replace(/[^\u4e00-\u9fa5]/g,"");return S("span",{class:"cursor-pointer",onClick:()=>{H(e)}},[S("a",{class:"bt-link"},[C(" "),e.subject,C(" ")]),S("span",{class:"text-desc"},[C(" - "),a||e.body])])}},{key:"time",title:f("Mail.Email.index_4"),width:"12%",minWidth:140,render:e=>a(e.time)},m({width:150,options:e=>[{label:f("Mail.Email.index_5"),onClick:()=>{H(e)}},{label:f("Mail.Email.index_6"),onClick:()=>{J(e)}},{label:f("Public.Btn.Del"),onClick:()=>{N(e)}}]})]),P=[{key:"delete",type:"confirm",label:f("Site.Batch.index_21"),confirm:{title:f("Site.Batch.index_21"),desc:f("Site.Batch.index_11"),columns:[{...K.value[1],width:"auto"}],api:e=>w({path:e.path},!1),done:()=>{Y()}}}],z=_(),H=e=>{z.data.row=e,z.title=f("Mail.Email.index_7",[e.subject]),z.show=!0},J=e=>{h({title:f("Mail.Email.index_8"),content:f("Mail.Email.index_9"),onConfirm:async()=>{await x({path:e.path,username:g.username||""}),Y()}})},N=async e=>{await w({path:e.path}),Y()},Y=async()=>{try{T(!0);const{message:e}=await y({p:g.p,username:g.username||""});t(e)&&(j.data=l(e.data)?e.data:[],j.total=i(e.page))}finally{T(!1),b.value=[]}},q=()=>{g.p=1,Y()};return T(!0),U((async()=>{await v.value.getList()})),(e,a)=>{const t=A,l=V,i=p,n=u,c=r,m=d,_=o;return L(),D("div",null,[S(m,null,{toolsLeft:O((()=>[S(l,{class:"w-460px"},{default:O((()=>[S(t,null,{default:O((()=>[C($(e.$t("Mail.Email.index_1")),1)])),_:1}),S(k,{ref_key:"senderRef",ref:v,value:B(g).username,"onUpdate:value":[a[0]||(a[0]=e=>B(g).username=e),q]},null,8,["value"])])),_:1})])),table:O((()=>[S(i,{"row-key":"time","checked-row-keys":B(b),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>I(b)?b.value=e:null),loading:B(j).loading,data:B(j).data,columns:B(K)},null,8,["checked-row-keys","loading","data","columns"])])),pageRight:O((()=>[S(n,{page:B(g).p,"onUpdate:page":a[2]||(a[2]=e=>B(g).p=e),"item-count":B(j).total,onRefresh:Y},null,8,["page","item-count"])])),pageLeft:O((()=>[S(c,{"row-key":"time","checked-row-keys":B(b),"onUpdate:checkedRowKeys":a[3]||(a[3]=e=>I(b)?b.value=e:null),data:B(j).data,options:P},null,8,["checked-row-keys","data"])])),_:1}),S(_,{show:B(z).show,"onUpdate:show":a[4]||(a[4]=e=>B(z).show=e),title:B(z).title,data:B(z).data,width:850,height:680,component:B(s)},null,8,["show","title","data","component"])])}}}),G=j({__name:"index",setup(e){const s=W((()=>n((()=>import("./index191.js?v=1742891699271")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])))),{t:h}=E(),x=M(),y=R({p:1,username:null}),{keys:v,table:g,columns:b,setLoading:j}=c([{type:"selection",width:40},{key:"from",title:h("Mail.Email.index_2"),width:"25%",minWidth:140,ellipsis:{tooltip:!0}},{key:"theme",title:h("Mail.Email.index_3"),minWidth:160,ellipsis:{tooltip:{width:"trigger"}},render:e=>{const a=e.html.replace(/[^\u4e00-\u9fa5]/g,"");return S("span",{class:"cursor-pointer",onClick:()=>{P(e)}},[S("a",{class:"bt-link"},[e.subject]),S("span",{class:"text-desc"},[C(" - "),a||e.body])])}},{key:"time",title:h("Mail.Email.index_4"),width:"12%",minWidth:140,render:e=>a(e.time)},m({width:150,options:e=>[{label:h("Mail.Email.index_5"),onClick:()=>{P(e)}},{label:h("Public.Btn.Del"),onClick:()=>{z(e)}}]})]),K=[{key:"delete",type:"confirm",label:h("Site.Batch.index_21"),confirm:{title:h("Site.Batch.index_21"),desc:h("Site.Batch.index_11"),columns:[{...b.value[1],width:"auto"}],api:e=>w({path:e.path},!1),done:()=>{H()}}}],T=_(),P=e=>{T.data.row=e,T.title=h("Mail.Email.index_7",[e.subject]),T.show=!0},z=async e=>{await w({path:e.path}),H()},H=async()=>{try{j(!0);const{message:e}=await f({p:y.p,username:y.username||""});t(e)&&(g.data=l(e.data)?e.data:[],g.total=i(e.page))}finally{v.value=[],j(!1)}},J=()=>{y.p=1,H()};return j(!0),U((async()=>{await x.value.getList()})),(e,a)=>{const t=A,l=V,i=p,n=u,c=r,m=d,_=o;return L(),D("div",null,[S(m,null,{toolsLeft:O((()=>[S(l,{class:"w-460px"},{default:O((()=>[S(t,null,{default:O((()=>[C($(e.$t("Mail.Email.index_1")),1)])),_:1}),S(k,{ref_key:"senderRef",ref:x,value:B(y).username,"onUpdate:value":[a[0]||(a[0]=e=>B(y).username=e),J]},null,8,["value"])])),_:1})])),table:O((()=>[S(i,{"row-key":"time","checked-row-keys":B(v),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>I(v)?v.value=e:null),loading:B(g).loading,data:B(g).data,columns:B(b)},null,8,["checked-row-keys","loading","data","columns"])])),pageRight:O((()=>[S(n,{page:B(y).p,"onUpdate:page":a[2]||(a[2]=e=>B(y).p=e),"item-count":B(g).total,onRefresh:H},null,8,["page","item-count"])])),pageLeft:O((()=>[S(c,{"row-key":"time","checked-row-keys":B(v),"onUpdate:checkedRowKeys":a[3]||(a[3]=e=>I(v)?v.value=e:null),data:B(g).data,options:K},null,8,["checked-row-keys","data"])])),_:1}),S(_,{show:B(T).show,"onUpdate:show":a[4]||(a[4]=e=>B(T).show=e),title:B(T).title,data:B(T).data,width:850,height:680,component:B(s)},null,8,["show","title","data","component"])])}}}),Q=j({__name:"index",setup(e){const s=W((()=>n((()=>import("./index191.js?v=1742891699271")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])))),{t:r}=E(),h=M(),x=R({p:1,username:null}),{table:y,columns:f,setLoading:b}=c([{key:"from",title:r("Mail.Email.index_2"),width:"25%",minWidth:140,ellipsis:{tooltip:!0}},{key:"theme",title:r("Mail.Email.index_3"),minWidth:160,ellipsis:{tooltip:{width:"trigger"}},render:e=>{const a=e.html.replace(/[^\u4e00-\u9fa5]/g,"");return S("span",{class:"cursor-pointer",onClick:()=>{I(e)}},[S("a",{class:"bt-link"},[e.subject]),S("span",{class:"text-desc"},[C(" - "),a||e.body])])}},{key:"time",title:r("Mail.Email.index_4"),width:"12%",minWidth:140,render:e=>a(e.time)},m({width:150,options:e=>[{label:r("Mail.Email.index_5"),onClick:()=>{I(e)}},{label:r("Mail.Email.index_10"),onClick:()=>{K(e)}},{label:r("Public.Btn.Del"),onClick:()=>{T(e)}}]})]),j=_(),I=e=>{j.data.row=e,j.title=r("Mail.Email.index_7",[e.subject]),j.show=!0},K=async e=>{await v({path:e.path,username:x.username||""}),P()},T=async e=>{await w({path:e.path}),P()},P=async()=>{try{b(!0);const{message:e}=await g({p:x.p,username:x.username||""});t(e)&&(y.data=l(e.data)?e.data:[],y.total=i(e.page))}finally{b(!1)}},z=()=>{x.p=1,P()};return b(!0),U((async()=>{await h.value.getList()})),(e,a)=>{const t=A,l=V,i=p,n=u,r=d,c=o;return L(),D("div",null,[S(r,null,{toolsLeft:O((()=>[S(l,{class:"w-460px"},{default:O((()=>[S(t,null,{default:O((()=>[C($(e.$t("Mail.Email.index_1")),1)])),_:1}),S(k,{ref_key:"senderRef",ref:h,value:B(x).username,"onUpdate:value":[a[0]||(a[0]=e=>B(x).username=e),z]},null,8,["value"])])),_:1})])),table:O((()=>[S(i,{loading:B(y).loading,data:B(y).data,columns:B(f)},null,8,["loading","data","columns"])])),pageRight:O((()=>[S(n,{page:B(x).p,"onUpdate:page":a[1]||(a[1]=e=>B(x).p=e),"item-count":B(y).total,onRefresh:P},null,8,["page","item-count"])])),_:1}),S(c,{show:B(j).show,"onUpdate:show":a[2]||(a[2]=e=>B(j).show=e),title:B(j).title,data:B(j).data,width:850,height:680,component:B(s)},null,8,["show","title","data","component"])])}}}),X=()=>CKEDITOR.instances.editor.getData(),Z={class:"w-350px"},ee={class:"w-760px"},ae={class:"w-760px"},te={class:"text-error"},le=j({__name:"index",setup(e){const{t:a}=E(),t=M(),l=M(null),i=R({sender:null,mail_to:"",subject:"",content:""}),n={mail_to:{trigger:["blur","input"],validator:()=>""!==i.mail_to.trim()||new Error(a("Mail.Send.index_9"))},subject:{trigger:["blur","input"],validator:()=>""!==i.subject.trim()||new Error(a("Mail.Send.index_10"))},content:{validator:()=>""!==X()||new Error(a("Mail.Send.index_11"))}},o=async()=>{var e;await(null==(e=l.value)?void 0:e.validate());const a={mail_from:i.sender||"",mail_to:JSON.stringify(i.mail_to.split(",")),subject:i.subject,content:X(),subtype:"html",smtp_server:"localhost"};var t;await b(a),i.mail_to="",i.subject="",t="",CKEDITOR.instances.editor.setData(t)};return U((()=>{(async e=>{await s("/static/ckeditor/ckeditor.js?v=1742891699271"),CKEDITOR.replace(e,{customConfig:"/static/ckeditor/config.js?v1.0"})})("editor"),t.value.getList()})),K((()=>{CKEDITOR.remove(CKEDITOR.instances.editor)})),(e,a)=>{const s=z,d=H,r=J,u=q,p=Y;return L(),D("div",null,[S(u,{ref_key:"formRef",ref:l,class:"pt-8px",model:B(i),rules:n},{default:O((()=>[S(s,{label:e.$t("Mail.Send.index_1"),path:"sender"},{default:O((()=>[T("div",Z,[S(k,{ref_key:"senderRef",ref:t,value:B(i).sender,"onUpdate:value":a[0]||(a[0]=e=>B(i).sender=e),placeholder:e.$t("Mail.Send.index_2")},null,8,["value","placeholder"])])])),_:1},8,["label"]),S(s,{label:e.$t("Mail.Send.index_3"),path:"mail_to"},{default:O((()=>[T("div",ee,[S(d,{value:B(i).mail_to,"onUpdate:value":a[1]||(a[1]=e=>B(i).mail_to=e),placeholder:e.$t("Mail.Send.index_4")},null,8,["value","placeholder"])])])),_:1},8,["label"]),S(s,{label:e.$t("Mail.Send.index_5"),path:"subject"},{default:O((()=>[T("div",ae,[S(d,{value:B(i).subject,"onUpdate:value":a[2]||(a[2]=e=>B(i).subject=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"]),S(s,{label:e.$t("Mail.Send.index_6"),path:"content"},{default:O((()=>a[3]||(a[3]=[T("div",{class:"w-760px h-392px"},[T("textarea",{class:"hidden",name:"editor",id:"editor",rows:"10"})],-1)]))),_:1},8,["label"]),S(s,{label:" ","show-feedback":!1},{default:O((()=>[S(r,{type:"primary",size:"large",onClick:o},{default:O((()=>[C($(e.$t("Mail.Send.index_7")),1)])),_:1})])),_:1})])),_:1},8,["model"]),S(p,{class:"ml-24px mt-24px"},{default:O((()=>[T("li",te,$(e.$t("Mail.Send.index_8")),1)])),_:1})])}}}),ie=j({__name:"index",setup(a){const t=M("inbox"),l=[{key:"inbox",label:"Inbox",component:F},{key:"outbox",label:"Outbox",component:G},{key:"spam",label:"Spam",component:Q},{key:"sender",label:"Sender",component:le}];return(a,i)=>{const n=e,s=N;return L(),P(s,{class:"p-16px"},{default:O((()=>[S(n,{value:B(t),"onUpdate:value":i[0]||(i[0]=e=>I(t)?t.value=e:null),options:l},null,8,["value"])])),_:1})}}});export{ie as default};
