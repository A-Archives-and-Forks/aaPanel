const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index191.js?v=1744703330658","js/page_layout.js?v=1744703330658","js/vue.js?v=1744703330658","js/__commonjsHelpers__.js?v=1744703330658","js/naive.js?v=1744703330658","js/common.js?v=1744703330658","js/public.js?v=1744703330658","css/public.css?v=1744703330658","css/page_layout.css?v=1744703330658","css/index81.css?v=1744703330658"])))=>i.map(i=>d[i]);
import{_ as e}from"./index104.js?v=1744703330658";import{W as a,d as t,I as l,b9 as i,a as n,aS as s,i as o,m as d,o as r}from"./page_layout.js?v=1744703330658";import{_ as u}from"./index.js?v=1744703330658";import{_ as p}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1744703330658";import{_ as c}from"./index.vue_vue_type_script_setup_true_lang12.js?v=1744703330658";import{_ as m}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1744703330658";import{_}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1744703330658";import{b as h,f as w,d as y,a as x}from"./public.js?v=1744703330658";import{y as f,z as g,A as k,B as v,C as b,D as j,E}from"./mail.js?v=1744703330658";import{_ as M}from"./index.vue_vue_type_script_setup_true_lang3.js?v=1744703330658";import{d as R,O as C,r as S,j as U,P as L,c as D,f as O,R as $,S as I,a0 as B,a1 as W,V as K,af as P,Y as T,o as A,U as V,$ as z}from"./vue.js?v=1744703330658";import{cr as q,y as G,T as H,ch as J,_ as N,ck as Y}from"./naive.js?v=1744703330658";import{_ as F}from"./index95.js?v=1744703330658";import{_ as Q}from"./index.vue_vue_type_script_setup_true_lang.js?v=1744703330658";import"./common.js?v=1744703330658";import"./__commonjsHelpers__.js?v=1744703330658";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1744703330658";const X=R({__name:"index",setup(e){const s=T((()=>n((()=>import("./index191.js?v=1744703330658")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])))),{t:o}=C(),d=S(),r=U({p:1,username:null}),{keys:v,table:b,columns:j,setLoading:E}=h([{type:"selection",width:40},{key:"from",title:o("Mail.Email.index_2"),width:"25%",minWidth:140,ellipsis:{tooltip:!0}},{key:"theme",title:o("Mail.Email.index_3"),minWidth:160,ellipsis:{tooltip:{width:"trigger"}},render:e=>{const a=e.html.replace(/[^\u4e00-\u9fa5]/g,"");return L("span",{class:"cursor-pointer",onClick:()=>{V(e)}},[L("a",{class:"bt-link"},[D(" "),e.subject,D(" ")]),L("span",{class:"text-desc"},[D(" - "),a||e.body])])}},{key:"time",title:o("Mail.Email.index_4"),width:"12%",minWidth:140,render:e=>a(e.time)},w({width:150,options:e=>[{label:o("Mail.Email.index_5"),onClick:()=>{V(e)}},{label:o("Mail.Email.index_6"),onClick:()=>{z(e)}},{label:o("Public.Btn.Del"),onClick:()=>{H(e)}}]})]),R=[{key:"delete",type:"confirm",label:o("Site.Batch.index_21"),confirm:{title:o("Site.Batch.index_21"),desc:o("Site.Batch.index_11"),columns:[{...j.value[1],width:"auto"}],api:e=>f({path:e.path},!1),done:()=>{J()}}}],A=y(),V=e=>{A.data.row=e,A.title=o("Mail.Email.index_7",[e.subject]),A.show=!0},z=e=>{x({title:o("Mail.Email.index_8"),content:o("Mail.Email.index_9"),onConfirm:async()=>{await g({path:e.path,username:r.username||""}),J()}})},H=async e=>{await f({path:e.path}),J()},J=async()=>{try{E(!0);const{message:e}=await k({p:r.p,username:r.username||""});t(e)&&(b.data=l(e.data)?e.data:[],b.total=i(e.page))}finally{E(!1),v.value=[]}},N=()=>{r.p=1,J()};return E(!0),O((async()=>{await d.value.getList()})),(e,a)=>{const t=q,l=G,i=_,n=m,o=c,h=p,w=u;return $(),I("div",null,[L(h,null,{toolsLeft:B((()=>[L(l,{class:"w-460px"},{default:B((()=>[L(t,null,{default:B((()=>[D(W(e.$t("Mail.Email.index_1")),1)])),_:1}),L(M,{ref_key:"senderRef",ref:d,value:K(r).username,"onUpdate:value":[a[0]||(a[0]=e=>K(r).username=e),N]},null,8,["value"])])),_:1})])),table:B((()=>[L(i,{"row-key":"time","checked-row-keys":K(v),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>P(v)?v.value=e:null),loading:K(b).loading,data:K(b).data,columns:K(j)},null,8,["checked-row-keys","loading","data","columns"])])),pageRight:B((()=>[L(n,{page:K(r).p,"onUpdate:page":a[2]||(a[2]=e=>K(r).p=e),"item-count":K(b).total,onRefresh:J},null,8,["page","item-count"])])),pageLeft:B((()=>[L(o,{"row-key":"time","checked-row-keys":K(v),"onUpdate:checkedRowKeys":a[3]||(a[3]=e=>P(v)?v.value=e:null),data:K(b).data,options:R},null,8,["checked-row-keys","data"])])),_:1}),L(w,{show:K(A).show,"onUpdate:show":a[4]||(a[4]=e=>K(A).show=e),title:K(A).title,data:K(A).data,width:850,height:680,component:K(s)},null,8,["show","title","data","component"])])}}}),Z=R({__name:"index",setup(e){const s=T((()=>n((()=>import("./index191.js?v=1744703330658")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])))),{t:o}=C(),d=S(),r=U({p:1,username:null}),{keys:x,table:g,columns:k,setLoading:b}=h([{type:"selection",width:40},{key:"from",title:o("Mail.Email.index_2"),width:"25%",minWidth:140,ellipsis:{tooltip:!0}},{key:"theme",title:o("Mail.Email.index_3"),minWidth:160,ellipsis:{tooltip:{width:"trigger"}},render:e=>{const a=e.html.replace(/[^\u4e00-\u9fa5]/g,"");return L("span",{class:"cursor-pointer",onClick:()=>{R(e)}},[L("a",{class:"bt-link"},[e.subject]),L("span",{class:"text-desc"},[D(" - "),a||e.body])])}},{key:"time",title:o("Mail.Email.index_4"),width:"12%",minWidth:140,render:e=>a(e.time)},w({width:150,options:e=>[{label:o("Mail.Email.index_5"),onClick:()=>{R(e)}},{label:o("Public.Btn.Del"),onClick:()=>{A(e)}}]})]),j=[{key:"delete",type:"confirm",label:o("Site.Batch.index_21"),confirm:{title:o("Site.Batch.index_21"),desc:o("Site.Batch.index_11"),columns:[{...k.value[1],width:"auto"}],api:e=>f({path:e.path},!1),done:()=>{V()}}}],E=y(),R=e=>{E.data.row=e,E.title=o("Mail.Email.index_7",[e.subject]),E.show=!0},A=async e=>{await f({path:e.path}),V()},V=async()=>{try{b(!0);const{message:e}=await v({p:r.p,username:r.username||""});t(e)&&(g.data=l(e.data)?e.data:[],g.total=i(e.page))}finally{x.value=[],b(!1)}},z=()=>{r.p=1,V()};return b(!0),O((async()=>{await d.value.getList()})),(e,a)=>{const t=q,l=G,i=_,n=m,o=c,h=p,w=u;return $(),I("div",null,[L(h,null,{toolsLeft:B((()=>[L(l,{class:"w-460px"},{default:B((()=>[L(t,null,{default:B((()=>[D(W(e.$t("Mail.Email.index_1")),1)])),_:1}),L(M,{ref_key:"senderRef",ref:d,value:K(r).username,"onUpdate:value":[a[0]||(a[0]=e=>K(r).username=e),z]},null,8,["value"])])),_:1})])),table:B((()=>[L(i,{"row-key":"time","checked-row-keys":K(x),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>P(x)?x.value=e:null),loading:K(g).loading,data:K(g).data,columns:K(k)},null,8,["checked-row-keys","loading","data","columns"])])),pageRight:B((()=>[L(n,{page:K(r).p,"onUpdate:page":a[2]||(a[2]=e=>K(r).p=e),"item-count":K(g).total,onRefresh:V},null,8,["page","item-count"])])),pageLeft:B((()=>[L(o,{"row-key":"time","checked-row-keys":K(x),"onUpdate:checkedRowKeys":a[3]||(a[3]=e=>P(x)?x.value=e:null),data:K(g).data,options:j},null,8,["checked-row-keys","data"])])),_:1}),L(w,{show:K(E).show,"onUpdate:show":a[4]||(a[4]=e=>K(E).show=e),title:K(E).title,data:K(E).data,width:850,height:680,component:K(s)},null,8,["show","title","data","component"])])}}}),ee=R({__name:"index",setup(e){const r=T((()=>n((()=>import("./index191.js?v=1744703330658")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])))),{t:c}=C(),x=S(),g=U({p:1,username:null}),{table:k,columns:v,setLoading:E}=h([{key:"from",title:c("Mail.Email.index_2"),width:"25%",minWidth:140,ellipsis:{tooltip:!0}},{key:"theme",title:c("Mail.Email.index_3"),minWidth:160,ellipsis:{tooltip:{width:"trigger"}},render:e=>{const a=e.html.replace(/[^\u4e00-\u9fa5]/g,"");return L("span",{class:"cursor-pointer",onClick:()=>{A(e)}},[L("a",{class:"bt-link"},[e.subject]),L("span",{class:"text-desc"},[D(" - "),a||e.body])])}},{key:"time",title:c("Mail.Email.index_4"),width:"12%",minWidth:140,render:e=>a(e.time)},w({width:150,options:e=>[{label:c("Mail.Email.index_5"),onClick:()=>{A(e)}},{label:c("Mail.Email.index_10"),onClick:()=>{V(e)}},{label:c("Public.Btn.Del"),onClick:()=>{z(e)}}]})]),R=async()=>{try{await s.post("/plugin?action=a&name=mail_sys&s=check_rspamd_route",{},{requestOptions:{loading:o.global.t("Component.Pay.index_12"),successMessage:!1}}),window.open("/rspamd")}catch(e){d.error("Please repair the panel before clicking this function")}},P=y(),A=e=>{P.data.row=e,P.title=c("Mail.Email.index_7",[e.subject]),P.show=!0},V=async e=>{await b({path:e.path,username:g.username||""}),J()},z=async e=>{await f({path:e.path}),J()},J=async()=>{try{E(!0);const{message:e}=await j({p:g.p,username:g.username||""});t(e)&&(k.data=l(e.data)?e.data:[],k.total=i(e.page))}finally{E(!1)}},N=()=>{g.p=1,J()};return E(!0),O((async()=>{await x.value.getList()})),(e,a)=>{const t=q,l=G,i=H,n=_,s=m,o=p,d=u;return $(),I("div",null,[L(o,null,{toolsLeft:B((()=>[L(l,{class:"w-460px"},{default:B((()=>[L(t,null,{default:B((()=>[D(W(e.$t("Mail.Email.index_1")),1)])),_:1}),L(M,{ref_key:"senderRef",ref:x,value:K(g).username,"onUpdate:value":[a[0]||(a[0]=e=>K(g).username=e),N]},null,8,["value"])])),_:1}),L(i,{type:"primary",onClick:R},{default:B((()=>a[3]||(a[3]=[D("Rspamd GUI")]))),_:1})])),table:B((()=>[L(n,{loading:K(k).loading,data:K(k).data,columns:K(v)},null,8,["loading","data","columns"])])),pageRight:B((()=>[L(s,{page:K(g).p,"onUpdate:page":a[1]||(a[1]=e=>K(g).p=e),"item-count":K(k).total,onRefresh:J},null,8,["page","item-count"])])),_:1}),L(d,{show:K(P).show,"onUpdate:show":a[2]||(a[2]=e=>K(P).show=e),title:K(P).title,data:K(P).data,width:850,height:680,component:K(r)},null,8,["show","title","data","component"])])}}}),ae=()=>CKEDITOR.instances.editor.getData(),te={class:"w-350px"},le={class:"w-760px"},ie={class:"w-760px"},ne={class:"text-error"},se=R({__name:"index",setup(e){const{t:a}=C(),t=S(),l=S(null),i=U({sender:null,mail_to:"",subject:"",content:""}),n={mail_to:{trigger:["blur","input"],validator:()=>""!==i.mail_to.trim()||new Error(a("Mail.Send.index_9"))},subject:{trigger:["blur","input"],validator:()=>""!==i.subject.trim()||new Error(a("Mail.Send.index_10"))},content:{validator:()=>""!==ae()||new Error(a("Mail.Send.index_11"))}},s=async()=>{var e;await(null==(e=l.value)?void 0:e.validate());const a={mail_from:i.sender||"",mail_to:JSON.stringify(i.mail_to.split(",")),subject:i.subject,content:ae(),subtype:"html",smtp_server:"localhost"};var t;await E(a),i.mail_to="",i.subject="",t="",CKEDITOR.instances.editor.setData(t)};return O((()=>{(async e=>{await r("/static/ckeditor/ckeditor.js?v=1744703330658"),CKEDITOR.replace(e,{customConfig:"/static/ckeditor/config.js?v1.0"})})("editor"),t.value.getList()})),A((()=>{CKEDITOR.remove(CKEDITOR.instances.editor)})),(e,a)=>{const o=J,d=N,r=H,u=Q,p=F;return $(),I("div",null,[L(u,{ref_key:"formRef",ref:l,class:"pt-8px",model:K(i),rules:n},{default:B((()=>[L(o,{label:e.$t("Mail.Send.index_1"),path:"sender"},{default:B((()=>[V("div",te,[L(M,{ref_key:"senderRef",ref:t,value:K(i).sender,"onUpdate:value":a[0]||(a[0]=e=>K(i).sender=e),placeholder:e.$t("Mail.Send.index_2")},null,8,["value","placeholder"])])])),_:1},8,["label"]),L(o,{label:e.$t("Mail.Send.index_3"),path:"mail_to"},{default:B((()=>[V("div",le,[L(d,{value:K(i).mail_to,"onUpdate:value":a[1]||(a[1]=e=>K(i).mail_to=e),placeholder:e.$t("Mail.Send.index_4")},null,8,["value","placeholder"])])])),_:1},8,["label"]),L(o,{label:e.$t("Mail.Send.index_5"),path:"subject"},{default:B((()=>[V("div",ie,[L(d,{value:K(i).subject,"onUpdate:value":a[2]||(a[2]=e=>K(i).subject=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"]),L(o,{label:e.$t("Mail.Send.index_6"),path:"content"},{default:B((()=>a[3]||(a[3]=[V("div",{class:"w-760px h-392px"},[V("textarea",{class:"hidden",name:"editor",id:"editor",rows:"10"})],-1)]))),_:1},8,["label"]),L(o,{label:" ","show-feedback":!1},{default:B((()=>[L(r,{type:"primary",size:"large",onClick:s},{default:B((()=>[D(W(e.$t("Mail.Send.index_7")),1)])),_:1})])),_:1})])),_:1},8,["model"]),L(p,{class:"ml-24px mt-24px"},{default:B((()=>[V("li",ne,W(e.$t("Mail.Send.index_8")),1)])),_:1})])}}}),oe=R({__name:"index",setup(a){const t=S("inbox"),l=[{key:"inbox",label:"Inbox",component:X},{key:"outbox",label:"Outbox",component:Z},{key:"spam",label:"Spam",component:ee},{key:"sender",label:"Sender",component:se}];return(a,i)=>{const n=e,s=Y;return $(),z(s,{class:"p-16px"},{default:B((()=>[L(n,{value:K(t),"onUpdate:value":i[0]||(i[0]=e=>P(t)?t.value=e:null),options:l},null,8,["value"])])),_:1})}}});export{oe as default};
