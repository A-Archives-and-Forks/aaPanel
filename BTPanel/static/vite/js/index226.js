import{_ as e}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1741416570306";import{_ as t}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1741416570306";import{_ as i}from"./index.vue_vue_type_script_setup_true_lang12.js?v=1741416570306";import{_ as a}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1741416570306";import{h as s,U as n,bQ as o,b as p,G as _,av as d}from"./page_layout.js?v=1741416570306";import{b as l,f as r,a as c,c as u}from"./public.js?v=1741416570306";import{F as m,G as x,H as y,I as j}from"./index84.js?v=1741416570306";import{T as f,bO as g}from"./naive.js?v=1741416570306";import{d as k,M as b,j as h,a7 as v,P as w,Q as S,N as C,$ as R,c as P,a0 as T,S as B,ae as U}from"./vue.js?v=1741416570306";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1741416570306";import"./common.js?v=1741416570306";import"./__commonjsHelpers__.js?v=1741416570306";import"./index123.js?v=1741416570306";import"./index.js?v=1741416570306";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1741416570306";import"./site4.js?v=1741416570306";import"./soft.js?v=1741416570306";import"./site.js?v=1741416570306";import"./index223.js?v=1741416570306";import"./index99.js?v=1741416570306";import"./index104.js?v=1741416570306";import"./index.vue_vue_type_script_setup_true_lang.js?v=1741416570306";import"./index.vue_vue_type_script_setup_true_lang10.js?v=1741416570306";import"./index96.js?v=1741416570306";import"./index95.js?v=1741416570306";import"./index.vue_vue_type_script_setup_true_lang15.js?v=1741416570306";import"./theme-chrome.js?v=1741416570306";import"./file.js?v=1741416570306";import"./refersh.js?v=1741416570306";import"./php.js?v=1741416570306";import"./index.vue_vue_type_script_setup_true_lang18.js?v=1741416570306";import"./index103.js?v=1741416570306";const z={class:"p-20px"},L=k({__name:"index",props:{data:{}},setup(k){const{t:L}=b(),O=k,{row:W}=O.data,G=async()=>{await y({s_id:W.id,bak_type:3}),M(),W.backup_count++},{keys:H,table:I,columns:K}=l([{type:"selection",width:40},{key:"filename",title:L("Site.TableRow.index_22"),ellipsis:{tooltip:!0}},{key:"size",title:L("Site.TableRow.index_23"),width:80,render:e=>s(e.size)},{key:"addtime",title:L("Site.TableRow.index_25"),width:150,render:e=>n(e.bak_time)},{key:"bak_type",title:L("Site.TableRow.index_24"),width:100,render:e=>1==e.bak_type?"".concat(L("WP.index_24")):2==e.bak_type?"".concat(L("WP.index_25")):"".concat(L("WP.index_26"))},r({width:190,options:e=>[{label:L("Site.TableOP.index_4"),onClick:()=>{(e=>{c({title:L("Site.Config.index_28"),content:L("Site.Config.index_29"),onConfirm:async({hide:t})=>{t(),await j({bak_id:e.id})}})})(e)}},{label:L("Site.TableOP.index_5"),onClick:()=>{o(encodeURIComponent(e.bak_file),e.filename)}},{label:L("Public.Btn.Del"),onClick:()=>{c({title:L("Site.Batch.index_18"),content:"".concat(L("Site.Batch.index_19")," [").concat(e.filename,"]}"),onConfirm:async({hide:t})=>{await m({bak_id:e.id}),M(),W.backup_count--,t()}})}}]})]),Q=[{key:"del",type:"confirm",label:L("Site.Batch.index_20"),confirm:{title:L("Site.Batch.index_21"),desc:L("Site.Batch.index_11"),columns:[K.value[1]],api:e=>m({bak_id:e.id},!1),done:e=>{M(),W.backup_count-=e.length}}}],$=h({p:1,limit:10,s_id:W.id}),{loading:D,setLoading:F}=u(),M=async()=>{try{F(!0);const{message:e}=await x(v($));p(e)?(I.data=_(e.data)?e.data:[],I.total=d(e.page)):(I.data=[],I.total=0)}finally{H.value=[],F(!1)}};return M(),(s,n)=>{const o=f,p=g,_=a,d=i,l=t,r=e;return w(),S("div",z,[C(r,null,{toolsLeft:R((()=>[C(p,{class:"flex-nowrap!"},{default:R((()=>[C(o,{type:"primary",onClick:G},{default:R((()=>[P(T(s.$t("Site.Config.index_27")),1)])),_:1})])),_:1})])),table:R((()=>[C(_,{"checked-row-keys":B(H),"onUpdate:checkedRowKeys":n[0]||(n[0]=e=>U(H)?H.value=e:null),loading:B(D),"loading-num":1,"max-height":340,data:B(I).data,columns:B(K)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:R((()=>[C(d,{"checked-row-keys":B(H),"onUpdate:checkedRowKeys":n[1]||(n[1]=e=>U(H)?H.value=e:null),data:B(I).data,options:Q},null,8,["checked-row-keys","data"])])),pageRight:R((()=>[C(l,{page:B($).p,"onUpdate:page":n[2]||(n[2]=e=>B($).p=e),"page-size":B($).limit,"onUpdate:pageSize":n[3]||(n[3]=e=>B($).limit=e),"item-count":B(I).total,onRefresh:M},null,8,["page","page-size","item-count"])])),_:1})])}}});export{L as default};
