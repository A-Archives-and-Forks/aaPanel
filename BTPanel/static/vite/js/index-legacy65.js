System.register(["./index-legacy104.js?v=1741416570306","./page_layout-legacy.js?v=1741416570306","./index-legacy.js?v=1741416570306","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1741416570306","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1741416570306","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1741416570306","./vue-legacy.js?v=1741416570306","./public-legacy.js?v=1741416570306","./naive-legacy.js?v=1741416570306"],(function(e,a){"use strict";var t,l,i,n,s,o,d,u,r,p,c,_,g,m,v,y,b,h,f,w,A,x,k,C,j,M,P,E,I,S,U,N,O,z,R,T;return{setters:[e=>{t=e._},e=>{l=e.az,i=e.d,n=e.b,s=e.a},e=>{o=e._},e=>{d=e._},e=>{u=e._},e=>{r=e._},e=>{p=e.r,c=e.N,_=e.c,g=e.d,m=e.M,v=e.j,y=e.f,b=e.P,h=e.Q,f=e.$,w=e.S,A=e.W,x=e.k,k=e.v,C=e._,j=e.ao,M=e.ae},e=>{P=e.d,E=e.b,I=e.f,S=e.a},e=>{U=e.cj,N=e.bO,O=e.bV,z=e.ch,R=e.T,T=e.ce}],execute:function(){const q=e=>l.post("/ssl_domain?action=list_dns_api",e),D=(e("a",(e=>l.post("/ssl_domain?action=create_dns_api",e,{requestOptions:{loading:i.global.t("WP.api.tamper_2"),successMessage:!0}}))),e("e",(e=>l.post("/ssl_domain?action=edit_dns_api",e,{requestOptions:{loading:i.global.t("Crontab.Api.index_5"),successMessage:!0}}))),e("g",(()=>l.post("/ssl_domain?action=get_dns_support"))),e("c",(e=>l.post("/ssl_domain?action=create_dns_record",e,{requestOptions:{loading:i.global.t("WP.api.tamper_2"),successMessage:!0}}))),e("b",(e=>l.post("/ssl_domain?action=edit_dns_record",e,{requestOptions:{loading:i.global.t("Crontab.Api.index_5"),successMessage:!0}}))),p(!1)),L=p([]),B=p([]),X=e=>c(N,{class:"items-center justify-between!"},{default:()=>[c("span",null,[e.label]),e.ssl_info?c(U,{type:e.ssl_info>30?"success":e.ssl_info>0?"warning":"error",class:"px-10px"},{default:()=>[e.ssl_info,_(" "),i.global.t("Crontab.arrange.index_41")]}):""]}),W=e("h",p("CloudFlareDns")),$=e("d",p(B.value[0]?.value)),F=p(!1),Q=async e=>{try{F.value=!0,$.value="";const{message:a}=await q({pid:e,p:1,limit:999});if(n(a)){W.value=a.data[0].name;const e=a.data.length>0?a.data[0].domains:[];B.value=e.map((e=>({label:e.name,value:e.name,ssl_info:e.ssl_info.end_time}))),e.length>0?$.value=e[0].name:($.value="",B.value=[])}}finally{F.value=!1}},V=(e("t",[{label:"A",value:"A"},{label:"AAAA",value:"AAAA"},{label:"MX",value:"MX"},{label:"TXT",value:"TXT"},{label:"NS",value:"NS"},{label:"CAA",value:"CAA"},{label:"CNAME",value:"CNAME"},{label:"ANAME",value:"ANAME"},{label:"ALIAS",value:"ALIAS"}]),g({__name:"manage",props:{rowId:{}},emits:["refresh"],setup(e,{emit:t}){const p=A((()=>s((()=>a.import("./manage-form-legacy.js?v=1741416570306")),void 0))),g=e,x=t,{t:k}=m(),C=v({p:1,limit:10,search_pid:g.rowId,domain:$}),j=P("",{isEdit:!1,id:g.rowId,onRefresh:()=>{G()}}),M=async e=>{await Q(e),G()},U=()=>{j.data.isEdit=!1,j.title="添加解析",j.show=!0},T=()=>{x("refresh"),D.value=!1},{table:q,columns:W}=E([{key:"record",title:"记录",width:"20%"},{key:"record_type",title:"类型",width:"10%"},{key:"record_value",title:"记录值",width:"20%",ellipsis:{tooltip:!0}},{key:"ttl",title:"TTL",width:100,render:e=>1===e.ttl?"自动":e.ttl},{key:"proxy",title:"代理",render:e=>-1===e.proxy?"--":c(O,{value:e.proxy,"onUpdate:value":[a=>e.proxy=a,async e=>{console.log(e)}]},null)},{key:"ps",title:"备注"},I({width:150,options:e=>[{label:k("Public.Btn.Edit"),onClick:()=>{V(e)}},{label:k("Public.Btn.Del"),onClick:()=>{S({title:"删除解析",content:"确定删除该解析吗？",onConfirm:async()=>{var a;await(a={id:e.id},l.post("/ssl_domain?action=delete_dns_record",a,{requestOptions:{loading:i.global.t("Mail.Api.index_37"),successMessage:!0}})),G()}})}}]})]),V=e=>{j.data.isEdit=!0,j.data.row=e,j.title="编辑解析",j.show=!0},G=async()=>{try{q.loading=!0;const{message:a}=await(e=C,l.post("/ssl_domain?action=list_dns_record",e));n(a)&&(q.data=a.data,q.total=a.total)}finally{q.loading=!1}var e};return y((()=>{(async()=>{await Q(g.rowId),G()})()})),(e,a)=>{const t=z,l=N,i=R,n=r,s=u,g=d,m=o;return b(),h("div",null,[c(l,{class:"flex-col! mb-16px"},{default:f((()=>[c(t,{class:"w-200px",filterable:"",value:w(C).search_pid,"onUpdate:value":[a[0]||(a[0]=e=>w(C).search_pid=e),M],options:w(L),"consistent-menu-width":!1},null,8,["value","options"]),c(t,{class:"w-250px",filterable:"",value:w(C).domain,"onUpdate:value":[a[1]||(a[1]=e=>w(C).domain=e),G],options:w(B),"consistent-menu-width":!1,loading:w(F),disabled:!w(B).length,"render-label":w(X)},null,8,["value","options","loading","disabled","render-label"])])),_:1}),c(g,null,{toolsLeft:f((()=>[c(i,{type:"primary",onClick:U},{default:f((()=>a[5]||(a[5]=[_(" 添加解析 ")]))),_:1}),c(i,{onClick:T},{default:f((()=>a[6]||(a[6]=[_(" 返回 ")]))),_:1})])),table:f((()=>[c(n,{loading:w(q).loading,data:w(q).data,columns:w(W)},null,8,["loading","data","columns"])])),pageRight:f((()=>[c(s,{page:w(C).p,"onUpdate:page":a[2]||(a[2]=e=>w(C).p=e),"page-size":w(C).limit,"onUpdate:pageSize":a[3]||(a[3]=e=>w(C).limit=e),"item-count":w(q).total,onRefresh:G},null,8,["page","page-size","item-count"])])),_:1}),c(m,{show:w(j).show,"onUpdate:show":a[4]||(a[4]=e=>w(j).show=e),title:w(j).title,data:w(j).data,width:540,"min-height":300,footer:!0,component:w(p)},null,8,["show","title","data","component"])])}}})),G=g({__name:"index",setup(e){const t=A((()=>s((()=>a.import("./form-legacy7.js?v=1741416570306")),void 0))),{t:g}=m(),y=p(0),M=v({p:1,limit:10}),U=P("",{isEdit:!1,onRefresh:()=>{B()}}),N=()=>{U.data.isEdit=!1,U.title="接入DNS托管商API",U.show=!0},{table:O,columns:z}=E([{key:"name",title:"托管商"},{key:"status",title:"状态",render:e=>1===e.status?"启用":"禁用"},{key:"api_user",title:"账号"},{key:"permission",title:"权限",align:"center"},{key:"domains",title:"托管域名数",align:"center",render:e=>e.domains.length},I({width:150,options:e=>[{label:"域名管理",onClick:()=>{y.value=e.id,W.value=e.name,D.value=!0}},{label:g("Public.Btn.Edit"),onClick:()=>{T(e)}},{label:g("Public.Btn.Del"),onClick:()=>{S({title:"删除托管商API",content:"确定删除该托管商API吗？",onConfirm:async()=>{var a;await(a={id:e.id},l.post("/ssl_domain?action=delete_dns_api",a,{requestOptions:{loading:i.global.t("Mail.Api.index_37"),successMessage:!0}})),B()}})}}]})]),T=e=>{U.data.isEdit=!0,U.data.row=e,U.title="编辑托管商API",U.show=!0},B=async()=>{try{O.loading=!0;const{message:e}=await q(M);n(e)&&(O.data=e.data,O.total=e.total,L.value=e.data.map((e=>({label:e.api_user?`${e.name} (${e.api_user})`:e.name,value:e.id}))))}finally{O.loading=!1}};return B(),(e,a)=>{const l=R,i=r,n=u,s=d,p=o;return b(),h("div",null,[x(c(s,null,{toolsLeft:f((()=>[c(l,{type:"primary",onClick:N},{default:f((()=>a[3]||(a[3]=[_(" 接入DNS托管商API ")]))),_:1})])),table:f((()=>[c(i,{loading:w(O).loading,data:w(O).data,columns:w(z)},null,8,["loading","data","columns"])])),pageRight:f((()=>[c(n,{page:w(M).p,"onUpdate:page":a[0]||(a[0]=e=>w(M).p=e),"page-size":w(M).limit,"onUpdate:pageSize":a[1]||(a[1]=e=>w(M).limit=e),"item-count":w(O).total,onRefresh:B},null,8,["page","page-size","item-count"])])),_:1},512),[[k,!w(D)]]),w(D)?(b(),C(V,{key:0,"row-id":w(y),onRefresh:B},null,8,["row-id"])):j("",!0),c(p,{show:w(U).show,"onUpdate:show":a[2]||(a[2]=e=>w(U).show=e),title:w(U).title,data:w(U).data,width:540,"min-height":280,footer:!0,component:w(t)},null,8,["show","title","data","component"])])}}}),H=g({__name:"index",setup(e){const a=p("host"),l=p(null),i=[{key:"host",label:"托管商列表",component:G}];return(e,n)=>{const s=t,o=T;return b(),C(o,{class:"p-16px"},{default:f((()=>[c(s,{ref_key:"tabsInstRef",ref:l,value:w(a),"onUpdate:value":n[0]||(n[0]=e=>M(a)?a.value=e:null),options:i},null,8,["value"])])),_:1})}}}),J=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"}));e("i",J)}}}));
