System.register(["./index-legacy.js?v=1721298337096","./index-legacy135.js?v=1721298337096","./pinia-legacy.js?v=1721298337096","./vue-legacy.js?v=1721298337096","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1721298337096","./index.vue_vue_type_script_setup_true_lang-legacy3.js?v=1721298337096","./useTableData-legacy.js?v=1721298337096","./index-legacy100.js?v=1721298337096","./site-legacy2.js?v=1721298337096","./useLoading-legacy.js?v=1721298337096","./useTableColumns-legacy.js?v=1721298337096","./Select-legacy.js?v=1721298337096","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1721298337096","./index.vue_vue_type_script_setup_true_lang-legacy12.js?v=1721298337096","./index-legacy72.js?v=1721298337096","./index-legacy68.js?v=1721298337096","./Checkbox-legacy.js?v=1721298337096","./index.vue_vue_type_script_setup_true_lang-legacy13.js?v=1721298337096","./index-legacy64.js?v=1721298337096","./refersh-legacy.js?v=1721298337096","./php-legacy.js?v=1721298337096","./Space-legacy.js?v=1721298337096","./InputGroupLabel-legacy.js?v=1721298337096","./InputGroup-legacy.js?v=1721298337096","./form.vue_vue_type_script_setup_true_lang-legacy2.js?v=1721298337096","./index-legacy136.js?v=1721298337096","./Spin-legacy.js?v=1721298337096","./Progress-legacy.js?v=1721298337096"],(function(e,t){"use strict";var a,l,i,n,o,s,r,d,u,c,p,m,v,h,f,y,g,w,b,_,x,S,C,k,$,P,T,R,L,U,D,E,j,N,A,B,I,O,H,W,q,M,K,z,V,X,G,Q,F,Y,Z,J,ee,te,ae,le,ie,ne,oe,se,re,de,ue,ce,pe,me,ve,he,fe,ye,ge,we,be,_e,xe,Se,Ce,ke,$e,Pe,Te,Re,Le,Ue,De,Ee,je,Ne,Ae,Be,Ie,Oe,He,We,qe,Me,Ke,ze,Ve,Xe,Ge,Qe,Fe,Ye,Ze,Je,et,tt,at,lt,it,nt,ot,st,rt,dt,ut,ct,pt,mt,vt,ht,ft,yt,gt,wt,bt,_t,xt,St,Ct,kt,$t,Pt,Tt,Rt,Lt,Ut,Dt,Et,jt,Nt,At,Bt,It,Ot,Ht;return{setters:[e=>{a=e.at,l=e.e,i=e.h,n=e.k,o=e.n,s=e.B,r=e.g,d=e.v,u=e.j,c=e.al,p=e.ab,m=e.G,v=e.q,h=e.p,f=e.be,y=e.cJ,g=e.z,w=e.cC,b=e.a,_=e.ar,x=e.b5,S=e.cQ,C=e.J},e=>{k=e._},e=>{$=e.s},e=>{P=e.A,T=e.a,R=e.P,L=e.q,U=e.l,D=e.ad,E=e.r,j=e.S,N=e.Z,A=e._,B=e.V,I=e.a3,O=e.W,H=e.b,W=e.f,q=e.a1,M=e.F,K=e.af,z=e.t,V=e.U,X=e.x,G=e.al,Q=e.a5,F=e.a6,Y=e.ag,Z=e.k,J=e.n},e=>{ee=e._},e=>{te=e._},e=>{ae=e.u,le=e._},e=>{ie=e._},e=>{ne=e.V,oe=e.W,se=e.X,re=e.aQ,de=e.aR,ue=e.aS,ce=e.aT,pe=e.aU,me=e.Y,ve=e.Z,he=e._,fe=e.$,ye=e.a0,ge=e.a1,we=e.a2,be=e.a3,_e=e.at,xe=e.au,Se=e.av,Ce=e.aw,ke=e.ax,$e=e.ay,Pe=e.az,Te=e.aA,Re=e.ah,Le=e.ai,Ue=e.aj,De=e.aV,Ee=e.aW,je=e.ak,Ne=e.al,Ae=e.am,Be=e.an,Ie=e.ao,Oe=e.aq,He=e.ar,We=e.as,qe=e.aX,Me=e.aY,Ke=e.aZ,ze=e.a_,Ve=e.a$,Xe=e.b0,Ge=e.b1,Qe=e.a4,Fe=e.a5,Ye=e.a6,Ze=e.a7,Je=e.a8,et=e.a9,tt=e.aa,at=e.ab,lt=e.ac,it=e.ad,nt=e.ae,ot=e.af,st=e.ag,rt=e.aC,dt=e.aD,ut=e.aE,ct=e.aF,pt=e.aG,mt=e.aH},e=>{vt=e.u},e=>{ht=e.B,ft=e.b,yt=e._,gt=e.i},e=>{wt=e._},e=>{bt=e._,_t=e.a},e=>{xt=e._},e=>{St=e._},e=>{Ct=e._},e=>{kt=e._,$t=e.a},e=>{Pt=e._},e=>{Tt=e._},e=>{Rt=e._,Lt=e.a,Ut=e.b},e=>{Dt=e.a,Et=e.b},e=>{jt=e._},e=>{Nt=e._},e=>{At=e._},e=>{Bt=e._},e=>{It=e._},e=>{Ot=e._},e=>{Ht=e._}],execute:function(){var Wt=document.createElement("style");Wt.textContent=".warning[data-v-24287f9c]{padding:8px;border-radius:4px;background-color:#fdf6ec;color:#e6a23c}\n",document.head.appendChild(Wt),e("u",Mt);const qt=Symbol("site-config");function Mt(){return T(qt)}const{t:Kt}=a.global;function zt(){return{key:"name",title:Kt("Site.TableRow.Domain"),render:e=>R(l,{href:`http://${e.name}:${e.port}`,target:"_blank"},{default:()=>[e.name]})}}function Vt(){return{key:"port",title:Kt("Site.TableRow.Port"),width:100}}function Xt(){return{key:"action",title:Kt("Site.TableRow.OPT"),width:80,align:"right",render:()=>R("span",{class:"text-default"},[L("Inoperable")])}}function Gt({delDomain:e}){return{key:"action",title:Kt("Site.TableRow.OPT"),width:80,align:"right",render:t=>R(ht,{options:[{label:Kt("Site.TableOP.Del"),onClick:()=>{i({title:`${Kt("Site.Batch.DeleteDomain.Title")}[${t.name}]`,content:Kt("Site.Batch.DeleteDomain.Content"),onConfirm:async({hide:a})=>{await e(t),a()}})}}]},null)}}const Qt={class:"flex justify-between items-center mb-24px"},Ft={class:"w-400px"},Yt={class:"pr-40px"},Zt=U({__name:"index",setup(e,{expose:t}){const{t:a}=D(),{data:l}=Mt(),i=E(""),r=async()=>{""!==i.value.trim()?(await se({id:l.id,webname:l.name,domain:i.value.trim().split("\n").join(",")}),i.value="",f()):o.error(a("Site.RulesError.Domain"))},d=async e=>{await ne({id:l.id,webname:l.name,domain:e.name,port:e.port}),f()},{keys:u,table:c,columns:p}=ae([{type:"selection",width:40},zt(),Vt(),Gt({delDomain:d})]),m=[{key:"del",type:"confirm",label:a("Site.Batch.DeleteWeb.Label1"),confirm:{title:a("Site.Batch.DeleteWeb.Label2"),desc:a("Site.Batch.DeleteWeb.Content"),api:e=>ne({id:l.id,webname:l.name,domain:e.name,port:e.port},!1),done:()=>{f()},columns:[{key:"name",title:a("Site.Cert.HolderTable.Domain"),ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:v,setLoading:h}=vt(),f=async()=>{try{h(!0);const e={id:l.id},{message:t}=await oe(e);c.data=n(t)?t:[],c.data.length>1?p.value[p.value.length-1]=Gt({delDomain:d}):p.value[p.value.length-1]=Xt()}finally{u.value=[],h(!1)}};return f(),t({init:f}),(e,t)=>{const a=ie,l=s,n=le,o=te,d=ee;return j(),N("div",null,[A("div",Qt,[A("div",Ft,[R(a,{value:O(i),"onUpdate:value":t[0]||(t[0]=e=>H(i)?i.value=e:null)},{default:B((()=>[A("p",null,I(e.$t("Site.Config.Domain.TopTips.0")),1),A("p",null,I(e.$t("Site.Config.Domain.TopTips.1")),1),A("p",null,I(e.$t("Site.Config.Domain.TopTips.2")),1)])),_:1},8,["value"])]),A("div",Yt,[R(l,{type:"primary",onClick:r},{default:B((()=>[L(I(e.$t("Site.Cert.Add")),1)])),_:1})])]),R(d,null,{table:B((()=>[R(n,{"checked-row-keys":O(u),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>H(u)?u.value=e:null),loading:O(v),"max-height":400,data:O(c).data,columns:O(p)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:B((()=>[R(o,{"checked-row-keys":O(u),"onUpdate:checkedRowKeys":t[2]||(t[2]=e=>H(u)?u.value=e:null),data:O(c).data,options:m},null,8,["checked-row-keys","data"])])),_:1})])}}}),Jt={class:"w-140px"},ea={class:"w-120px"},ta=U({__name:"index",setup(e,{expose:a}){const l=q((()=>d((()=>t.import("./rewrite-legacy.js?v=1721298337096")),void 0))),{t:h}=D(),{data:f}=Mt(),y=W({domain:"",dirName:null}),g=E([]),w=async()=>{const e=y.dirName;""!==y.domain.trim()?null!==e?(await de({id:f.id,domain:y.domain,dirName:e}),T()):o.error(h("Site.RulesError.Index_2")):o.error(h("Site.RulesError.Index_1"))},b=r(h("Site.PHP.index_81"),{data:"",filename:"",rlist:[]}),_=e=>{b.data.filename=e.filename,b.data.fileContent=e.data,b.data.rlist=e.rlist,b.show=!0},{keys:x,table:S,columns:C}=ae([{type:"selection",width:40},{key:"domain",title:h("Site.TableRow.Domain"),ellipsis:{tooltip:{width:"trigger"}}},{key:"port",title:h("Site.TableRow.Port"),width:80},{key:"path",title:h("Site.Config.DirectoryConf.Subdir"),width:120,ellipsis:{tooltip:{width:"trigger"}}},ft({width:130,options:e=>[{label:h("Site.TableOP.Rewrite"),onClick:()=>{(async e=>{try{const{message:t}=await ue({id:e.id});u(t)&&_(t)}catch(t){const a=c(t,"meesage.result","");a?o.error(a):i({title:h("Site.Cert.TipsText"),content:h("Site.PHP.index_80"),onConfirm:async({hide:t})=>{const{message:a}=await ce({id:e.id});u(a)&&_(a),t()}})}})(e)}},{label:h("Site.TableOP.Del"),onClick:()=>{i({title:h("Site.Config.DirectoryConf.Content1",[e.path]),content:h("Site.Config.DirectoryConf.Content1"),onConfirm:async({hide:t})=>{await re({id:e.id}),T(),t()}})}}]})]),k=[{key:"del",type:"confirm",label:h("Site.Batch.DeleteWeb.Label1"),confirm:{title:h("Site.Batch.DeleteWeb.Label2"),desc:h("Site.Batch.DeleteWeb.Content"),api:e=>re({id:e.id},!1),done:()=>{T()},columns:[{key:"domain",title:h("Site.TableRow.Domain"),ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:$,setLoading:P}=vt(),T=()=>{y.domain="",y.dirName=null,(async()=>{try{P(!0);const{message:e}=await pe({id:f.id});if(u(e)){const{dirs:t,binding:a}=e;n(t)&&t.length>0?(g.value=t.map((e=>({label:e,value:e}))),y.dirName=t[0]):(g.value=[],y.dirName=null),S.data=n(a)?a:[]}}finally{x.value=[],P(!1)}})()};return T(),a({init:T}),(e,t)=>{const a=p,i=m,n=wt,o=s,r=le,d=te,u=ee,c=v;return j(),N("div",null,[R(i,{class:"items-center",size:16},{default:B((()=>[R(i,{class:"items-center"},{default:B((()=>[A("div",null,I(e.$t("Site.TableRow.Domain")),1),A("div",Jt,[R(a,{value:O(y).domain,"onUpdate:value":t[0]||(t[0]=e=>O(y).domain=e),placeholder:""},null,8,["value"])])])),_:1}),R(i,{class:"items-center"},{default:B((()=>[A("div",null,I(e.$t("Site.Config.DirectoryConf.Subdir")),1),A("div",ea,[R(n,{value:O(y).dirName,"onUpdate:value":t[1]||(t[1]=e=>O(y).dirName=e),options:O(g)},null,8,["value","options"])])])),_:1}),R(o,{type:"primary",onClick:w},{default:B((()=>[L(I(e.$t("Site.Cert.Add")),1)])),_:1})])),_:1}),R(u,{class:"mt-16px"},{table:B((()=>[R(r,{"checked-row-keys":O(x),"onUpdate:checkedRowKeys":t[2]||(t[2]=e=>H(x)?x.value=e:null),loading:O($),"max-height":440,data:O(S).data,columns:O(C)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:B((()=>[R(d,{"checked-row-keys":O(x),"onUpdate:checkedRowKeys":t[3]||(t[3]=e=>H(x)?x.value=e:null),data:O(S).data,options:k},null,8,["checked-row-keys","data"])])),_:1}),R(c,{show:O(b).show,"onUpdate:show":t[4]||(t[4]=e=>O(b).show=e),title:O(b).title,data:O(b).data,width:600,"min-height":488,component:O(l)},null,8,["show","title","data","component"])])}}}),aa={class:"pt-16px"},la={class:"flex-1"},ia={class:"w-240px"},na={class:"mt-8px text-desc"},oa={class:"flex-1"},sa={class:"w-240px"},ra={class:"mt-12px text-desc"},da={class:"my-16px"},ua={class:"text-desc"},ca=A("div",{class:"text-desc"},null,-1),pa={class:"my-20px"},ma=A("div",{class:"text-desc"},null,-1),va={class:"w-240px"},ha={class:"w-240px"},fa={class:"w-240px"},ya=U({__name:"index",setup(e,{expose:t}){const{t:a}=D(),{data:l}=Mt(),i=E("");let n="";const r=async()=>{""!==i.value.trim()?i.value!==n?(await me({id:l.id,name:l.name,path:i.value}),k()):o.success(a("Site.RulesError.OriginalPath")):o.error(a("Site.RulesError.Directory"))},d=E(null),v=E([]),f=async()=>{null!==d.value?(await ve({id:l.id,runPath:d.value}),k()):o.error(a("Site.RulesError.RuntimeDirectory"))},y=E(!1),g=async()=>{await he({id:l.id,path:l.path}),k()},w=E(!1),b=async()=>{await fe({id:l.id}),k()},_=E(!1),x=W({username_get:"",password_get_1:"",password_get_2:""}),S=async e=>{e||(await ye({id:l.id}),k())},C=async()=>{""!==x.username_get.trim()?""!==x.password_get_1.trim()?""!==x.password_get_2.trim()?x.username_get.trim().length<3||x.password_get_1.trim().length<3?o.error(a("Site.RulesError.UserName2")):x.password_get_1.trim()===x.password_get_2.trim()?(await ge({id:l.id,username:x.username_get,password:x.password_get_1}),x.username_get="",x.password_get_1="",x.password_get_2="",k()):o.error(a("Site.RulesError.Password3")):o.error(a("Site.RulesError.Password2")):o.error(a("Site.RulesError.Password1")):o.error(a("Site.RulesError.UserName1"))},k=()=>{(async()=>{const{message:e}=await we({id:l.id});u(e)&&(i.value=e.result||"/www",n=i.value)})(),(async()=>{const{message:e}=await be({id:l.id,path:l.path});if(u(e)){d.value=c(e,"runPath.runPath",null),y.value=c(e,"userini",!1),w.value=c(e,"logs.result",!1),_.value=c(e,"pass.result",!1);const t=c(e,"runPath.dirs",[]);v.value=t.map((e=>({label:e,value:e})))}})()};return k(),t({init:k}),(e,t)=>{const a=xt,l=s,n=m,o=bt,u=wt,c=h,k=yt,$=p,P=_t;return j(),N("div",aa,[R(P,{"label-width":"140"},{default:B((()=>[R(o,{label:e.$t("Site.Lable.SiteDirectory"),"show-feedback":!1},{default:B((()=>[A("div",la,[R(n,null,{default:B((()=>[A("div",ia,[R(a,{value:O(i),"onUpdate:value":t[0]||(t[0]=e=>H(i)?i.value=e:null)},null,8,["value"])]),R(l,{type:"primary",onClick:r},{default:B((()=>[L(I(e.$t("Site.Cert.Save")),1)])),_:1})])),_:1}),A("div",na,I(e.$t("Site.Config.SiteDirectory.Content")),1)])])),_:1},8,["label"]),R(o,{class:"mt-16px",label:e.$t("Site.Lable.RunningDirectory"),"show-feedback":!1},{default:B((()=>[A("div",oa,[R(n,null,{default:B((()=>[A("div",sa,[R(u,{value:O(d),"onUpdate:value":t[1]||(t[1]=e=>H(d)?d.value=e:null),options:O(v)},null,8,["value","options"])]),R(l,{type:"primary",onClick:f},{default:B((()=>[L(I(e.$t("Site.Cert.Save")),1)])),_:1})])),_:1}),A("div",ra,I(e.$t("Site.Config.SiteDirectory.Content1")),1)])])),_:1},8,["label"]),A("div",da,[R(c,{dashed:""})]),R(o,{label:e.$t("Site.Lable.AntiXSS"),"show-feedback":!1},{default:B((()=>[R(n,{class:"items-center"},{default:B((()=>[R(k,{value:O(y),"onUpdate:value":[t[2]||(t[2]=e=>H(y)?y.value=e:null),g]},null,8,["value"]),A("div",ua,I(e.$t("Site.Config.SiteDirectory.Content2")),1)])),_:1})])),_:1},8,["label"]),R(o,{class:"mt-16px",label:e.$t("Site.Lable.WriteAL"),"show-feedback":!1},{default:B((()=>[R(n,{class:"items-center"},{default:B((()=>[R(k,{value:O(w),"onUpdate:value":[t[3]||(t[3]=e=>H(w)?w.value=e:null),b]},null,8,["value"]),ca])),_:1})])),_:1},8,["label"]),A("div",pa,[R(c,{dashed:""})]),R(o,{label:e.$t("Site.Lable.PasswordAccess"),"show-feedback":!1},{default:B((()=>[R(n,{class:"items-center"},{default:B((()=>[R(k,{value:O(_),"onUpdate:value":[t[4]||(t[4]=e=>H(_)?_.value=e:null),S]},null,8,["value"]),ma])),_:1})])),_:1},8,["label"]),O(_)?(j(),N(M,{key:0},[R(o,{class:"mt-16px",label:e.$t("Site.Lable.Authorized"),"show-feedback":!1},{default:B((()=>[A("div",va,[R($,{value:O(x).username_get,"onUpdate:value":t[5]||(t[5]=e=>O(x).username_get=e),placeholder:e.$t("Site.Placeholder.Index_7")},null,8,["value","placeholder"])])])),_:1},8,["label"]),R(o,{class:"mt-16px",label:e.$t("Site.Lable.PasswordAccess"),"show-feedback":!1},{default:B((()=>[A("div",ha,[R($,{value:O(x).password_get_1,"onUpdate:value":t[6]||(t[6]=e=>O(x).password_get_1=e),type:"password",placeholder:e.$t("Site.Placeholder.Index_7")},null,8,["value","placeholder"])])])),_:1},8,["label"]),R(o,{class:"mt-16px",label:e.$t("Site.Lable.RepeatPassword"),"show-feedback":!1},{default:B((()=>[A("div",fa,[R($,{value:O(x).password_get_2,"onUpdate:value":t[7]||(t[7]=e=>O(x).password_get_2=e),type:"password",placeholder:e.$t("Site.Placeholder.Index_7")},null,8,["value","placeholder"])])])),_:1},8,["label"]),R(o,{class:"mt-16px",label:" ","show-feedback":!1},{default:B((()=>[R(l,{type:"primary",onClick:C},{default:B((()=>[L(I(e.$t("Site.Cert.Save")),1)])),_:1})])),_:1})],64)):K("",!0)])),_:1})])}}}),ga={class:"p-20px"},wa={class:"w-280px"},ba={class:"w-280px"},_a={class:"w-280px"},xa={class:"w-280px"},Sa=U({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:a}=D(),l=e,{isEdit:i,siteId:n,row:o,getList:s}=l.data,r=E(null),d=W({name:"",site_dir:"",username:"",password:""}),u={name:{required:!0,message:a("Site.RulesError.Name"),trigger:["blur","input"]},site_dir:{required:!0,message:a("Site.RulesError.Path"),trigger:["blur","input"]},username:{required:!0,message:a("Site.RulesError.UserName1"),trigger:["blur","input"]},password:{required:!0,message:a("Site.RulesError.Password1"),trigger:["blur","input"]}};return i&&o&&(d.name=o.name,d.site_dir=o.site_dir),t({onConfirm:async({hide:e})=>{await(r.value?.validate()),i?await _e({id:n,name:d.name,username:d.username,password:d.password}):await xe({...z(d),id:n}),s?.(),e()}}),(e,t)=>{const a=p,l=bt,n=_t,o=Ct;return j(),N("div",ga,[R(n,{ref_key:"formRef",ref:r,model:O(d),rules:u},{default:B((()=>[R(l,{label:e.$t("Site.TableRow.Name"),path:"name"},{default:B((()=>[A("div",wa,[R(a,{value:O(d).name,"onUpdate:value":t[0]||(t[0]=e=>O(d).name=e),disabled:O(i),placeholder:""},null,8,["value","disabled"])])])),_:1},8,["label"]),R(l,{label:e.$t("Site.TableRow.Path"),path:"site_dir"},{default:B((()=>[A("div",ba,[R(a,{value:O(d).site_dir,"onUpdate:value":t[1]||(t[1]=e=>O(d).site_dir=e),disabled:O(i),placeholder:"Enter the path: /text/，/test/api"},null,8,["value","disabled"])])])),_:1},8,["label"]),R(l,{label:e.$t("Site.Lable.UserName"),path:"username"},{default:B((()=>[A("div",_a,[R(a,{value:O(d).username,"onUpdate:value":t[2]||(t[2]=e=>O(d).username=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"]),R(l,{label:e.$t("Site.Lable.Password"),path:"password"},{default:B((()=>[A("div",xa,[R(a,{value:O(d).password,"onUpdate:value":t[3]||(t[3]=e=>O(d).password=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"])])),_:1},8,["model"]),R(o,{class:"mt-4px"},{default:B((()=>[A("li",null,I(e.$t("Site.Config.LimitAccess.Tips.0")),1),A("li",null,I(e.$t("Site.Config.LimitAccess.Tips.1")),1)])),_:1})])}}}),Ca=U({__name:"index",setup(e,{expose:t}){const{t:a}=D(),{data:l}=Mt(),{keys:n,table:o,columns:d}=ae([{type:"selection",width:40},{key:"name",title:a("Site.TableRow.Name"),ellipsis:{tooltip:{width:"trigger"}}},{key:"site_dir",title:a("Site.TableRow.Path"),ellipsis:{tooltip:{width:"trigger"}}},ft({width:130,options:e=>[{label:a("Site.TableOP.Edit"),onClick:()=>{g(e)}},{label:a("Site.TableOP.Del"),onClick:()=>{i({title:`${a("Site.TableOP.Delete")} [${e.name}]`,content:a("Site.Batch.DeleteDomain.Content1"),onConfirm:async({hide:t})=>{await Se({id:l.id,name:e.name}),h(),t()}})}}]})]),c=[{key:"del",type:"confirm",label:a("Site.Batch.DeleteWeb.Label1"),confirm:{title:a("Site.Batch.DeleteWeb.Label2"),desc:a("Site.Batch.DeleteWeb.Content"),columns:[d.value[1]],api:e=>Se({id:l.id,name:e.name},!1),done:()=>{h()}}}],{loading:p,setLoading:m}=vt(),h=async()=>{try{m(!0);const{message:e}=await Ce({id:l.id});if(u(e)){o.data=[];for(const[t,a]of Object.entries(e))if(l.name===t){o.data=a;break}}}finally{n.value=[],m(!1)}},f=r(a("Site.Config.LimitAccess.Add"),{row:void 0,siteId:l.id,isEdit:!1,getList:h}),y=()=>{f.data.isEdit=!1,f.title=a("Site.Config.LimitAccess.Add"),f.show=!0},g=e=>{f.data.row=e,f.data.isEdit=!0,f.title=a("Site.Config.LimitAccess.Edit"),f.show=!0};return h(),t({init:h}),(e,t)=>{const a=s,l=le,i=te,r=ee,u=Ct,m=v;return j(),N("div",null,[R(r,null,{toolsLeft:B((()=>[R(a,{type:"primary",onClick:y},{default:B((()=>[L(I(e.$t("Site.Config.LimitAccess.Add")),1)])),_:1})])),table:B((()=>[R(l,{"checked-row-keys":O(n),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>H(n)?n.value=e:null),"row-key":"name",loading:O(p),"max-height":440,data:O(o).data,columns:O(d)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:B((()=>[R(i,{"checked-row-keys":O(n),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>H(n)?n.value=e:null),"row-key":"name",data:O(o).data,options:c},null,8,["checked-row-keys","data"])])),_:1}),R(u,{class:"mt-16px"},{default:B((()=>[A("li",null,I(e.$t("Site.Config.LimitAccess.Tips.0")),1),A("li",null,I(e.$t("Site.Config.LimitAccess.Tips.1")),1)])),_:1}),R(m,{show:O(f).show,"onUpdate:show":t[2]||(t[2]=e=>O(f).show=e),title:O(f).title,data:O(f).data,width:480,footer:!0,component:Sa},null,8,["show","title","data"])])}}}),ka={class:"p-20px"},$a={class:"w-280px"},Pa={class:"w-280px"},Ta={class:"w-280px"},Ra=U({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:a}=D(),l=e,{isEdit:i,siteName:n,row:o,getList:s}=l.data,r=E(null),d=W({deny_name:"",suffix:"php|jsp",dir:""}),u={deny_name:{required:!0,message:a("Site.Placeholder.Index_4"),trigger:["blur","input"]},suffix:{required:!0,message:a("Site.Placeholder.Index_5"),trigger:["blur","input"]},dir:{required:!0,message:a("Site.Placeholder.Index_6"),trigger:["blur","input"]}},c=()=>({...z(d),dir:d.dir.replace(/\/$/,"")+"/",website:n});return i&&o&&(d.deny_name=o.name,d.suffix=o.suffix,d.dir=o.dir),t({onConfirm:async({hide:e})=>{await(r.value?.validate()),i?await ke(c()):await $e(c()),s?.(),e()}}),(e,t)=>{const a=p,l=bt,n=_t,o=Ct;return j(),N("div",ka,[R(n,{ref_key:"formRef",ref:r,model:O(d),rules:u},{default:B((()=>[R(l,{label:e.$t("Site.TableRow.Name"),path:"deny_name"},{default:B((()=>[A("div",$a,[R(a,{value:O(d).deny_name,"onUpdate:value":t[0]||(t[0]=e=>O(d).deny_name=e),disabled:O(i),placeholder:e.$t("Site.Placeholder.Index_1")},null,8,["value","disabled","placeholder"])])])),_:1},8,["label"]),R(l,{label:e.$t("Site.TableRow.Suffix"),path:"suffix"},{default:B((()=>[A("div",Pa,[R(a,{value:O(d).suffix,"onUpdate:value":t[1]||(t[1]=e=>O(d).suffix=e),placeholder:e.$t("Site.Placeholder.Index_2")},null,8,["value","placeholder"])])])),_:1},8,["label"]),R(l,{label:e.$t("Site.TableRow.Path"),path:"dir"},{default:B((()=>[A("div",Ta,[R(a,{value:O(d).dir,"onUpdate:value":t[2]||(t[2]=e=>O(d).dir=e),placeholder:e.$t("Site.Placeholder.Index_3")},null,8,["value","placeholder"])])])),_:1},8,["label"])])),_:1},8,["model"]),R(o,{class:"mt-4px"},{default:B((()=>[A("li",null,I(e.$t("Site.PHP.index_72")),1),A("li",null,I(e.$t("Site.PHP.index_73")),1),A("li",null,I(e.$t("Site.PHP.index_74")),1),A("li",null,I(e.$t("Site.PHP.index_75")),1),A("li",null,I(e.$t("Site.PHP.index_76")),1)])),_:1})])}}}),La=U({__name:"index",setup(e,{expose:t}){const{t:a}=D(),{data:l}=Mt(),{keys:o,table:d,columns:u}=ae([{type:"selection",width:40},{key:"name",title:a("Site.TableRow.Name"),ellipsis:{tooltip:{width:"trigger"}}},{key:"dir",title:a("Site.TableRow.Path"),ellipsis:{tooltip:{width:"trigger"}}},{key:"suffix",title:a("Site.TableRow.Suffix"),ellipsis:{tooltip:{width:"trigger"}}},ft({width:130,options:e=>[{label:a("Site.TableOP.Edit"),onClick:()=>{g(e)}},{label:a("Site.TableOP.Del"),onClick:()=>{i({title:`${a("Site.TableOP.Delete")} [${e.name}]`,content:a("Site.Batch.DeleteDomain.Content1"),onConfirm:async({hide:t})=>{await Pe({website:l.name,deny_name:e.name}),h(),t()}})}}]})]),c=[{key:"del",type:"confirm",label:a("Site.Batch.DeleteWeb.Label1"),confirm:{title:a("Site.Batch.DeleteWeb.Label2"),desc:a("Site.Batch.DeleteWeb.Content"),columns:[u.value[1]],api:e=>Pe({website:l.name,deny_name:e.name},!1),done:()=>{h()}}}],{loading:p,setLoading:m}=vt(),h=async()=>{try{m(!0);const{message:e}=await Te({website:l.name});d.data=n(e)?e:[]}finally{o.value=[],m(!1)}},f=r(a("Site.Config.LimitAccess.Add"),{row:void 0,siteName:l.name,isEdit:!1,getList:h}),y=()=>{f.data.row=void 0,f.data.isEdit=!1,f.title=a("Site.Config.LimitAccess.Add"),f.show=!0},g=e=>{f.data.row=e,f.data.isEdit=!0,f.title=a("Site.Config.LimitAccess.Edit"),f.show=!0};return h(),t({init:h}),(e,t)=>{const a=s,l=le,i=te,n=ee,r=Ct,m=v;return j(),N("div",null,[R(n,null,{toolsLeft:B((()=>[R(a,{type:"primary",onClick:y},{default:B((()=>[L(I(e.$t("Site.Config.LimitAccess.Add")),1)])),_:1})])),table:B((()=>[R(l,{"checked-row-keys":O(o),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>H(o)?o.value=e:null),"row-key":"name",loading:O(p),"max-height":440,data:O(d).data,columns:O(u)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:B((()=>[R(i,{"checked-row-keys":O(o),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>H(o)?o.value=e:null),"row-key":"name",data:O(d).data,options:c},null,8,["checked-row-keys","data"])])),_:1}),R(r,{class:"mt-16px"},{default:B((()=>[A("li",null,I(e.$t("Site.Config.LimitAccess.Tips.2"))+" |",1),A("li",null,I(e.$t("Site.Config.LimitAccess.Tips.3")),1),A("li",null,I(e.$t("Site.Config.LimitAccess.Tips.4")),1),A("li",null,I(e.$t("Site.Config.LimitAccess.Tips.5")),1)])),_:1}),R(m,{show:O(f).show,"onUpdate:show":t[2]||(t[2]=e=>O(f).show=e),title:O(f).title,data:O(f).data,width:480,footer:!0,component:Ra},null,8,["show","title","data"])])}}}),Ua=U({__name:"index",setup(e){const{t:t}=D(),a=E("limit"),l=[{key:"limit",label:t("Site.Config.Limit"),component:Ca},{key:"deny",label:t("Site.Config.Deny"),component:La}];return(e,t)=>{const i=St;return j(),V(i,{value:O(a),"onUpdate:value":t[0]||(t[0]=e=>H(a)?a.value=e:null),options:l},null,8,["value"])}}}),Da={class:"pt-8px"},Ea={class:"w-200px"},ja={class:"flex flex-col"},Na={class:"w-200px"},Aa={class:"mt-8px text-desc"},Ba={class:"flex flex-col"},Ia={class:"w-200px"},Oa={class:"mt-8px text-desc"},Ha={class:"flex flex-col"},Wa={class:"w-200px"},qa={class:"mt-8px text-desc"},Ma=U({__name:"index",setup(e,{expose:t}){const{t:a}=D(),{data:l}=Mt(),i=E(null),n=W({status:!1,type:0,perserver:300,perip:25,limit_rate:512}),o={perserver:{trigger:["blur","change"],validator:()=>!!n.perserver||new Error(a("Site.RulesError.Concurrency"))},perip:{trigger:["blur","change"],validator:()=>!!n.perip||new Error(a("Site.RulesError.SingleIP"))},limit_rate:{trigger:["blur","change"],validator:()=>!!n.limit_rate||new Error(a("Site.RulesError.Traffic"))}},r=E([{label:"BBS/Blog",value:0,items:{perserver:300,perip:25,limit_rate:512}},{label:"Photofolio",value:1,items:{perserver:200,perip:10,limit_rate:1024}},{label:"Download",value:2,items:{perserver:50,perip:3,limit_rate:2048}},{label:"Mall",value:3,items:{perserver:500,perip:10,limit_rate:2048}},{label:"Portal",value:4,items:{perserver:400,perip:15,limit_rate:1024}},{label:"Corporate",value:5,items:{perserver:60,perip:10,limit_rate:512}},{label:"Video",value:6,items:{perserver:150,perip:4,limit_rate:1024}},{label:"Customize",value:7,items:{perserver:0,perip:0,limit_rate:0}}]),d=async e=>{e?m():(await Re({id:l.id}),v())},c=(e,t)=>{const{items:a}=t;u(a)&&p(a)},p=e=>{n.perserver=e.perserver,n.perip=e.perip,n.limit_rate=e.limit_rate},m=async()=>{await(i.value?.validate()),await Le({id:l.id,perserver:n.perserver,perip:n.perip,limit_rate:n.limit_rate}),v()},v=async()=>{const{message:e}=await Ue({id:l.id});u(e)&&(n.status=0!=e.perserver,p(r.value[0].items),f(e.perserver)&&0!=e.perserver&&(n.perserver=e.perserver),f(e.perip)&&0!=e.perip&&(n.perip=e.perip),f(e.limit_rate)&&0!=e.limit_rate&&(n.limit_rate=e.limit_rate))};return v(),t({init:v}),(e,t)=>{const a=kt,l=bt,u=wt,p=y,v=s,h=_t;return j(),N("div",Da,[R(h,{ref_key:"formRef",ref:i,"label-width":"150",class:"px-8px",model:O(n),rules:o},{default:B((()=>[R(l,{label:" "},{default:B((()=>[R(a,{checked:O(n).status,"onUpdate:checked":[t[0]||(t[0]=e=>O(n).status=e),d]},{default:B((()=>[L(I(e.$t("Site.Config.TrafficCofig.Tips.0")),1)])),_:1},8,["checked"])])),_:1}),R(l,{label:e.$t("Site.Lable.Limit"),path:"type"},{default:B((()=>[A("div",Ea,[R(u,{value:O(n).type,"onUpdate:value":[t[1]||(t[1]=e=>O(n).type=e),c],options:O(r)},null,8,["value","options"])])])),_:1},8,["label"]),R(l,{label:e.$t("Site.Lable.Concurrency"),path:"perserver"},{default:B((()=>[A("div",ja,[A("div",Na,[R(p,{value:O(n).perserver,"onUpdate:value":t[2]||(t[2]=e=>O(n).perserver=e),"show-button":!1,min:0},null,8,["value"])]),A("div",Aa,I(e.$t("Site.Config.TrafficCofig.Tips.1")),1)])])),_:1},8,["label"]),R(l,{label:e.$t("Site.Lable.BlockIP"),path:"perip"},{default:B((()=>[A("div",Ba,[A("div",Ia,[R(p,{value:O(n).perip,"onUpdate:value":t[3]||(t[3]=e=>O(n).perip=e),"show-button":!1,min:0},null,8,["value"])]),A("div",Oa,I(e.$t("Site.Config.TrafficCofig.Tips.2")),1)])])),_:1},8,["label"]),R(l,{label:e.$t("Site.Config.Traffic"),path:"limit_rate"},{default:B((()=>[A("div",Ha,[A("div",Wa,[R(p,{value:O(n).limit_rate,"onUpdate:value":t[4]||(t[4]=e=>O(n).limit_rate=e),"show-button":!1,min:0},null,8,["value"])]),A("div",qa,I(e.$t("Site.Config.TrafficCofig.Tips.3")),1)])])),_:1},8,["label"]),R(l,{label:" "},{default:B((()=>[R(v,{type:"primary",onClick:m},{default:B((()=>[L(I(e.$t("Site.Cert.Save")),1)])),_:1})])),_:1})])),_:1},8,["model"])])}}}),Ka={class:"w-420px"},za={class:"mt-8px"},Va=U({__name:"index",setup(e,{expose:t}){const{data:a}=Mt(),l=E(""),i=async()=>{const{message:e}=await De({id:a.id});u(e)&&(l.value=g(e.result)?e.result.split(",").join("\n"):"")},n=async()=>{await Ee({id:a.id,Index:l.value.trim().split("\n").join(",")}),i()};return i(),t({init:i}),(e,t)=>{const a=p,i=s,o=Ct;return j(),N("div",null,[A("div",Ka,[R(a,{value:O(l),"onUpdate:value":t[0]||(t[0]=e=>H(l)?l.value=e:null),type:"textarea",autosize:{minRows:12,maxRows:12},placeholder:""},null,8,["value"])]),A("div",za,[R(i,{type:"primary",onClick:n},{default:B((()=>[L(I(e.$t("Site.Cert.Save")),1)])),_:1})]),R(o,{class:"mt-16px"},{default:B((()=>[A("li",null,I(e.$t("Site.PHP.index_79")),1)])),_:1})])}}}),Xa={class:"mt-8px"},Ga=U({__name:"index",setup(e,{expose:t}){const{data:a}=Mt(),l=w(),i=E(null),n=E((()=>{const{webserver:e}=l;return`/www/server/panel/vhost/${"openlitespeed"===e?`${e}/detail`:e}/${a.name}.conf`})()),o=async()=>{i.value?.getContent()},r=()=>{i.value?.saveFile()};return X((()=>{o()})),t({init:o}),(e,t)=>{const a=s,l=Ct;return j(),N("div",null,[R(Pt,{ref_key:"configRef",ref:i,path:O(n),"onUpdate:path":t[0]||(t[0]=e=>H(n)?n.value=e:null),height:"500"},null,8,["path"]),A("div",Xa,[R(a,{type:"primary",onClick:r},{default:B((()=>[L(I(e.$t("Site.Cert.Save")),1)])),_:1})]),R(l,{class:"mt-16px"},{default:B((()=>[A("li",null,I(e.$t("Site.Config.ConfConfig.Tips.0")),1),A("li",null,I(e.$t("Site.Config.ConfConfig.Tips.1")),1)])),_:1})])}}}),Qa={class:"p-8"},Fa=A("li",null,"Directory temporarily only supports reading alarm operation",-1),Ya=U({__name:"form",setup(e,{expose:t}){const a=E(null),l=E(!1),i={path:{required:!0,message:"Please select the file directory",trigger:["blur","change"]},operation:{type:"array",required:!0,trigger:"change",message:"please select"}},n=W({path:"",operation:[]}),o=(e,t)=>{"dir"===t.type?(l.value=!0,n.operation=[0]):(l.value=!1,n.operation=[0,1,2])};return t({onConfirm:async()=>{await(a.value?.validate())}}),(e,t)=>{const s=xt,r=bt,d=kt,u=jt,c=$t,p=_t,v=m,h=Ct;return j(),N("div",Qa,[R(v,null,{default:B((()=>[R(p,{ref_key:"formRef",ref:a,model:O(n),rules:i},{default:B((()=>[R(r,{label:"Detection path",path:"path"},{default:B((()=>[R(s,{disabled:"",value:O(n).path,"onUpdate:value":t[0]||(t[0]=e=>O(n).path=e),"checked-type":["dir","file"],placeholder:"Please select the file directory",onChange:o},null,8,["value"])])),_:1}),R(r,{label:"Alert operation",path:"operation"},{default:B((()=>[R(c,{value:O(n).operation,"onUpdate:value":t[1]||(t[1]=e=>O(n).operation=e)},{default:B((()=>[R(u,null,{default:B((()=>[R(d,{value:0},{default:B((()=>[L(" Read ")])),_:1}),R(d,{value:1,disabled:O(l)},{default:B((()=>[L(" delete ")])),_:1},8,["disabled"]),R(d,{value:2,disabled:O(l)},{default:B((()=>[L(" Modify/increase ")])),_:1},8,["disabled"])])),_:1})])),_:1},8,["value"])])),_:1})])),_:1},8,["model"])])),_:1}),R(h,{class:"mt-16px"},{default:B((()=>[Fa])),_:1})])}}}),Za={class:"p-5"},Ja=A("img",{src:Rt,class:"w-5"},null,-1),el={class:"mt-16px"},tl=A("li",null," The security alarm will monitor the behavior of the current website access to the non -current website file (for example: your site a.COM visited the file or directory of the site B.COM). ",-1),al=A("li",null,"Police frequency: 60 seconds of alarm behavior will only send an alarm once",-1),ll=U({__name:"monitor",setup(e){const t=E(!1),a=E(!1),l=E([{key:"path",title:"path",ellipsis:{tooltip:{width:"trigger"}}},{key:"type",title:"type",ellipsis:{tooltip:{width:"trigger"}}},{key:"operation",title:"Alert operation",ellipsis:{tooltip:{width:"trigger"}}},{key:"name",title:"operate",ellipsis:{tooltip:{width:"trigger"}}}]),i=E([]);return(e,n)=>{const o=s,r=m,d=le,u=Ct,c=v;return j(),N("div",Za,[A("div",null,[R(r,{justify:"space-between"},{default:B((()=>[R(o,{type:"primary",onClick:n[0]||(n[0]=e=>t.value=!0)},{default:B((()=>[L(" Add monitor ")])),_:1}),R(o,null,{icon:B((()=>[Ja])),_:1})])),_:1})]),A("div",el,[R(d,{loading:O(a),"loading-num":6,data:O(i),columns:O(l)},null,8,["loading","data","columns"])]),A("div",null,[R(u,{class:"mt-16px"},{default:B((()=>[tl,al,A("li",null,[R(o,{text:"",class:"color-#20a53a"},{default:B((()=>[L("Tutorial")])),_:1})])])),_:1})]),R(c,{show:O(t),"onUpdate:show":n[1]||(n[1]=e=>H(t)?t.value=e:null),title:"Add file monitor",width:500,"min-height":148,footer:!0,component:Ya},null,8,["show"])])}}}),il=b({},[["render",function(e,t){return j(),N("div",null,"555")}]]),nl=e=>(Q("data-v-24287f9c"),e=e(),F(),e),ol={class:"box mt-16px"},sl=nl((()=>A("div",null,"Site protection",-1))),rl=nl((()=>A("div",null,"today: 0",-1))),dl=nl((()=>A("div",null,"Total alarm: 0",-1))),ul={key:0,class:"items-center warning"},cl=nl((()=>A("img",{src:Ut,class:"h-8"},null,-1))),pl={class:"warning"},ml={class:"color-#f23836"},vl=nl((()=>A("li",null," Based on the PHP kernel monitoring tools, real -time monitoring of other invasive behaviors such as Trojan horses and vulnerabilities, I found that Trojan supports automatic isolation ",-1))),hl=nl((()=>A("li",null," The security alarm will monitor the behavior of the current website access to the non -current website file (for example: your site a.COM visited the file or directory of the site B.COM). When you wait for a cache, please do not turn on this option ",-1))),fl=nl((()=>A("img",{src:Lt,class:"h-10"},null,-1))),yl=U({__name:"index",props:{isInstall:{type:Boolean,default:!1},phpVersion:{default:"PHP"}},setup(e){const t=w(),a=E(!1),n=E(!1),o=E(!1),r=e,d=_(),u=()=>{x({source:114})},c=()=>{const e=a.value?"Open the site security alarm":"Close the site security alarm",t=a.value?"After opening, the alarm notice will be sent when the safety problem is detected. Do you continue?":"After closing, the website will no longer receive a security alarm. Do you continue?";i({title:e,content:t,onConfirm:async()=>{const e=Dt(a.value);console.log(e,"result")},onPublicClose:()=>{a.value=!a.value}})};return(e,i)=>{const p=yt,h=m,f=s,y=Ct,g=l,w=Tt,b=v;return j(),N(M,null,[A("div",ol,[R(w,{install:O(d).isPro,class:"install"},G({default:B((()=>[R(h,{class:"items-center color-#666"},{default:B((()=>[sl,A("div",null,[R(p,{value:O(a),"onUpdate:value":[i[0]||(i[0]=e=>H(a)?a.value=e:null),c]},null,8,["value"])]),rl,dl,O(a)?K("",!0):(j(),N("div",ul,[cl,A("span",pl,[L(" Please open "),A("span",ml,"PHP-"+I(r.phpVersion),1),L(" protection first ")])]))])),_:1}),R(h,{class:"mt-16px"},{default:B((()=>[R(f,{onClick:i[1]||(i[1]=e=>n.value=!0)},{default:B((()=>[L("Monitor")])),_:1}),R(f,{onClick:i[2]||(i[2]=e=>o.value=!0)},{default:B((()=>[L("Trigger log")])),_:1})])),_:1}),R(y,{class:"mt-16px"},{default:B((()=>[vl,hl])),_:1})])),_:2},[r.isInstall?{name:"desc",fn:B((()=>[R(h,{class:"items-center"},{default:B((()=>[fl,A("span",null,[L("If you need to use the [PHP website security alarm] function, please buy first "),R(g,{onClick:u},{default:B((()=>[L("click to buy")])),_:1})])])),_:1})])),key:"0"}:{name:"desc",fn:B((()=>[R(h,{class:"items-center"},{default:B((()=>[A("img",{src:Lt,class:"h-10"}),A("span",null,[L("Currently not installed [PHP website security alarm], "),R(g,null,{default:B((()=>[L("Click to install")])),_:1})])])),_:1})])),key:"1"}]),1032,["install"])]),R(b,{show:O(n),"onUpdate:show":i[3]||(i[3]=e=>H(n)?n.value=e:null),title:"XXXXmonitor",width:1e3,"min-height":148,footer:!1,component:ll},null,8,["show"]),R(b,{show:O(o),"onUpdate:show":i[4]||(i[4]=e=>H(o)?o.value=e:null),title:`[${O(t).siteName}] Site security log`,width:1e3,"min-height":148,footer:!1,component:il},null,8,["show","title"])],64)}}}),gl=b(yl,[["__scopeId","data-v-24287f9c"]]),wl=A("div",null,"PHP version",-1),bl={class:"w-140px"},_l=A("li",null,"Select the version according to your program requirements",-1),xl=A("li",null,"Try not to use PHP5.2 unless you have to, as this can reduce your server security",-1),Sl=A("li",null," PHP7 does not support the MySQL extension. The default installation is mysqli and mysql-pdo ",-1),Cl=A("li",null," [Customize] You can customize the PHP connection information by selecting the available PHP connection configuration ",-1),kl=A("li",null,"[Customize] Currently only support NGINX",-1),$l=A("li",null,"Support TCP or UNIX configuration. Example: 192.168.1.25:9001 or unix:/tmp/php8.sock",-1),Pl={class:"my-16px"},Tl=A("div",null,"Session isolation",-1),Rl=A("li",null," When enabled, session files will be stored in a separate folder, not in a common storage location with other sites ",-1),Ll=A("li",null," Do not enable this option if you are saving sessions to caches such as memcache/redis in your PHP configuration ",-1),Ul={key:0,class:"my-16px"},Dl=U({__name:"index",setup(e,{expose:t}){const{data:a}=Mt(),l=w(),i=E(null),r=E(!1),d=E(!1);let c="";const p=E([]),v=async()=>{null!==i.value?(await je({siteName:a.name,version:i.value,other:c}),l.setRefresh(!0),g()):o.error("请选择PHP版本")},f=async()=>{const{message:e}=await Ie({id:a.id});u(e)&&(r.value=e.result)},y=async e=>{await Ne({id:a.id,act:e?1:0}),f()},g=()=>{(async()=>{const{message:e}=await Et();u(e)&&(d.value=e.php_status)})(),f(),(async()=>{const{message:e}=await Be();n(e)&&(p.value=e.reverse().map((e=>({label:e.name,value:e.version}))))})(),(async()=>{const{message:e}=await Ae({siteName:a.name});u(e)&&(i.value=e.phpversion,c=e.php_other||"")})()};return g(),t({init:g}),(e,t)=>{const a=wt,l=s,n=m,o=Ct,u=h,c=yt;return j(),N("div",null,[R(n,{class:"items-center"},{default:B((()=>[wl,A("div",bl,[R(a,{value:O(i),"onUpdate:value":t[0]||(t[0]=e=>H(i)?i.value=e:null),options:O(p)},null,8,["value","options"])]),A("div",null,[R(l,{type:"primary",onClick:v},{default:B((()=>[L("Switch")])),_:1})])])),_:1}),R(o,{class:"mt-16px"},{default:B((()=>[_l,xl,Sl,Cl,kl,$l])),_:1}),A("div",Pl,[R(u,{dashed:""})]),R(n,{class:"items-center"},{default:B((()=>[Tl,A("div",null,[R(c,{value:O(r),"onUpdate:value":[t[1]||(t[1]=e=>H(r)?r.value=e:null),y]},null,8,["value"])])])),_:1}),R(o,{class:"mt-16px"},{default:B((()=>[Rl,Ll])),_:1}),O(S)?(j(),N("div",Ul,[R(u,{dashed:""}),R(gl,{isInstall:O(d),phpVersion:O(i)},null,8,["isInstall","phpVersion"])])):K("",!0)])}}}),El={class:"mr-16px text-#777"},jl={key:1,class:"text-#777"},Nl={class:"w-200px mr-8px"},Al={class:"w-200px mr-8px"},Bl=U({__name:"index",setup(e,{expose:t}){const a=w(),{data:l}=Mt(),i=E(!1),r=E("--"),d=E("--"),c=E(l.cache_status),m=E(null),v=E([]),h=E(""),f=async()=>{await Oe({s_id:l.id,version:d.value}),_()},y=async e=>{await He({version:l.php_version,sitename:l.name,act:e}),l.cache_status=e,a.setRefresh(!0)},g=async()=>{await We({s_id:l.id})},b=async()=>{m.value?""!==h.value.trim()?await qe({s_id:l.id,user:m.value,new_pass:h.value}):o.error("Please enter new password"):o.error("Please select user")},_=async()=>{const e=o.loading("Getting Wordpress information, please wait...");try{await(async()=>{const{message:e}=await Me({s_id:l.id});u(e)&&(r.value=e.local_v,d.value=e.online_v,i.value=e.update)})(),await(async()=>{const{message:e}=await Ke({s_id:l.id});n(e)&&e.length>0?(v.value=e.map((e=>({label:e,value:e}))),m.value=e[0]):(v.value=[],m.value=null)})()}finally{e.close()}};return _(),t({init:_}),(e,t)=>{const a=s,l=bt,n=kt,o=wt,u=p,w=_t;return j(),N("div",null,[R(w,null,{default:B((()=>[R(l,{label:"WP Version"},{default:B((()=>[O(i)?(j(),N(M,{key:0},[A("div",El,"The current version is: "+I(O(r)),1),R(a,{type:"primary",onClick:f},{default:B((()=>[L("Upgrade to "+I(O(d)),1)])),_:1})],64)):(j(),N("span",jl,"The latest version"))])),_:1}),R(l,{label:"Cache"},{default:B((()=>[R(n,{checked:O(c),"onUpdate:checked":[t[0]||(t[0]=e=>H(c)?c.value=e:null),y],class:"mr-16px"},{default:B((()=>[L(" Open cache ")])),_:1},8,["checked"]),R(a,{type:"primary",onClick:g},{default:B((()=>[L("Purge all cache")])),_:1})])),_:1}),R(l,{label:"Reset password"},{default:B((()=>[A("div",Nl,[R(o,{value:O(m),"onUpdate:value":t[1]||(t[1]=e=>H(m)?m.value=e:null),options:O(v)},null,8,["value","options"])]),A("div",Al,[R(u,{value:O(h),"onUpdate:value":t[2]||(t[2]=e=>H(h)?h.value=e:null),placeholder:"Please enter a new password"},null,8,["value"])]),R(a,{type:"primary",onClick:b},{default:B((()=>[L("Save password")])),_:1})])),_:1})])),_:1})])}}}),Il={class:"pt-8px"},Ol={class:"w-180px mr-8px"},Hl={class:"w-180px"},Wl={class:"w-180px"},ql={class:"w-280px"},Ml={class:"w-180px"},Kl={class:"w-180px"},zl={class:"w-280px"},Vl={class:"flex-1"},Xl={key:0,class:"mb-16px text-error"},Gl={key:1,class:"mb-16px text-error"},Ql=U({__name:"index",setup(e,{expose:t}){const{t:a}=D(),{data:n}=Mt(),o=W({composer_version:"",php_version:"auto",composer_args:"install",composer_cmd:"",repo:"repos.packagist",composer_user:"www",composer_path:n.path}),r=E([]),d=[{label:a("Site.Lable.Install"),value:"install"},{label:a("Site.Lable.Update"),value:"update"}],c=[{label:a("Site.Lable.Official"),value:"repos.packagist"}],m=[{label:a("Site.Lable.Recommend"),value:"www"},{label:a("Site.Lable.Root"),value:"root"}],v=E(""),h=E(""),f=async()=>{await ze({repo:o.repo}),_()},y=async()=>{await Ve({path:n.path}),_()},w=()=>{i({title:a("Site.PHP.index_77"),content:a("Site.PHP.index_78"),onConfirm:async()=>{await Xe({php_version:o.php_version,composer_args:o.composer_args,composer_cmd:o.composer_cmd,repo:o.repo,path:o.composer_path,user:o.composer_user}),_()}})},b=()=>{r.value.unshift({label:a("Site.Lable.Auto"),value:"auto"})},_=async()=>{const{message:e}=await Ge({path:n.path});u(e)&&(o.composer_version=e.result,e.comp_json&&(v.value=e.comp_json),g(e.comp_lock)&&(h.value=e.comp_lock),r.value=e.php_versions.filter((e=>"00"!==e.version)).map((e=>({label:e.name,value:e.version}))),b())};return b(),_(),t({init:_}),(e,t)=>{const a=p,i=s,n=bt,u=wt,g=xt,b=l,_=_t;return j(),N("div",Il,[R(_,{class:"px-8px"},{default:B((()=>[R(n,{label:e.$t("Site.TableRow.Version"),path:"composer_version"},{default:B((()=>[A("div",Ol,[R(a,{value:O(o).composer_version,"onUpdate:value":t[0]||(t[0]=e=>O(o).composer_version=e),disabled:!0,placeholder:""},null,8,["value"])]),R(i,{onClick:f},{default:B((()=>[L("Update")])),_:1})])),_:1},8,["label"]),R(n,{label:e.$t("Site.TableRow.PHP"),path:"php_version"},{default:B((()=>[A("div",Hl,[R(u,{value:O(o).php_version,"onUpdate:value":t[1]||(t[1]=e=>O(o).php_version=e),options:O(r)},null,8,["value","options"])])])),_:1},8,["label"]),R(n,{label:e.$t("Site.TableRow.Parameters"),path:"composer_args"},{default:B((()=>[A("div",Wl,[R(u,{value:O(o).composer_args,"onUpdate:value":t[2]||(t[2]=e=>O(o).composer_args=e),options:d},null,8,["value"])])])),_:1},8,["label"]),R(n,{label:e.$t("Site.TableRow.Extra"),path:"composer_cmd"},{default:B((()=>[A("div",ql,[R(a,{value:O(o).composer_cmd,"onUpdate:value":t[3]||(t[3]=e=>O(o).composer_cmd=e),placeholder:"App name or full Composer command"},null,8,["value"])])])),_:1},8,["label"]),R(n,{label:e.$t("Site.Lable.Source"),path:"repo"},{default:B((()=>[A("div",Ml,[R(u,{value:O(o).repo,"onUpdate:value":t[4]||(t[4]=e=>O(o).repo=e),options:c},null,8,["value"])])])),_:1},8,["label"]),R(n,{label:e.$t("Site.Lable.User"),path:"composer_user"},{default:B((()=>[A("div",Kl,[R(u,{value:O(o).composer_user,"onUpdate:value":t[5]||(t[5]=e=>O(o).composer_user=e),options:m},null,8,["value"])])])),_:1},8,["label"]),R(n,{label:e.$t("Site.Lable.Dir"),path:"composer_path"},{default:B((()=>[A("div",zl,[R(g,{value:O(o).composer_path,"onUpdate:value":t[6]||(t[6]=e=>O(o).composer_path=e)},null,8,["value"])])])),_:1},8,["label"]),R(n,{label:" ","show-feedback":!1},{default:B((()=>[A("div",Vl,[O(v)?(j(),N("div",Xl,I(O(v)),1)):K("",!0),O(h)?(j(),N("div",Gl,[A("span",null,I(O(h)),1),R(b,{onClick:y},{default:B((()=>[L("["+I(e.$t("Site.TableOP.Delete"))+"]",1)])),_:1})])):K("",!0),R(i,{type:"primary",onClick:w},{default:B((()=>[L(I(e.$t("Site.Lable.Execute")),1)])),_:1})])])),_:1})])),_:1})])}}}),Fl={class:"px-20px py-24px"},Yl={class:"w-120px"},Zl={class:"w-120px"},Jl={class:"w-200px"},ei={class:"w-200px"},ti={class:"w-200px"},ai=U({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:a}=D(),l=e,{isEdit:i,siteId:o,siteName:s,row:r,getList:d}=l.data,u=E(null),c=W({redirectname:`${(new Date).valueOf()}`,type:1,holdpath:1,domainorpath:"domain",redirecttype:"301",redirectpath:"",redirectdomain:[],tourl:"http://"}),v={redirectdomain:{trigger:["change"],validator:()=>0!==c.redirectdomain.length||new Error(a("Site.RulesError.RedirectedDomain"))},redirectpath:{trigger:["blur","input"],validator:()=>""!==c.redirectpath.trim()||new Error(a("Site.RulesError.RedirectedPath"))},tourl:{trigger:["blur","input"],validator:()=>""!==c.tourl.trim()||new Error(a("Site.RulesError.RedirectedUrl"))}},h=[{label:"Domain name",value:"domain"},{label:"Path",value:"path"}],f=[{label:"301",value:"301"},{label:"302",value:"302"}],y=E([]),g=()=>{c.redirectdomain=[],c.redirectpath=""},{loading:w,setLoading:b}=vt();return i&&r&&(c.redirectname=r.redirectname,c.type=r.type,c.holdpath=r.holdpath,c.redirecttype=r.redirecttype,c.redirectpath=r.redirectpath,c.domainorpath=r.domainorpath,c.redirectdomain=r.redirectdomain,c.tourl=r.tourl),(async()=>{try{b(!0);const{message:e}=await oe({id:o});y.value=n(e)?e.map((e=>({label:e.name,value:e.name}))):[]}finally{b(!1)}})(),t({onConfirm:async({hide:e})=>{await(u.value?.validate());const t={...z(c),sitename:s};i?await Fe(t):await Qe(t),d?.(),e()}}),(e,t)=>{const a=yt,l=bt,i=m,n=wt,o=p,s=_t,r=Ct;return j(),N("div",Fl,[R(s,{ref_key:"formRef",ref:u,model:O(c),rules:v},{default:B((()=>[R(i,{size:60},{default:B((()=>[R(l,{label:e.$t("Site.Lable.Enable")},{default:B((()=>[R(a,{value:O(c).type,"onUpdate:value":t[0]||(t[0]=e=>O(c).type=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"]),R(l,{label:e.$t("Site.TableRow.KeepUP"),"label-width":"120"},{default:B((()=>[R(a,{value:O(c).holdpath,"onUpdate:value":t[1]||(t[1]=e=>O(c).holdpath=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"])])),_:1}),R(i,{size:30},{default:B((()=>[R(l,{label:e.$t("Site.TableRow.Type")},{default:B((()=>[A("div",Yl,[R(n,{value:O(c).domainorpath,"onUpdate:value":[t[2]||(t[2]=e=>O(c).domainorpath=e),g],options:h},null,8,["value"])])])),_:1},8,["label"]),R(l,{label:e.$t("Site.TableRow.Mode"),"label-width":"70"},{default:B((()=>[A("div",Zl,[R(n,{value:O(c).redirecttype,"onUpdate:value":t[3]||(t[3]=e=>O(c).redirecttype=e),options:f},null,8,["value"])])])),_:1},8,["label"])])),_:1}),"domain"===O(c).domainorpath?(j(),V(l,{key:0,label:e.$t("Site.Lable.Source"),path:"redirectdomain"},{default:B((()=>[A("div",Jl,[R(n,{value:O(c).redirectdomain,"onUpdate:value":t[4]||(t[4]=e=>O(c).redirectdomain=e),multiple:!0,loading:O(w),options:O(y),"max-tag-count":"responsive",placeholder:"Select domain"},null,8,["value","loading","options"])])])),_:1},8,["label"])):K("",!0),"path"===O(c).domainorpath?(j(),V(l,{key:1,label:e.$t("Site.Lable.Redirect"),path:"redirectpath"},{default:B((()=>[A("div",ei,[R(o,{value:O(c).redirectpath,"onUpdate:value":t[5]||(t[5]=e=>O(c).redirectpath=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"])):K("",!0),R(l,{label:e.$t("Site.Lable.Target"),path:"tourl"},{default:B((()=>[A("div",ti,[R(o,{value:O(c).tourl,"onUpdate:value":t[6]||(t[6]=e=>O(c).tourl=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"])])),_:1},8,["model"]),R(r,{class:"mt-12px"},{default:B((()=>[A("li",null,I(e.$t("Site.Config.RedirectConfig.Tips.0")),1),A("li",null,I(e.$t("Site.Config.RedirectConfig.Tips.1")),1),A("li",null,I(e.$t("Site.Config.RedirectConfig.Tips.2")),1),A("li",null,I(e.$t("Site.Config.RedirectConfig.Tips.3")),1),A("li",null,I(e.$t("Site.Config.RedirectConfig.Tips.4")),1),A("li",null,I(e.$t("Site.Config.RedirectConfig.Tips.5")),1)])),_:1})])}}}),li={class:"p-20px"},ii={class:"mt-12px"},ni=U({__name:"config",props:{data:{}},emits:["close"],setup(e,{emit:t}){const a=e,{row:l,siteName:i,getList:n}=a.data,r=t,d=w(),c=E(""),p=E(""),m=E(""),v=async()=>{const{message:e}=await Ze({path:m.value,data:c.value,encoding:p.value});u(e)&&o.success(e.msg),n?.(),r("close")};return(async()=>{const{message:e}=await Ye({sitename:i,redirectname:l.redirectname,webserver:d.webserver});u(e)&&(m.value=e.file,c.value=e.data,p.value=e.encoding)})(),(e,t)=>{const a=s,l=Ct;return j(),N("div",li,[R(Pt,{value:O(c),"onUpdate:value":t[0]||(t[0]=e=>H(c)?c.value=e:null),height:350,"show-tips":!1},null,8,["value"]),A("div",ii,[R(a,{type:"primary",onClick:v},{default:B((()=>[L(I(e.$t("Site.Cert.Save")),1)])),_:1})]),R(l,{class:"mt-24px"},{default:B((()=>[A("li",null,I(e.$t("Site.Config.RedirectConfig.Tips.6")),1)])),_:1})])}}}),oi=U({__name:"index",setup(e,{expose:t}){const{t:a}=D(),{data:o}=Mt(),d=e=>({sitename:e.sitename,redirectname:e.redirectname,tourl:e.tourl,redirectdomain:e.redirectdomain,redirectpath:e.redirectpath,redirecttype:e.redirecttype,domainorpath:e.domainorpath}),{keys:u,table:c,columns:p}=ae([{type:"selection",width:40},{key:"sitename",title:a("Site.TableRow.Type"),ellipsis:{tooltip:{width:"trigger"}}},{key:"redirecttype",title:a("Site.TableRow.Mode"),width:90},{key:"holdpath",title:a("Site.TableRow.KeepUP"),width:140,render:e=>R(l,{type:1===e.holdpath?"primary":"error",onClick:async()=>{await Je({...d(e),type:e.type,holdpath:1===e.holdpath?0:1,status:e.type}),e.holdpath=1===e.holdpath?0:1}},{default:()=>[1===e.holdpath?"Enable":"Turn off"]})},{key:"type",title:"Status",width:100,render:e=>R(gt,{value:e.type,"checked-value":1,"unchecked-value":0,"checked-title":"Running","unchecked-title":"Paused",onClick:async t=>{await Je({...d(e),type:t,holdpath:e.holdpath,status:e.type}),e.type=t}},null)},ft({width:120,options:e=>[{label:a("Site.TableOP.Conf"),onClick:()=>{x(e)}},{label:a("Site.TableOP.Edit"),onClick:()=>{b(e)}},{label:a("Site.TableOP.Del"),onClick:()=>{i({title:`${a("Site.Batch.DeleteRedirection.Label")} [${e.redirectname}]`,content:a("Site.Batch.DeleteRedirection.Content"),onConfirm:async({hide:t})=>{await et({sitename:o.name,redirectname:e.redirectname}),y(),t()}})}}]})]),m=[{key:"del",type:"confirm",label:a("Site.Batch.DeleteWeb.Label1"),confirm:{title:a("Site.Batch.DeleteWeb.Label2"),desc:a("Site.Batch.DeleteWeb.Content"),columns:[p.value[1]],api:e=>et({sitename:o.name,redirectname:e.redirectname},!1),done:()=>{y()}}}],{loading:h,setLoading:f}=vt(),y=async()=>{try{f(!0);const{message:e}=await tt({sitename:o.name});c.data=n(e)?e:[]}finally{u.value=[],f(!1)}},g=r(a("Site.Config.RedirectConfig.Create"),{row:void 0,siteId:o.id,siteName:o.name,isEdit:!1,getList:y}),w=()=>{g.data.row=void 0,g.data.isEdit=!1,g.title=a("Site.Config.RedirectConfig.Create"),g.show=!0},b=e=>{g.data.row=e,g.data.isEdit=!0,g.title=`${a("Site.Config.RedirectConfig.Modify")} [${e.redirectname}]`,g.show=!0},_=r("",{row:void 0,siteName:o.name,getList:y}),x=e=>{_.data.row=e,_.title=`${a("Site.Config.RedirectConfig.Edit")} [${e.redirectname}]`,_.show=!0};return y(),t({init:y}),(e,t)=>{const a=s,l=le,i=te,n=ee,o=v;return j(),N("div",null,[R(n,null,{toolsLeft:B((()=>[R(a,{type:"primary",onClick:w},{default:B((()=>[L(I(e.$t("Site.Config.RedirectConfig.Add")),1)])),_:1})])),table:B((()=>[R(l,{"checked-row-keys":O(u),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>H(u)?u.value=e:null),"row-key":"redirectname",loading:O(h),"max-height":440,data:O(c).data,columns:O(p)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:B((()=>[R(i,{"checked-row-keys":O(u),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>H(u)?u.value=e:null),"row-key":"redirectname",data:O(c).data,options:m},null,8,["checked-row-keys","data"])])),_:1}),R(o,{show:O(g).show,"onUpdate:show":t[2]||(t[2]=e=>O(g).show=e),title:O(g).title,data:O(g).data,width:660,footer:!0,component:ai},null,8,["show","title","data"]),R(o,{show:O(_).show,"onUpdate:show":t[3]||(t[3]=e=>O(_).show=e),title:O(_).title,data:O(_).data,width:580,component:ni},null,8,["show","title","data"])])}}}),si={class:"px-20px py-24px"},ri={class:"w-220px"},di={class:"w-220px"},ui={class:"w-220px"},ci={class:"w-220px"},pi={class:"w-220px"},mi={class:"w-220px"},vi={class:"w-220px"},hi=U({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:a}=D(),i=e,{isEdit:n,siteName:o,row:r,getList:d}=i.data,u=E(null),c=W({type:1,proxyname:"",cachetime:1,proxydir:"/",proxysite:"http://",todomain:"$host",cache:0,advanced:0,sitename:o}),v={proxyname:{trigger:["blur","input"],validator:()=>""!==c.proxyname.trim()||new Error(a("Site.RulesError.ProxyName"))},cachetime:{trigger:["blur","input"],validator:()=>!(1===c.cache&&!c.cachetime)||new Error(a("Site.RulesError.CacheTime"))},proxydir:{trigger:["blur","input"],validator:()=>1!==c.advanced||""!==c.proxydir.trim()||new Error(a("Site.RulesError.ProxyDir"))},proxysite:{trigger:["blur","input"],validator:()=>""!==c.proxysite.trim()||new Error(a("Site.RulesError.RedirectedUrl"))},todomain:{trigger:["blur","input"],validator:()=>""!==c.todomain.trim()||new Error(a("Site.RulesError.Sent"))}},h=e=>{e=(e=e.replace(/^http[s]?:\/\//,"")).replace(/(:|\?|\/|\\)(.*)$/,""),/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(e)?c.todomain="$host":c.todomain=e},f=E([]),g=()=>{f.value.length>=3||f.value.push({sub1:"",sub2:""})};return g(),(()=>{if(n&&r){c.type=r.type,c.cache=r.cache,c.advanced=r.advanced,c.proxyname=r.proxyname,c.cachetime=r.cachetime,c.proxydir=r.proxydir,c.proxysite=r.proxysite,c.todomain=r.todomain,c.sitename=r.sitename;const e=r.subfilter.filter((e=>""!==e.sub1||""!==e.sub2));e.length>0&&(f.value=e)}})(),t({onConfirm:async({hide:e})=>{await(u.value?.validate());const t=(()=>{const e=[{sub1:"",sub2:""},{sub1:"",sub2:""},{sub1:"",sub2:""}];return e.forEach(((e,t)=>{f.value.length-1<t||(e.sub1=f.value[t].sub1,e.sub2=f.value[t].sub2)})),{...z(c),subfilter:e}})();n?await lt(t):await at(t),d?.(),e()}}),(e,t)=>{const a=yt,i=bt,o=m,r=p,d=y,w=Nt,b=At,_=l,x=s,S=_t,C=Ct;return j(),N("div",si,[R(S,{ref_key:"formRef",ref:u,model:O(c),rules:v},{default:B((()=>[R(o,{size:32},{default:B((()=>[R(i,{label:e.$t("Site.Lable.EnableProxy")},{default:B((()=>[R(a,{value:O(c).type,"onUpdate:value":t[0]||(t[0]=e=>O(c).type=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"]),R(i,{label:e.$t("Site.Lable.EnableCache"),"label-width":"100"},{default:B((()=>[R(a,{value:O(c).cache,"onUpdate:value":t[1]||(t[1]=e=>O(c).cache=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"]),R(i,{label:e.$t("Site.Lable.Advanced"),"label-width":"126"},{default:B((()=>[R(a,{value:O(c).advanced,"onUpdate:value":t[2]||(t[2]=e=>O(c).advanced=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1},8,["label"])])),_:1}),R(i,{label:e.$t("Site.Lable.ProxyName"),path:"proxyname"},{default:B((()=>[A("div",ri,[R(r,{value:O(c).proxyname,"onUpdate:value":t[3]||(t[3]=e=>O(c).proxyname=e),disabled:O(n),placeholder:""},null,8,["value","disabled"])])])),_:1},8,["label"]),1===O(c).cache?(j(),V(i,{key:0,label:e.$t("Site.Lable.CacheTime"),path:"cachetime"},{default:B((()=>[A("div",di,[R(b,null,{default:B((()=>[R(d,{value:O(c).cachetime,"onUpdate:value":t[4]||(t[4]=e=>O(c).cachetime=e),min:1,"show-button":!1,placeholder:""},null,8,["value"]),R(w,{class:"w-70px text-center"},{default:B((()=>[L(I(O(c).cachetime>1?"Minutes":"Minute"),1)])),_:1})])),_:1})])])),_:1},8,["label"])):K("",!0),1===O(c).advanced?(j(),V(i,{key:1,label:e.$t("Site.TableRow.ProxyDir"),path:"proxydir"},{default:B((()=>[A("div",ui,[R(r,{value:O(c).proxydir,"onUpdate:value":t[5]||(t[5]=e=>O(c).proxydir=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"])):K("",!0),R(i,{label:e.$t("Site.Lable.Target")},{default:B((()=>[A("div",ci,[R(r,{value:O(c).proxysite,"onUpdate:value":[t[6]||(t[6]=e=>O(c).proxysite=e),h],placeholder:""},null,8,["value"])])])),_:1},8,["label"]),R(i,{label:e.$t("Site.Lable.Sent")},{default:B((()=>[A("div",pi,[R(r,{value:O(c).todomain,"onUpdate:value":t[7]||(t[7]=e=>O(c).todomain=e),placeholder:""},null,8,["value"])])])),_:1},8,["label"]),R(i,{label:e.$t("Site.Lable.ContentReplace")},{default:B((()=>[R(o,{class:"flex-1",vertical:""},{default:B((()=>[(j(!0),N(M,null,Y(O(f),((t,a)=>(j(),V(o,{key:`${a+1}`,class:"items-center"},{default:B((()=>[A("div",mi,[R(r,{value:t.sub1,"onUpdate:value":e=>t.sub1=e,placeholder:e.$t("Site.Placeholder.Source")},null,8,["value","onUpdate:value","placeholder"])]),A("div",vi,[R(r,{value:t.sub2,"onUpdate:value":e=>t.sub2=e,placeholder:e.$t("Site.Placeholder.Replace")},null,8,["value","onUpdate:value","placeholder"])]),A("div",null,[R(_,{type:"error",disabled:0===a&&1===O(f).length,onClick:e=>(e=>{f.value.length<=1||f.value.splice(e,1)})(a)},{default:B((()=>[L(I(e.$t("Site.TableOP.Del")),1)])),_:2},1032,["disabled","onClick"])])])),_:2},1024)))),128)),A("div",null,[R(x,{type:"primary",disabled:O(f).length>=3,onClick:g},{default:B((()=>[A("span",null,I(e.$t("Site.Config.ProxyConfig.Replacement")),1)])),_:1},8,["disabled"])])])),_:1})])),_:1},8,["label"])])),_:1},8,["model"]),R(C,{class:"mt-12px"},{default:B((()=>[A("li",null,I(e.$t("Site.Config.ProxyConfig.Tips.0")),1),A("li",null,I(e.$t("Site.Config.ProxyConfig.Tips.1")),1),A("li",null,I(e.$t("Site.Config.ProxyConfig.Tips.2")),1),A("li",null,I(e.$t("Site.Config.ProxyConfig.Tips.3")),1)])),_:1})])}}}),fi={class:"p-20px"},yi={class:"mt-12px"},gi=U({__name:"config",props:{data:{}},emits:["close"],setup(e,{emit:t}){const a=e,{row:l,siteName:i,getList:n}=a.data,r=t,d=w(),c=E(""),p=E(""),m=E(""),v=async()=>{const{message:e}=await nt({path:m.value,data:c.value,encoding:p.value});u(e)&&o.success(e.msg),n?.(),r("close")};return(async()=>{const{message:e}=await it({sitename:i,proxyname:l.proxyname,webserver:d.webserver});u(e)&&(m.value=e.file,c.value=e.data,p.value=e.encoding)})(),(e,t)=>{const a=s,l=Ct;return j(),N("div",fi,[R(Pt,{value:O(c),"onUpdate:value":t[0]||(t[0]=e=>H(c)?c.value=e:null),height:350,"show-tips":!1},null,8,["value"]),A("div",yi,[R(a,{type:"primary",onClick:v},{default:B((()=>[L(I(e.$t("Site.Cert.Save")),1)])),_:1})]),R(l,{class:"mt-24px"},{default:B((()=>[A("li",null,I(e.$t("Site.Config.RedirectConfig.Tips.6")),1)])),_:1})])}}}),wi=U({__name:"index",setup(e,{expose:t}){const{t:a}=D(),{data:o}=Mt(),d=e=>({proxyname:e.proxyname,sitename:e.sitename,proxydir:e.proxydir,proxysite:e.proxysite,todomain:e.todomain,subfilter:e.subfilter,advanced:e.advanced,cachetime:e.cachetime}),{keys:u,table:c,columns:p}=ae([{type:"selection",width:40},{key:"proxyname",title:a("Site.TableRow.Name"),width:80,ellipsis:{tooltip:{width:"trigger"}}},{key:"proxydir",title:a("Site.TableRow.ProxyDir"),width:90,ellipsis:{tooltip:{width:"trigger"}}},{key:"proxysite",title:a("Site.Lable.Target"),ellipsis:{tooltip:{width:"trigger"}},render:e=>R("a",{class:"text-primary text-primary-hover",href:e.proxysite,target:"_blank"},[e.proxysite])},{key:"cache",title:a("Site.Lable.Cache"),width:90,render:e=>R(l,{type:1===e.cache?"primary":"error",onClick:async()=>{await lt({...d(e),type:e.type,cache:1===e.cache?0:1}),e.cache=1===e.cache?0:1}},{default:()=>[1===e.cache?"Enabled":"Disabled"]})},{key:"type",title:a("Site.TableRow.Status"),width:90,render:e=>R(gt,{value:e.type,"checked-value":1,"unchecked-value":0,"checked-title":"Running","unchecked-title":"Paused",onClick:async t=>{await lt({...d(e),type:t,cache:e.cache}),e.type=t}},null)},ft({width:120,options:e=>[{label:a("Site.TableOP.Conf"),onClick:()=>{x(e)}},{label:a("Site.TableOP.Edit"),onClick:()=>{b(e)}},{label:a("Site.TableOP.Del"),onClick:()=>{i({title:`${a("Site.Batch.DeleteProxy.Label")} [${e.proxyname}]`,content:a("Site.Batch.DeleteProxy.Content"),onConfirm:async({hide:t})=>{await ot({sitename:o.name,proxyname:e.proxyname}),y(),t()}})}}]})]),m=[{key:"del",type:"confirm",label:a("Site.Batch.DeleteWeb.Label1"),confirm:{title:a("Site.Batch.DeleteWeb.Label2"),desc:a("Site.Batch.DeleteWeb.Content"),api:e=>ot({sitename:o.name,proxyname:e.proxyname},!1),done:()=>{y()},columns:[{key:"proxyname",title:a("Site.TableRow.Name"),ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:h,setLoading:f}=vt(),y=async()=>{try{f(!0);const{message:e}=await st({sitename:o.name});c.data=n(e)?e:[]}finally{u.value=[],f(!1)}},g=r(a("Site.Config.ProxyConfig.Create"),{row:void 0,siteName:o.name,isEdit:!1,getList:y}),w=()=>{g.data.row=void 0,g.data.isEdit=!1,g.title=a("Site.Config.ProxyConfig.Create"),g.show=!0},b=e=>{g.data.row=e,g.data.isEdit=!0,g.title=`${a("Site.Config.RedirectConfig.Modify")} [${e.proxyname}]`,g.show=!0},_=r("",{row:void 0,siteName:o.name,getList:y}),x=e=>{_.data.row=e,_.title=`${a("Site.Config.RedirectConfig.Edit")} [${e.proxyname}]`,_.show=!0};return y(),t({init:y}),(e,t)=>{const a=s,l=le,i=te,n=ee,o=v;return j(),N("div",null,[R(n,null,{toolsLeft:B((()=>[R(a,{type:"primary",onClick:w},{default:B((()=>[L(I(e.$t("Site.Config.ProxyConfig.Add")),1)])),_:1})])),table:B((()=>[R(l,{"checked-row-keys":O(u),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>H(u)?u.value=e:null),"row-key":"proxyname",loading:O(h),"max-height":440,data:O(c).data,columns:O(p)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:B((()=>[R(i,{"checked-row-keys":O(u),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>H(u)?u.value=e:null),"row-key":"proxyname",data:O(c).data,options:m},null,8,["checked-row-keys","data"])])),_:1}),R(o,{show:O(g).show,"onUpdate:show":t[2]||(t[2]=e=>O(g).show=e),title:O(g).title,data:O(g).data,width:660,footer:!0,component:hi},null,8,["show","title","data"]),R(o,{show:O(_).show,"onUpdate:show":t[3]||(t[3]=e=>O(_).show=e),title:O(_).title,data:O(_).data,width:580,component:gi},null,8,["show","title","data"])])}}}),bi={class:"pt-8px"},_i=U({__name:"index",setup(e,{expose:t}){const{data:a}=Mt(),l=E();return t({init:()=>{l.value.init()}}),(e,t)=>(j(),N("div",bi,[R(Bt,{ref_key:"formRef",ref:l,site:O(a)},null,8,["site"])]))}}),xi=U({__name:"index",setup(e,{expose:t}){const{data:a}=Mt(),l=E("None"),{loading:i,setLoading:n}=vt(),o=async()=>{try{n(!0);const{message:e}=await rt({siteName:a.name});u(e)&&(l.value=g(e.result)?e.result:"None")}finally{n(!1)}};return o(),t({init:o}),(e,t)=>{const a=It,n=Ot;return j(),V(n,{class:"h-560px",show:O(i)},{default:B((()=>[R(a,{log:O(l)},null,8,["log"])])),_:1},8,["show"])}}}),Si=U({__name:"index",setup(e,{expose:t}){const{data:a}=Mt(),l=E("None"),{loading:i,setLoading:n}=vt(),o=async()=>{try{n(!0);const{message:e}=await dt({siteName:a.name});u(e)&&(l.value=g(e.result)?e.result:"None")}finally{n(!1)}};return o(),t({init:o}),(e,t)=>{const a=It,n=Ot;return j(),V(n,{class:"h-560px",show:O(i)},{default:B((()=>[R(a,{log:O(l)},null,8,["log"])])),_:1},8,["show"])}}}),Ci=U({__name:"logs",props:{data:{}},setup(e){const t=e,{type:a,path:l}=t.data,i=E(""),{loading:n,setLoading:o}=vt();return(async()=>{try{o(!0);const{message:e}=await ut({type:a,path:l});u(e)&&(i.value=e.result)}finally{o(!1)}})(),(e,t)=>{const a=It,l=Ot;return j(),V(l,{class:"w-650px h-550px bg-#282C34",show:O(n)},{default:B((()=>[R(a,{log:O(i)},null,8,["log"])])),_:1},8,["show"])}}}),ki={class:"text-error"},$i={class:"w-400px p-20px"},Pi={class:"mb-16px"},Ti=U({__name:"index",setup(e,{expose:t}){const{t:a}=D(),n=w(),{data:r}=Mt(),d=Z((()=>{let e="";switch(n.webserver){case"nginx":e=".log";break;case"apache":e="-access_log";break;default:e="_ols.access_log"}return`/www/wwwlogs/${r.name}${e}`})),c=Z((()=>{const e=d.value.split("/");return e[e.length-1]})),p=()=>{i({title:a("Site.Config.LogsConfig.ScanTitle"),content:`${a("Site.Config.LogsConfig.ScanContent")} [${c.value}] ${a("Site.Config.LogsConfig.ScanContent1")}`,onConfirm:async({hide:e})=>{await ct({path:d.value}),e(),f()}})},m=E(!1),h=E(0),f=async()=>{m.value=!0,y()},y=(e=0)=>{let t=setTimeout((async()=>{const{message:e}=await pt({path:d.value});u(e)&&(h.value=e.result,h.value>=100?(o.success(a("Site.Config.LogsConfig.Complete")),m.value=!1,h.value=0,k(),clearTimeout(t)):y(1e3))}),e)},g=e=>{C({title:`[${e}] ${a("Site.Config.LogsConfig.Details")}`,data:{type:e,path:d.value},component:Ci})},{table:b,columns:_}=ae([{key:"start_time",title:"Date"},{key:"time",title:a("Site.DelSite.Time"),render:e=>`${e.time.substring(0,4)} s`},{key:"xss",title:a("Site.TableRow.XSS"),render:e=>e.xss>0?R("span",{class:"text-error"},[e.xss]):e.xss},{key:"sql",title:a("Site.TableRow.SQL"),render:e=>e.sql>0?R("span",{class:"text-error"},[e.sql]):e.sql},{key:"san",title:a("Site.TableRow.Scan"),render:e=>e.san>0?R("span",{class:"text-error"},[e.san]):e.san},{key:"php",title:a("Site.TableRow.PHP"),render:e=>e.php>0?R("span",{class:"text-error"},[e.php]):e.php},{key:"ip",title:a("Site.TableRow.IPTop"),render:e=>e.ip>0?R(l,{onClick:()=>{g("ip")}},{default:()=>[e.ip]}):e.ip},{key:"url",title:a("Site.TableRow.URLTop"),render:e=>e.url>0?R(l,{onClick:()=>{g("url")}},{default:()=>[e.url]}):e.url}]),{loading:x,setLoading:S}=vt(),k=async()=>{try{S(!0);const{message:e}=await mt({path:d.value});u(e)&&(b.data=[e])}finally{S(!1)}},$=()=>{k()};return $(),t({init:$}),(e,t)=>{const a=s,i=le,n=ee,o=Ct,r=Ht,d=v;return j(),N("div",null,[R(n,null,{toolsLeft:B((()=>[R(a,{type:"primary",onClick:p},{default:B((()=>[L(I(e.$t("Site.Config.LogsConfig.Scan")),1)])),_:1})])),table:B((()=>[R(i,{loading:O(x),"loading-num":1,data:O(b).data,columns:O(_)},null,8,["loading","data","columns"])])),_:1}),R(o,{class:"mt-16px"},{default:B((()=>[A("li",null,[L(I(e.$t("Site.Config.LogsConfig.Tips.0"))+" ",1),A("span",ki,I(e.$t("Site.Config.LogsConfig.Tips.1")),1),L(") ")]),A("li",null,I(e.$t("Site.Config.LogsConfig.Tips.2")),1),A("li",null,I(e.$t("Site.Config.LogsConfig.Tips.3"))+")",1),A("li",null,I(e.$t("Site.Config.LogsConfig.Tips.4")),1),A("li",null,[R(l,{href:"https://forum.aapanel.com/d/3351-nginx-waf-instructions",target:"_blank"},{default:B((()=>[L(I(e.$t("Site.Config.LogsConfig.Tips.5")),1)])),_:1}),L(" "+I(e.$t("Site.Config.LogsConfig.Tips.6")),1)])])),_:1}),R(d,{show:O(m),"onUpdate:show":t[0]||(t[0]=e=>H(m)?m.value=e:null)},{default:B((()=>[A("div",$i,[A("div",Pi,I(e.$t("Site.Config.LogsConfig.Tips.7")),1),R(r,{type:"line",status:"success",height:24,percentage:O(h),"border-radius":4,"indicator-placement":"inside"},null,8,["percentage"])])])),_:1},8,["show"])])}}}),Ri=U({__name:"index",setup(e,{expose:t}){const{t:a}=D(),{config:l}=Mt(),i=E("access"),n=E(),o=[{key:"access",label:a("Site.Config.LogsConfig.Access"),component:xi},{key:"error",label:a("Site.Config.LogsConfig.Error"),component:Si},{key:"security",label:a("Site.Config.LogsConfig.Security"),component:Ti}];return i.value=l.subMenu||"access",l.subMenu="",t({init:()=>{i.value="access",J((()=>{n.value?.init()}))}}),(e,t)=>{const a=St;return j(),V(a,{value:O(i),"onUpdate:value":t[0]||(t[0]=e=>H(i)?i.value=e:null),ref_key:"tabsRef",ref:n,options:o},null,8,["value"])}}}),Li={class:"h-full"},Ui=U({__name:"index",props:{siteInfo:{},config:{}},setup(e){const{t:a}=D(),l=w(),{siteName:i}=$(l),n=q((()=>d((()=>t.import("./index-legacy149.js?v=1721298337096")),void 0))),o=q((()=>d((()=>t.import("./old-legacy4.js?v=1721298337096")),void 0))),s=e,{siteInfo:r,config:u}=s;i.value=s.siteInfo.name;const c=E();r&&P(qt,{data:r,config:u});const p=E("domain"),m=[{key:"domain",label:a("Site.Config.Manager"),component:Zt},{key:"subdirectory",label:a("Site.Config.Subdirectory"),component:ta},{key:"directory",label:a("Site.Config.Directory"),component:ya},{key:"access",label:a("Site.Config.Limit"),component:Ua},{key:"traffic",label:a("Site.Config.Traffic"),component:Ma},{key:"rewrite",label:a("Site.Config.URL"),component:n},{key:"document",label:a("Site.Config.Indexes"),component:Va},{key:"config",label:a("Site.Config.Conf"),component:Ga},{key:"ssl",label:a("Site.Config.SSL"),component:o},{key:"php",label:a("Site.Config.PHPversion"),component:Dl},{key:"wordpress",label:"Wordpress Setting",show:"WP"===r?.project_type,component:Bl},{key:"composer",label:a("Site.Config.Composer"),component:Ql},{key:"redirect",label:a("Site.Config.Redirect"),component:oi},{key:"proxy",label:a("Site.Config.Proxy"),component:wi},{key:"hotlink",label:a("Site.Config.Hotlink"),component:_i},{key:"logs",label:a("Site.Config.Response"),component:Ri}];return p.value=u.menu||"domain",u.menu="",(e,t)=>{const a=k;return j(),N("div",Li,[R(a,{value:O(p),"onUpdate:value":t[0]||(t[0]=e=>H(p)?p.value=e:null),ref_key:"tabsRef",ref:c,data:m},null,8,["value"])])}}}),Di=Object.freeze(Object.defineProperty({__proto__:null,default:Ui},Symbol.toStringTag,{value:"Module"}));e("i",Di)}}}));
