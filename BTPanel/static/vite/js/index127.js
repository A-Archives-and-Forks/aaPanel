import{_ as e}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1742891699271";import{_ as a}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1742891699271";import{bi as t,W as i,h as s,eI as r,eJ as n,eK as o,I as d,m as l,eL as _}from"./page_layout.js?v=1742891699271";import{b as m,f as p,R as u,a as c,c as b}from"./public.js?v=1742891699271";import{T as f}from"./naive.js?v=1742891699271";import{d as x,O as h,R as w,S as y,P as g,a1 as D,c as j,a2 as k,V as v}from"./vue.js?v=1742891699271";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1742891699271";import"./common.js?v=1742891699271";import"./__commonjsHelpers__.js?v=1742891699271";const L={class:"p-20px"},C=x({__name:"index",props:{data:{}},setup(x){const{t:C}=h(),R=x,{sid:S}=R.data,T=t(),z=async()=>{if(null===S)throw l.error(C("Database.redis.index_8")),new Error(C("Database.redis.index_9"));await _({sid:S}),H()},{table:E,columns:I}=m([{key:"name",title:C("Database.redis.index_36"),width:180,ellipsis:{tooltip:{width:"trigger"}}},{key:"filepath",title:C("Database.redis.index_10"),ellipsis:{tooltip:{width:"trigger"}}},{key:"mtime",title:C("Site.TableRow.index_25"),width:150,render:e=>i(e.mtime)},{key:"size",title:C("Site.TableRow.index_23"),width:80,render:e=>s(e.size)},{key:"sid",title:C("Database.redis.index_11"),width:120,render:e=>{let a="--";for(let t=0;t<T.remoteList.length;t++)if("".concat(T.remoteList[t].id)===e.sid){a=T.remoteList[t].ps||T.remoteList[t].db_host;break}return a}},p({width:100,options:e=>[{label:C("Database.tools.index_3"),onClick:()=>{u({text:C("Database.redis.index_12"),title:C("Database.redis.index_12"),content:C("Database.redis.index_13",[e.name]),onConfirm:async({hide:a})=>{if(null===S)throw new Error(C("Database.redis.index_9"));await r({file:e.filepath,sid:S}),T.setRefresh(!0),a()}})}},{label:C("Public.Btn.Del"),onClick:()=>{c({title:C("Database.redis.index_14"),content:C("Database.redis.index_15",[e.name]),onConfirm:async({hide:a})=>{await n({file:e.filepath}),H(),a()}})}}]})]),{loading:P,setLoading:B}=b(),H=async()=>{try{B(!0);const{message:e}=await o();E.data=d(e)?e:[]}finally{B(!1)}};return H(),(t,i)=>{const s=f,r=a,n=e;return w(),y("div",L,[g(n,null,{toolsLeft:D((()=>[g(s,{type:"primary",onClick:z},{default:D((()=>[j(k(t.$t("Database.index_16")),1)])),_:1})])),table:D((()=>[g(r,{"max-height":400,loading:v(P),columns:v(I),data:v(E).data},null,8,["loading","columns","data"])])),_:1})])}}});export{C as default};
