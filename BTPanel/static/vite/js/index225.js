import{_ as e}from"./index95.js?v=1744703330658";import{_ as t}from"./index.vue_vue_type_script_setup_true_lang.js?v=1744703330658";import{_ as r}from"./index.vue_vue_type_script_setup_true_lang10.js?v=1744703330658";import{_ as a}from"./index99.js?v=1744703330658";import{a$ as l}from"./page_layout.js?v=1744703330658";import{bb as s}from"./site.js?v=1744703330658";import{d as o,O as i,r as p,j as n,f as d,R as _,S as u,P as x,a0 as y,U as m,V as h,a1 as c,$ as v,c as f}from"./vue.js?v=1744703330658";import{ch as P,cn as $,_ as g,bU as S,c0 as b}from"./naive.js?v=1744703330658";import"./index96.js?v=1744703330658";import"./public.js?v=1744703330658";import"./common.js?v=1744703330658";import"./__commonjsHelpers__.js?v=1744703330658";const j={class:"m-15px"},w={class:"w-440px"},k={class:"list-none!"},H={class:"list-none!"},U={class:"list-none!"},q=o({__name:"index",emits:["refresh"],setup(o,{expose:q,emit:E}){const{t:C}=i(),R=E,I=()=>{"2"===z.proxy_type?z.proxy_host="$http_host":z.proxy_host=""},N=e=>{if("2"===z.proxy_type)return void(z.proxy_host="$http_host");let t=e.replace(/^http[s]?:\/\//,"");t=t.replace(/(:|\?|\/|\\)(.*)$/,""),z.proxy_host=t},O=p(null),V=[{label:C("Site.Proxy.index_11"),value:"1"},{label:C("Site.Proxy.index_12"),value:"2"}],z=n({domains:"",proxy_type:"1",url:"http://",unx:"",proxy_host:"$http_host",remark:""}),A={domains:{required:!0,trigger:["blur","change"],validator:(e,t)=>{if(""===t.trim())return new Error(C("Site.PHP.add_site_23"));const r=t.trim().split("\n")[0].split(":")[1];return!(r&&(!l(r)||Number(r)<100))||new Error(C("Site.Proxy.index_13"))}},url:{required:!0,trigger:["blur","change"],validator:(e,t)=>{if(!t.replace(/^http[s]?:\/\//,""))return new Error(C("Site.Proxy.index_14"));let r=t.replace(/^http[s]?:\/\//,"");return r=r.replace(/(:|\?|\/|\\)(.*)$/,""),/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(r)?z.proxy_host="$http_host":z.proxy_host=r,!0}},unx:{required:!0,message:C("Site.PHP.add_site_26"),trigger:["blur","change"]},proxy_host:{required:!0,message:C("Site.PHP.add_site_26"),trigger:["blur","change"]}},B=e=>{const t=e.trim().split("\n")[0].split(":")[0];t&&(z.remark=t)};return d((()=>{})),q({onConfirm:async()=>{var e;await(null==(e=O.value)?void 0:e.validate());let t={remark:z.remark,proxy_type:"1"==z.proxy_type,proxy_pass:"1"==z.proxy_type?z.url:z.unx,domains:z.domains,proxy_host:z.proxy_host};await s(t),R("refresh")}}),(l,s)=>{const o=a,i=P,p=$,n=g,d=r,q=S,E=b,C=t,R=e;return _(),u("div",j,[x(C,{ref_key:"formRef",ref:O,model:h(z),rules:A},{default:y((()=>[x(i,{label:l.$t("Site.PHP.add_site_4"),path:"domains"},{default:y((()=>[m("div",w,[x(o,{value:h(z).domains,"onUpdate:value":[s[0]||(s[0]=e=>h(z).domains=e),B]},{default:y((()=>[m("p",null,c(l.$t("Site.PHP.add_site_5")),1),m("p",null,c(l.$t("Site.PHP.add_site_6")),1),m("p",null,c(l.$t("Site.PHP.add_site_7")),1)])),_:1},8,["value"])])])),_:1},8,["label"]),x(q,null,{default:y((()=>[x(i,{label:l.$t("Site.Proxy.index_1")},{default:y((()=>[x(p,{value:h(z).proxy_type,"onUpdate:value":[s[1]||(s[1]=e=>h(z).proxy_type=e),I],options:V,class:"w-120px"},null,8,["value"])])),_:1},8,["label"]),"1"==h(z).proxy_type?(_(),v(i,{key:0,path:"url",class:"w-310px"},{default:y((()=>[x(n,{value:h(z).url,"onUpdate:value":s[2]||(s[2]=e=>h(z).url=e),onInput:N},null,8,["value"])])),_:1})):(_(),v(i,{key:1,path:"unx",class:"w-310px"},{default:y((()=>[x(d,{"checked-type":["dir","file"],value:h(z).unx,"onUpdate:value":s[3]||(s[3]=e=>h(z).unx=e),onChange:N},null,8,["value"])])),_:1}))])),_:1}),x(i,{label:l.$t("Site.Proxy.index_2"),path:"proxy_host",class:"w-570px"},{default:y((()=>[x(E,{trigger:"hover"},{trigger:y((()=>[x(n,{value:h(z).proxy_host,"onUpdate:value":s[4]||(s[4]=e=>h(z).proxy_host=e)},null,8,["value"])])),default:y((()=>[f(" "+c(l.$t("Site.Proxy.index_4")),1)])),_:1})])),_:1},8,["label"]),x(i,{label:l.$t("Site.Proxy.index_3"),class:"w-570px"},{default:y((()=>[x(n,{value:h(z).remark,"onUpdate:value":s[5]||(s[5]=e=>h(z).remark=e),placeholder:l.$t("Site.Proxy.index_5")},null,8,["value","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"]),x(R,{class:"mt-16px"},{default:y((()=>[m("li",null,c(l.$t("Site.Proxy.index_6")),1),m("li",null,c(l.$t("Site.Proxy.index_7")),1),m("li",k,c(l.$t("Site.Proxy.index_8")),1),m("li",H,c(l.$t("Site.Proxy.index_9")),1),m("li",U,c(l.$t("Site.Proxy.index_10")),1)])),_:1})])}}});export{q as default};
