System.register(["./public-legacy.js?v=1753954525509","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1753954525509","./page_layout-legacy.js?v=1753954525509","./vue-legacy.js?v=1753954525509","./mail-legacy2.js?v=1753954525509","./index-legacy50.js?v=1753954525509","./naive-legacy.js?v=1753954525509","./common-legacy.js?v=1753954525509","./__commonjsHelpers__-legacy.js?v=1753954525509","./index-legacy.js?v=1753954525509","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1753954525509","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1753954525509","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1753954525509"],(function(e,a){"use strict";var l,t,i,o,s,d,n,r,u,c,p,_,m,v,y,f,h,x,b,g,w,k,M,j,D,q,A,S,$,E,U,X,T,B,P,C,R,G,N,W,z,F,Y,L;return{setters:[e=>{l=e.b,t=e.c,i=e.j,o=e.f,s=e.a,d=e._},e=>{n=e._},e=>{r=e.c,u=e.O,c=e.u,p=e.m,_=e.n,m=e.k,v=e._},e=>{y=e.k,f=e.aj,h=e.r,x=e.c,b=e.U,g=e.a1,w=e.a2,k=e.X,M=e.V,j=e.al,D=e.Q,q=e.W,A=e.j,S=e.P,$=e.e,E=e.l,U=e.v,X=e.a3},e=>{T=e.ac,B=e.ad},e=>{P=e.g},e=>{C=e.ay,R=e.bY,G=e.c6,N=e.cF,W=e.cE,z=e.cA,F=e.aq,Y=e.c1,L=e.cG},null,null,null,null,null,null],execute:function(){const a={key:0,class:"color-desc"},O={key:3,class:"color-desc"},V=y({__name:"automatic",props:{domain:{}},setup(e,{expose:s}){const d=f(),n=e,{table:c,columns:p}=l([{key:"type",title:"Type",width:50},{key:"record",title:"Record",width:120,ellipsis:{tooltip:!0}},{key:"value",title:"Value",ellipsis:{tooltip:!0}},{key:"priority",title:"MX priority",render:e=>-1!==e.priority?e.priority:"-",width:90},{key:"status",title:"Status",width:110}]),_=h(),m=x((()=>_.value?.support.includes("auto"))),v=()=>{d.push("/ssl_domain/domain")},{loading:y,setLoading:S}=t();return s({getParseStatus:async()=>{const{message:e}=await i({domain:n.domain});if(r(e)&&(_.value=e,m.value))try{S(!0);const{message:a}=await P({domain:n.domain,hash:e.hash});r(a)&&(c.data=[{type:"A",record:a.A.record,value:a.A.record_value,priority:a.A.priority,status:a.A.status?"Added":"Waiting to add"},{type:"MX",record:a.MX.record,value:a.MX.record_value,priority:a.MX.priority,status:a.MX.status?"Added":"Waiting to add"},...a.TXT.map((e=>({type:"TXT",record:e.record,value:e.record_value,priority:e.priority,status:e.status?"Added":"Waiting to add"})))])}finally{S(!1)}},parseStatus:_,isSupportAuto:m}),(e,l)=>{const t=C,i=R,s=G,d=u,n=o;return b(),g(i,null,{default:w((()=>[k(_)?j("",!0):(b(),M("span",a," *The program will use the APl to automatically add the required DNS records forthe mail server and complete the installation of the SSL certifcate. ")),k(_)?(b(),g(i,{key:1},{default:w((()=>[k(m)?(b(),g(s,{key:1,type:"success"},{default:w((()=>l[2]||(l[2]=[A(" Your domain has been connccted to the domain managementccnter, and you can use this fcature to complcte onc-click deployment. ")]))),_:1,__:[2]})):(b(),g(s,{key:0,type:"error"},{default:w((()=>[D(i,{class:"items-center flex-nowrap!"},{default:w((()=>[l[1]||(l[1]=q("span",null,"Your domain has not yet been integrated with the Domain Name Management Center.",-1)),D(t,{type:"primary",size:"small",ghost:"",onClick:v},{default:w((()=>l[0]||(l[0]=[A("Add Now")]))),_:1,__:[0]})])),_:1,__:[1]})])),_:1})),k(y)?(b(),g(i,{key:2,class:"items-center!"},{default:w((()=>[l[3]||(l[3]=q("span",{class:"color-desc"},"Checking for records to be added",-1)),D(d,{size:"small"})])),_:1,__:[3]})):j("",!0),!k(y)&&k(m)?(b(),M("span",O,"The records that will be automatically added")):j("",!0),!k(y)&&k(m)?(b(),g(n,{key:4,data:k(c).data,columns:k(p)},null,8,["data","columns"])):j("",!0)])),_:1})):j("",!0)])),_:1})}}}),H={class:"p-20px"},I={class:"flex h-15px items-center mr-16px"},Q={class:"w-320px"},J={class:"w-100px ml-20px"},K={class:"w-320px"},Z={class:"text-error"};e("default",y({__name:"index",props:{row:{},isEdit:{type:Boolean}},emits:["refresh"],setup(e,{expose:a,emit:l}){const t=e,i=l,o=c(),r=h(null),u=h(""),y=()=>{""!==P.domain.trim()?u.value!==P.domain&&2===P.dns_record&&(r.value?.getParseStatus(),u.value=P.domain):u.value=""},{t:f}=S(),x=h(null),P=$({domain:"",a_record:"",dns_record:2,quota:5,quota_unit:"GB",mailboxes:50,email:"",ips:""}),C=[{label:"GB",value:"GB"},{label:"MB",value:"MB"}],G={domain:{trigger:["blur","input"],validator:()=>""!==P.domain.trim()||new Error(f("Mail.Domain.index_27"))}},O=()=>{s({source:351})},ee=()=>({domain:P.domain,a_record:P.a_record,ips:t.isEdit&&!P.ips?"del":P.ips,quota:P.quota+" "+P.quota_unit,mailboxes:P.mailboxes,email:P.email,automatic:2===P.dns_record?1:null,hash:2===P.dns_record?r.value?.parseStatus?.hash:null});return(()=>{const{isEdit:e,row:a}=t;if(e&&a){const e=a.ip_address.ipv4.join(""),l=a.ip_address.ipv6.join("");P.domain=a.domain,P.a_record=a.a_record,P.ips=e.length>0?e:l;const t=_(a.quota);P.quota=m(t.split(" ")[0]),P.quota_unit=t.split(" ")[1],P.mailboxes=a.mailboxes,P.email=a.email,P.dns_record=1}})(),a({onConfirm:async()=>{if(await(x.value?.validate()),!r.value?.isSupportAuto&&2===P.dns_record&&!t.isEdit)return p.error("This domain does not support automatic resolution, please choose manual resolution"),!1;const{isEdit:e}=t;e?await T(ee()):await B(ee()),i("refresh")}}),(e,a)=>{const l=v,t=N,i=W,s=z,u=F,c=R,p=Y,_=L,m=n,f=d;return b(),M("div",H,[D(m,{ref_key:"formRef",ref:x,model:k(P),rules:G,"label-width":"150px"},{default:w((()=>[e.isEdit?j("",!0):(b(),g(s,{key:0,label:"DNS record"},{default:w((()=>[D(i,{value:k(P).dns_record,"onUpdate:value":[a[0]||(a[0]=e=>k(P).dns_record=e),y]},{default:w((()=>[D(t,{value:2},{default:w((()=>[q("div",I,[a[8]||(a[8]=q("div",null,"Automatic",-1)),D(l,{name:"ssl-stars",size:22})])])),_:1}),D(t,{value:1},{default:w((()=>a[9]||(a[9]=[A("Manual")]))),_:1,__:[9]})])),_:1},8,["value"])])),_:1})),D(s,{label:e.$t("Mail.Domain.index_3"),path:"domain"},{default:w((()=>[q("div",Q,[D(u,{value:k(P).domain,"onUpdate:value":a[1]||(a[1]=e=>k(P).domain=e),disabled:e.isEdit,placeholder:e.$t("Mail.Domain.index_18"),onBlur:y},null,8,["value","disabled","placeholder"])])])),_:1},8,["label"]),E(D(s,{label:e.$t("Mail.Domain.index_19")},{default:w((()=>[D(c,null,{default:w((()=>[D(u,{class:"w-320px!",value:k(P).a_record,"onUpdate:value":a[2]||(a[2]=e=>k(P).a_record=e),disabled:e.isEdit,placeholder:e.$t("Mail.Domain.index_20")},null,8,["value","disabled","placeholder"]),a[10]||(a[10]=q("span",{class:"color-#777777"}," *Resolve the domain to the mail server's lP address for server communication ormail client connections. ",-1))])),_:1,__:[10]})])),_:1},8,["label"]),[[U,1===k(P).dns_record]]),E(D(s,{label:" "},{default:w((()=>[D(V,{ref_key:"automaticRef",ref:r,domain:k(P).domain},null,8,["domain"])])),_:1},512),[[U,2===k(P).dns_record]]),e.isEdit?(b(),g(s,{key:1,label:"IP"},{default:w((()=>[D(c,{class:"items-center"},{default:w((()=>[D(u,{class:"w-320px!",value:k(P).ips,"onUpdate:value":a[3]||(a[3]=e=>k(P).ips=e),disabled:k(o).isFree,placeholder:e.$t("Mail.Domain.index_65")},null,8,["value","disabled","placeholder"]),k(o).isFree?(b(),M("span",{key:0,class:"cursor-pointer color-#ffb800",onClick:O}," PRO ")):j("",!0)])),_:1})])),_:1})):j("",!0),D(s,{label:e.$t("Mail.Domain.index_21")},{default:w((()=>[D(p,{value:k(P).quota,"onUpdate:value":a[4]||(a[4]=e=>k(P).quota=e),class:"w-200px",min:0,"show-button":!1},null,8,["value"]),q("div",J,[D(_,{value:k(P).quota_unit,"onUpdate:value":a[5]||(a[5]=e=>k(P).quota_unit=e),options:C},null,8,["value"])])])),_:1},8,["label"]),D(s,{label:e.$t("Mail.Domain.index_22")},{default:w((()=>[D(p,{value:k(P).mailboxes,"onUpdate:value":a[6]||(a[6]=e=>k(P).mailboxes=e),class:"w-320px",min:0,"show-button":!1},null,8,["value"])])),_:1},8,["label"]),D(s,{label:e.$t("Mail.Domain.index_7")},{default:w((()=>[q("div",K,[D(u,{value:k(P).email,"onUpdate:value":a[7]||(a[7]=e=>k(P).email=e),placeholder:e.$t("Mail.Domain.index_23")},null,8,["value","placeholder"])])])),_:1},8,["label"])])),_:1},8,["model"]),D(f,null,{default:w((()=>[q("li",Z,X(e.$t("Mail.Domain.index_24")),1),q("li",null,X(e.$t("Mail.Domain.index_25")),1),q("li",null,X(e.$t("Mail.Domain.index_26")),1)])),_:1})])}}}))}}}));
