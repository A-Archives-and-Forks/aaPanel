const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index129.js?v=1741416570306","js/index.vue_vue_type_script_setup_true_lang.js?v=1741416570306","js/vue.js?v=1741416570306","js/__commonjsHelpers__.js?v=1741416570306","js/naive.js?v=1741416570306","js/common.js?v=1741416570306","js/page_layout.js?v=1741416570306","js/public.js?v=1741416570306","css/public.css?v=1741416570306","css/page_layout.css?v=1741416570306","js/index.vue_vue_type_script_setup_true_lang2.js?v=1741416570306","js/index96.js?v=1741416570306","css/index15.css?v=1741416570306","js/index122.js?v=1741416570306","js/index123.js?v=1741416570306","css/index23.css?v=1741416570306","js/soft.js?v=1741416570306"])))=>i.map(i=>d[i]);
import{d as a,j as e,aA as t,aD as s,aE as i,aH as n,b as o,G as l,av as d,aG as p,a as c,l as r}from"./page_layout.js?v=1741416570306";import{_}from"./index.js?v=1741416570306";import{_ as u}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1741416570306";import{_ as m}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1741416570306";import{_ as b}from"./index.vue_vue_type_script_setup_true_lang12.js?v=1741416570306";import{_ as y}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1741416570306";import{_ as h}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1741416570306";import{n as f,d as g,b as k,p as x,f as v,a as w,c as D,q as j}from"./public.js?v=1741416570306";import{a as C,b as R,c as U,u as $,d as W,_ as B,e as P,f as L,g as S}from"./index122.js?v=1741416570306";import{g as q}from"./hooks.js?v=1741416570306";import{N as z,c as E,i as G,d as H,M as I,j as O,w as A,P as K,_ as T,$ as M,S as N,a7 as V,R as F,a0 as J,ae as Q,W as X}from"./vue.js?v=1741416570306";import{T as Y,ce as Z}from"./naive.js?v=1741416570306";import"./common.js?v=1741416570306";import"./__commonjsHelpers__.js?v=1741416570306";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1741416570306";import"./index123.js?v=1741416570306";import"./soft.js?v=1741416570306";const{t:aa}=a.global;const ea={class:"p-16px"},ta=H({__name:"index",setup(a){const H=X((()=>c((()=>import("./index129.js?v=1741416570306")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16])))),{t:ta}=I(),sa=t(),ia=g(),na=()=>{ia.show=!0},oa=()=>{L()},la=()=>{S()},da=async()=>{await s(sa.type,{ids:[]}),ya()},pa=O({p:1,limit:10,sid:-1,search:""}),{keys:ca,table:ra,columns:_a}=k([{type:"selection",width:40},{key:"name",title:ta("Database.index_12"),width:"12%",minWidth:120},{key:"username",title:ta("Database.index_13"),width:"12%",minWidth:120},{key:"password",title:aa("Database.index_14"),minWidth:150,render:a=>z(f,{value:a.password},null)},{key:"backup_count",title:aa("Database.index_16"),width:"12%",render:a=>{let t;return z("div",{class:"flex items-center"},[z(e,{type:a.backup_count>0?"primary":"warning",onClick:()=>{C(a)}},{default:()=>[a.backup_count>0?"".concat(aa("Database.mongo.index_7"),"(").concat(a.backup_count,")"):aa("Database.index_18")]}),z("span",{class:"mx-4px"},[E("|")]),z(e,{onClick:()=>{R(a)}},(s=t=aa("Public.Btn.Import"),"function"==typeof s||"[object Object]"===Object.prototype.toString.call(s)&&!G(s)?t:{default:()=>[t]}))]);var s}},{key:"sid",title:aa("Database.mongo.index_8"),width:"12%",minWidth:120,render:a=>q(a)},x({onBlur:async(a,e)=>{await p({id:e.id,ps:a})}}),v({width:100,options:a=>[{label:"CHG PW",onClick:()=>{$(a)}},{label:ta("Public.Btn.Del"),onClick:()=>{U([a])}}]})]),ua=[{key:"sync",label:ta("Database.index_24"),onBatch:a=>{w({title:ta("Database.index_25"),content:ta("Database.index_26"),onConfirm:async({hide:e})=>{await s(sa.type,{ids:a.map((a=>a.id))}),e()}})}},{key:"backup",type:"confirm",label:ta("Database.index_27"),confirm:{title:ta("Database.index_28"),desc:ta("Database.index_29"),api:a=>i(sa.type,{id:a.id},!1),done:()=>{ya()},columns:[{key:"name",title:ta("Database.index_12")}]}},{key:"delete",label:ta("Database.index_30"),onBatch:a=>{U(a)}}],{loading:ma,setLoading:ba}=D(),ya=async()=>{try{ba(!0);const{message:a}=await n(sa.type,(()=>{const a={...V(pa)};return-1===a.sid&&delete a.sid,a})());o(a)?(ra.data=l(a.data)?a.data:[],ra.total=d(a.page)):(ra.data=[],ra.total=0)}finally{ca.value=[],ba(!1)}};A((()=>sa.isRefresh),(a=>{a&&(sa.setRefresh(!1),sa.delRemoteId===pa.sid&&(pa.sid=-1),ya())}));return(async()=>{await sa.getRemote(),sa.install?ya():j()})(),(a,e)=>{const t=Y,s=r,i=h,n=y,o=b,l=m,d=u,p=_,c=Z;return K(),T(N(P),null,{default:M((()=>[z(c,null,{default:M((()=>[F("div",ea,[z(d,null,{toolsLeft:M((()=>[z(t,{type:"primary",onClick:na},{default:M((()=>[E(J(a.$t("Database.index_1")),1)])),_:1}),z(t,{onClick:oa},{default:M((()=>[E(J(a.$t("Database.index_2")),1)])),_:1}),z(t,{onClick:la},{default:M((()=>[E(J(a.$t("Database.index_4")),1)])),_:1}),z(s,{class:"mx-0!",vertical:""}),z(t,{onClick:da},{default:M((()=>[E(J(a.$t("Database.index_5")),1)])),_:1}),z(t,{onClick:N(W)},{default:M((()=>[E(J(a.$t("Database.index_6")),1)])),_:1},8,["onClick"])])),toolsRight:M((()=>[z(N(B),{value:N(pa).sid,"onUpdate:value":e[0]||(e[0]=a=>N(pa).sid=a),"store-key":"database-pgsql-page",onChange:ya},null,8,["value"]),z(i,{value:N(pa).search,"onUpdate:value":e[1]||(e[1]=a=>N(pa).search=a),placeholder:"Database search",onSearch:ya},null,8,["value"])])),table:M((()=>[z(n,{"checked-row-keys":N(ca),"onUpdate:checkedRowKeys":e[2]||(e[2]=a=>Q(ca)?ca.value=a:null),loading:N(ma),data:N(ra).data,columns:N(_a)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:M((()=>[z(o,{"checked-row-keys":N(ca),"onUpdate:checkedRowKeys":e[3]||(e[3]=a=>Q(ca)?ca.value=a:null),data:N(ra).data,options:ua},null,8,["checked-row-keys","data"])])),pageRight:M((()=>[z(l,{page:N(pa).p,"onUpdate:page":e[4]||(e[4]=a=>N(pa).p=a),"page-size":N(pa).limit,"onUpdate:pageSize":e[5]||(e[5]=a=>N(pa).limit=a),"store-key":"database-pgsql-page","item-count":N(ra).total,onRefresh:ya},null,8,["page","page-size","item-count"])])),_:1}),z(p,{show:N(ia).show,"onUpdate:show":e[6]||(e[6]=a=>N(ia).show=a),title:a.$t("Database.mongo.index_4"),width:540,"min-height":280,footer:!0,component:N(H)},null,8,["show","title","component"])])])),_:1})])),_:1})}}});export{ta as default};
