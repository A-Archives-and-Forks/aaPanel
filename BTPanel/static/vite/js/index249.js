import{_ as e}from"./index127.js?v=1753954525509";import{_ as t}from"./index.js?v=1753954525509";import{_ as a}from"./index.vue_vue_type_script_setup_true_lang.js?v=1753954525509";import{F as s,G as l,H as i,I as r}from"./index86.js?v=1753954525509";import{c as u,m as o,O as n,go as p,gp as _,w as d,e as c}from"./page_layout.js?v=1753954525509";import{e as m,c as v}from"./public.js?v=1753954525509";import{k as b,r as g,c as y,o as f,b as h,U as j,V as w,W as x,X as k,a1 as U,Q as S,a2 as C,F as I,O as D,a3 as F,l as N,v as P,e as q,w as O,j as T,al as z}from"./vue.js?v=1753954525509";import{c6 as A,bY as G,ay as H,cG as V,cA as B,_ as J,d1 as L}from"./naive.js?v=1753954525509";import"./common.js?v=1753954525509";import"./__commonjsHelpers__.js?v=1753954525509";import"./index.vue_vue_type_script_setup_true_lang4.js?v=1753954525509";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1753954525509";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1753954525509";import"./index.vue_vue_type_script_setup_true_lang11.js?v=1753954525509";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1753954525509";import"./site4.js?v=1753954525509";import"./soft.js?v=1753954525509";import"./site.js?v=1753954525509";import"./index237.js?v=1753954525509";import"./index100.js?v=1753954525509";import"./index102.js?v=1753954525509";import"./index.vue_vue_type_script_setup_true_lang9.js?v=1753954525509";import"./index96.js?v=1753954525509";import"./index.vue_vue_type_script_setup_true_lang14.js?v=1753954525509";import"./theme-chrome.js?v=1753954525509";import"./file2.js?v=1753954525509";import"./refersh.js?v=1753954525509";import"./php.js?v=1753954525509";import"./index.vue_vue_type_script_setup_true_lang17.js?v=1753954525509";import"./index101.js?v=1753954525509";import"./ssl.js?v=1753954525509";import"./cert.js?v=1753954525509";import"./utils3.js?v=1753954525509";import"./index209.js?v=1753954525509";import"./paypal-js.js?v=1753954525509";import"./ssl-lets-progress.js?v=1753954525509";import"./Ssl.vue_vue_type_script_setup_true_lang.js?v=1753954525509";const Q={class:"p-16px"},R={class:"mb-16px"},W={class:"p-10px border-1px border-solid border-gray-200 rounded-8px"},X=b({__name:"progress",emits:["update"],setup(e,{expose:t,emit:a}){const l=a,i=g(!1),r=g([]),d=y((()=>r.value.findIndex((e=>0===e.status))+1)),c=y((()=>{var e;return null==(e=r.value[d.value])?void 0:e.status})),m={0:"process",1:"finish","-1":"error",2:"wait"},v=e=>m[e];let b=null;const q=async()=>{const{message:e}=await s();u(e)&&(1===e.status?(b&&clearInterval(b),o.success("Data copying completed!"),i.value=!0):i.value=!1,delete e.status,r.value=Object.values(e))};return f((()=>{q(),b=window.setInterval((()=>{q()}),2e3)})),h((()=>{l("update"),b&&clearInterval(b)})),t({isFinish:i,init:q}),(e,t)=>{const a=A,s=n,l=G,u=p,o=_;return j(),w("div",Q,[x("div",R,[k(i)?(j(),U(a,{key:0,type:"success",title:"Data copying completed!"})):(j(),U(a,{key:1,type:"default",title:"Data replication in progress..."}))]),x("div",W,[S(o,{vertical:"",current:k(d),status:v(k(c)),size:"small"},{default:C((()=>[(j(!0),w(I,null,D(k(r),((e,t)=>(j(),U(u,{key:t,status:v(e.status),description:e.ps},{title:C((()=>[S(l,{class:"flex-nowrap! items-center!"},{default:C((()=>[x("span",null,F(e.title),1),N(S(s,{size:"small"},null,512),[[P,0===e.status]])])),_:2},1024)])),_:2},1032,["status","description"])))),128))])),_:1},8,["current","status"])])])}}}),Y={class:"data-box"},$=c(b({__name:"index",setup(o,{expose:p}){const _=g(null),c=g(!1),b=g([]),h=g([]),F=m("Copy Progress"),N=q({site_id:null,target_id:null,all:!1,source_site:["file"],db_table:[],create_recovery_point:!1}),P=y((()=>N.db_table.length>0&&N.db_table.length<h.value.length)),Q={site_id:{required:!0,type:"number",trigger:"change",message:"Source site cannot be empty"},target_id:{required:!0,type:"number",trigger:"change",message:"Target site cannot be empty"},source_site:{required:!0,type:"array",trigger:"change",message:"Please select type"},db_table:{required:!0,type:"array",trigger:"change",message:"Please select database table"}};O((()=>N.db_table),(e=>{e.length===h.value.length?N.all=!0:e.length||(N.all=!1)})),O((()=>N.all),(e=>{var t;e?(N.db_table=h.value,null==(t=_.value)||t.validate()):N.db_table=[]}));const R=async()=>{const{message:e}=await i({set_id:Number(N.site_id)});d(e)&&(h.value=e,N.db_table=[])},W=async()=>{const{message:e}=await s();u(e)&&(c.value=0===e.status)},{loading:$,setLoading:E}=v();return f((async()=>{await W(),(async()=>{try{E(!0);const{message:e}=await r();d(e)&&(b.value=e.map((e=>({label:e.name,value:e.id}))),b.value.length&&(N.site_id=b.value[0].value,R()))}finally{E(!1)}})()})),p({onConfirm:async()=>{var e;return await(null==(e=_.value)?void 0:e.validate()),await l({cp_files:!!N.source_site.includes("file"),cp_data_tables:!!N.source_site.includes("db"),is_backup:N.create_recovery_point,data_tables:JSON.stringify(N.source_site.includes("db")?N.db_table:[]),source_id:Number(N.site_id),target_id:Number(N.target_id)}),F.show=!0,!1}}),(s,l)=>{const i=H,r=V,u=B,o=J,p=G,d=L,m=A,v=a,g=t,y=n,f=e;return j(),U(f,{install:!k(c)},{desc:C((()=>[l[9]||(l[9]=x("span",{class:"mr-10px"},"There are currently tasks in progress.",-1)),S(i,{onClick:l[0]||(l[0]=e=>k(F).show=!0)},{default:C((()=>l[8]||(l[8]=[T("View")]))),_:1,__:[8]})])),default:C((()=>[S(y,{show:k($),class:"p-16px"},{default:C((()=>[S(v,{ref_key:"formRef",ref:_,model:k(N),rules:Q},{default:C((()=>[S(u,{label:"Source Site",path:"site_id"},{default:C((()=>[S(r,{class:"w-300px",value:k(N).site_id,"onUpdate:value":[l[1]||(l[1]=e=>k(N).site_id=e),R],options:k(b),filterable:""},null,8,["value","options"])])),_:1}),S(u,{label:"Target site",path:"target_id"},{default:C((()=>[S(r,{class:"w-300px",value:k(N).target_id,"onUpdate:value":l[2]||(l[2]=e=>k(N).target_id=e),options:k(b),filterable:"",placeholder:"Please select target site"},null,8,["value","options"])])),_:1}),S(u,{label:"Copy Type",path:"source_site","show-feedback":!k(N).source_site.length},{default:C((()=>[S(d,{value:k(N).source_site,"onUpdate:value":l[3]||(l[3]=e=>k(N).source_site=e)},{default:C((()=>[S(p,null,{default:C((()=>[S(o,{value:"file",label:"File"}),S(o,{value:"db",label:"Database"})])),_:1})])),_:1},8,["value"])])),_:1},8,["show-feedback"]),S(u,{label:" "},{default:C((()=>[S(m,{"show-icon":!1},{default:C((()=>l[10]||(l[10]=[x("div",null,"Files: Copy the newly added theme and plug-in files from the source wp website to the target wp website. ",-1),x("div",null,"Database: Select the data table in the source wp website and copy it to the target wp website. Note: the existing table will be overwritten!",-1)]))),_:1,__:[10]})])),_:1}),k(N).source_site.includes("db")?(j(),U(u,{key:0,label:" ",path:"db_table"},{default:C((()=>[x("div",Y,[S(o,{checked:k(N).all,"onUpdate:checked":l[4]||(l[4]=e=>k(N).all=e),label:s.$t("Public.SelectAll"),indeterminate:k(P)},null,8,["checked","label","indeterminate"]),S(d,{value:k(N).db_table,"onUpdate:value":l[5]||(l[5]=e=>k(N).db_table=e)},{default:C((()=>[S(p,{class:"flex-col!"},{default:C((()=>[(j(!0),w(I,null,D(k(h),(e=>(j(),U(o,{value:e,label:e,key:e},null,8,["value","label"])))),128))])),_:1})])),_:1},8,["value"])])])),_:1})):z("",!0),S(u,{label:"Backup"},{default:C((()=>[S(o,{checked:k(N).create_recovery_point,"onUpdate:checked":l[6]||(l[6]=e=>k(N).create_recovery_point=e),label:"Create a backup of your target website"},null,8,["checked"])])),_:1})])),_:1},8,["model"]),S(g,{show:k(F).show,"onUpdate:show":l[7]||(l[7]=e=>k(F).show=e),title:k(F).title,width:500,"min-height":200},{default:C((()=>[S(X,{onUpdate:W})])),_:1},8,["show","title"])])),_:1},8,["show"])])),_:1},8,["install"])}}}),[["__scopeId","data-v-8594ce8c"]]);export{$ as default};
