System.register(["./page_layout-legacy.js?v=1744703330658","./index-legacy.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy12.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1744703330658","./index-legacy121.js?v=1744703330658","./public-legacy.js?v=1744703330658","./index-legacy122.js?v=1744703330658","./vue-legacy.js?v=1744703330658","./hooks-legacy.js?v=1744703330658","./naive-legacy.js?v=1744703330658","./common-legacy.js?v=1744703330658","./__commonjsHelpers__-legacy.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1744703330658","./php-legacy.js?v=1744703330658","./soft-legacy.js?v=1744703330658","./index-legacy123.js?v=1744703330658"],(function(e,a){"use strict";var t,n,s,l,i,o,d,c,u,p,r,_,h,b,y,m,w,g,x,k,v,f,D,j,C,U,$,q,R,W,z,B,M,S,L,I,O,P,K,H,T,V,Y,A,E,F,G,J,N,Q,X,Z,ee,ae,te,ne,se,le,ie,oe,de,ce,ue,pe,re,_e;return{setters:[e=>{t=e.j,n=e.bk,s=e.bl,l=e.d,i=e._,o=e.bj,d=e.bm,c=e.bn,u=e.bo,p=e.I,r=e.b9,_=e.bp,h=e.a,b=e.m},e=>{y=e._},e=>{m=e._},e=>{w=e._},e=>{g=e._},e=>{x=e._},e=>{k=e._},e=>{v=e._},e=>{f=e.n,D=e.c,j=e.d,C=e.b,U=e.o,$=e.p,q=e.f,R=e.a,W=e.q},e=>{z=e.u,B=e.a,M=e.b,S=e.c,L=e.d,I=e._,O=e.e,P=e.f,K=e.g},e=>{H=e.P,T=e.O,V=e.ab,Y=e.c,A=e.i,E=e.d,F=e.r,G=e.ai,J=e.R,N=e.$,Q=e.a0,X=e.a1,Z=e.V,ee=e.af,ae=e.S,te=e.j,ne=e.w,se=e.M,le=e.U,ie=e.ap,oe=e.Y},e=>{de=e.g},e=>{ce=e.b$,ue=e.bU,pe=e.cq,re=e.T,_e=e.ck},null,null,null,null,null,null],execute:function(){const he=({row:e})=>{if(e.password)return H(f,{value:e.password},null);const{t:a}=T();return H("div",{class:"text-desc cursor-pointer",onClick:()=>{z(e)}},[H(V,{keypath:"Database.index_15.index_1",tag:"span",scope:"global"},{error:()=>H("span",{class:"text-error"},[a("Database.index_15.index_2")])})])},be=({row:e})=>{let a;const{t:n}=T();return H("div",{class:"flex items-center"},[H(t,{type:e.backup_count>0?"primary":"warning",class:"backup-btn",onClick:()=>{B(e)}},{default:()=>[e.backup_count>0?n("Database.index_17",[e.backup_count]):n("Database.index_18")]}),H("span",{class:"mx-4px"},[Y("|")]),H(t,{onClick:()=>{M(e)}},(s=a=n("Public.Btn.Import"),"function"==typeof s||"[object Object]"===Object.prototype.toString.call(s)&&!A(s)?a:{default:()=>[a]}))]);var s},ye={key:1},me=E({__name:"index",setup(e){const a=F(!1),o=G(),d=()=>{o.push("/crontab/task")},c=async e=>{try{await n({name:"mysql",status:e?1:0})}catch{a.value=!e}},{loading:u,setLoading:p}=D();return(async()=>{try{p(!0);const{message:e}=await s({name:"mysql"});l(e)&&(a.value=!!e.status)}finally{p(!1)}})(),(e,n)=>{const s=i,l=ce,o=t,p=ue,r=pe;return J(),N(r,{"show-icon":!1,closable:!1},{default:Q((()=>[H(p,{class:"h-24px items-center"},{default:Q((()=>[H(s,{name:"base-info",size:"18"}),Y(" "+X(e.$t("Database.Mysql.index_1")),1),H(l,{size:"small",loading:Z(u),value:Z(a),"onUpdate:value":[n[0]||(n[0]=e=>ee(a)?a.value=e:null),c]},null,8,["loading","value"]),Z(a)?(J(),N(o,{key:0,onClick:d},{default:Q((()=>[Y("["+X(e.$t("Database.index_7.index_2"))+"]",1)])),_:1})):(J(),ae("span",ye,X(e.$t("Database.Mysql.index_2")),1))])),_:1})])),_:1})}}}),we={class:"p-16px"};e("default",E({__name:"index",setup(e){const t=oe((()=>h((()=>a.import("./index-legacy116.js?v=1744703330658")),void 0))),n=oe((()=>h((()=>a.import("./index-legacy117.js?v=1744703330658")),void 0))),s=oe((()=>h((()=>a.import("./index-legacy118.js?v=1744703330658")),void 0))),i=oe((()=>h((()=>a.import("./index-legacy119.js?v=1744703330658")),void 0))),f=oe((()=>h((()=>a.import("./index-legacy120.js?v=1744703330658").then((e=>e.i))),void 0))),{t:B}=T(),M=o(),V=F(!1),A=j(),E=j(B("Database.index_3"),{row:void 0}),G=()=>{A.show=!0},ae=()=>{P()},ce=e=>{M.phpmyadmin.setup?(e?(E.data.row=e,E.title=B("Database.index_8",[e.name])):(E.data.row=void 0,E.title=B("Database.index_3")),E.show=!0):b.error(B("Database.index_9"))},ue=()=>{K()},pe=j(B("Database.Mysql.index_3")),ye=j(),ge=j(),xe=async()=>{await d(M.type,{ids:[]}),$e()},{keys:ke,table:ve,columns:fe}=C([{type:"selection",width:40},{key:"name",title:B("Database.index_12"),width:"10%",minWidth:100,ellipsis:{tooltip:{width:"trigger"}}},{key:"username",title:B("Database.index_13"),width:"10%",minWidth:100,ellipsis:{tooltip:{width:"trigger"}}},{key:"password",title:B("Database.index_14"),width:"10%",minWidth:120,render:e=>H(he,{row:e},null)},U({type:"database",width:"5%",maxWidth:60,callback:()=>{$e()}}),{key:"backup_count",title:B("Database.index_16"),width:"10%",minWidth:120,render:e=>H(be,{row:e},null)},{key:"sid",title:B("Database.index_19"),width:"8%",minWidth:80,ellipsis:{tooltip:!0},render:e=>de(e)},$({minWidth:90,onBlur:async(e,a)=>{await _({id:a.id,ps:e})}}),q({width:"30%",minWidth:280,options:e=>[{label:B("Database.index_20"),show:0===e.db_type,onClick:()=>{ce(e)}},{label:B("Database.index_21"),class:"permission-btn",onClick:()=>{(e=>{ge.data.row=e,ge.title=B("Database.index_11",[e.name]),ge.show=!0})(e)}},{label:B("Database.index_22"),class:"tools-btn",onClick:()=>{(e=>{ye.data.row=e,ye.title=B("Database.index_10",[e.name]),ye.show=!0})(e)}},{label:B("Database.index_23"),class:"change-btn",onClick:()=>{z(e)}},{label:B("Public.Btn.Del"),class:"delete-btn",onClick:()=>{S([e])}}]})]),De=[{key:"sync",label:B("Database.index_24"),onBatch:e=>{R({title:B("Database.index_25"),content:B("Database.index_26"),onConfirm:async()=>{await d(M.type,{ids:e.map((e=>e.id))})}})}},{key:"backup",type:"confirm",label:B("Database.index_27"),confirm:{title:B("Database.index_28"),desc:B("Database.index_29"),api:e=>c(M.type,{id:e.id},!1),done:()=>{$e()},columns:[{key:"name",title:B("Database.index_12")}]}},{key:"delete",label:B("Database.index_30"),onBatch:e=>{S(e)}}],{loading:je,setLoading:Ce}=D(!0),Ue=te({p:1,limit:20,sid:-1,search:""}),$e=async()=>{try{Ce(!0);const{message:e}=await u((()=>{const e={...se(Ue)};return-1===e.sid&&delete e.sid,e})());l(e)?(ve.data=p(e.data)?e.data:[],ve.total=r(e.page)):(ve.data=[],ve.total=0)}finally{ke.value=[],Ce(!1)}};return ne((()=>M.isRefresh),(e=>{e&&(M.setRefresh(!1),M.delRemoteId===Ue.sid&&(Ue.sid=-1),$e())})),(async()=>{try{await M.getRemote(),M.install?(V.value=!0,$e()):(V.value=!1,W())}finally{Ce(!1)}})(),(e,a)=>{const l=re,o=v,d=k,c=x,u=g,p=w,r=m,_=y,h=_e;return J(),N(Z(O),null,{default:Q((()=>[H(h,null,{default:Q((()=>[le("div",we,[H(me),H(r,{class:"mt-16px",feedback:!0},{toolsLeft:Q((()=>[H(l,{class:"add-db-btn",type:"primary",onClick:G},{default:Q((()=>[Y(X(e.$t("Database.index_1")),1)])),_:1}),H(l,{class:"set-root-btn",onClick:ae},{default:Q((()=>[Y(X(e.$t("Database.index_2")),1)])),_:1}),H(l,{onClick:a[0]||(a[0]=e=>ce())},{default:Q((()=>[Y(X(e.$t("Database.index_3")),1)])),_:1}),H(l,{onClick:ue},{default:Q((()=>[Y(X(e.$t("Database.index_4")),1)])),_:1}),H(l,{onClick:a[1]||(a[1]=e=>Z(pe).show=!0)},{default:Q((()=>[Y(X(e.$t("Database.Mysql.index_3")),1)])),_:1}),H(l,{onClick:xe},{default:Q((()=>[Y(X(e.$t("Database.index_5")),1)])),_:1}),H(l,{onClick:Z(L)},{default:Q((()=>[Y(X(e.$t("Database.index_6")),1)])),_:1},8,["onClick"]),Z(V)?(J(),N(o,{key:0,"soft-name":"mysql"})):ie("",!0)])),toolsRight:Q((()=>[H(Z(I),{ref:"remoteRef",value:Z(Ue).sid,"onUpdate:value":a[2]||(a[2]=e=>Z(Ue).sid=e),"store-key":"mysql-remote",onChange:$e},null,8,["value"]),H(d,{value:Z(Ue).search,"onUpdate:value":a[3]||(a[3]=e=>Z(Ue).search=e),placeholder:e.$t("Database.mongo.index_3"),width:"180",onSearch:$e},null,8,["value","placeholder"])])),table:Q((()=>[H(c,{"checked-row-keys":Z(ke),"onUpdate:checkedRowKeys":a[4]||(a[4]=e=>ee(ke)?ke.value=e:null),loading:Z(je),data:Z(ve).data,columns:Z(fe)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:Q((()=>[H(u,{"checked-row-keys":Z(ke),"onUpdate:checkedRowKeys":a[5]||(a[5]=e=>ee(ke)?ke.value=e:null),data:Z(ve).data,options:De},null,8,["checked-row-keys","data"])])),pageRight:Q((()=>[H(p,{page:Z(Ue).p,"onUpdate:page":a[6]||(a[6]=e=>Z(Ue).p=e),"page-size":Z(Ue).limit,"onUpdate:pageSize":a[7]||(a[7]=e=>Z(Ue).limit=e),"store-key":"database-mysql-page","item-count":Z(ve).total,onRefresh:$e},null,8,["page","page-size","item-count"])])),_:1}),H(_,{show:Z(A).show,"onUpdate:show":a[8]||(a[8]=e=>Z(A).show=e),title:e.$t("Database.mongo.index_4"),width:540,"min-height":334,footer:!0,component:Z(t)},null,8,["show","title","component"]),H(_,{show:Z(E).show,"onUpdate:show":a[9]||(a[9]=e=>Z(E).show=e),title:Z(E).title,data:Z(E).data,width:740,height:580,component:Z(n)},null,8,["show","title","data","component"]),H(_,{show:Z(ge).show,"onUpdate:show":a[10]||(a[10]=e=>Z(ge).show=e),data:Z(ge).data,title:Z(ge).title,width:480,"min-height":132,footer:!0,component:Z(i)},null,8,["show","data","title","component"]),H(_,{show:Z(ye).show,"onUpdate:show":a[11]||(a[11]=e=>Z(ye).show=e),data:Z(ye).data,title:Z(ye).title,width:870,"min-height":359,component:Z(s)},null,8,["show","data","title","component"]),H(_,{show:Z(pe).show,"onUpdate:show":a[12]||(a[12]=e=>Z(pe).show=e),title:Z(pe).title,width:850,"min-height":600,component:Z(f)},null,8,["show","title","component"])])])),_:1})])),_:1})}}}))}}}));
