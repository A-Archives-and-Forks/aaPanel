import{_ as a}from"./index103.js?v=1741416570306";import{_ as e}from"./index.vue_vue_type_script_setup_true_lang.js?v=1741416570306";import{m as t,b as s,_ as l,k as n}from"./page_layout.js?v=1741416570306";import{n as i,b as o,m as r}from"./planned.js?v=1741416570306";import{c,a as d}from"./public.js?v=1741416570306";import{bt as u,T as m,bV as p,cb as _,bS as f,cl as v,y as g,bT as b,cs as x,bO as y}from"./naive.js?v=1741416570306";import{d as C,M as j,j as w,r as P,n as S,G as k,P as I,Q as $,N as h,$ as N,S as O,_ as J,R as L,a0 as T,ao as R,c as U}from"./vue.js?v=1741416570306";import"./common.js?v=1741416570306";import"./__commonjsHelpers__.js?v=1741416570306";const A={class:"p-20px h-500px"},D={class:"color-#20a53a"},E=n(C({__name:"index",props:{data:{}},setup(n){const{t:C}=j(),E=w({active:!1,time:3}),F=n,{id:G,getList:H}=F.data,M={time:{trigger:["blur","input"],validator:(a,e)=>e<3?(K(),new Error(C("Crontab.Planned.index_91"))):(W&&(z.value=e,q.value=100,K()),B(),!0)}},Q=()=>{d({title:C("Public.Confirm.Title"),content:C("Crontab.Planned.index_26"),onConfirm:async()=>{await i({id:G}),ea()}})},V=a=>{a?(W&&K(),B(),t.success(C("Crontab.Planned.index_92"))):(K(),sessionStorage.setItem("timer".concat(G),JSON.stringify({...E,id:G})),t.success(C("Crontab.Planned.index_93")))};let W;const q=P(100),z=P(E.time),B=()=>{W=setInterval((()=>{q.value-=100/E.time,z.value-=1,q.value<=0&&(q.value=100,z.value=E.time,ea())}),1e3),sessionStorage.setItem("timer".concat(G),JSON.stringify({...E,id:G}))},K=()=>{clearInterval(W),W=void 0},X=async()=>{await o({id:G}),null==H||H()},{loading:Y,setLoading:Z}=c(),aa=P("None"),ea=async()=>{Z(!0);const{message:a}=await r({id:G});s(a)&&(aa.value=a.result?a.result:"None"),Z(!1)};return ea(),S((()=>{const a=sessionStorage.getItem("timer".concat(G));if(a){const e=JSON.parse(a);E.time=e.time,z.value=e.time,E.active=e.active,B()}})),k((()=>{K()})),(t,s)=>{const n=u,i=m,o=l,r=p,c=_,d=f,C=v,j=g,w=e,P=b,S=x,k=y,F=a;return I(),$("div",A,[h(k,{class:"mb-10px"},{default:N((()=>[h(S,null,{default:N((()=>[h(i,{class:"refresh-logs-btn",onClick:ea},{default:N((()=>[O(E).active?(I(),J(n,{key:0,type:"circle",percentage:O(q),unit:""},{default:N((()=>[L("span",D,T(O(z)),1)])),_:1},8,["percentage"])):R("",!0),U(" "+T(t.$t("Ftp.Analysis.Index_32")),1)])),_:1}),h(P,{trigger:"click",placement:"bottom",class:"min-w-250px"},{trigger:N((()=>[h(i,null,{default:N((()=>[h(o,{name:"down"})])),_:1})])),default:N((()=>[h(w,{ref:"formRef",model:O(E),rules:M,"label-width":"120px"},{default:N((()=>[h(c,{label:t.$t("Crontab.Planned.index_89")},{default:N((()=>[h(r,{value:O(E).active,"onUpdate:value":[s[0]||(s[0]=a=>O(E).active=a),V]},null,8,["value"])])),_:1},8,["label"]),O(E).active?(I(),J(c,{key:0,label:t.$t("Crontab.Planned.index_90"),path:"time"},{default:N((()=>[h(j,null,{default:N((()=>[h(d,{class:"w-50px!",value:O(E).time,"onUpdate:value":s[1]||(s[1]=a=>O(E).time=a),"show-button":!1,placeholder:""},null,8,["value"]),h(C,null,{default:N((()=>[U(T(t.$t("Waf.Setting.config_53")),1)])),_:1})])),_:1})])),_:1},8,["label"])):R("",!0)])),_:1},8,["model"])])),_:1})])),_:1}),h(i,{class:"empty-logs-btn",onClick:Q},{default:N((()=>[U(T(t.$t("Crontab.Planned.index_25")),1)])),_:1}),h(i,{onClick:X},{default:N((()=>[U(T(t.$t("Docker.LocalImage.pull.index_12")),1)])),_:1})])),_:1}),h(F,{loading:O(Y),log:O(aa)},null,8,["loading","log"])])}}}),[["__scopeId","data-v-a8de5712"]]);export{E as default};
