import{_ as a}from"./index103.js?v=1742891699271";import{_ as e}from"./index.vue_vue_type_script_setup_true_lang.js?v=1742891699271";import{m as t,b as s,_ as l,k as n}from"./page_layout.js?v=1742891699271";import{n as i,b as o,m as r}from"./planned.js?v=1742891699271";import{c,a as d}from"./public.js?v=1742891699271";import{bz as u,T as m,b$ as p,ch as _,bY as f,cr as v,y as g,bZ as b,aV as x,bU as y}from"./naive.js?v=1742891699271";import{d as C,O as j,j as w,r as P,n as k,G as I,R as S,S as h,P as $,a1 as N,V as O,a0 as U,U as J,a2 as L,ap as R,c as T}from"./vue.js?v=1742891699271";import"./common.js?v=1742891699271";import"./__commonjsHelpers__.js?v=1742891699271";const V={class:"p-20px h-500px"},z={class:"color-#20a53a"},A=n(C({__name:"index",props:{data:{}},setup(n){const{t:C}=j(),A=w({active:!1,time:3}),D=n,{id:E,getList:F}=D.data,G={time:{trigger:["blur","input"],validator:(a,e)=>e<3?(K(),new Error(C("Crontab.Planned.index_91"))):(Y&&(q.value=e,Z.value=100,K()),B(),!0)}},H=()=>{d({title:C("Public.Confirm.Title"),content:C("Crontab.Planned.index_26"),onConfirm:async()=>{await i({id:E}),ea()}})},W=a=>{a?(Y&&K(),B(),t.success(C("Crontab.Planned.index_92"))):(K(),sessionStorage.setItem("timer".concat(E),JSON.stringify({...A,id:E})),t.success(C("Crontab.Planned.index_93")))};let Y;const Z=P(100),q=P(A.time),B=()=>{Y=setInterval((()=>{Z.value-=100/A.time,q.value-=1,Z.value<=0&&(Z.value=100,q.value=A.time,ea())}),1e3),sessionStorage.setItem("timer".concat(E),JSON.stringify({...A,id:E}))},K=()=>{clearInterval(Y),Y=void 0},M=async()=>{await o({id:E}),null==F||F()},{loading:Q,setLoading:X}=c(),aa=P("None"),ea=async()=>{X(!0);const{message:a}=await r({id:E});s(a)&&(aa.value=a.result?a.result:"None"),X(!1)};return ea(),k((()=>{const a=sessionStorage.getItem("timer".concat(E));if(a){const e=JSON.parse(a);A.time=e.time,q.value=e.time,A.active=e.active,B()}})),I((()=>{K()})),(t,s)=>{const n=u,i=m,o=l,r=p,c=_,d=f,C=v,j=g,w=e,P=b,k=x,I=y,D=a;return S(),h("div",V,[$(I,{class:"mb-10px"},{default:N((()=>[$(k,null,{default:N((()=>[$(i,{class:"refresh-logs-btn",onClick:ea},{default:N((()=>[O(A).active?(S(),U(n,{key:0,type:"circle",percentage:O(Z),unit:""},{default:N((()=>[J("span",z,L(O(q)),1)])),_:1},8,["percentage"])):R("",!0),T(" "+L(t.$t("Ftp.Analysis.Index_32")),1)])),_:1}),$(P,{trigger:"click",placement:"bottom",class:"min-w-250px"},{trigger:N((()=>[$(i,null,{default:N((()=>[$(o,{name:"down"})])),_:1})])),default:N((()=>[$(w,{ref:"formRef",model:O(A),rules:G,"label-width":"120px"},{default:N((()=>[$(c,{label:t.$t("Crontab.Planned.index_89")},{default:N((()=>[$(r,{value:O(A).active,"onUpdate:value":[s[0]||(s[0]=a=>O(A).active=a),W]},null,8,["value"])])),_:1},8,["label"]),O(A).active?(S(),U(c,{key:0,label:t.$t("Crontab.Planned.index_90"),path:"time"},{default:N((()=>[$(j,null,{default:N((()=>[$(d,{class:"w-50px!",value:O(A).time,"onUpdate:value":s[1]||(s[1]=a=>O(A).time=a),"show-button":!1,placeholder:""},null,8,["value"]),$(C,null,{default:N((()=>[T(L(t.$t("Waf.Setting.config_53")),1)])),_:1})])),_:1})])),_:1},8,["label"])):R("",!0)])),_:1},8,["model"])])),_:1})])),_:1}),$(i,{class:"empty-logs-btn",onClick:H},{default:N((()=>[T(L(t.$t("Crontab.Planned.index_25")),1)])),_:1}),$(i,{onClick:M},{default:N((()=>[T(L(t.$t("Docker.LocalImage.pull.index_12")),1)])),_:1})])),_:1}),$(D,{loading:O(Q),log:O(aa)},null,8,["loading","log"])])}}}),[["__scopeId","data-v-a8de5712"]]);export{A as default};
