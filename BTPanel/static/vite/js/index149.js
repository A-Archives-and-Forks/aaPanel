import{_ as e}from"./index223.js?v=1741416570306";import{_ as a,a as t}from"./index.vue_vue_type_script_setup_true_lang21.js?v=1741416570306";import{_ as n}from"./index.vue_vue_type_script_setup_true_lang22.js?v=1741416570306";import{_ as s}from"./index95.js?v=1741416570306";import{dF as l,dG as i,G as o,I as u,h as p,dH as r,b as c,dI as d,dJ as _,k as m}from"./page_layout.js?v=1741416570306";import{c as y,a as v,b as f}from"./public.js?v=1741416570306";import{s as b}from"./php.js?v=1741416570306";import{p as x}from"./soft.js?v=1741416570306";import{bS as g,_ as h,bO as k,T as w,cb as j,ce as P,ch as U}from"./naive.js?v=1741416570306";import{d as $,M as R,r as N,P as S,_ as C,$ as I,Q as T,F,L as q,S as M,R as A,a0 as O,N as B,c as L,j as H,ae as G,a7 as J}from"./vue.js?v=1741416570306";import{_ as z}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1741416570306";import{_ as D}from"./index.vue_vue_type_script_setup_true_lang.js?v=1741416570306";import{_ as E}from"./index.vue_vue_type_script_setup_true_lang10.js?v=1741416570306";import"./alarm.js?v=1741416570306";import"./index.vue_vue_type_script_setup_true_lang11.js?v=1741416570306";import"./index.vue_vue_type_script_setup_true_lang15.js?v=1741416570306";import"./theme-chrome.js?v=1741416570306";import"./__commonjsHelpers__.js?v=1741416570306";import"./file.js?v=1741416570306";import"./common.js?v=1741416570306";import"./index96.js?v=1741416570306";const Q={class:"w-150px! text-right"},K={class:"w-250px! color-#666"},V={class:"color-error"},W=$({__name:"index",setup(e,{expose:a}){const{t:t}=R(),n=N(),p=async()=>{const e=n.value.reduce(((e,a)=>(e[a.name]=a.value,e)),{});await l(e)},r=()=>{v({title:t("Plugin.Mysql.index_22",[x.title]),content:t("Plugin.Mysql.index_24",[x.title]),onConfirm:async()=>{await b({name:"redis",type:"restart"})}})},{loading:c,setLoading:d}=y(),_=async()=>{try{d(!0);const{message:e}=await i();o(e)&&(n.value=e.map((e=>({name:e.name,value:"bind"!==e.name&&"requirepass"!==e.name?Number(e.value):e.value,ps:e.ps}))))}finally{d(!1)}};return _(),a({init:_}),(e,a)=>{const t=g,l=h,i=k,o=w,d=s,_=u;return S(),C(_,{show:M(c)},{default:I((()=>[(S(!0),T(F,null,q(M(n),((e,a)=>(S(),C(i,{class:"items-center flex-nowrap! py-2px my-16px",key:a},{default:I((()=>[A("div",Q,O(e.name),1),"bind"!==e.name&&"requirepass"!==e.name?(S(),C(t,{key:0,class:"w-150px!",value:e.value,"onUpdate:value":a=>e.value=a,min:0,"show-button":!1},null,8,["value","onUpdate:value"])):(S(),C(l,{key:1,class:"w-150px!",value:e.value,"onUpdate:value":a=>e.value=a,placeholder:""},null,8,["value","onUpdate:value"])),A("div",K,O(e.ps),1)])),_:2},1024)))),128)),B(i,{class:"items-center justify-center! my-10px"},{default:I((()=>[B(o,{type:"primary",onClick:p},{default:I((()=>[L(O(e.$t("Public.Btn.Save")),1)])),_:1}),B(o,{onClick:r},{default:I((()=>[L(O(e.$t("Plugin.Mysql.index_22",[M(x).title])),1)])),_:1})])),_:1}),B(d,null,{default:I((()=>[A("li",null,O(e.$t("Plugin.Redis.index_1")),1),A("li",V,O(e.$t("Plugin.Redis.index_2")),1)])),_:1})])),_:1},8,["show"])}}}),X=[{name:"uptime_in_days",function:e=>e.uptime_in_days,value:"",ps:"Number of days in operation"},{name:"tcp_port",function:e=>e.tcp_port,value:"",ps:"current listening port"},{name:"connected_clients",function:e=>e.connected_clients,value:"",ps:"Number of connected clients"},{name:"used_memory_rss",function:e=>p(Number(e.used_memory_rss)),value:"",ps:"The total amount of system RAM currently occupied by Redis"},{name:"used_memory",function:e=>p(Number(e.used_memory)),value:"",ps:"The peak of Redis history allocation memory"},{name:"mem_fragmentation_ratio",function:e=>e.mem_fragmentation_ratio,value:"",ps:"memory fragmentation ratio"},{name:"total_connections_received\t",function:e=>e.total_connections_received,value:"",ps:"The total number of clients connected since the run"},{name:"total_commands_processed\t",function:e=>e.total_commands_processed,value:"",ps:"The total number of commands executed since the run"},{name:"instantaneous_ops_per_sec",function:e=>e.instantaneous_ops_per_sec,value:"",ps:"The number of commands executed by the server per second"},{name:"keyspace_hits",function:e=>e.keyspace_hits,value:"",ps:"Find the number of successful database keys"},{name:"keyspace_misses",function:e=>e.keyspace_misses,value:"",ps:"Find the number of failed database keys"},{name:"hit",function:e=>(parseInt(e.keyspace_hits)/(parseInt(e.keyspace_hits)+parseInt(e.keyspace_misses))*100).toFixed(2),value:"",ps:"Find database key hit rate"},{name:"latest_fork_usec",function:e=>e.latest_fork_usec,value:"",ps:"The number of microseconds spent on the last fork() operation"}],Y=$({__name:"index",setup(e,{expose:a}){const{t:t}=R(),n=H({}),{table:s,columns:l}=f([{title:t("Plugin.Apache.index_12"),key:"name",width:"30%"},{title:t("Plugin.Apache.index_13"),key:"value",width:"20%"},{title:t("Public.Table.Note"),key:"ps",ellipsis:{tooltip:!0}}]),{loading:i,setLoading:o}=y(),u=async()=>{try{o(!0);const{message:e}=await r();c(e)&&(Object.assign(n,e),X.forEach((e=>{e.function&&(e.value=e.function(n))})),s.data=X)}finally{o(!1)}};return u(),a({init:u}),(e,a)=>{const t=z;return S(),C(t,{loading:M(i),data:M(s).data,columns:M(l)},null,8,["loading","data","columns"])}}}),Z=m($({__name:"index",setup(e,{expose:a}){const{t:t}=R(),n=N("/wwww/server"),l=H({appendonly:"no",appendfsync:"everysec"}),i=H([{time:900,keys:1},{time:300,keys:10},{time:60,keys:1e4}]),o=[{label:t("Config.Panel.index_83_1"),value:"yes"},{label:t("Config.Panel.index_83_2"),value:"no"}],p=[{label:"always",value:"always"},{label:"everysec",value:"everysec"},{label:"no",value:"no"}],r=async e=>{await d((e=>{const a={dir:n.value,...l,rdb:JSON.stringify(J(i))};return"append"===e?J(l):{[e]:a[e]}})(e))},{loading:m,setLoading:v}=y(),f=async()=>{try{v(!0);const{message:e}=await _();c(e)&&(n.value=e.dir,Object.assign(i,e.rdb.map((e=>({time:Number(e.time),keys:Number(e.keys)})))),Object.assign(l,e.aof))}finally{v(!1)}};return f(),a({init:f}),(e,a)=>{const t=E,c=w,d=k,_=j,y=D,v=s,f=P,b=U,x=g,h=u;return S(),C(h,{show:M(m)},{default:I((()=>[B(f,{title:e.$t("Plugin.Redis.index_4")},{default:I((()=>[B(y,{class:"mt-10px"},{default:I((()=>[B(_,{"show-label":!1},{default:I((()=>[B(d,null,{default:I((()=>[B(t,{class:"w-250px",value:M(n),"onUpdate:value":a[0]||(a[0]=e=>G(n)?n.value=e:null)},null,8,["value"]),B(c,{type:"primary",onClick:a[1]||(a[1]=e=>r("dir"))},{default:I((()=>[L(O(e.$t("Public.Btn.Save")),1)])),_:1})])),_:1})])),_:1})])),_:1}),B(v,{class:"mb-10px"},{default:I((()=>[A("li",null,O(e.$t("Plugin.Redis.index_3")),1)])),_:1})])),_:1},8,["title"]),B(f,{title:e.$t("Plugin.Redis.index_5")},{default:I((()=>[B(y,{class:"mt-10px","label-placement":"top"},{default:I((()=>[B(d,null,{default:I((()=>[B(_,{label:"Append only"},{default:I((()=>[B(b,{class:"w-150px",value:M(l).appendonly,"onUpdate:value":a[2]||(a[2]=e=>M(l).appendonly=e),options:o},null,8,["value"])])),_:1}),B(_,{label:"Append sync"},{default:I((()=>[B(b,{class:"w-150px",value:M(l).appendfsync,"onUpdate:value":a[3]||(a[3]=e=>M(l).appendfsync=e),options:p},null,8,["value"])])),_:1}),B(_,{label:" "},{default:I((()=>[B(c,{type:"primary",onClick:a[4]||(a[4]=e=>r("append"))},{default:I((()=>[L(O(e.$t("Public.Btn.Save")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["title"]),B(f,{title:e.$t("Plugin.Redis.index_6")},{default:I((()=>[B(y,{class:"mt-10px"},{default:I((()=>[(S(!0),T(F,null,q(M(i),((e,t)=>(S(),C(_,{"show-label":!1,key:t},{default:I((()=>[B(d,{class:"items-center"},{default:I((()=>[B(x,{class:"w-80px","show-button":!1,placeholder:"",value:e.time,"onUpdate:value":a=>e.time=a},null,8,["value","onUpdate:value"]),a[6]||(a[6]=A("span",null,"In seconds,insert",-1)),B(x,{class:"w-80px","show-button":!1,placeholder:"",value:e.keys,"onUpdate:value":a=>e.keys=a},null,8,["value","onUpdate:value"]),a[7]||(a[7]=A("span",null,"bar data",-1))])),_:2},1024)])),_:2},1024)))),128)),B(_,{"show-label":!1},{default:I((()=>[B(c,{type:"primary",onClick:a[5]||(a[5]=e=>r("rdb"))},{default:I((()=>[L(O(e.$t("Public.Btn.Save")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["title"])])),_:1},8,["show"])}}}),[["__scopeId","data-v-bb5721bc"]]),ee=$({__name:"index",setup(s){const{t:l}=R(),i=N("service"),o=[{key:"service",label:l("Security.History.Index_10"),component:a},{key:"version",label:l("Plugin.Ftp.index_9"),component:n},{key:"optimization",label:l("Plugin.Mysql.index_27"),component:W},{key:"file",label:l("Site.Config.index_15"),data:{path:"/www/server/redis/redis.conf"},component:t},{key:"status",label:l("Docker.Setting.index_2"),component:Y},{key:"persistence",label:l("Plugin.Redis.index_7"),component:Z}];return(a,t)=>{const n=e;return S(),C(n,{value:M(i),"onUpdate:value":t[0]||(t[0]=e=>G(i)?i.value=e:null),data:o},null,8,["value"])}}});export{ee as default};
