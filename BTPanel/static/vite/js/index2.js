import{_ as s}from"./index228.js?v=1747989938512";import{u as a,q as e,dp as t,dq as n,h as l,dr as o,p as i,ds as u,c as p,O as r}from"./page_layout.js?v=1747989938512";import{k as c,y as A,h as d,d as g,aj as m}from"./public.js?v=1747989938512";import{ae as _,bU as x,T as f}from"./naive.js?v=1747989938512";import{d as y,O as v,P as C,F as k,i as b,r as h,w as j,o as w,ap as B,R as L,a0 as M,a1 as Q,U as R,S as D,N as E,V as I,a2 as U,c as z,k as F,ao as O,_ as N,j as S,x as H,aj as P}from"./vue.js?v=1747989938512";import{_ as V}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1747989938512";import{_ as q}from"./index.vue_vue_type_script_setup_true_lang8.js?v=1747989938512";import{_ as T}from"./index101.js?v=1747989938512";import"./common.js?v=1747989938512";import"./__commonjsHelpers__.js?v=1747989938512";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1747989938512";const $=y({name:"EmptyBox",setup(s,{slots:t}){const n=a(),{t:l}=v(),o=()=>{c()};return()=>{var s;let a;return C(k,null,[0===n.taskCount?C(_,{class:"pt-80px",size:"huge",description:l("Layout.MessageBox.index_1")},null):C(k,null,[C(x,{class:"justify-between! flex-nowrap!"},{default:()=>{return[C("span",null,[l("Layout.MessageBox.index_2")]),C(f,{text:!0,type:"primary",onClick:o},(s=a=l("Public.Status.Restart"),"function"==typeof s||"[object Object]"===Object.prototype.toString.call(s)&&!b(s)?a:{default:()=>[a]}))];var s}}),C(e,{class:"mt-12px! mb-16px!"},null),null==(s=t.default)?void 0:s.call(t)])])}}}),G={class:"h-460px overflow-auto"},J={class:"install"},K={key:0,class:"cmd"},W=i(y({__name:"index",setup(s,{expose:e}){const i=a(),u=t(),p=n(),r=h(""),{send:c,close:d}=A("/sock_shell",{onMessage:(s,a)=>{const e=a.data;l(e)&&(r.value+=e)}}),g=()=>{if(p.taskList.length){const{type:s,status:a}=p.taskList[0];"execshell"===s&&("-1"===a?(r.value="",c("tail -n 100 -f /tmp/panelExec.log")):setTimeout((async()=>{await p.getList(),g()}),2e3))}};j((()=>i.taskCount),(s=>{s&&g(),u.getMessageCount()})),w((()=>{d()}));const m=async()=>{await p.getList(),0!==i.taskCount&&(g(),p.onRepetion())};return m(),e({init:m}),(s,a)=>{const e=f,t=x,n=B("scroll-bottom");return L(),M(I($),null,{default:Q((()=>[R("div",G,[(L(!0),D(k,null,E(I(p).taskList,(l=>(L(),D("div",{key:l.id},["execshell"===l.type?(L(),D(k,{key:0},[C(t,{class:"justify-between! mb-8px"},{default:Q((()=>[R("span",J,U(l.name),1),R("div",null,[z(U("0"===l.status?"waiting":s.$t("Soft.index_40"))+" ",1),a[0]||(a[0]=R("img",{src:"data:image/gif;base64,R0lGODlhDgACAIAAAHNzcwAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFDgABACwAAAAAAgACAAACAoRRACH5BAUOAAEALAQAAAACAAIAAAIChFEAIfkEBQ4AAQAsCAAAAAIAAgAAAgKEUQAh+QQJDgABACwAAAAADgACAAACBoyPBpu9BQA7"},null,-1)),a[1]||(a[1]=R("span",{class:"px-5px"},"|",-1)),C(e,{text:"",color:"#20a53a",onClick:s=>(async s=>{d(),await o({id:s}),await p.getList()})(l.id)},{default:Q((()=>[z(U(s.$t("Public.Btn.Del")),1)])),_:2},1032,["onClick"])])])),_:2},1024),"-1"===l.status?F((L(),D("pre",K,[z(U(I(r)),1)])),[[n]]):O("",!0)],64)):O("",!0)])))),128))])])),_:1})}}}),[["__scopeId","data-v-7b9da2ab"]]),X=y({__name:"index",setup(s,{expose:a}){const e=t(),{loading:n,table:l,columns:o,search:i}=N(e),u=()=>{e.getMessageCount()};return a({init:u}),(s,a)=>{const e=d,t=q,p=V;return L(),M(p,null,{table:Q((()=>[C(e,{loading:I(n),data:I(l).data,columns:I(o)},null,8,["loading","data","columns"])])),pageRight:Q((()=>[C(t,{page:I(i).p,"onUpdate:page":a[0]||(a[0]=s=>I(i).p=s),"page-size":I(i).limit,"onUpdate:pageSize":a[1]||(a[1]=s=>I(i).limit=s),"item-count":I(l).total,"page-slot":5,"show-size-picker":!1,onRefresh:u},null,8,["page","page-size","item-count"])])),_:1})}}}),Y=i(y({__name:"index",setup(s,{expose:a}){const e=h("None"),{loading:t,setLoading:n}=g(),o=async()=>{try{n(!0);const{message:s}=await u();p(s)&&(e.value=l(s.result)?s.result:"None")}finally{n(!1)}};return o(),a({init:o}),(s,a)=>{const n=T,l=r;return L(),M(l,{class:"h-full",show:I(t)},{default:Q((()=>[C(n,{log:I(e)},null,8,["log"])])),_:1},8,["show"])}}}),[["__scopeId","data-v-8405edde"]]),Z={class:"h-550px"},ss=y({__name:"index",setup(e,{expose:n}){const{t:l}=v(),o=a(),i=t(),u=h("task"),p=S([{key:"task",label:()=>C("span",null,[l("Layout.MessageBox.index_3"),z(" ("),o.taskCount,z(")")]),component:H(W)},{key:"message",label:()=>C("span",null,[l("Layout.MessageBox.index_4"),z(" ("),i.listConut,z(")")]),component:H(X)},{key:"log",label:l("Layout.MessageBox.index_5"),component:H(Y)}]);return i.getMessageCount(),n({onClose:()=>{m()}}),(a,e)=>{const t=s;return L(),D("div",Z,[C(t,{value:I(u),"onUpdate:value":e[0]||(e[0]=s=>P(u)?u.value=s:null),ref:"tabsRef",data:I(p)},null,8,["value","data"])])}}});export{ss as default};
