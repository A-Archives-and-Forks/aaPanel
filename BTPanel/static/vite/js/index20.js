const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index116.js?v=1741416570306","js/index.vue_vue_type_script_setup_true_lang.js?v=1741416570306","js/vue.js?v=1741416570306","js/__commonjsHelpers__.js?v=1741416570306","js/naive.js?v=1741416570306","js/common.js?v=1741416570306","js/page_layout.js?v=1741416570306","js/public.js?v=1741416570306","css/public.css?v=1741416570306","css/page_layout.css?v=1741416570306","js/index.vue_vue_type_script_setup_true_lang2.js?v=1741416570306","js/index96.js?v=1741416570306","css/index15.css?v=1741416570306","js/index122.js?v=1741416570306","js/index123.js?v=1741416570306","css/index23.css?v=1741416570306","js/soft.js?v=1741416570306","js/index117.js?v=1741416570306","js/index223.js?v=1741416570306","css/index54.css?v=1741416570306","js/index95.js?v=1741416570306","js/site.js?v=1741416570306","css/index63.css?v=1741416570306","js/index118.js?v=1741416570306","js/index.vue_vue_type_script_setup_true_lang4.js?v=1741416570306","js/index.vue_vue_type_script_setup_true_lang8.js?v=1741416570306","css/index19.css?v=1741416570306","js/index.vue_vue_type_script_setup_true_lang6.js?v=1741416570306","js/index119.js?v=1741416570306","js/index120.js?v=1741416570306","js/index.js?v=1741416570306","css/index90.css?v=1741416570306","js/index.vue_vue_type_script_setup_true_lang7.js?v=1741416570306","css/index64.css?v=1741416570306"])))=>i.map(i=>d[i]);
import{j as a,aB as e,aC as t,b as s,_ as i,aA as n,aD as o,aE as l,aF as d,G as r,av as _,aG as p,a as c,m as u}from"./page_layout.js?v=1741416570306";import{_ as m}from"./index.js?v=1741416570306";import{_ as h}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1741416570306";import{_ as b}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1741416570306";import{_ as w}from"./index.vue_vue_type_script_setup_true_lang12.js?v=1741416570306";import{_ as x}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1741416570306";import{_ as y}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1741416570306";import{_ as k}from"./index121.js?v=1741416570306";import{n as f,c as g,d as D,b as v,o as j,p as C,f as R,a as $,q as U}from"./public.js?v=1741416570306";import{u as E,a as q,b as L,c as W,d as O,_ as P,e as I,f as A,g as B}from"./index122.js?v=1741416570306";import{N as T,M as V,aa as z,c as M,i as S,d as G,r as K,ah as F,P as H,_ as N,$ as Q,a0 as J,S as X,ae as Y,Q as Z,j as aa,w as ea,a7 as ta,R as sa,ao as ia,W as na}from"./vue.js?v=1741416570306";import{g as oa}from"./hooks.js?v=1741416570306";import{bV as la,bO as da,ck as ra,T as _a,ce as pa}from"./naive.js?v=1741416570306";import"./common.js?v=1741416570306";import"./__commonjsHelpers__.js?v=1741416570306";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1741416570306";import"./php.js?v=1741416570306";import"./soft.js?v=1741416570306";import"./index123.js?v=1741416570306";const ca=({row:a})=>{if(a.password)return T(f,{value:a.password},null);const{t:e}=V();return T("div",{class:"text-desc cursor-pointer",onClick:()=>{E(a)}},[T(z,{keypath:"Database.index_15.index_1",tag:"span",scope:"global"},{error:()=>T("span",{class:"text-error"},[e("Database.index_15.index_2")])})])},ua=({row:e})=>{let t;const{t:s}=V();return T("div",{class:"flex items-center"},[T(a,{type:e.backup_count>0?"primary":"warning",class:"backup-btn",onClick:()=>{q(e)}},{default:()=>[e.backup_count>0?s("Database.index_17",[e.backup_count]):s("Database.index_18")]}),T("span",{class:"mx-4px"},[M("|")]),T(a,{onClick:()=>{L(e)}},(i=t=s("Public.Btn.Import"),"function"==typeof i||"[object Object]"===Object.prototype.toString.call(i)&&!S(i)?t:{default:()=>[t]}))]);var i},ma={key:1},ha=G({__name:"index",setup(n){const o=K(!1),l=F(),d=()=>{l.push("/crontab/task")},r=async a=>{try{await e({name:"mysql",status:a?1:0})}catch(t){o.value=!a}},{loading:_,setLoading:p}=g();return(async()=>{try{p(!0);const{message:a}=await t({name:"mysql"});s(a)&&(o.value=!!a.status)}finally{p(!1)}})(),(e,t)=>{const s=i,n=la,l=a,p=da,c=ra;return H(),N(c,{"show-icon":!1,closable:!1},{default:Q((()=>[T(p,{class:"h-24px items-center"},{default:Q((()=>[T(s,{name:"base-info",size:"18"}),M(" "+J(e.$t("Database.Mysql.index_1")),1),T(n,{size:"small",loading:X(_),value:X(o),"onUpdate:value":[t[0]||(t[0]=a=>Y(o)?o.value=a:null),r]},null,8,["loading","value"]),X(o)?(H(),N(l,{key:0,onClick:d},{default:Q((()=>[M("["+J(e.$t("Database.index_7.index_2"))+"]",1)])),_:1})):(H(),Z("span",ma,J(e.$t("Database.Mysql.index_2")),1))])),_:1})])),_:1})}}}),ba={class:"p-16px"},wa=G({__name:"index",setup(a){const e=na((()=>c((()=>import("./index116.js?v=1741416570306")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16])))),t=na((()=>c((()=>import("./index117.js?v=1741416570306")),__vite__mapDeps([17,18,2,3,4,5,6,7,8,9,19,20,21,1,22])))),i=na((()=>c((()=>import("./index118.js?v=1741416570306")),__vite__mapDeps([23,20,6,2,3,4,5,7,8,9,24,25,26,27])))),f=na((()=>c((()=>import("./index119.js?v=1741416570306")),__vite__mapDeps([28,1,2,3,4,5,6,7,8,9])))),q=na((()=>c((()=>import("./index120.js?v=1741416570306").then((a=>a.i))),__vite__mapDeps([29,6,2,3,4,5,7,8,9,30,31,20,24,25,26,27,32,33])))),{t:L}=V(),z=n(),S=K(!1),G=D(),F=D(L("Database.index_3"),{row:void 0}),Z=()=>{G.show=!0},la=()=>{A()},da=a=>{z.phpmyadmin.setup?(a?(F.data.row=a,F.title=L("Database.index_8",[a.name])):(F.data.row=void 0,F.title=L("Database.index_3")),F.show=!0):u.error(L("Database.index_9"))},ra=()=>{B()},ma=D(L("Database.Mysql.index_3")),wa=D(),xa=D(),ya=async()=>{await o(z.type,{ids:[]}),Ra()},{keys:ka,table:fa,columns:ga}=v([{type:"selection",width:40},{key:"name",title:L("Database.index_12"),width:"10%",minWidth:100,ellipsis:{tooltip:{width:"trigger"}}},{key:"username",title:L("Database.index_13"),width:"10%",minWidth:100,ellipsis:{tooltip:{width:"trigger"}}},{key:"password",title:L("Database.index_14"),width:"10%",minWidth:120,render:a=>T(ca,{row:a},null)},j({type:"database",width:"5%",maxWidth:60,callback:()=>{Ra()}}),{key:"backup_count",title:L("Database.index_16"),width:"10%",minWidth:120,render:a=>T(ua,{row:a},null)},{key:"sid",title:L("Database.index_19"),width:"8%",minWidth:80,ellipsis:{tooltip:!0},render:a=>oa(a)},C({minWidth:90,onBlur:async(a,e)=>{await p({id:e.id,ps:a})}}),R({width:"30%",minWidth:280,options:a=>[{label:L("Database.index_20"),show:0===a.db_type,onClick:()=>{da(a)}},{label:L("Database.index_21"),class:"permission-btn",onClick:()=>{(a=>{xa.data.row=a,xa.title=L("Database.index_11",[a.name]),xa.show=!0})(a)}},{label:L("Database.index_22"),class:"tools-btn",onClick:()=>{(a=>{wa.data.row=a,wa.title=L("Database.index_10",[a.name]),wa.show=!0})(a)}},{label:L("Database.index_23"),class:"change-btn",onClick:()=>{E(a)}},{label:L("Public.Btn.Del"),class:"delete-btn",onClick:()=>{W([a])}}]})]),Da=[{key:"sync",label:L("Database.index_24"),onBatch:a=>{$({title:L("Database.index_25"),content:L("Database.index_26"),onConfirm:async()=>{await o(z.type,{ids:a.map((a=>a.id))})}})}},{key:"backup",type:"confirm",label:L("Database.index_27"),confirm:{title:L("Database.index_28"),desc:L("Database.index_29"),api:a=>l(z.type,{id:a.id},!1),done:()=>{Ra()},columns:[{key:"name",title:L("Database.index_12")}]}},{key:"delete",label:L("Database.index_30"),onBatch:a=>{W(a)}}],{loading:va,setLoading:ja}=g(!0),Ca=aa({p:1,limit:20,sid:-1,search:""}),Ra=async()=>{try{ja(!0);const{message:a}=await d((()=>{const a={...ta(Ca)};return-1===a.sid&&delete a.sid,a})());s(a)?(fa.data=r(a.data)?a.data:[],fa.total=_(a.page)):(fa.data=[],fa.total=0)}finally{ka.value=[],ja(!1)}};ea((()=>z.isRefresh),(a=>{a&&(z.setRefresh(!1),z.delRemoteId===Ca.sid&&(Ca.sid=-1),Ra())}));return(async()=>{try{await z.getRemote(),z.install?(S.value=!0,Ra()):(S.value=!1,U())}finally{ja(!1)}})(),(a,s)=>{const n=_a,o=k,l=y,d=x,r=w,_=b,p=h,c=m,u=pa;return H(),N(X(I),null,{default:Q((()=>[T(u,null,{default:Q((()=>[sa("div",ba,[T(ha),T(p,{class:"mt-16px",feedback:!0},{toolsLeft:Q((()=>[T(n,{class:"add-db-btn",type:"primary",onClick:Z},{default:Q((()=>[M(J(a.$t("Database.index_1")),1)])),_:1}),T(n,{class:"set-root-btn",onClick:la},{default:Q((()=>[M(J(a.$t("Database.index_2")),1)])),_:1}),T(n,{onClick:s[0]||(s[0]=a=>da())},{default:Q((()=>[M(J(a.$t("Database.index_3")),1)])),_:1}),T(n,{onClick:ra},{default:Q((()=>[M(J(a.$t("Database.index_4")),1)])),_:1}),T(n,{onClick:s[1]||(s[1]=a=>X(ma).show=!0)},{default:Q((()=>[M(J(a.$t("Database.Mysql.index_3")),1)])),_:1}),T(n,{onClick:ya},{default:Q((()=>[M(J(a.$t("Database.index_5")),1)])),_:1}),T(n,{onClick:X(O)},{default:Q((()=>[M(J(a.$t("Database.index_6")),1)])),_:1},8,["onClick"]),X(S)?(H(),N(o,{key:0,"soft-name":"mysql"})):ia("",!0)])),toolsRight:Q((()=>[T(X(P),{ref:"remoteRef",value:X(Ca).sid,"onUpdate:value":s[2]||(s[2]=a=>X(Ca).sid=a),"store-key":"mysql-remote",onChange:Ra},null,8,["value"]),T(l,{value:X(Ca).search,"onUpdate:value":s[3]||(s[3]=a=>X(Ca).search=a),placeholder:a.$t("Database.mongo.index_3"),width:"180",onSearch:Ra},null,8,["value","placeholder"])])),table:Q((()=>[T(d,{"checked-row-keys":X(ka),"onUpdate:checkedRowKeys":s[4]||(s[4]=a=>Y(ka)?ka.value=a:null),loading:X(va),data:X(fa).data,columns:X(ga)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:Q((()=>[T(r,{"checked-row-keys":X(ka),"onUpdate:checkedRowKeys":s[5]||(s[5]=a=>Y(ka)?ka.value=a:null),data:X(fa).data,options:Da},null,8,["checked-row-keys","data"])])),pageRight:Q((()=>[T(_,{page:X(Ca).p,"onUpdate:page":s[6]||(s[6]=a=>X(Ca).p=a),"page-size":X(Ca).limit,"onUpdate:pageSize":s[7]||(s[7]=a=>X(Ca).limit=a),"store-key":"database-mysql-page","item-count":X(fa).total,onRefresh:Ra},null,8,["page","page-size","item-count"])])),_:1}),T(c,{show:X(G).show,"onUpdate:show":s[8]||(s[8]=a=>X(G).show=a),title:a.$t("Database.mongo.index_4"),width:540,"min-height":334,footer:!0,component:X(e)},null,8,["show","title","component"]),T(c,{show:X(F).show,"onUpdate:show":s[9]||(s[9]=a=>X(F).show=a),title:X(F).title,data:X(F).data,width:740,height:580,component:X(t)},null,8,["show","title","data","component"]),T(c,{show:X(xa).show,"onUpdate:show":s[10]||(s[10]=a=>X(xa).show=a),data:X(xa).data,title:X(xa).title,width:480,"min-height":132,footer:!0,component:X(f)},null,8,["show","data","title","component"]),T(c,{show:X(wa).show,"onUpdate:show":s[11]||(s[11]=a=>X(wa).show=a),data:X(wa).data,title:X(wa).title,width:870,"min-height":359,component:X(i)},null,8,["show","data","title","component"]),T(c,{show:X(ma).show,"onUpdate:show":s[12]||(s[12]=a=>X(ma).show=a),title:X(ma).title,width:850,"min-height":600,component:X(q)},null,8,["show","title","component"])])])),_:1})])),_:1})}}});export{wa as default};
