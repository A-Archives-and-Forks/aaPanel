System.register(["./vue-legacy.js?v=1753954525509","./page_layout-legacy.js?v=1753954525509","./public-legacy.js?v=1753954525509","./index-legacy102.js?v=1753954525509","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1753954525509","./naive-legacy.js?v=1753954525509","./index-legacy.js?v=1753954525509","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1753954525509","./xterm-legacy.js?v=1753954525509","./xterm-addon-canvas-legacy.js?v=1753954525509"],(function(e,t){"use strict";var a,n,o,l,i,s,r,c,d,u,p,v,m,b,g,h,x,y,_,f,w,k,C,T,S,A,j,O,E,I,L,z,D,q,F,M,R,U,$,P,B,Y,H,K,W,X,N,Q,V,G,J,Z,ee,te,ae,ne,oe,le,ie,se;return{setters:[e=>{a=e._,n=e.k,o=e.P,l=e.Q,i=e.w,s=e.U,r=e.V,c=e.a2,d=e.j,u=e.a3,p=e.X,v=e.ah,m=e.r,b=e.e,g=e.$,h=e.an,x=e.o,y=e.b,_=e.n,f=e.a1,w=e.O,k=e.H,C=e.au,T=e.W,S=e.I,A=e.F,j=e.al,O=e.l,E=e.v},e=>{I=e.i,L=e.v,z=e.a,D=e.cR,q=e.w,F=e.e,M=e.t,R=e._},e=>{U=e.u,$=e.b,P=e.h,B=e.d,Y=e.c,H=e.f,K=e.i,W=e.e,X=e.z},e=>{N=e._},e=>{Q=e._},e=>{V=e.ay,G=e.aq,J=e.cA,Z=e.bY,ee=e.cD},e=>{te=e._},e=>{ae=e._},e=>{ne=e.x,oe=e.a,le=e.b,ie=e.c},e=>{se=e.x}],execute:function(){var re=document.createElement("style");re.textContent='[data-v-3f2e8f75] .xterm{padding:12px!important}.box[data-v-3f2e8f75]{height:calc(100vh - 160px)}.terminal[data-v-b0b3524c]{position:relative;height:100%}.head[data-v-b0b3524c]{position:relative;height:40px;align-items:center;--un-bg-opacity:1;background-color:rgb(241 241 241 / var(--un-bg-opacity))}.head .item[data-v-b0b3524c]{width:160px;height:100%;display:flex;cursor:pointer;align-items:center;justify-content:space-between;padding-left:8px;padding-right:8px;border-right:1px solid rgb(231,225,225)}.head .item .close-terminal[data-v-b0b3524c]{--un-text-opacity:1;color:rgb(239 8 8 / var(--un-text-opacity))}.head .item .close-terminal[data-v-b0b3524c]:hover{--un-bg-opacity:1;background-color:rgb(247 247 247 / var(--un-bg-opacity))}.head .item .text[data-v-b0b3524c]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.head .item .icon[data-v-b0b3524c]{margin-right:5px;width:10px;height:10px;--un-bg-opacity:1;background-color:rgb(32 165 58 / var(--un-bg-opacity));display:inline-block;border-radius:50%}.head .item .icon-active[data-v-b0b3524c]{--un-bg-opacity:1;background-color:rgb(247 11 60 / var(--un-bg-opacity))}.head .item[data-v-b0b3524c]:hover{--un-bg-opacity:1;background-color:rgb(218 218 218 / var(--un-bg-opacity))}.head .item-active[data-v-b0b3524c]{--un-text-opacity:1;color:rgb(255 255 255 / var(--un-text-opacity));background:#424242!important}.head .add-terminal[data-v-b0b3524c]{width:40px;height:40px;text-align:center;line-height:50px}.head .add-terminal[data-v-b0b3524c]:hover{--un-bg-opacity:1;background-color:rgb(204 204 204 / var(--un-bg-opacity))}.context-menu[data-v-b0b3524c]{position:absolute;z-index:9999;--un-bg-opacity:1;background-color:rgb(255 255 255 / var(--un-bg-opacity));--un-text-opacity:1;color:rgb(102 102 102 / var(--un-text-opacity));border-radius:5px}.context-menu ul[data-v-b0b3524c]{width:150px;padding-top:5px;padding-bottom:5px;list-style:none}.context-menu ul li[data-v-b0b3524c]{cursor:pointer;padding:8px 10px}.context-menu ul li[data-v-b0b3524c]:hover{--un-bg-opacity:1;background-color:rgb(231 245 233 / var(--un-bg-opacity));--un-text-opacity:1;color:rgb(29 149 52 / var(--un-text-opacity))}.terminal-contract-tool[data-v-b0b3524c]{position:absolute;right:0;top:50%;z-index:50;height:4rem;width:2rem;display:flex;cursor:pointer;align-items:center;justify-content:center;border-bottom-left-radius:9999px;border-top-left-radius:9999px;--un-bg-opacity:1;background-color:rgb(55 65 81 / var(--un-bg-opacity));background-color:#555;transform:translateY(-50%)}.terminal-contract-tool[data-v-b0b3524c]:after{content:"";--un-border-opacity:1;border-color:rgb(255 255 255 / var(--un-border-opacity));border:2px solid rgb(255,255,255);transform:rotate(45deg);border-left-width:0;border-bottom-width:0;height:1rem;width:1rem}.terminal-contract-tool[data-v-b0b3524c]:hover{--un-bg-opacity:1;background-color:rgb(107 114 128 / var(--un-bg-opacity))}.active[data-v-b0b3524c]:after{transform:rotate(-135deg)!important}.box[data-v-932584a7]{height:calc(100vh - 52px)}\n',document.head.appendChild(re);const{t:ce}=I.global,de=(e("a",(e=>L.post("/xterm?action=create_host",e,{requestOptions:{loading:ce("Security.Api.Index_4"),successMessage:!0}}))),e("g",(e=>L.post("/xterm?action=get_host_find",e))),e=>L.post("/xterm?action=remove_host",e,{requestOptions:{loading:ce("Security.Api.Index_3"),successMessage:!0}})),ue=e=>L.post("/xterm?action=create_command",e,{requestOptions:{loading:ce("Security.Api.Index_4"),successMessage:!0}}),pe=e=>L.post("/xterm?action=modify_command",e,{requestOptions:{loading:ce("Crontab.Api.index_5"),successMessage:!0}}),ve=e=>L.post("/xterm?action=remove_command",e,{requestOptions:{loading:ce("Security.Api.Index_3"),successMessage:!0}}),me=e=>{U({title:e.title,width:600,footer:!0,data:e.data,component:a((()=>z((()=>t.import("./form-legacy9.js?v=1753954525509")),void 0)))})},be=n({__name:"index",setup(e,{expose:t}){const{t:a}=o(),n=D(),{keys:m,table:b,columns:g}=$([{key:"host",title:a("Term.index_8"),ellipsis:{tooltip:{width:"trigger"}},render:e=>l("span",{class:"cursor-pointer w-100%",onClick:()=>x(e)},[e.host])},P({width:130,options:e=>[{label:a("Site.TableOP.index_7"),onClick:()=>{const t={title:a("Term.index_22"),data:{isEdit:!0,row:e}};me(t)}},{label:a("Public.Btn.Del"),onClick:()=>{B({title:a("Term.index_6"),content:a("Term.index_7",[e.host]),onConfirm:async({hide:t})=>{await de({host:e.host}),f(),t()}})}}]})]),h=()=>{const e={title:a("Term.index_19"),data:{isEdit:!1}};me(e)},x=e=>{n.server={...e,time:new Date}},{loading:y,setLoading:_}=Y(),f=async()=>{try{_(!0);const{message:e}=await L.post("/xterm?action=get_host_list");q(e)&&(b.data=e)}finally{m.value=[],_(!1)}};return f(),i((()=>n.isRefresh),(e=>{e&&(n.setRefresh(!1),f())})),t({init:f}),(e,t)=>{const a=V,n=H,o=Q;return s(),r("div",null,[l(o,null,{toolsLeft:c((()=>[l(a,{type:"primary",onClick:h},{default:c((()=>[d(u(e.$t("Term.index_19")),1)])),_:1})])),table:c((()=>[l(n,{"checked-row-keys":p(m),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>v(m)?m.value=e:null),loading:p(y),data:p(b).data,columns:p(g)},null,8,["checked-row-keys","loading","data","columns"])])),_:1})])}}}),ge={class:"p-20px"},he=n({__name:"form",props:{data:{}},setup(e,{expose:t}){const{t:a}=o(),n=e,{isEdit:i,row:d,getList:u}=n.data,v=m(null),g=b({name:"",content:""}),h={name:{required:!0,message:a("Security.Conf.Index_28"),trigger:["blur","input"]},content:{required:!0,message:a("Security.Conf.Index_28"),trigger:["blur","input"]}};return i&&d&&(g.name=d.title,g.content=d.shell),t({onConfirm:async({hide:e})=>{await(v.value?.validate()),i?await pe({shell:g.content,title:d?d.title:"",new_title:g.name}):await ue({shell:g.content,title:g.name}),u?.(),e()}}),(e,t)=>{const a=G,n=J,o=ae;return s(),r("div",ge,[l(o,{ref_key:"formRef",ref:v,model:p(g),rules:h},{default:c((()=>[l(n,{label:e.$t("Docker.Compose.form.index_3"),path:"name"},{default:c((()=>[l(a,{class:"w-280px!",value:p(g).name,"onUpdate:value":t[0]||(t[0]=e=>p(g).name=e),placeholder:e.$t("Term.idnex_1")},null,8,["value","placeholder"])])),_:1},8,["label"]),l(n,{label:e.$t("Docker.LocalImage.build_5"),path:"content"},{default:c((()=>[l(a,{class:"w-280px!",type:"textarea",rows:6,value:p(g).content,"onUpdate:value":t[1]||(t[1]=e=>p(g).content=e),placeholder:e.$t("Term.index_2")},null,8,["value","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"])])}}}),xe=n({__name:"index",setup(e,{expose:t}){const{t:a}=o(),{keys:n,table:i,columns:m}=$([{key:"title",title:a("Term.index_4"),ellipsis:{tooltip:{width:"trigger"}},render:e=>l("span",{class:"cursor-pointer w-100%",onClick:()=>{b(e.shell)}},[e.title])},P({width:130,options:e=>[{label:a("Public.Btn.Copy"),onClick:()=>{b(e.shell)}},{label:a("Public.Btn.Edit"),onClick:()=>{f(e)}},{label:a("Public.Btn.Del"),onClick:()=>{B({title:a("Term.index_20"),content:a("Term.index_21",[e.title]),onConfirm:async({hide:t})=>{await ve({title:e.title}),x(),t()}})}}]})]),b=e=>{K(e)},{loading:g,setLoading:h}=Y(),x=async()=>{try{h(!0);const{message:e}=await L.post("/xterm?action=get_command_list");q(e)&&(i.data=e)}finally{n.value=[],h(!1)}},y=W(a("Term.index_3"),{isEdit:!1,getList:x}),_=()=>{y.data.isEdit=!1,y.title=a("Term.index_3"),y.show=!0},f=e=>{y.data.row=e,y.data.isEdit=!0,y.title=a("Term.index_5"),y.show=!0};return x(),t({init:x}),(e,t)=>{const a=V,o=H,b=Q,h=te;return s(),r("div",null,[l(b,null,{toolsLeft:c((()=>[l(a,{type:"primary",onClick:_},{default:c((()=>[d(u(e.$t("Term.index_3")),1)])),_:1})])),table:c((()=>[l(o,{"checked-row-keys":p(n),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>v(n)?n.value=e:null),loading:p(g),data:p(i).data,columns:p(m)},null,8,["checked-row-keys","loading","data","columns"])])),_:1}),l(h,{show:p(y).show,"onUpdate:show":t[1]||(t[1]=e=>p(y).show=e),title:p(y).title,data:p(y).data,width:480,footer:!0,component:he},null,8,["show","title","data"])])}}}),ye=n({__name:"index",setup(e){const{t:t}=o(),a=m("server"),n=[{key:"server",label:t("Term.index_23"),component:be},{key:"command",label:t("Term.index_24"),component:xe}];return(e,t)=>{const o=N;return s(),r("div",null,[l(o,{class:"w-300px!",value:p(a),"onUpdate:value":t[0]||(t[0]=e=>v(a)?a.value=e:null),options:n},null,8,["value"])])}}}),_e=n({__name:"terminal",props:{data:{}},emits:["updateState","connectSuccess"],setup(e,{expose:t,emit:a}){const{t:n}=o(),l=e,{data:c}=l,d=a,u=D(),{isFull:p}=g(u),{ws:v,status:b,send:f,open:w,close:k}=X("/webssh",{verifyData:{host:c.host,port:c.port,id:c.id,ps:c.ps,sort:0},onMessage:(e,t)=>{const a=t.data;return a.indexOf("Authentication timeout.")>-1&&(S.value=!0),-1==a.indexOf("@127.0.0.1:")&&-1==a.indexOf("@localhost:")||-1==a.indexOf("Authentication failed")?"\\r\\nlogout\\r\\n"==a||"logout\\r\\n"==a||"\r\nlogout\r\n"==a||"logout\r\n"==a||a.search(/logout[\r\n]+$/)>-1?(d("updateState",c.id,!1),C.write("\r"+n("Component.Terminal.index_1")+"\r"),I(),void k()):void d("connectSuccess",a):(d("updateState",c.id,!1),k(),void I())}});let C,T;const S=m(!1),A=m(null),j=()=>{const e=v.value;e&&(C.loadAddon(T),C.loadAddon(new se.CanvasAddon),C.loadAddon(new le.WebLinksAddon),C.loadAddon(new ie.AttachAddon(e)),setTimeout((()=>{T.fit();const e=A.value;e&&(L.value=`${e.clientHeight}px`)}),100))},O=()=>{A.value&&C.open(A.value)};let E=!1;const I=()=>{E=!1},L=m(""),z=()=>{C.focus(),C.onData((e=>{const t=v.value;"\r"===e&&S.value&&(S.value=!1,C.write("\r\n"),q()),void 0!==t||"\r"!==e||E||(E=!0,C.write("\r\n"+n("Component.Terminal.index_2")+"\r\n"),q())}))},q=()=>{w(),z();const e=v.value;e&&(C.loadAddon(new ie.AttachAddon(e)),d("updateState",c.id,!0))},F=()=>{_((()=>{if(T.fit(),"CLOSED"!==b.value){d("updateState",c.id,!0);const{cols:e,rows:t}=C;f({cols:e,rows:t,resize:1})}}))};i((()=>p.value),(e=>{const t=A.value;t&&!e&&(t.style.height=L.value)}));let M=!0;const R=new ResizeObserver((()=>{h((()=>{M?M=!1:F()}),200)()}));return t({send:f}),x((()=>{C=new ne.Terminal({cursorBlink:!0,fontSize:14,fontFamily:"Monaco, Menlo, Consolas, 'Courier New', monospace",theme:{background:"#333",foreground:"#ececec"}}),T=new oe.FitAddon,j(),O(),z(),F(),(()=>{const e=A.value;e&&R.observe(e)})()})),y((()=>{R?.disconnect()})),(e,t)=>(s(),r("div",{ref_key:"terminalRef",ref:A,class:"w-full box"},null,512))}}),fe=F(_e,[["__scopeId","data-v-3f2e8f75"]]),we=["onClick","onContextmenu"],ke=["title"],Ce=["onClick"],Te={class:"terminal bg-#333333"},Se=n({__name:"index",setup(e){const{t:t}=o(),a=D(),{isFull:n,server:v,isShow:b}=g(a),h=m([{id:"aaaaaaaaa",host:"127.0.0.1",port:22,ps:t("Database.form.index_12"),state:!0}]),x=["Copy session","Close session","Close to right","Close other"],y=m("aaaaaaaaa"),_=()=>{const e={title:t("Term.index_19"),data:{isEdit:!1}};me(e)},I=e=>{const t=M(9,"letter");h.value.push({id:t,host:e.host,port:e.port,ps:e.ps,state:!0}),setTimeout((()=>{L(t)}),20)},L=e=>{y.value=e},z=(e,t)=>{h.value=h.value.map((a=>a.id===e?{...a,state:t}:a))},q=e=>{h.value=h.value.filter((t=>t.id!==e)),y.value=h.value.length>0?h.value[h.value.length-1].id:"aaaaaaaaa"},F=m(!1),U=m(0),$=m(0),P=m({id:"",host:"",port:0,ps:"",state:!1});return document.addEventListener("click",(()=>{F.value=!1})),i((()=>v.value),(e=>{null!==e&&I(e)}),{deep:!0}),(e,t)=>{const a=R,o=Z;return s(),f(o,{vertical:"",class:"gap-0!"},{default:c((()=>[l(o,{class:"head gap-0!"},{default:c((()=>[(s(!0),r(A,null,w(p(h),(e=>(s(),r("div",{key:e.id,class:k(["item",{"item-active":p(y)===e.id}]),onClick:t=>L(e.id),onContextmenu:C((t=>{return a=t,n=e,P.value=n,U.value=a.clientX,$.value=a.clientY,void(F.value=!0);var a,n}),["prevent"])},[T("div",{class:"text",title:e.ps},[T("span",{class:k(["icon",{"icon-active":!e.state}])},null,2),d(u(e.ps?e.ps:e.host),1)],8,ke),l(a,{name:"base-close",class:"close-terminal",size:16,onClick:C((t=>q(e.id)),["stop"])},null,8,["onClick"]),p(F)?(s(),r("div",{key:0,class:"context-menu",style:S({top:p($)-20+"px",left:p(U)-180+"px"})},[T("ul",null,[(s(),r(A,null,w(x,((e,t)=>T("li",{key:t,onClick:t=>(e=>{if(!P.value)return;let t;switch(e){case"Copy session":I(P.value);break;case"Close session":q(P.value.id);break;case"Close to right":t=h.value.findIndex((e=>e.id===P.value.id)),-1!==t&&(h.value.splice(t+1),setTimeout((()=>{L(h.value[t]?.id||"aaaaaaaaa")}),20));break;case"Close other":h.value=h.value.filter((e=>e.id===P.value.id)),setTimeout((()=>{L(P.value.id)}),20)}F.value=!1})(e)},u(e),9,Ce))),64))])],4)):j("",!0)],42,we)))),128)),T("div",{class:"add-terminal",onClick:_},[l(a,{name:"base-add",size:24})]),T("div",{class:"absolute right-0px add-terminal",onClick:t[0]||(t[0]=e=>n.value=!p(n))},[l(a,{name:"base-full",size:24})])])),_:1}),T("div",Te,[(s(!0),r(A,null,w(p(h),(e=>O((s(),f(fe,{key:e.id,data:e,onUpdateFull:L,onUpdateState:z},null,8,["data"])),[[E,e.id===p(y)]]))),128)),T("div",{class:k(["terminal-contract-tool",{active:!p(b)}]),onClick:t[1]||(t[1]=e=>b.value=!p(b))},null,2)])])),_:1})}}}),Ae=F(Se,[["__scopeId","data-v-b0b3524c"]]),je={class:"p-16px box"},Oe=F(n({__name:"index",setup(e){const t=D(),{isShow:a,isFull:n}=g(t),o=m(null);i((()=>n.value),(e=>{e?(a.value=!1,o.value?.requestFullscreen()):document.exitFullscreen().catch((e=>{console.log(e.message)}))}));const d=()=>{document.fullscreenElement?n.value=!0:n.value=!1};return x((()=>{document.addEventListener("fullscreenchange",d)})),y((()=>{document.removeEventListener("fullscreenchange",d)})),(e,t)=>{const n=Z,i=ee;return s(),r("div",je,[l(i,{class:"p-16px h-100%"},{default:c((()=>[T("div",{class:"bg-#ffffff h-100%",ref_key:"contentRef",ref:o},[l(n,{class:"flex-nowrap! h-100%"},{default:c((()=>[l(Ae,{class:"flex-1 overflow-hidden"}),O(l(ye,null,null,512),[[E,p(a)]])])),_:1})],512)])),_:1})])}}}),[["__scopeId","data-v-932584a7"]]),Ee=Object.freeze(Object.defineProperty({__proto__:null,default:Oe},Symbol.toStringTag,{value:"Module"}));e("i",Ee)}}}));
