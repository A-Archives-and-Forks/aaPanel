import{_ as e,a as s}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1721298337096";import{u as a,dF as r,ab as l,e as t,n as u}from"./index.js?v=1721298337096";import{_ as o}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1721298337096";import{s as n}from"./pinia.js?v=1721298337096";import{g as d}from"./index63.js?v=1721298337096";import{l as p,r as i,f as m,k as v,S as _,U as c,V as f,P as g,_ as b,W as w,q as h,t as j}from"./vue.js?v=1721298337096";import{_ as x}from"./Select.js?v=1721298337096";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1721298337096";import"./InputGroupLabel.js?v=1721298337096";import"./InputGroup.js?v=1721298337096";import"./index64.js?v=1721298337096";import"./useTableColumns.js?v=1721298337096";import"./Progress.js?v=1721298337096";import"./Tag.js?v=1721298337096";import"./Empty.js?v=1721298337096";const P={class:"w-240px"},y={class:"w-240px"},U={class:"w-240px"},q={class:"w-240px"},k={class:"ml-8px"},C=p({__name:"index",setup(p,{expose:C}){const E=a(),{remoteList:R}=n(E),D=i(null),G=m({sid:R.value.length>0?R.value[0].id:null,name:"",db_user:"",password:"",active:!1,ssl:""}),I=v((()=>R.value.map((e=>({label:"".concat(e.ps," (").concat(e.db_host,")"),value:e.id}))))),L={name:{required:!0,message:"Please enter database name",trigger:["blur","change"]},db_user:{required:!0,message:"Please enter username",trigger:["blur","change"]},password:{required:!0,message:"Please enter password",trigger:["blur","change"]},sid:{trigger:"change",validator:(e,s)=>null!==s||new Error("Please select remote server")}},N=e=>{G.db_user=e},S=()=>{d()};return C({onConfirm:async({hide:e})=>{var s;await(null==(s=D.value)?void 0:s.validate());const a=(()=>{const e=j(G),{sid:s}=e;if(null===s)throw u.error("Please select remote server"),new Error("Please select remote server");return{...e,sid:s,ps:e.name}})();await r(E.type,a),E.setRefresh(!0),e()}}),(a,r)=>{const u=l,n=e,d=o,p=x,i=t,m=s;return _(),c(m,{ref_key:"formRef",ref:D,model:w(G),rules:L,class:"p-20px"},{default:f((()=>[g(n,{label:"DBName",path:"name"},{default:f((()=>[b("div",P,[g(u,{value:w(G).name,"onUpdate:value":[r[0]||(r[0]=e=>w(G).name=e),N],placeholder:"New database name"},null,8,["value"])])])),_:1}),g(n,{label:"Username",path:"db_user"},{default:f((()=>[b("div",y,[g(u,{value:w(G).db_user,"onUpdate:value":r[1]||(r[1]=e=>w(G).db_user=e),placeholder:"Database user"},null,8,["value"])])])),_:1}),g(n,{label:"Password",path:"password"},{default:f((()=>[b("div",U,[g(d,{value:w(G).password,"onUpdate:value":r[2]||(r[2]=e=>w(G).password=e)},null,8,["value"])])])),_:1}),g(n,{label:"Add to",path:"sid"},{default:f((()=>[b("div",q,[g(p,{value:w(G).sid,"onUpdate:value":r[3]||(r[3]=e=>w(G).sid=e),options:w(I)},null,8,["value","options"])]),b("div",k,[g(i,{onClick:S},{default:f((()=>[h("Remote servers")])),_:1})])])),_:1})])),_:1},8,["model"])}}});export{C as default};
