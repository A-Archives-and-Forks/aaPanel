import{_ as e}from"./index.js?v=1756367574781";import{_ as t}from"./index108.js?v=1756367574781";import{a7 as i,n as l,t as s,d as a,m as o,R as r,q as n,_ as p,fL as u,p as d}from"./page_layout.js?v=1756367574781";import{f as m,a as f,i as c}from"./public.js?v=1756367574781";import{o as v,F as _}from"./index39.js?v=1756367574781";import{k as y,P as h,i as $,r as g,c as b,W as x,F as w,aq as j,a2 as k,V as z,a3 as T,S as C,U as P,ak as q,a4 as F,j as H,l as O,R}from"./vue.js?v=1756367574781";import{dQ as L,au as M,dc as N,dg as S}from"./naive.js?v=1756367574781";import"./common.js?v=1756367574781";import"./__commonjsHelpers__.js?v=1756367574781";import"./soft2.js?v=1756367574781";import"./soft.js?v=1756367574781";import"./file2.js?v=1756367574781";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1756367574781";const U={class:"properties-wrapper"},I={class:"content"},W={class:"info-group"},D={class:"info-item h-60px"},K={class:"info-item-label"},Q={class:"info-item-value"},V={class:"w-360px"},A={class:"my-10px"},B={class:"info-group"},E={class:"info-item"},G={class:"info-item-label"},J={class:"info-item-value"},X={class:"info-item"},Y={class:"info-item-label"},Z={class:"info-item-value flex"},ee={class:"max-w-300px"},te={class:"info-item",style:{"margin-bottom":"0"}},ie={class:"info-item-label"},le={class:"info-item-value"},se={class:"my-10px"},ae={class:"info-group"},oe={class:"info-item"},re={class:"info-item-label"},ne={class:"info-item-value"},pe={class:"info-item"},ue={class:"info-item-label"},de={class:"info-item-value"},me={class:"info-item",style:{"margin-bottom":"0"}},fe={class:"info-item-label"},ce={class:"info-item-value"},ve={class:"my-10px"},_e={class:"info-group"},ye={class:"info-item"},he={class:"info-item-label"},$e={class:"info-item-value"},ge={class:"info-item"},be={class:"info-item-label"},xe={class:"info-item-value"},we={class:"content overflow-auto"},je={width:"200"},ke={class:"content"},ze=d(y({__name:"Properties",setup(d,{expose:y}){const{t:ze}=h(),Te=$("fileStore"),{choosedKeys:Ce,fileList:Pe,currentPath:qe}=Te,Fe=g(!1),He=g("general"),Oe=g(!1),Re=g({st_atime:0,st_mtime:0,st_ctime:0}),Le=b(()=>Re.value.path?"".concat(Re.value.path,"/").concat(Re.value.name):"--"),Me=g([{key:"st_mtime",title:()=>ze("file.properties.modifiedTime"),width:154,render:e=>i(e.st_mtime)},{key:"st_size",title:()=>ze("file.properties.size"),width:80,render:e=>l(e.st_size)},{key:"md5",title:()=>ze("file.properties.md5"),ellipsis:{tooltip:!0}},m({width:110,options:e=>[{label:ze("file.properties.view"),onClick:()=>{!async function(){v(0,"".concat(Re.value.path,"/").concat(Re.value.name),qe.value)}()}},{label:ze("file.properties.restore"),onClick:()=>{!async function(e){f({title:ze("file.properties.restoreHistoryFiles"),width:480,content:()=>x(w,null,[x("div",null,[ze("file.properties.restoreHistoryConfirm",{time:i(e.st_mtime)})]),x("div",{class:"mt-8px text-12px text-default leading-[1.4]"},[ze("file.properties.restoreHistoryWarning")])]),onConfirm:async()=>{await async function(e,t){const i=o.loading(ze("file.properties.restoring"));try{const{status:i}=await s.post("/files?action=re_history",{filename:e,history:t},{requestOptions:{errorMessage:!1}});0===i?o.success(ze("file.properties.restoreSuccess")):o.error(ze("file.properties.restoreFailed"))}finally{i.close()}}("".concat(Re.value.path,"/").concat(Re.value.name),e.st_mtime)}})}(e)}}]})]),Ne=()=>{c(Le.value)};return y({open(){Fe.value=!0;!async function(e){Oe.value=!0;try{const{message:t}=await s.post("/files?action=get_file_attribute",{filename:e},{requestOptions:{isOriginalResult:!0}});a(t)&&(Re.value=t)}finally{Oe.value=!1}}(Pe.value.find(e=>e.nm==Ce.value[0]).path)},close(){Fe.value=!1}}),(s,a)=>{const o=M,d=n,m=N,f=p,c=L,v=u,y=S,h=t,$=r,g=e,b=j("table");return z(),k(g,{show:P(Fe),"onUpdate:show":a[1]||(a[1]=e=>q(Fe)?Fe.value=e:null),width:580,title:"[".concat(P(Re).name,"] - ").concat(s.$t("file.properties.fileProperties"))},{default:T(()=>[C("div",U,[x($,{show:P(Oe)},{default:T(()=>[x(h,{value:P(He),"onUpdate:value":a[0]||(a[0]=e=>q(He)?He.value=e:null)},{default:T(()=>[x(c,{name:"general",tab:s.$t("file.properties.general")},{default:T(()=>[C("div",I,[C("div",W,[C("div",D,[C("div",K,[x(_,{ext:"".concat(P(Re).st_type),size:"large"},null,8,["ext"])]),C("div",Q,[C("div",V,[x(o,{value:P(Re).name,readonly:""},null,8,["value"])])])])]),C("div",A,[x(d)]),C("div",B,[C("div",E,[C("div",G,F(s.$t("file.properties.type"))+":",1),C("div",J,F(P(Re).st_type),1)]),C("div",X,[C("div",Y,F(s.$t("file.properties.location"))+":",1),C("div",Z,[C("div",ee,[x(m,null,{default:T(()=>[H(F(P(Le)),1)]),_:1})]),x(f,{class:"ml-10px cursor-pointer",name:"common-copy",size:"14",onClick:Ne})])]),C("div",te,[C("div",ie,F(s.$t("file.properties.size"))+":",1),C("div",le,F(P(l)(P(Re).st_size)),1)])]),C("div",se,[x(d)]),C("div",ae,[C("div",oe,[C("div",re,F(s.$t("file.properties.permissions"))+":",1),C("div",ne,F(P(Re).mode),1)]),C("div",pe,[C("div",ue,F(s.$t("file.properties.group"))+":",1),C("div",de,F(P(Re).group),1)]),C("div",me,[C("div",fe,F(s.$t("file.properties.user"))+":",1),C("div",ce,F(P(Re).user),1)])]),C("div",ve,[x(d)]),C("div",_e,[C("div",ye,[C("div",he,F(s.$t("file.properties.visitTime"))+":",1),C("div",$e,F(P(i)(P(Re).st_atime)),1)]),C("div",ge,[C("div",be,F(s.$t("file.properties.modifiedTime"))+":",1),C("div",xe,F(P(i)(P(Re).st_mtime)),1)])])])]),_:1},8,["tab"]),x(c,{name:"details",tab:s.$t("file.properties.details")},{default:T(()=>[O((z(),R("div",we,[x(v,null,{default:T(()=>[C("thead",null,[C("tr",null,[C("th",je,F(s.$t("file.properties.name")),1),C("th",null,F(s.$t("file.properties.value")),1)])]),C("tbody",null,[C("tr",null,[C("td",null,F(s.$t("file.properties.name")),1),C("td",null,F(P(Re).name),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.type")),1),C("td",null,F(P(Re).st_type),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.location")),1),C("td",null,F(P(Re).path),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.size")),1),C("td",null,F(P(l)(P(Re).st_size)),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.visitTime")),1),C("td",null,F(P(i)(P(Re).st_atime)),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.modifiedTime")),1),C("td",null,F(P(i)(P(Re).st_mtime)),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.metadataModificationTime")),1),C("td",null,F(P(i)(P(Re).st_mtime)),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.md5")),1),C("td",null,F(P(Re).md5),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.sha1")),1),C("td",null,F(P(Re).sha1),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.user")),1),C("td",null,F(P(Re).user),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.group")),1),C("td",null,F(P(Re).group),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.permissions")),1),C("td",null,F(P(Re).mode),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.uid")),1),C("td",null,F(P(Re).st_uid),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.gid")),1),C("td",null,F(P(Re).st_gid),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.numOfInodeLinks")),1),C("td",null,F(Number(P(Re).is_link)),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.inodeNodeNum")),1),C("td",null,F(P(Re).st_ino),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.inodeProtectionMode")),1),C("td",null,F(P(Re).st_mode),1)]),C("tr",null,[C("td",null,F(s.$t("file.properties.inodeResidentDevice")),1),C("td",null,F(P(Re).st_dev),1)])])]),_:1})])),[[b]])]),_:1},8,["tab"]),x(c,{name:"history",tab:s.$t("file.properties.history")},{default:T(()=>[C("div",ke,[x(y,{"max-height":"386px",columns:P(Me),data:P(Re).history||[]},null,8,["columns","data"])])]),_:1},8,["tab"])]),_:1},8,["value"])]),_:1},8,["show"])])]),_:1},8,["show","title"])}}}),[["__scopeId","data-v-f7957a5e"]]);export{ze as default};
