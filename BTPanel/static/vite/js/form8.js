import{d as a,_ as e,U as l,aq as s,ar as i}from"./public.js?v=1756367574781";import{o as n,R as t,w as u}from"./page_layout.js?v=1756367574781";import{_ as r}from"./index.vue_vue_type_script_setup_true_lang.js?v=1756367574781";import{k as o,P as p,r as m,c as d,e as _,a2 as c,V as v,a3 as f,W as h,an as k,U as y,l as b,S,v as g,j as w,a4 as x}from"./vue.js?v=1756367574781";import{dR as D,dj as P,dV as L,au as j}from"./naive.js?v=1756367574781";import"./common.js?v=1756367574781";import"./__commonjsHelpers__.js?v=1756367574781";const I={class:"w-300px"},U={class:"w-300px"},$={class:"w-300px"},A=o({__name:"form",props:{row:{},isEdit:{type:Boolean}},emits:["refresh"],setup(o,{expose:A,emit:C}){const F=o,N=C,{isEdit:q,row:B}=F,{t:E}=p(),T=m(null),K=m([]),R=d(()=>"CloudFlareDns"===H.name),V=d(()=>"NameSiloDns"!==H.name&&"global"===H.permission),W=d(()=>"PorkBunDns"===H.name),H=_({name:"",api_user:"",api_key:"",alias:"",permission:"global",status:1}),z={api_user:{required:!0,trigger:"blur",validator:(a,e)=>!("CloudFlareDns"!==H.name&&!e)||new Error(E("SSL.Domain.index_1"))},api_key:{required:!0,trigger:"blur",message:E("SSL.Domain.index_2")},alias:{required:!0,trigger:"blur",message:E("SSL.Domain.index_6")}},G=a=>{var e;"CloudFlareDns"!==a&&"limit"===H.permission&&(H.permission="global"),null==(e=T.value)||e.restoreValidation()},J=m(""),M=m(!0),O=()=>{M.value&&(H.api_user="")},Q=()=>{!H.api_user&&M.value?H.api_user=J.value:H.api_user&&(M.value=!1)},X=()=>({id:q&&B?B.id:null,name:q&&B&&H.name===B.name?null:H.name,api_user:q&&B&&H.api_user===B.api_user?null:V.value?H.api_user:"",api_key:q&&B&&H.api_key===B.api_key?null:H.api_key,permission:q&&B&&H.permission===B.permission?null:"CloudFlareDns"===H.name?H.permission:"",status:q&&B&&H.status===B.status?null:H.status,alias:q&&B&&H.alias===B.alias?null:H.alias}),{loading:Y,setLoading:Z}=a();return(async()=>{try{Z(!0);const{message:a}=await i();u(a)&&a.length>0&&(H.name=a[0],K.value=a.map(a=>({label:a,value:a})))}finally{(()=>{const{row:a,isEdit:e}=F;e&&a&&(H.name=a.name,H.api_user=a.api_user,J.value=a.api_user,H.api_key=a.api_key,H.permission=a.permission,H.status=a.status,H.alias=a.alias)})(),Z(!1)}})(),A({onConfirm:async()=>{var a;await(null==(a=T.value)?void 0:a.validate()),q&&B?await l(X()):await s(X()),N("refresh")}}),(a,l)=>{const s=P,i=D,u=L,o=j,p=r,m=n,d=e,_=t;return v(),c(_,{class:"p-20px",show:y(Y)},{default:f(()=>[h(p,{ref_key:"formRef",ref:T,model:y(H),rules:z},{default:f(()=>[h(i,{label:a.$t("Public.Table.Status"),path:"status"},{default:f(()=>[h(s,{value:y(H).status,"onUpdate:value":l[0]||(l[0]=a=>y(H).status=a),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"]),h(i,{label:a.$t("Config.Alarm.index_43"),path:"name"},{default:f(()=>[h(u,{class:"w-300px",value:y(H).name,"onUpdate:value":[l[1]||(l[1]=a=>y(H).name=a),G],options:y(K),disabled:y(q)},null,8,["value","options","disabled"])]),_:1},8,["label"]),y(V)?(v(),c(i,{key:0,label:y(W)?"Secret Key":"API User",path:"api_user"},{default:f(()=>[S("div",I,[h(o,{value:y(H).api_user,"onUpdate:value":l[2]||(l[2]=a=>y(H).api_user=a),placeholder:y(W)?"Please enter Secret Key":a.$t("SSL.Domain.index_1"),onFocus:O,onBlur:Q},null,8,["value","placeholder"])])]),_:1},8,["label"])):k("",!0),h(i,{label:"API Key",path:"api_key"},{default:f(()=>[S("div",U,[h(o,{value:y(H).api_key,"onUpdate:value":l[3]||(l[3]=a=>y(H).api_key=a),placeholder:a.$t("SSL.Domain.index_2")},null,8,["value","placeholder"])])]),_:1}),h(i,{label:a.$t("Config.Panel.index_36"),path:"alias"},{default:f(()=>[S("div",$,[h(o,{value:y(H).alias,"onUpdate:value":l[4]||(l[4]=a=>y(H).alias=a),placeholder:a.$t("SSL.Domain.index_6")},null,8,["value","placeholder"])])]),_:1},8,["label"]),b(h(i,{label:"API-Limit",path:"permission"},{default:f(()=>[h(s,{value:y(H).permission,"onUpdate:value":l[5]||(l[5]=a=>y(H).permission=a),"checked-value":"limit","unchecked-value":"global"},null,8,["value"])]),_:1},512),[[g,y(R)]])]),_:1},8,["model"]),y(R)?(v(),c(d,{key:0},{default:f(()=>[S("li",null,[h(m,{target:"_blank",href:"https://www.aapanel.com/forum/d/3375-3375-set-the-clouldflare-apt-token-for-dns-editing-permissions"},{default:f(()=>[w(x(a.$t("SSL.Domain.index_3")),1)]),_:1})])]),_:1})):k("",!0),"NameCheapDns"===y(H).name?(v(),c(d,{key:1},{default:f(()=>[l[6]||(l[6]=S("li",null," Namecheap API needs added in Whitelisted IPs (only IPv4): Profile > Tools menu > Namecheap API Access > Whitelisted IPs, please check: ",-1)),S("li",null,[h(m,{target:"_blank",href:"https://www.namecheap.com/support/api/intro/"},{default:f(()=>[w(x(a.$t("SSL.Domain.index_3")),1)]),_:1})])]),_:1,__:[6]})):k("",!0),"NameSiloDns"===y(H).name||"PorkBunDns"===y(H).name?(v(),c(d,{key:2},{default:f(()=>[S("li",null,[h(m,{target:"_blank",href:"https://www.aapanel.com/docs/Function/Tutorial/DNS_API_Tutorial.html"},{default:f(()=>[w(x(a.$t("SSL.Domain.index_3")),1)]),_:1})])]),_:1})):k("",!0)]),_:1},8,["show"])}}});export{A as default};
