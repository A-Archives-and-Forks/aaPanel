System.register(["./page_layout-legacy.js?v=1741416570306","./index-legacy123.js?v=1741416570306","./index-legacy.js?v=1741416570306","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1741416570306","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1741416570306","./index.vue_vue_type_script_setup_true_lang-legacy12.js?v=1741416570306","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1741416570306","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1741416570306","./index-legacy121.js?v=1741416570306","./vue-legacy.js?v=1741416570306","./site-legacy4.js?v=1741416570306","./public-legacy.js?v=1741416570306","./site-legacy.js?v=1741416570306","./soft-legacy.js?v=1741416570306","./utils-legacy2.js?v=1741416570306","./naive-legacy.js?v=1741416570306","./common-legacy.js?v=1741416570306","./__commonjsHelpers__-legacy.js?v=1741416570306","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1741416570306","./php-legacy.js?v=1741416570306","./useModal-legacy2.js?v=1741416570306"],(function(e,t){"use strict";var a,n,i,l,o,d,s,r,c,u,p,_,h,y,m,g,w,v,x,P,f,b,k,S,H,j,C,$,B,U,O,W,M,R,D,I,T,z,K,L,q,V,E,N,Y,G,Q,A,F,J,X,Z,ee,te,ae,ne,ie,le,oe,de,se,re,ce,ue,pe,_e,he,ye,me,ge,we,ve,xe;return{setters:[e=>{a=e.j,n=e.a5,i=e.k,l=e.d,o=e.a,d=e.s,s=e.b,r=e.G,c=e.bO,u=e.u,p=e.av,_=e._},e=>{h=e._},e=>{y=e._},e=>{m=e._},e=>{g=e._},e=>{w=e._},e=>{v=e._},e=>{x=e._},e=>{P=e._},e=>{f=e.d,b=e.t,k=e.r,S=e.e,H=e.P,j=e._,C=e.$,$=e.N,B=e.c,U=e.a0,O=e.S,W=e.R,M=e.ae,R=e.W,D=e.ah,I=e.M,T=e.i,z=e.ac,K=e.Q,L=e.Y,q=e.j,V=e.w,E=e.a7,N=e.n,Y=e.ao},e=>{G=e.l},e=>{Q=e.u,A=e._,F=e.c,J=e.d,X=e.b,Z=e.a,ee=e.o,te=e.p,ae=e.f,ne=e.k},e=>{ie=e.s,le=e.c,oe=e.d,de=e.e,se=e.f,re=e.h},null,e=>{ce=e.o,ue=e.a},e=>{pe=e.bT,_e=e.T,he=e.cs,ye=e.ch,me=e.ce,ge=e.bU},e=>{we=e.Y,ve=e.j,xe=e.c},null,null,null,null],execute:function(){var Pe=document.createElement("style");Pe.textContent=".n-date-panel[data-v-0f7e7fa2]{margin:0}.n-date-panel[data-v-0f7e7fa2] .n-date-panel-calendar{padding:6px 0 12px}.n-date-panel[data-v-0f7e7fa2] .n-date-panel--month .n-date-panel-footer{display:none}.n-date-panel[data-v-0f7e7fa2] .n-date-panel-footer{padding:12px 0 6px}\n",document.head.appendChild(Pe);const fe={class:"flex justify-end"},be=i(f({__name:"index",props:{row:{}},setup(e){const t=b(e,"row"),i=k(null),l=k(null),o=new Date;o.setHours(0,0,0,0);const d=S((()=>{const e=new Date(t.value.edate);return"0000-00-00"!==t.value.edate&&we(e,o)})),s=S((()=>{const e=new Date(t.value.edate);return"0000-00-00"!==t.value.edate&&we(e,ve(o,7))})),r=e=>we(e,ve(o,1)),c=()=>{i.value="0000-00-00"===t.value.edate?null:new Date(t.value.edate).getTime()},u=async()=>{await ie({id:t.value.id,edate:"0000-00-00"}),t.value.edate="0000-00-00",l.value?.setShow(!1)},p=async()=>{if(null===i.value)return;const e=xe(i.value,"yyyy-MM-dd");await ie({id:t.value.id,edate:e}),t.value.edate=e,l.value?.setShow(!1)};return(e,o)=>{const _=a,h=_e,y=he,m=n,g=pe;return H(),j(g,{ref_key:"popoverRef",ref:l,placement:"bottom",trigger:"click"},{trigger:C((()=>[$(_,{type:O(d)?"error":O(s)?"warning":"primary",onClick:c},{default:C((()=>[B(U("0000-00-00"===O(t).edate?e.$t("Site.PHP.index_34"):O(d)?e.$t("Site.PHP.index_28"):O(t).edate),1)])),_:1},8,["type"])])),default:C((()=>[$(m,{value:O(i),"onUpdate:value":o[0]||(o[0]=e=>M(i)?i.value=e:null),type:"date",panel:!0,actions:null,"is-date-disabled":r},{footer:C((()=>[W("div",fe,[$(y,{size:"small"},{default:C((()=>[$(h,{onClick:u},{default:C((()=>[B(U(e.$t("Site.PHP.index_34")),1)])),_:1}),$(h,{disabled:null===O(i),onClick:p},{default:C((()=>[B(U(e.$t("Public.Btn.Confirm")),1)])),_:1},8,["disabled"])])),_:1})])])),_:1},8,["value"])])),_:1},512)}}}),[["__scopeId","data-v-0f7e7fa2"]]),{t:ke}=l.global;function Se(e){Q({title:1===e.length?`${ke("Site.Cert.index_56")} [${e[0].name}]`:`${ke("Site.Cert.index_57")}`,width:480,minHeight:248,footer:!0,data:{rows:e},component:R((()=>o((()=>t.import("./index-legacy213.js?v=1741416570306")),void 0)))})}const He=f({functional:!0,props:{path:{type:String,default:"",required:!0}},setup(e){const t=D();return{goPath:()=>{d("Path",e.path),t.push("/files")}}},render(){return $("a",{class:"text-primary hover:text-primary-hover",href:"javascript:;",onClick:()=>{this.goPath()}},[this.path])}}),je=({row:e})=>$("a",{href:"javascript:;",class:"bt-link"},[e.name]),Ce=({row:e})=>$(A,{value:e.status},null),$e=({row:e})=>{const{t:n}=I();return $(a,{type:e.backup_count>0?"primary":"warning",onClick:()=>{Q({title:n("Site.PHP.index_33",[e.name]),width:720,minHeight:200,data:{row:e},component:R((()=>o((()=>t.import("./index-legacy214.js?v=1741416570306")),void 0)))})}},{default:()=>[e.backup_count>0?n("Site.PHP.index_31",[e.backup_count]):n("Site.PHP.index_32")]})},Be=({row:e})=>$(He,{path:e.path},null),Ue=({row:e})=>$(a,null,{default:()=>[e.php_version]}),Oe=({row:e})=>{let t;const{t:n}=I(),{ssl:i}=e;return s(i)?$(a,{type:i.endtime<0?"error":"primary"},{default:()=>[i.endtime<0?n("Site.PHP.index_28"):n("Site.PHP.index_29",[i.endtime])]}):$(a,{type:"warning"},"function"==typeof(l=t=n("Site.PHP.index_30"))||"[object Object]"===Object.prototype.toString.call(l)&&!T(l)?t:{default:()=>[t]});var l},We=({row:e})=>$(a,{type:e.attack>0?"error":"primary"},{default:()=>[e.attack]}),Me={class:"w-160px"},Re=f({__name:"index",props:{value:{default:null}},setup(e){const{t:a}=I(),n=R((()=>o((()=>t.import("./set-legacy4.js?v=1741416570306")),void 0))),i=z(e,"value"),{loading:l,setLoading:d}=F(),s=k([]),c=e=>{sessionStorage.setItem("typeValue",e)},u=J(a("Site.PHP.index_44"),{setOptions:(e,t)=>{t===i.value&&(i.value=-1),s.value=e.map((e=>({label:e.name,value:e.id}))),_()}}),p=()=>{u.show=!0},_=()=>{s.value.unshift({label:a("Site.PHP.index_45"),value:-1})};return _(),(async()=>{try{d(!0);const{message:e}=await le();r(e)?s.value=e.map((e=>({label:e.name,value:e.id}))):s.value=[],_()}finally{d(!1);const e=sessionStorage.getItem("typeValue");i.value=e?Number(e):-1}})(),(e,t)=>{const a=_e,o=ye,d=y;return H(),K("div",Me,[$(o,{value:O(i),"onUpdate:value":t[0]||(t[0]=e=>M(i)?i.value=e:null),loading:O(l),options:O(s),onUpdateValue:c},{action:C((()=>[$(a,{block:"",onClick:p},{default:C((()=>[B(U(e.$t("Site.PHP.index_43")),1)])),_:1})])),_:1},8,["value","loading","options"]),$(d,{show:O(u).show,"onUpdate:show":t[1]||(t[1]=e=>O(u).show=e),width:350,title:O(u).title,data:O(u).data,component:O(n)},null,8,["show","title","data","component"])])}}});e("default",f({__name:"index",setup(e){const n=R((()=>o((()=>t.import("./index-legacy215.js?v=1741416570306")),void 0))),i=R((()=>o((()=>t.import("./index-legacy216.js?v=1741416570306").then((e=>e.i))),void 0))),l=R((()=>o((()=>t.import("./index-legacy217.js?v=1741416570306")),void 0))),{t:d}=I(),f=c(),b=u(),{web:S,webserver:D}=L(f),T=k(!1),z=J(d("Site.PHP.index_9")),K=()=>{z.show=!0},A=J(d("Database.Mysql.index_3")),ie=()=>{A.show=!0},le=[{label:d("Site.PHP.index_5"),key:"default-page"},{label:d("Site.PHP.index_6"),key:"default-site"},{label:d("Site.PHP.index_7"),key:"php-version"},{label:d("Site.PHP.index_86"),key:"https"}],pe=e=>{A.data.config={menu:e},A.show=!0},ye=q({show:!1,title:"",data:{siteInfo:null,config:{menu:"",subMenu:""}}}),we=(e,t={})=>{ye.title=d("Site.PHP.index_13",[e.name,e.addtime]),ye.data.siteInfo=e,ye.data.config=Object.assign({menu:"",subMenu:""},t),ye.show=!0},{keys:ve,table:xe,columns:Pe}=X([{type:"selection",width:40},{key:"name",title:d("Site.PHP.index_17"),width:"12%",minWidth:110,sorter:!0,sortOrder:!1,ellipsis:{tooltip:!0},render:e=>$(je,{row:e,onClick:()=>{we(e)}},null)},{key:"status",title:d("Public.Table.Status"),width:"10%",minWidth:95,sorter:!0,sortOrder:!1,render:e=>$(Ce,{row:e,onClick:t=>{Z({title:`${d("1"===t?"Site.PHP.index_21_2":"Site.PHP.index_21_3")} ${d("Site.PHP.index_21_1",[e.name])}`,content:d("1"===t?"Site.PHP.index_22":"Site.PHP.index_23"),onConfirm:async()=>{await oe("1"===t,{id:e.id,name:e.name}),e.status=t}})}},null)},{key:"backup_count",title:d("Site.PHP.index_19"),width:"6%",minWidth:70,render:e=>$($e,{row:e},null)},{key:"path",title:d("Site.PHP.index_20"),width:"15%",minWidth:180,ellipsis:{tooltip:!0},render:e=>$(Be,{row:e},null)},ee({type:"site",minWidth:70,callback:()=>{Ie()}}),{key:"edate",title:d("Site.PHP.index_25"),width:"8%",minWidth:96,render:e=>$(be,{row:e},null)},te({width:"8%",onBlur:async(e,t)=>{await re({id:t.id,ps:e})}}),{key:"php_version",title:d("Site.PHP.index_26"),width:70,render:e=>$(Ue,{row:e,onClick:()=>{we(e,{menu:"php"})}},null)},{key:"site_ssl",title:d("Site.PHP.index_27"),width:"12%",minWidth:90,sorter:!0,sortOrder:!1,render:e=>$(Oe,{row:e,onClick:()=>{we(e,{menu:"ssl"})}},null)},{key:"attack",title:d("Site.PHP.index_24"),width:"4%",minWidth:80,ellipsis:{tooltip:!0},render:e=>$(We,{row:e,onClick:()=>{we(e,{menu:"logs",subMenu:"security"})}},null)},ae({title:d("Public.Table.Operation"),width:"20%",maxWidth:200,options:e=>[{label:d("Site.PHP.index_14"),onClick:()=>{ce()}},{label:d("Site.PHP.index_15"),show:"nginx"===f.webserver||"apache"===f.webserver,onClick:async()=>{ue(e)}},{label:d("Site.PHP.index_16"),onClick:()=>{we(e)}},{label:d("Public.Btn.Del"),onClick:()=>{Se([e])}}]})]),fe=e=>{Pe.value.forEach((t=>{const a=t;a.key===e.columnKey?a.sortOrder=e.order:a.sortOrder=void 0})),e.order?He.order=`${e.columnKey} ${"descend"===e.order?"desc":"asc"}`:He.order="",Ie()},ke=[{key:"enable",type:"confirm",label:d("Site.Batch.index_1"),confirm:{title:d("Site.Batch.index_2"),desc:d("Site.Batch.index_3"),columns:[Pe.value[1]],api:e=>oe(!0,{id:e.id,name:e.name},!1),done:()=>{Ie()}}},{key:"disable",type:"confirm",label:d("Site.Batch.index_4"),confirm:{title:d("Site.Batch.index_5"),desc:d("Site.Batch.index_6"),columns:[Pe.value[1]],api:e=>oe(!1,{id:e.id,name:e.name},!1),done:()=>{Ie()}}},{key:"backup",type:"confirm",label:d("Site.Batch.index_7"),confirm:{title:d("Site.Batch.index_8"),desc:d("Site.Batch.index_9"),columns:[Pe.value[1]],api:e=>de({id:e.id},!1),done:()=>{Ie()}}},{key:"expired",label:d("Site.PHP.index_70"),onBatch:e=>{Q({title:d("Site.PHP.index_71"),width:380,minHeight:72,footer:!0,data:{rows:e},component:R((()=>o((()=>t.import("./batch-legacy3.js?v=1741416570306")),void 0)))})}},{key:"php",label:d("Site.PHP.index_66"),onBatch:e=>{Q({title:d("Site.PHP.index_65"),width:500,minHeight:198,footer:!0,data:{rows:e},component:R((()=>o((()=>t.import("./batch-legacy4.js?v=1741416570306")),void 0)))})}},{key:"category",label:d("Crontab.Planned.index_19"),onBatch:e=>{Q({title:d("Site.Batch.index_22"),width:350,minHeight:72,footer:!0,data:{rows:e},component:R((()=>o((()=>t.import("./batch-legacy5.js?v=1741416570306")),void 0)))})}},{key:"delete",label:d("Site.Batch.index_10"),onBatch:e=>{Se(e)}}],He=q({p:1,limit:10,table:"sites",search:"",order:"",type:-1}),{loading:Me,setLoading:De}=F(!0),Ie=async()=>{try{De(!0);const e={...E(He)},{message:t}=await se(e);s(t)?(xe.data=r(t.data)?t.data:[],xe.total=p(t.page)):(xe.data=[],xe.total=0)}finally{ve.value=[],De(!1)}};V((()=>f.isRefresh),(e=>{e&&(f.setRefresh(!1),Ie())})),V((()=>b.taskCount),(()=>{Te()}));const Te=async()=>{try{await f.getConfig(),De(!1),await N(),De(!0),f.web.setup?(T.value=!0,Ie()):(T.value=!1,De(!1),G())}catch{De(!1)}};return Te(),(e,t)=>{const o=a,d=_e,s=_,r=ge,c=he,u=P,p=x,f=v,b=w,k=g,R=m,I=y,L=h,q=me;return H(),j(q,null,{default:C((()=>[$(L,{install:O(S).setup},{desc:C((()=>[W("span",null,U(e.$t("Site.PHP.index_1")),1),$(o,{class:"ml-4px",onClick:t[0]||(t[0]=e=>O(ne)("nginx"))},{default:C((()=>[B(U(e.$t("Site.PHP.index_2")),1)])),_:1}),t[11]||(t[11]=W("span",{class:"mx-4px"},"|",-1)),$(o,{onClick:t[1]||(t[1]=e=>O(ne)("apache"))},{default:C((()=>[B(U(e.$t("Site.PHP.index_3")),1)])),_:1})])),default:C((()=>[$(R,{class:"p-16px",feedback:!0},{toolsLeft:C((()=>[$(d,{type:"primary",class:"add-site-btn",onClick:K},{default:C((()=>[B(U(e.$t("Site.PHP.index_4")),1)])),_:1}),$(c,null,{default:C((()=>[$(d,{onClick:ie},{default:C((()=>[B(U(e.$t("Database.Mysql.index_3")),1)])),_:1}),$(r,{trigger:"hover",options:le,onSelect:pe},{default:C((()=>[$(d,null,{default:C((()=>[$(s,{name:"base-arrow-bottom"})])),_:1})])),_:1})])),_:1}),O(T)?(H(),j(u,{key:0,"soft-name":O(D)},null,8,["soft-name"])):Y("",!0)])),toolsRight:C((()=>[$(Re,{value:O(He).type,"onUpdate:value":[t[2]||(t[2]=e=>O(He).type=e),Ie]},null,8,["value"]),$(p,{value:O(He).search,"onUpdate:value":t[3]||(t[3]=e=>O(He).search=e),placeholder:e.$t("Site.PHP.index_8"),onSearch:Ie},null,8,["value","placeholder"])])),table:C((()=>[$(f,{"checked-row-keys":O(ve),"onUpdate:checkedRowKeys":t[4]||(t[4]=e=>M(ve)?ve.value=e:null),loading:O(Me),data:O(xe).data,columns:O(Pe),"onUpdate:sorter":fe},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:C((()=>[$(b,{"checked-row-keys":O(ve),"onUpdate:checkedRowKeys":t[5]||(t[5]=e=>M(ve)?ve.value=e:null),data:O(xe).data,options:ke},null,8,["checked-row-keys","data"])])),pageRight:C((()=>[$(k,{page:O(He).p,"onUpdate:page":t[6]||(t[6]=e=>O(He).p=e),"page-size":O(He).limit,"onUpdate:pageSize":t[7]||(t[7]=e=>O(He).limit=e),"item-count":O(xe).total,"store-key":"site-php-page",onRefresh:Ie},null,8,["page","page-size","item-count"])])),_:1}),$(I,{show:O(z).show,"onUpdate:show":t[8]||(t[8]=e=>O(z).show=e),title:O(z).title,width:640,height:540,footer:!0,component:O(n)},null,8,["show","title","component"]),$(I,{show:O(ye).show,"onUpdate:show":t[9]||(t[9]=e=>O(ye).show=e),title:O(ye).title,data:O(ye).data,width:860,height:700,component:O(i)},null,8,["show","title","data","component"]),$(I,{show:O(A).show,"onUpdate:show":t[10]||(t[10]=e=>O(A).show=e),title:O(A).title,data:O(A).data,width:950,height:620,component:O(l)},null,8,["show","title","data","component"])])),_:1},8,["install"])])),_:1})}}}))}}}));
