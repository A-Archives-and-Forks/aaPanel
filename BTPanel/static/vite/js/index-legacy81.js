System.register(["./page_layout-legacy.js?v=1742891699271","./index-legacy123.js?v=1742891699271","./index-legacy.js?v=1742891699271","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1742891699271","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1742891699271","./index.vue_vue_type_script_setup_true_lang-legacy12.js?v=1742891699271","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1742891699271","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1742891699271","./index-legacy121.js?v=1742891699271","./vue-legacy.js?v=1742891699271","./site-legacy4.js?v=1742891699271","./public-legacy.js?v=1742891699271","./site-legacy.js?v=1742891699271","./soft-legacy.js?v=1742891699271","./utils-legacy2.js?v=1742891699271","./naive-legacy.js?v=1742891699271","./common-legacy.js?v=1742891699271","./__commonjsHelpers__-legacy.js?v=1742891699271","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1742891699271","./php-legacy.js?v=1742891699271","./useModal-legacy2.js?v=1742891699271"],(function(e,t){"use strict";var a,n,i,l,o,d,s,r,c,u,p,_,h,y,m,g,w,v,x,P,f,b,k,S,H,j,C,B,$,U,O,M,R,W,D,I,V,z,K,L,T,q,E,Y,N,Z,A,F,G,J,Q,X,ee,te,ae,ne,ie,le,oe,de,se,re,ce,ue,pe,_e,he,ye,me,ge,we,ve,xe;return{setters:[e=>{a=e.j,n=e.a9,i=e.k,l=e.d,o=e.a,d=e.s,s=e.b,r=e.I,c=e.cw,u=e.u,p=e.b7,_=e._},e=>{h=e._},e=>{y=e._},e=>{m=e._},e=>{g=e._},e=>{w=e._},e=>{v=e._},e=>{x=e._},e=>{P=e._},e=>{f=e.d,b=e.t,k=e.r,S=e.e,H=e.R,j=e.a0,C=e.a1,B=e.P,$=e.c,U=e.a2,O=e.V,M=e.U,R=e.af,W=e.Y,D=e.ai,I=e.O,V=e.i,z=e.ad,K=e.S,L=e._,T=e.j,q=e.w,E=e.M,Y=e.n,N=e.ap},e=>{Z=e.l},e=>{A=e.u,F=e._,G=e.c,J=e.d,Q=e.b,X=e.a,ee=e.o,te=e.p,ae=e.f,ne=e.k},e=>{ie=e.s,le=e.c,oe=e.d,de=e.e,se=e.f,re=e.h},null,e=>{ce=e.o,ue=e.a},e=>{pe=e.bZ,_e=e.T,he=e.aV,ye=e.cn,me=e.ck,ge=e.b_},e=>{we=e.Y,ve=e.j,xe=e.c},null,null,null,null],execute:function(){var Pe=document.createElement("style");Pe.textContent=".n-date-panel[data-v-0f7e7fa2]{margin:0}.n-date-panel[data-v-0f7e7fa2] .n-date-panel-calendar{padding:6px 0 12px}.n-date-panel[data-v-0f7e7fa2] .n-date-panel--month .n-date-panel-footer{display:none}.n-date-panel[data-v-0f7e7fa2] .n-date-panel-footer{padding:12px 0 6px}\n",document.head.appendChild(Pe);const fe={class:"flex justify-end"},be=i(f({__name:"index",props:{row:{}},setup(e){const t=b(e,"row"),i=k(null),l=k(null),o=new Date;o.setHours(0,0,0,0);const d=S((()=>{const e=new Date(t.value.edate);return"0000-00-00"!==t.value.edate&&we(e,o)})),s=S((()=>{const e=new Date(t.value.edate);return"0000-00-00"!==t.value.edate&&we(e,ve(o,7))})),r=e=>we(e,ve(o,1)),c=()=>{i.value="0000-00-00"===t.value.edate?null:new Date(t.value.edate).getTime()},u=async()=>{await ie({id:t.value.id,edate:"0000-00-00"}),t.value.edate="0000-00-00",l.value?.setShow(!1)},p=async()=>{if(null===i.value)return;const e=xe(i.value,"yyyy-MM-dd");await ie({id:t.value.id,edate:e}),t.value.edate=e,l.value?.setShow(!1)};return(e,o)=>{const _=a,h=_e,y=he,m=n,g=pe;return H(),j(g,{ref_key:"popoverRef",ref:l,placement:"bottom",trigger:"click"},{trigger:C((()=>[B(_,{type:O(d)?"error":O(s)?"warning":"primary",onClick:c},{default:C((()=>[$(U("0000-00-00"===O(t).edate?e.$t("Site.PHP.index_34"):O(d)?e.$t("Site.PHP.index_28"):O(t).edate),1)])),_:1},8,["type"])])),default:C((()=>[B(m,{value:O(i),"onUpdate:value":o[0]||(o[0]=e=>R(i)?i.value=e:null),type:"date",panel:!0,actions:null,"is-date-disabled":r},{footer:C((()=>[M("div",fe,[B(y,{size:"small"},{default:C((()=>[B(h,{onClick:u},{default:C((()=>[$(U(e.$t("Site.PHP.index_34")),1)])),_:1}),B(h,{disabled:null===O(i),onClick:p},{default:C((()=>[$(U(e.$t("Public.Btn.Confirm")),1)])),_:1},8,["disabled"])])),_:1})])])),_:1},8,["value"])])),_:1},512)}}}),[["__scopeId","data-v-0f7e7fa2"]]),{t:ke}=l.global;function Se(e){A({title:1===e.length?`${ke("Site.Cert.index_56")} [${e[0].name}]`:`${ke("Site.Cert.index_57")}`,width:480,minHeight:248,footer:!0,data:{rows:e},component:W((()=>o((()=>t.import("./index-legacy216.js?v=1742891699271")),void 0)))})}const He=f({functional:!0,props:{path:{type:String,default:"",required:!0}},setup(e){const t=D();return{goPath:()=>{d("Path",e.path),t.push("/files")}}},render(){return B("a",{class:"text-primary hover:text-primary-hover",href:"javascript:;",onClick:()=>{this.goPath()}},[this.path])}}),je=({row:e})=>B("a",{href:"javascript:;",class:"bt-link"},[e.name]),Ce=({row:e})=>B(F,{value:e.status},null),Be=({row:e})=>{const{t:n}=I();return B(a,{type:e.backup_count>0?"primary":"warning",onClick:()=>{A({title:n("Site.PHP.index_33",[e.name]),width:720,minHeight:200,data:{row:e},component:W((()=>o((()=>t.import("./index-legacy217.js?v=1742891699271")),void 0)))})}},{default:()=>[e.backup_count>0?n("Site.PHP.index_31",[e.backup_count]):n("Site.PHP.index_32")]})},$e=({row:e})=>B(He,{path:e.path},null),Ue=({row:e})=>B(a,null,{default:()=>[e.php_version]}),Oe=({row:e})=>{let t;const{t:n}=I(),{ssl:i}=e;return s(i)?B(a,{type:i.endtime<0?"error":"primary"},{default:()=>[i.endtime<0?n("Site.PHP.index_28"):n("Site.PHP.index_29",[i.endtime])]}):B(a,{type:"warning"},"function"==typeof(l=t=n("Site.PHP.index_30"))||"[object Object]"===Object.prototype.toString.call(l)&&!V(l)?t:{default:()=>[t]});var l},Me=({row:e})=>B(a,{type:e.attack>0?"error":"primary"},{default:()=>[e.attack]}),Re={class:"w-160px"},We=f({__name:"index",props:{value:{default:null}},setup(e){const{t:a}=I(),n=W((()=>o((()=>t.import("./set-legacy4.js?v=1742891699271")),void 0))),i=z(e,"value"),{loading:l,setLoading:d}=G(),s=k([]),c=e=>{sessionStorage.setItem("typeValue",e)},u=J(a("Site.PHP.index_44"),{setOptions:(e,t)=>{t===i.value&&(i.value=-1),s.value=e.map((e=>({label:e.name,value:e.id}))),_()}}),p=()=>{u.show=!0},_=()=>{s.value.unshift({label:a("Site.PHP.index_45"),value:-1})};return _(),(async()=>{try{d(!0);const{message:e}=await le();r(e)?s.value=e.map((e=>({label:e.name,value:e.id}))):s.value=[],_()}finally{d(!1);const e=sessionStorage.getItem("typeValue");i.value=e?Number(e):-1}})(),(e,t)=>{const a=_e,o=ye,d=y;return H(),K("div",Re,[B(o,{value:O(i),"onUpdate:value":t[0]||(t[0]=e=>R(i)?i.value=e:null),loading:O(l),options:O(s),onUpdateValue:c},{action:C((()=>[B(a,{block:"",onClick:p},{default:C((()=>[$(U(e.$t("Site.PHP.index_43")),1)])),_:1})])),_:1},8,["value","loading","options"]),B(d,{show:O(u).show,"onUpdate:show":t[1]||(t[1]=e=>O(u).show=e),width:350,title:O(u).title,data:O(u).data,component:O(n)},null,8,["show","title","data","component"])])}}});e("default",f({__name:"index",setup(e){const n=W((()=>o((()=>t.import("./index-legacy218.js?v=1742891699271")),void 0))),i=W((()=>o((()=>t.import("./index-legacy219.js?v=1742891699271").then((e=>e.i))),void 0))),l=W((()=>o((()=>t.import("./index-legacy220.js?v=1742891699271")),void 0))),{t:d}=I(),f=c(),b=u(),{web:S,webserver:D}=L(f),V=k(!1),z=J(d("Site.PHP.index_9")),K=()=>{z.show=!0},F=J(d("Database.Mysql.index_3")),ie=()=>{F.show=!0},le=[{label:d("Site.PHP.index_5"),key:"default-page"},{label:d("Site.PHP.index_6"),key:"default-site"},{label:d("Site.PHP.index_7"),key:"php-version"},{label:d("Site.PHP.index_86"),key:"https"}],pe=e=>{F.data.config={menu:e},F.show=!0},ye=T({show:!1,title:"",data:{siteInfo:null,config:{menu:"",subMenu:""}}}),we=(e,t={})=>{ye.title=d("Site.PHP.index_13",[e.name,e.addtime]),ye.data.siteInfo=e,ye.data.config=Object.assign({menu:"",subMenu:""},t),ye.show=!0},{keys:ve,table:xe,columns:Pe}=Q([{type:"selection",width:40},{key:"name",title:d("Site.PHP.index_17"),width:"12%",minWidth:110,sorter:!0,sortOrder:!1,ellipsis:{tooltip:!0},render:e=>B(je,{row:e,onClick:()=>{we(e)}},null)},{key:"status",title:d("Public.Table.Status"),width:"10%",minWidth:95,sorter:!0,sortOrder:!1,render:e=>B(Ce,{row:e,onClick:t=>{X({title:`${d("1"===t?"Site.PHP.index_21_2":"Site.PHP.index_21_3")} ${d("Site.PHP.index_21_1",[e.name])}`,content:d("1"===t?"Site.PHP.index_22":"Site.PHP.index_23"),onConfirm:async()=>{await oe("1"===t,{id:e.id,name:e.name}),e.status=t}})}},null)},{key:"backup_count",title:d("Site.PHP.index_19"),width:"6%",minWidth:70,render:e=>B(Be,{row:e},null)},{key:"path",title:d("Site.PHP.index_20"),width:"15%",minWidth:180,ellipsis:{tooltip:!0},render:e=>B($e,{row:e},null)},ee({type:"site",minWidth:70,callback:()=>{Ie()}}),{key:"edate",title:d("Site.PHP.index_25"),width:"8%",minWidth:96,render:e=>B(be,{row:e},null)},te({width:"8%",onBlur:async(e,t)=>{await re({id:t.id,ps:e})}}),{key:"php_version",title:d("Site.PHP.index_26"),width:70,render:e=>B(Ue,{row:e,onClick:()=>{we(e,{menu:"php"})}},null)},{key:"site_ssl",title:d("Site.PHP.index_27"),width:"12%",minWidth:90,sorter:!0,sortOrder:!1,render:e=>B(Oe,{row:e,onClick:()=>{we(e,{menu:"ssl"})}},null)},{key:"attack",title:d("Site.PHP.index_24"),width:"4%",minWidth:80,ellipsis:{tooltip:!0},render:e=>B(Me,{row:e,onClick:()=>{we(e,{menu:"logs",subMenu:"security"})}},null)},ae({title:d("Public.Table.Operation"),width:"20%",maxWidth:200,options:e=>[{label:d("Site.PHP.index_14"),onClick:()=>{ce()}},{label:d("Site.PHP.index_15"),show:"nginx"===f.webserver||"apache"===f.webserver,onClick:async()=>{ue(e)}},{label:d("Site.PHP.index_16"),onClick:()=>{we(e)}},{label:d("Public.Btn.Del"),onClick:()=>{Se([e])}}]})]),fe=e=>{Pe.value.forEach((t=>{const a=t;a.key===e.columnKey?a.sortOrder=e.order:a.sortOrder=void 0})),e.order?He.order=`${e.columnKey} ${"descend"===e.order?"desc":"asc"}`:He.order="",Ie()},ke=[{key:"enable",type:"confirm",label:d("Site.Batch.index_1"),confirm:{title:d("Site.Batch.index_2"),desc:d("Site.Batch.index_3"),columns:[Pe.value[1]],api:e=>oe(!0,{id:e.id,name:e.name},!1),done:()=>{Ie()}}},{key:"disable",type:"confirm",label:d("Site.Batch.index_4"),confirm:{title:d("Site.Batch.index_5"),desc:d("Site.Batch.index_6"),columns:[Pe.value[1]],api:e=>oe(!1,{id:e.id,name:e.name},!1),done:()=>{Ie()}}},{key:"backup",type:"confirm",label:d("Site.Batch.index_7"),confirm:{title:d("Site.Batch.index_8"),desc:d("Site.Batch.index_9"),columns:[Pe.value[1]],api:e=>de({id:e.id},!1),done:()=>{Ie()}}},{key:"expired",label:d("Site.PHP.index_70"),onBatch:e=>{A({title:d("Site.PHP.index_71"),width:380,minHeight:72,footer:!0,data:{rows:e},component:W((()=>o((()=>t.import("./batch-legacy3.js?v=1742891699271")),void 0)))})}},{key:"php",label:d("Site.PHP.index_66"),onBatch:e=>{A({title:d("Site.PHP.index_65"),width:500,minHeight:198,footer:!0,data:{rows:e},component:W((()=>o((()=>t.import("./batch-legacy4.js?v=1742891699271")),void 0)))})}},{key:"category",label:d("Crontab.Planned.index_19"),onBatch:e=>{A({title:d("Site.Batch.index_22"),width:350,minHeight:72,footer:!0,data:{rows:e},component:W((()=>o((()=>t.import("./batch-legacy5.js?v=1742891699271")),void 0)))})}},{key:"delete",label:d("Site.Batch.index_10"),onBatch:e=>{Se(e)}}],He=T({p:1,limit:10,table:"sites",search:"",order:"",type:-1}),{loading:Re,setLoading:De}=G(!0),Ie=async()=>{try{De(!0);const e={...E(He)},{message:t}=await se(e);s(t)?(xe.data=r(t.data)?t.data:[],xe.total=p(t.page)):(xe.data=[],xe.total=0)}finally{ve.value=[],De(!1)}};q((()=>f.isRefresh),(e=>{e&&(f.setRefresh(!1),Ie())})),q((()=>b.taskCount),(()=>{Ve()}));const Ve=async()=>{try{await f.getConfig(),De(!1),await Y(),De(!0),f.web.setup?(V.value=!0,Ie()):(V.value=!1,De(!1),Z())}catch{De(!1)}};return Ve(),(e,t)=>{const o=a,d=_e,s=_,r=ge,c=he,u=P,p=x,f=v,b=w,k=g,W=m,I=y,L=h,T=me;return H(),j(T,null,{default:C((()=>[B(L,{install:O(S).setup},{desc:C((()=>[M("span",null,U(e.$t("Site.PHP.index_1")),1),B(o,{class:"ml-4px",onClick:t[0]||(t[0]=e=>O(ne)("nginx"))},{default:C((()=>[$(U(e.$t("Site.PHP.index_2")),1)])),_:1}),t[11]||(t[11]=M("span",{class:"mx-4px"},"|",-1)),B(o,{onClick:t[1]||(t[1]=e=>O(ne)("apache"))},{default:C((()=>[$(U(e.$t("Site.PHP.index_3")),1)])),_:1})])),default:C((()=>[B(W,{class:"p-16px",feedback:!0},{toolsLeft:C((()=>[B(d,{type:"primary",class:"add-site-btn",onClick:K},{default:C((()=>[$(U(e.$t("Site.PHP.index_4")),1)])),_:1}),B(c,null,{default:C((()=>[B(d,{onClick:ie},{default:C((()=>[$(U(e.$t("Database.Mysql.index_3")),1)])),_:1}),B(r,{trigger:"hover",options:le,onSelect:pe},{default:C((()=>[B(d,null,{default:C((()=>[B(s,{name:"base-arrow-bottom"})])),_:1})])),_:1})])),_:1}),O(V)?(H(),j(u,{key:0,"soft-name":O(D)},null,8,["soft-name"])):N("",!0)])),toolsRight:C((()=>[B(We,{value:O(He).type,"onUpdate:value":[t[2]||(t[2]=e=>O(He).type=e),Ie]},null,8,["value"]),B(p,{value:O(He).search,"onUpdate:value":t[3]||(t[3]=e=>O(He).search=e),placeholder:e.$t("Site.PHP.index_8"),onSearch:Ie},null,8,["value","placeholder"])])),table:C((()=>[B(f,{"checked-row-keys":O(ve),"onUpdate:checkedRowKeys":t[4]||(t[4]=e=>R(ve)?ve.value=e:null),loading:O(Re),data:O(xe).data,columns:O(Pe),"onUpdate:sorter":fe},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:C((()=>[B(b,{"checked-row-keys":O(ve),"onUpdate:checkedRowKeys":t[5]||(t[5]=e=>R(ve)?ve.value=e:null),data:O(xe).data,options:ke},null,8,["checked-row-keys","data"])])),pageRight:C((()=>[B(k,{page:O(He).p,"onUpdate:page":t[6]||(t[6]=e=>O(He).p=e),"page-size":O(He).limit,"onUpdate:pageSize":t[7]||(t[7]=e=>O(He).limit=e),"item-count":O(xe).total,"store-key":"site-php-page",onRefresh:Ie},null,8,["page","page-size","item-count"])])),_:1}),B(I,{show:O(z).show,"onUpdate:show":t[8]||(t[8]=e=>O(z).show=e),title:O(z).title,width:700,height:540,footer:!0,component:O(n)},null,8,["show","title","component"]),B(I,{show:O(ye).show,"onUpdate:show":t[9]||(t[9]=e=>O(ye).show=e),title:O(ye).title,data:O(ye).data,width:860,height:700,component:O(i)},null,8,["show","title","data","component"]),B(I,{show:O(F).show,"onUpdate:show":t[10]||(t[10]=e=>O(F).show=e),title:O(F).title,data:O(F).data,width:950,height:620,component:O(l)},null,8,["show","title","data","component"])])),_:1},8,["install"])])),_:1})}}}))}}}));
