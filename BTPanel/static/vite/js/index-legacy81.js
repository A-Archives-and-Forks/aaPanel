System.register(["./page_layout-legacy.js?v=1744703330658","./index-legacy123.js?v=1744703330658","./index-legacy.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy12.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1744703330658","./index-legacy121.js?v=1744703330658","./vue-legacy.js?v=1744703330658","./site-legacy4.js?v=1744703330658","./public-legacy.js?v=1744703330658","./site-legacy.js?v=1744703330658","./soft-legacy.js?v=1744703330658","./naive-legacy.js?v=1744703330658","./utils-legacy2.js?v=1744703330658","./common-legacy.js?v=1744703330658","./ssl-legacy.js?v=1744703330658","./__commonjsHelpers__-legacy.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1744703330658","./php-legacy.js?v=1744703330658","./useModal-legacy2.js?v=1744703330658"],(function(e,t){"use strict";var a,n,i,l,o,s,d,r,c,u,p,h,_,m,y,g,w,v,f,x,P,k,b,S,H,j,C,$,B,U,O,M,R,W,D,I,T,z,K,L,V,q,E,Y,F,N,Z,A,G,J,Q,X,ee,te,ae,ne,ie,le,oe,se,de,re,ce,ue,pe,he,_e,me,ye,ge,we,ve,fe,xe,Pe,ke,be,Se,He;return{setters:[e=>{a=e.j,n=e.a9,i=e.k,l=e.i,o=e.a,s=e.s,d=e.d,r=e.K,c=e._,u=e.I,p=e.cx,h=e.u,_=e.b9},e=>{m=e._},e=>{y=e._},e=>{g=e._},e=>{w=e._},e=>{v=e._},e=>{f=e._},e=>{x=e._},e=>{P=e._},e=>{k=e.d,b=e.t,S=e.r,H=e.e,j=e.R,C=e.$,$=e.a0,B=e.P,U=e.c,O=e.a1,M=e.V,R=e.U,W=e.af,D=e.Y,I=e.ai,T=e.O,z=e.F,K=e.i,L=e.ad,V=e.S,q=e._,E=e.j,Y=e.w,F=e.o,N=e.M,Z=e.n,A=e.ap},e=>{G=e.l},e=>{J=e.u,Q=e._,X=e.c,ee=e.d,te=e.b,ae=e.a,ne=e.o,ie=e.p,le=e.f,oe=e.k},e=>{se=e.s,de=e.c,re=e.d,ce=e.e,ue=e.f,pe=e.h},null,e=>{he=e.bZ,_e=e.T,me=e.aV,ye=e.bU,ge=e.bz,we=e.cn,ve=e.ck,fe=e.b_},e=>{xe=e.o,Pe=e.a},e=>{ke=e.Y,be=e.j,Se=e.c},e=>{He=e.m},null,null,null,null],execute:function(){var je=document.createElement("style");je.textContent=".n-date-panel[data-v-0f7e7fa2]{margin:0}.n-date-panel[data-v-0f7e7fa2] .n-date-panel-calendar{padding:6px 0 12px}.n-date-panel[data-v-0f7e7fa2] .n-date-panel--month .n-date-panel-footer{display:none}.n-date-panel[data-v-0f7e7fa2] .n-date-panel-footer{padding:12px 0 6px}\n",document.head.appendChild(je);const Ce={class:"flex justify-end"},$e=i(k({__name:"index",props:{row:{}},setup(e){const t=b(e,"row"),i=S(null),l=S(null),o=new Date;o.setHours(0,0,0,0);const s=H((()=>{const e=new Date(t.value.edate);return"0000-00-00"!==t.value.edate&&ke(e,o)})),d=H((()=>{const e=new Date(t.value.edate);return"0000-00-00"!==t.value.edate&&ke(e,be(o,7))})),r=e=>ke(e,be(o,1)),c=()=>{i.value="0000-00-00"===t.value.edate?null:new Date(t.value.edate).getTime()},u=async()=>{await se({id:t.value.id,edate:"0000-00-00"}),t.value.edate="0000-00-00",l.value?.setShow(!1)},p=async()=>{if(null===i.value)return;const e=Se(i.value,"yyyy-MM-dd");await se({id:t.value.id,edate:e}),t.value.edate=e,l.value?.setShow(!1)};return(e,o)=>{const h=a,_=_e,m=me,y=n,g=he;return j(),C(g,{ref_key:"popoverRef",ref:l,placement:"bottom",trigger:"click"},{trigger:$((()=>[B(h,{type:M(s)?"error":M(d)?"warning":"primary",onClick:c},{default:$((()=>[U(O("0000-00-00"===M(t).edate?e.$t("Site.PHP.index_34"):M(s)?e.$t("Site.PHP.index_28"):M(t).edate),1)])),_:1},8,["type"])])),default:$((()=>[B(y,{value:M(i),"onUpdate:value":o[0]||(o[0]=e=>W(i)?i.value=e:null),type:"date",panel:!0,actions:null,"is-date-disabled":r},{footer:$((()=>[R("div",Ce,[B(m,{size:"small"},{default:$((()=>[B(_,{onClick:u},{default:$((()=>[U(O(e.$t("Site.PHP.index_34")),1)])),_:1}),B(_,{disabled:null===M(i),onClick:p},{default:$((()=>[U(O(e.$t("Public.Btn.Confirm")),1)])),_:1},8,["disabled"])])),_:1})])])),_:1},8,["value"])])),_:1},512)}}}),[["__scopeId","data-v-0f7e7fa2"]]),{t:Be}=l.global;function Ue(e){J({title:1===e.length?`${Be("Site.Cert.index_56")} [${e[0].name}]`:`${Be("Site.Cert.index_57")}`,width:480,minHeight:248,footer:!0,data:{rows:e},component:D((()=>o((()=>t.import("./index-legacy216.js?v=1744703330658")),void 0)))})}const Oe=k({functional:!0,props:{path:{type:String,default:"",required:!0}},setup(e){const t=I();return{goPath:()=>{s("Path",e.path),t.push("/files")}}},render(){return B("a",{class:"text-primary hover:text-primary-hover",href:"javascript:;",onClick:()=>{this.goPath()}},[this.path])}}),Me=({row:e})=>B("a",{href:"javascript:;",class:"bt-link"},[e.name]),Re=({row:e})=>B(Q,{value:e.status},null),We=({row:e})=>{const{t:n}=T();return B(a,{type:e.backup_count>0?"primary":"warning",onClick:()=>{J({title:n("Site.PHP.index_33",[e.name]),width:720,minHeight:200,data:{row:e},component:D((()=>o((()=>t.import("./index-legacy217.js?v=1744703330658")),void 0)))})}},{default:()=>[e.backup_count>0?n("Site.PHP.index_31",[e.backup_count]):n("Site.PHP.index_32")]})},De=({row:e})=>B(Oe,{path:e.path},null),Ie=({row:e})=>B(a,null,{default:()=>[e.php_version]}),Te=({row:e,sslInfo:t,callback:n})=>{const{t:i}=T(),l=t.filter((t=>t.target_id===e.id)),{ssl:o}=e;if(d(o))return B(a,{type:o.endtime<0?"error":"primary"},{default:()=>[o.endtime<0?i("Site.PHP.index_28"):i("Site.PHP.index_29",[o.endtime])]});if(l.length)return B(he,{trigger:"hover"},{trigger:()=>B(r,{size:"small"},null),default:()=>B(z,null,[l.map((e=>B("div",{class:"flex flex-nowrap! p-10px cursor-pointer justify-between items-center",key:e.task_name,onClick:t=>{t.stopPropagation(),n(e.task_log)}},[B("span",{class:"whitespace-nowrap mr-10px"},[e.task_name]),B(ye,{class:"items-center flex-nowrap!"},{default:()=>[B(ge,{class:"w-120px!",type:"line",status:"success",percentage:e.task_status,"indicator-placement":"inside",processing:100!==e.task_status},null),B(c,{name:"base-left-logs",size:18,color:"#666666"},null)]})])))])});{let e;return B(a,{type:"warning"},"function"==typeof(s=e=i("Site.PHP.index_30"))||"[object Object]"===Object.prototype.toString.call(s)&&!K(s)?e:{default:()=>[e]})}var s},ze=({row:e})=>B(a,{type:e.attack>0?"error":"primary"},{default:()=>[e.attack]}),Ke={class:"w-160px"},Le=k({__name:"index",props:{value:{default:null}},emits:["change","update:value"],setup(e,{emit:a}){const{t:n}=T(),i=D((()=>o((()=>t.import("./set-legacy4.js?v=1744703330658")),void 0))),l=a,s=L(e,"value"),{loading:d,setLoading:r}=X(),c=S([]),p=e=>{sessionStorage.setItem("typeValue",e),l("change"),l("update:value",e)},h=ee(n("Site.PHP.index_44"),{setOptions:(e,t)=>{t===s.value&&(s.value=-1),c.value=e.map((e=>({label:e.name,value:e.id}))),m()}}),_=()=>{h.show=!0},m=()=>{c.value.unshift({label:n("Site.PHP.index_45"),value:-1})};return m(),(async()=>{try{r(!0);const{message:e}=await de();u(e)?c.value=e.map((e=>({label:e.name,value:e.id}))):c.value=[],m()}finally{r(!1);const e=sessionStorage.getItem("typeValue");s.value=e?Number(e):-1}})(),(e,t)=>{const a=_e,n=we,l=y;return j(),V("div",Ke,[B(n,{value:M(s),"onUpdate:value":t[0]||(t[0]=e=>W(s)?s.value=e:null),loading:M(d),options:M(c),onUpdateValue:p},{action:$((()=>[B(a,{block:"",onClick:_},{default:$((()=>[U(O(e.$t("Site.PHP.index_43")),1)])),_:1})])),_:1},8,["value","loading","options"]),B(l,{show:M(h).show,"onUpdate:show":t[1]||(t[1]=e=>M(h).show=e),width:350,title:M(h).title,data:M(h).data,component:M(i)},null,8,["show","title","data","component"])])}}});e("default",k({__name:"index",setup(e){const n=D((()=>o((()=>t.import("./index-legacy218.js?v=1744703330658")),void 0))),i=D((()=>o((()=>t.import("./index-legacy219.js?v=1744703330658").then((e=>e.i))),void 0))),l=D((()=>o((()=>t.import("./index-legacy220.js?v=1744703330658")),void 0))),s=D((()=>o((()=>t.import("./ssl-log-legacy.js?v=1744703330658")),void 0))),{t:r}=T(),k=p(),b=h(),{web:H,webserver:I}=q(k),z=S(!1),K=ee(r("Site.PHP.index_9"),{done:async()=>{await Ve(),Ye()}}),L=()=>{K.show=!0},V=ee(r("Database.Mysql.index_3")),Q=()=>{V.show=!0},se=ee(r("SSL.Domain.index_5")),de=[{label:r("Site.PHP.index_5"),key:"default-page"},{label:r("Site.PHP.index_6"),key:"default-site"},{label:r("Site.PHP.index_7"),key:"php-version"},{label:r("Site.PHP.index_86"),key:"https"}],he=e=>{V.data.config={menu:e},V.show=!0},ye=E({show:!1,title:"",data:{siteInfo:null,config:{menu:"",subMenu:""}}}),ge=(e,t={})=>{ye.title=r("Site.PHP.index_13",[e.name,e.addtime]),ye.data.siteInfo=e,ye.data.config=Object.assign({menu:"",subMenu:""},t),ye.show=!0},we=S([]),{keys:ke,table:be,columns:Se}=te([{type:"selection",width:40},{key:"name",title:r("Site.PHP.index_17"),width:"12%",minWidth:110,sorter:!0,sortOrder:!1,ellipsis:{tooltip:!0},render:e=>B(Me,{row:e,onClick:()=>{ge(e)}},null)},{key:"status",title:r("Public.Table.Status"),width:"10%",minWidth:95,sorter:!0,sortOrder:!1,render:e=>B(Re,{row:e,onClick:t=>{ae({title:`${r("1"===t?"Site.PHP.index_21_2":"Site.PHP.index_21_3")} ${r("Site.PHP.index_21_1",[e.name])}`,content:r("1"===t?"Site.PHP.index_22":"Site.PHP.index_23"),onConfirm:async()=>{await re("1"===t,{id:e.id,name:e.name}),e.status=t}})}},null)},{key:"backup_count",title:r("Site.PHP.index_19"),width:"6%",minWidth:70,render:e=>B(We,{row:e},null)},{key:"path",title:r("Site.PHP.index_20"),width:"15%",minWidth:180,ellipsis:{tooltip:!0},render:e=>B(De,{row:e},null)},ne({type:"site",minWidth:70,callback:()=>{Ve()}}),{key:"edate",title:r("Site.PHP.index_25"),width:"8%",minWidth:96,render:e=>B($e,{row:e},null)},ie({width:"8%",onBlur:async(e,t)=>{await pe({id:t.id,ps:e})}}),{key:"php_version",title:r("Site.PHP.index_26"),width:70,render:e=>B(Ie,{row:e,onClick:()=>{ge(e,{menu:"php"})}},null)},{key:"site_ssl",title:r("Site.PHP.index_27"),width:"12%",minWidth:90,sorter:!0,sortOrder:!1,render:e=>B(Te,{row:e,sslInfo:we.value,callback:e=>{se.data.path=e,se.show=!0},onClick:()=>{ge(e,{menu:"ssl"})}},null)},{key:"attack",title:r("Site.PHP.index_24"),width:"4%",minWidth:80,ellipsis:{tooltip:!0},render:e=>B(ze,{row:e,onClick:()=>{ge(e,{menu:"logs",subMenu:"security"})}},null)},le({title:r("Public.Table.Operation"),width:"20%",maxWidth:200,options:e=>[{label:r("Site.PHP.index_14"),onClick:()=>{xe()}},{label:r("Site.PHP.index_15"),show:"nginx"===k.webserver||"apache"===k.webserver,onClick:async()=>{Pe(e)}},{label:r("Site.PHP.index_16"),onClick:()=>{ge(e)}},{label:r("Public.Btn.Del"),onClick:()=>{Ue([e])}}]})]),je=e=>{Se.value.forEach((t=>{const a=t;a.key===e.columnKey?a.sortOrder=e.order:a.sortOrder=void 0})),e.order?Be.order=`${e.columnKey} ${"descend"===e.order?"desc":"asc"}`:Be.order="",Ve()},Ce=[{key:"enable",type:"confirm",label:r("Site.Batch.index_1"),confirm:{title:r("Site.Batch.index_2"),desc:r("Site.Batch.index_3"),columns:[Se.value[1]],api:e=>re(!0,{id:e.id,name:e.name},!1),done:()=>{Ve()}}},{key:"disable",type:"confirm",label:r("Site.Batch.index_4"),confirm:{title:r("Site.Batch.index_5"),desc:r("Site.Batch.index_6"),columns:[Se.value[1]],api:e=>re(!1,{id:e.id,name:e.name},!1),done:()=>{Ve()}}},{key:"backup",type:"confirm",label:r("Site.Batch.index_7"),confirm:{title:r("Site.Batch.index_8"),desc:r("Site.Batch.index_9"),columns:[Se.value[1]],api:e=>ce({id:e.id},!1),done:()=>{Ve()}}},{key:"expired",label:r("Site.PHP.index_70"),onBatch:e=>{J({title:r("Site.PHP.index_71"),width:380,minHeight:72,footer:!0,data:{rows:e},component:D((()=>o((()=>t.import("./batch-legacy3.js?v=1744703330658")),void 0)))})}},{key:"php",label:r("Site.PHP.index_66"),onBatch:e=>{J({title:r("Site.PHP.index_65"),width:500,minHeight:198,footer:!0,data:{rows:e},component:D((()=>o((()=>t.import("./batch-legacy4.js?v=1744703330658")),void 0)))})}},{key:"category",label:r("Crontab.Planned.index_19"),onBatch:e=>{J({title:r("Site.Batch.index_22"),width:350,minHeight:72,footer:!0,data:{rows:e},component:D((()=>o((()=>t.import("./batch-legacy5.js?v=1744703330658")),void 0)))})}},{key:"delete",label:r("Site.Batch.index_10"),onBatch:e=>{Ue(e)}}],Be=E({p:1,limit:10,table:"sites",search:"",order:"",type:-1}),{loading:Oe,setLoading:Ke}=X(!0),Ve=async(e=!1)=>{try{Ke(!(we.value.length>0||e));const t={...N(Be)},{message:a}=await ue(t);d(a)?(be.data=u(a.data)?a.data:[],be.total=_(a.page)):(be.data=[],be.total=0)}finally{ke.value=[],Ke(!1)}};let qe=null;const Ee=S(!1),Ye=async()=>{qe&&clearTimeout(qe);const{message:e}=await He();u(e)&&(we.value=e,e.length>0?(Ee.value=!0,qe=window.setTimeout((()=>{Ye()}),3e3)):(Ee.value&&Ve(!0),qe&&clearTimeout(qe)))};Y((()=>k.isRefresh),(e=>{e&&(k.setRefresh(!1),Ve())})),Y((()=>b.taskCount),(()=>{Fe()}));const Fe=async()=>{try{await k.getConfig(),Ke(!1),await Z(),Ke(!0),k.web.setup?(z.value=!0,await Ve(),Ye()):(z.value=!1,Ke(!1),G())}catch{Ke(!1)}};return Fe(),F((()=>{qe&&clearTimeout(qe)})),(e,t)=>{const o=a,d=_e,r=c,u=fe,p=me,h=P,_=x,k=f,b=v,S=w,D=g,T=y,q=m,E=ve;return j(),C(E,null,{default:$((()=>[B(q,{install:M(H).setup},{desc:$((()=>[R("span",null,O(e.$t("Site.PHP.index_1")),1),B(o,{class:"ml-4px",onClick:t[0]||(t[0]=e=>M(oe)("nginx"))},{default:$((()=>[U(O(e.$t("Site.PHP.index_2")),1)])),_:1}),t[13]||(t[13]=R("span",{class:"mx-4px"},"|",-1)),B(o,{onClick:t[1]||(t[1]=e=>M(oe)("apache"))},{default:$((()=>[U(O(e.$t("Site.PHP.index_3")),1)])),_:1})])),default:$((()=>[B(D,{class:"p-16px",feedback:!0},{toolsLeft:$((()=>[B(d,{type:"primary",class:"add-site-btn",onClick:L},{default:$((()=>[U(O(e.$t("Site.PHP.index_4")),1)])),_:1}),B(p,null,{default:$((()=>[B(d,{onClick:Q},{default:$((()=>[U(O(e.$t("Database.Mysql.index_3")),1)])),_:1}),B(u,{trigger:"hover",options:de,onSelect:he},{default:$((()=>[B(d,null,{default:$((()=>[B(r,{name:"base-arrow-bottom"})])),_:1})])),_:1})])),_:1}),M(z)?(j(),C(h,{key:0,"soft-name":M(I)},null,8,["soft-name"])):A("",!0)])),toolsRight:$((()=>[B(Le,{value:M(Be).type,"onUpdate:value":t[2]||(t[2]=e=>M(Be).type=e),onChange:Ve},null,8,["value"]),B(_,{value:M(Be).search,"onUpdate:value":t[3]||(t[3]=e=>M(Be).search=e),placeholder:e.$t("Site.PHP.index_8"),onSearch:t[4]||(t[4]=e=>Ve(!1))},null,8,["value","placeholder"])])),table:$((()=>[B(k,{"checked-row-keys":M(ke),"onUpdate:checkedRowKeys":t[5]||(t[5]=e=>W(ke)?ke.value=e:null),loading:M(Oe),data:M(be).data,columns:M(Se),"onUpdate:sorter":je},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:$((()=>[B(b,{"checked-row-keys":M(ke),"onUpdate:checkedRowKeys":t[6]||(t[6]=e=>W(ke)?ke.value=e:null),data:M(be).data,options:Ce},null,8,["checked-row-keys","data"])])),pageRight:$((()=>[B(S,{page:M(Be).p,"onUpdate:page":t[7]||(t[7]=e=>M(Be).p=e),"page-size":M(Be).limit,"onUpdate:pageSize":t[8]||(t[8]=e=>M(Be).limit=e),"item-count":M(be).total,"store-key":"site-php-page",onRefresh:Ve},null,8,["page","page-size","item-count"])])),_:1}),B(T,{show:M(K).show,"onUpdate:show":t[9]||(t[9]=e=>M(K).show=e),title:M(K).title,data:M(K).data,width:700,height:540,footer:!0,component:M(n)},null,8,["show","title","data","component"]),B(T,{show:M(ye).show,"onUpdate:show":t[10]||(t[10]=e=>M(ye).show=e),title:M(ye).title,data:M(ye).data,width:860,height:700,component:M(i)},null,8,["show","title","data","component"]),B(T,{show:M(V).show,"onUpdate:show":t[11]||(t[11]=e=>M(V).show=e),title:M(V).title,data:M(V).data,width:950,height:620,component:M(l)},null,8,["show","title","data","component"]),B(T,{show:M(se).show,"onUpdate:show":t[12]||(t[12]=e=>M(se).show=e),title:M(se).title,data:M(se).data,width:700,height:450,footer:!1,component:M(s)},null,8,["show","title","data","component"])])),_:1},8,["install"])])),_:1})}}}))}}}));
