System.register(["./page_layout-legacy.js?v=1749179669910","./index-legacy122.js?v=1749179669910","./index-legacy.js?v=1749179669910","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1749179669910","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1749179669910","./index.vue_vue_type_script_setup_true_lang-legacy13.js?v=1749179669910","./public-legacy.js?v=1749179669910","./index.vue_vue_type_script_setup_true_lang-legacy9.js?v=1749179669910","./index-legacy120.js?v=1749179669910","./vue-legacy.js?v=1749179669910","./site-legacy4.js?v=1749179669910","./site-legacy.js?v=1749179669910","./soft-legacy.js?v=1749179669910","./columns-legacy.js?v=1749179669910","./utils-legacy3.js?v=1749179669910","./naive-legacy.js?v=1749179669910","./common-legacy.js?v=1749179669910","./__commonjsHelpers__-legacy.js?v=1749179669910","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1749179669910","./php-legacy.js?v=1749179669910","./useModal-legacy2.js?v=1749179669910"],(function(e,t){"use strict";var a,n,l,i,o,d,s,c,u,r,p,h,_,m,y,w,g,v,x,P,f,b,S,k,H,j,C,B,$,U,M,O,R,W,D,T,I,V,L,z,K,q,E,N,Y,A,F,G,J,Q,X,Z,ee,te,ae,ne,le,ie,oe,de,se,ce,ue,re,pe,he,_e,me,ye,we,ge,ve,xe,Pe,fe,be,Se,ke;return{setters:[e=>{a=e.o,n=e.a1,l=e.p,i=e.i,o=e.a,d=e.N,s=e.cs,c=e.u,u=e.c,r=e.b4,p=e._},e=>{h=e._},e=>{_=e._},e=>{m=e._},e=>{y=e._},e=>{w=e._},e=>{g=e.u,v=e.d,x=e.e,P=e.c,f=e.a,b=e.r,S=e.s,k=e.f,H=e.ab,j=e.m,C=e.h},e=>{B=e._},e=>{$=e._},e=>{U=e.d,M=e.t,O=e.r,R=e.e,W=e.R,D=e.a0,T=e.a1,I=e.P,V=e.c,L=e.a2,z=e.V,K=e.U,q=e.aj,E=e.Y,N=e.O,Y=e.ah,A=e.S,F=e._,G=e.j,J=e.w,Q=e.o,X=e.M,Z=e.n,ee=e.ao},e=>{te=e.l},e=>{ae=e.s,ne=e.c,le=e.d,ie=e.e,oe=e.f,de=e.h},null,e=>{se=e.S,ce=e.a,ue=e.B,re=e.P,pe=e.V,he=e.b,_e=e.A},e=>{me=e.o,ye=e.a},e=>{we=e.b_,ge=e.T,ve=e.aV,xe=e.cp,Pe=e.cm,fe=e.b$},e=>{be=e.Y,Se=e.j,ke=e.c},null,null,null,null],execute:function(){var He=document.createElement("style");He.textContent=".n-date-panel[data-v-0f7e7fa2]{margin:0}.n-date-panel[data-v-0f7e7fa2] .n-date-panel-calendar{padding:6px 0 12px}.n-date-panel[data-v-0f7e7fa2] .n-date-panel--month .n-date-panel-footer{display:none}.n-date-panel[data-v-0f7e7fa2] .n-date-panel-footer{padding:12px 0 6px}\n",document.head.appendChild(He);const je={class:"flex justify-end"},Ce=l(U({__name:"index",props:{row:{}},setup(e){const t=M(e,"row"),l=O(null),i=O(null),o=new Date;o.setHours(0,0,0,0);const d=R((()=>{const e=new Date(t.value.edate);return"0000-00-00"!==t.value.edate&&be(e,o)})),s=R((()=>{const e=new Date(t.value.edate);return"0000-00-00"!==t.value.edate&&be(e,Se(o,7))})),c=e=>be(e,Se(o,1)),u=()=>{l.value="0000-00-00"===t.value.edate?null:new Date(t.value.edate).getTime()},r=async()=>{await ae({id:t.value.id,edate:"0000-00-00"}),t.value.edate="0000-00-00",i.value?.setShow(!1)},p=async()=>{if(null===l.value)return;const e=ke(l.value,"yyyy-MM-dd");await ae({id:t.value.id,edate:e}),t.value.edate=e,i.value?.setShow(!1)};return(e,o)=>{const h=a,_=ge,m=ve,y=n,w=we;return W(),D(w,{ref_key:"popoverRef",ref:i,placement:"bottom",trigger:"click"},{trigger:T((()=>[I(h,{type:z(d)?"error":z(s)?"warning":"primary",onClick:u},{default:T((()=>[V(L("0000-00-00"===z(t).edate?e.$t("Site.PHP.index_34"):z(d)?e.$t("Site.PHP.index_28"):z(t).edate),1)])),_:1},8,["type"])])),default:T((()=>[I(y,{value:z(l),"onUpdate:value":o[0]||(o[0]=e=>q(l)?l.value=e:null),type:"date",panel:!0,actions:null,"is-date-disabled":c},{footer:T((()=>[K("div",je,[I(m,{size:"small"},{default:T((()=>[I(_,{onClick:r},{default:T((()=>[V(L(e.$t("Site.PHP.index_34")),1)])),_:1}),I(_,{disabled:null===z(l),onClick:p},{default:T((()=>[V(L(e.$t("Public.Btn.Confirm")),1)])),_:1},8,["disabled"])])),_:1})])])),_:1},8,["value"])])),_:1},512)}}}),[["__scopeId","data-v-0f7e7fa2"]]),{t:Be}=i.global;function $e(e){g({title:1===e.length?`${Be("Site.Cert.index_56")} [${e[0].name}]`:`${Be("Site.Cert.index_57")}`,width:480,minHeight:248,footer:!0,data:{rows:e},component:E((()=>o((()=>t.import("./index-legacy218.js?v=1749179669910")),void 0)))})}const Ue={class:"w-160px"},Me=U({__name:"index",props:{value:{default:null}},emits:["change","update:value"],setup(e,{emit:a}){const{t:n}=N(),l=E((()=>o((()=>t.import("./set-legacy4.js?v=1749179669910")),void 0))),i=a,s=Y(e,"value"),{loading:c,setLoading:u}=v(),r=O([]),p=async e=>{await sessionStorage.setItem("typeValue",e),await i("change"),i("update:value",e)},h=x(n("Site.PHP.index_44"),{setOptions:(e,t)=>{t===s.value&&(s.value=-1),r.value=e.map((e=>({label:e.name,value:e.id}))),y()}}),m=()=>{h.show=!0},y=()=>{r.value.unshift({label:n("Site.PHP.index_45"),value:-1})};return y(),(async()=>{try{u(!0);const{message:e}=await ne();d(e)?r.value=e.map((e=>({label:e.name,value:e.id}))):r.value=[],y()}finally{u(!1);const e=sessionStorage.getItem("typeValue");s.value=e?Number(e):-1}})(),(e,t)=>{const a=ge,n=xe,i=_;return W(),A("div",Ue,[I(n,{value:z(s),"onUpdate:value":t[0]||(t[0]=e=>q(s)?s.value=e:null),loading:z(c),options:z(r),onUpdateValue:p},{action:T((()=>[I(a,{block:"",onClick:m},{default:T((()=>[V(L(e.$t("Site.PHP.index_43")),1)])),_:1})])),_:1},8,["value","loading","options"]),I(i,{show:z(h).show,"onUpdate:show":t[1]||(t[1]=e=>z(h).show=e),width:350,title:z(h).title,data:z(h).data,component:z(l)},null,8,["show","title","data","component"])])}}});e("default",U({__name:"index",setup(e){const n=E((()=>o((()=>t.import("./index-legacy219.js?v=1749179669910")),void 0))),l=E((()=>o((()=>t.import("./index-legacy220.js?v=1749179669910").then((e=>e.i))),void 0))),i=E((()=>o((()=>t.import("./index-legacy221.js?v=1749179669910")),void 0))),U=E((()=>o((()=>t.import("./ssl-log-legacy.js?v=1749179669910")),void 0))),{t:M}=N(),R=s(),Y=c(),{web:A,webserver:ae}=F(R),ne=O(!1),we=x(M("Site.PHP.index_9"),{done:async()=>{await Ke(),Ne()}}),xe=()=>{we.show=!0},be=x(M("Database.Mysql.index_3")),Se=()=>{be.show=!0},ke=x(M("SSL.Domain.index_5")),He=[{label:M("Site.PHP.index_5"),key:"default-page"},{label:M("Site.PHP.index_6"),key:"default-site"},{label:M("Site.PHP.index_7"),key:"php-version"},{label:M("Site.PHP.index_86"),key:"https"}],je=e=>{be.data.config={menu:e},be.show=!0},Be=G({show:!1,title:"",data:{siteInfo:null,config:{menu:"",subMenu:""}}}),Ue=(e,t={})=>{Be.title=M("Site.PHP.index_13",[e.name,e.addtime]),Be.data.siteInfo=e,Be.data.config=Object.assign({menu:"",subMenu:""},t),Be.show=!0},Oe=O([]),{keys:Re,table:We,columns:De}=P([{type:"selection",width:40},{key:"name",title:M("Site.PHP.index_17"),width:"12%",minWidth:110,sorter:!0,sortOrder:!1,ellipsis:{tooltip:!0},render:e=>I(se,{row:e,onClick:()=>{Ue(e)}},null)},{key:"status",title:M("Public.Table.Status"),width:"10%",minWidth:95,sorter:!0,sortOrder:!1,render:e=>I(ce,{row:e,onClick:t=>{f({title:`${M("1"===t?"Site.PHP.index_21_2":"Site.PHP.index_21_3")} ${M("Site.PHP.index_21_1",[e.name])}`,content:M("1"===t?"Site.PHP.index_22":"Site.PHP.index_23"),onConfirm:async()=>{await le("1"===t,{id:e.id,name:e.name}),e.status=t}})}},null)},{key:"backup_count",title:M("Site.PHP.index_19"),width:"6%",minWidth:70,render:e=>I(ue,{row:e},null)},{key:"path",title:M("Site.PHP.index_20"),width:"15%",minWidth:180,ellipsis:{tooltip:!0},render:e=>I(re,{row:e},null)},b({type:"site",minWidth:70,callback:()=>{Ke()}}),{key:"edate",title:M("Site.PHP.index_25"),width:"8%",minWidth:96,render:e=>I(Ce,{row:e},null)},S({width:"8%",onBlur:async(e,t)=>{await de({id:t.id,ps:e})}}),{key:"php_version",title:M("Site.PHP.index_26"),width:70,render:e=>I(pe,{row:e,onClick:()=>{Ue(e,{menu:"php"})}},null)},{key:"site_ssl",title:M("Site.PHP.index_27"),width:"12%",minWidth:90,sorter:!0,sortOrder:!1,render:e=>I(he,{row:e,sslInfo:Oe.value,callback:e=>{ke.data.path=e,ke.show=!0},onClick:()=>{Ue(e,{menu:"ssl"})}},null)},{key:"attack",title:M("Site.PHP.index_24"),width:"4%",minWidth:80,ellipsis:{tooltip:!0},render:e=>I(_e,{row:e,onClick:()=>{Ue(e,{menu:"logs",subMenu:"security"})}},null)},k({title:M("Public.Table.Operation"),width:"20%",maxWidth:200,options:e=>[{label:M("Site.PHP.index_14"),onClick:()=>{me()}},{label:M("Site.PHP.index_15"),show:"nginx"===R.webserver||"apache"===R.webserver,onClick:async()=>{ye(e)}},{label:M("Site.PHP.index_16"),onClick:()=>{Ue(e)}},{label:M("Public.Btn.Del"),onClick:()=>{$e([e])}}]})]),Te=e=>{De.value.forEach((t=>{const a=t;a.key===e.columnKey?a.sortOrder=e.order:a.sortOrder=void 0})),e.order?Ve.order=`${e.columnKey} ${"descend"===e.order?"desc":"asc"}`:Ve.order="",Ke()},Ie=[{key:"enable",type:"confirm",label:M("Site.Batch.index_1"),confirm:{title:M("Site.Batch.index_2"),desc:M("Site.Batch.index_3"),columns:[De.value[1]],api:e=>le(!0,{id:e.id,name:e.name},!1),done:()=>{Ke()}}},{key:"disable",type:"confirm",label:M("Site.Batch.index_4"),confirm:{title:M("Site.Batch.index_5"),desc:M("Site.Batch.index_6"),columns:[De.value[1]],api:e=>le(!1,{id:e.id,name:e.name},!1),done:()=>{Ke()}}},{key:"backup",type:"confirm",label:M("Site.Batch.index_7"),confirm:{title:M("Site.Batch.index_8"),desc:M("Site.Batch.index_9"),columns:[De.value[1]],api:e=>ie({id:e.id},!1),done:()=>{Ke()}}},{key:"expired",label:M("Site.PHP.index_70"),onBatch:e=>{g({title:M("Site.PHP.index_71"),width:380,minHeight:72,footer:!0,data:{rows:e},component:E((()=>o((()=>t.import("./batch-legacy3.js?v=1749179669910")),void 0)))})}},{key:"php",label:M("Site.PHP.index_66"),onBatch:e=>{g({title:M("Site.PHP.index_65"),width:500,minHeight:198,footer:!0,data:{rows:e},component:E((()=>o((()=>t.import("./batch-legacy4.js?v=1749179669910")),void 0)))})}},{key:"category",label:M("Crontab.Planned.index_19"),onBatch:e=>{g({title:M("Site.Batch.index_22"),width:350,minHeight:72,footer:!0,data:{rows:e},component:E((()=>o((()=>t.import("./batch-legacy5.js?v=1749179669910")),void 0)))})}},{key:"delete",label:M("Site.Batch.index_10"),onBatch:e=>{$e(e)}}],Ve=G({p:1,limit:10,table:"sites",search:"",order:"",type:-1}),{loading:Le,setLoading:ze}=v(!0),Ke=async(e=!1)=>{try{ze(!(Oe.value.length>0||e));const t={...X(Ve)},{message:a}=await oe(t);u(a)?(We.data=d(a.data)?a.data:[],We.total=r(a.page)):(We.data=[],We.total=0)}finally{Re.value=[],ze(!1)}};let qe=null;const Ee=O(!1),Ne=async()=>{qe&&clearTimeout(qe);const{message:e}=await H();d(e)&&(Oe.value=e,e.length>0?(Ee.value=!0,qe=window.setTimeout((()=>{Ne()}),3e3)):(Ee.value&&Ke(!0),qe&&clearTimeout(qe)))};J((()=>R.isRefresh),(e=>{e&&(R.setRefresh(!1),Ke())})),J((()=>Y.taskCount),(()=>{Ye()}));const Ye=async()=>{try{await R.getConfig(),ze(!1),await Z(),ze(!0),R.web.setup?(ne.value=!0,await Ke(),Ne()):(ne.value=!1,ze(!1),te())}catch{ze(!1)}};return Ye(),Q((()=>{qe&&clearTimeout(qe)})),(e,t)=>{const o=a,d=ge,s=p,c=fe,u=ve,r=$,g=B,v=C,x=w,P=y,f=m,b=_,S=h,k=Pe;return W(),D(k,null,{default:T((()=>[I(S,{install:z(A).setup},{desc:T((()=>[K("span",null,L(e.$t("Site.PHP.index_1")),1),I(o,{class:"ml-4px",onClick:t[0]||(t[0]=e=>z(j)("nginx"))},{default:T((()=>[V(L(e.$t("Site.PHP.index_2")),1)])),_:1}),t[13]||(t[13]=K("span",{class:"mx-4px"},"|",-1)),I(o,{onClick:t[1]||(t[1]=e=>z(j)("apache"))},{default:T((()=>[V(L(e.$t("Site.PHP.index_3")),1)])),_:1})])),default:T((()=>[I(f,{class:"p-16px",feedback:!0},{toolsLeft:T((()=>[I(d,{type:"primary",class:"add-site-btn",onClick:xe},{default:T((()=>[V(L(e.$t("Site.PHP.index_4")),1)])),_:1}),I(u,null,{default:T((()=>[I(d,{onClick:Se},{default:T((()=>[V(L(e.$t("Database.Mysql.index_3")),1)])),_:1}),I(c,{trigger:"hover",options:He,onSelect:je},{default:T((()=>[I(d,null,{default:T((()=>[I(s,{name:"base-arrow-bottom"})])),_:1})])),_:1})])),_:1}),z(ne)?(W(),D(r,{key:0,"soft-name":z(ae)},null,8,["soft-name"])):ee("",!0)])),toolsRight:T((()=>[I(Me,{value:z(Ve).type,"onUpdate:value":t[2]||(t[2]=e=>z(Ve).type=e),onChange:Ke},null,8,["value"]),I(g,{value:z(Ve).search,"onUpdate:value":t[3]||(t[3]=e=>z(Ve).search=e),placeholder:e.$t("Site.PHP.index_8"),onSearch:t[4]||(t[4]=e=>Ke(!1))},null,8,["value","placeholder"])])),table:T((()=>[I(v,{"checked-row-keys":z(Re),"onUpdate:checkedRowKeys":t[5]||(t[5]=e=>q(Re)?Re.value=e:null),loading:z(Le),data:z(We).data,columns:z(De),"onUpdate:sorter":Te},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:T((()=>[I(x,{"checked-row-keys":z(Re),"onUpdate:checkedRowKeys":t[6]||(t[6]=e=>q(Re)?Re.value=e:null),data:z(We).data,options:Ie},null,8,["checked-row-keys","data"])])),pageRight:T((()=>[I(P,{page:z(Ve).p,"onUpdate:page":t[7]||(t[7]=e=>z(Ve).p=e),"page-size":z(Ve).limit,"onUpdate:pageSize":t[8]||(t[8]=e=>z(Ve).limit=e),"item-count":z(We).total,"store-key":"site-php-page",onRefresh:Ke},null,8,["page","page-size","item-count"])])),_:1}),I(b,{show:z(we).show,"onUpdate:show":t[9]||(t[9]=e=>z(we).show=e),title:z(we).title,data:z(we).data,width:700,height:540,footer:!0,component:z(n)},null,8,["show","title","data","component"]),I(b,{show:z(Be).show,"onUpdate:show":t[10]||(t[10]=e=>z(Be).show=e),title:z(Be).title,data:z(Be).data,width:860,height:700,component:z(l)},null,8,["show","title","data","component"]),I(b,{show:z(be).show,"onUpdate:show":t[11]||(t[11]=e=>z(be).show=e),title:z(be).title,data:z(be).data,width:950,height:620,component:z(i)},null,8,["show","title","data","component"]),I(b,{show:z(ke).show,"onUpdate:show":t[12]||(t[12]=e=>z(ke).show=e),title:z(ke).title,data:z(ke).data,width:700,height:450,footer:!1,component:z(U)},null,8,["show","title","data","component"])])),_:1},8,["install"])])),_:1})}}}))}}}));
