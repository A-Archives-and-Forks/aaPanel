import{_ as t}from"./index98.js?v=1747989938512";import{d as e,_ as a,f as n,R as s,a0 as i,a1 as o,V as r,c as l,a2 as c,P as u,U as p,ao as m}from"./vue.js?v=1747989938512";import{Y as d,Z as _,$ as f}from"./page_layout.js?v=1747989938512";import{T as y,b_ as g,c3 as v}from"./naive.js?v=1747989938512";import"./index99.js?v=1747989938512";import"./public.js?v=1747989938512";import"./common.js?v=1747989938512";import"./__commonjsHelpers__.js?v=1747989938512";const x=["innerHTML"],b=e({__name:"index",setup(e){const{getUpdateVersion:b,getInfo:w,getApiInfo:h}=d(),{version:A,newVersionInfo:j,hasNewVersion:$,isInstall:k,isUserAutoMatic:I,formToken:T,isExistWhite:U}=a(d());function M(t){return parseInt(t.replace(/\./g,""))}async function P(){if(!k.value)return;await b();const t=M(j.value.version),e=M(A.value);$.value=t>e}async function V(){await _(),await w(),P()}const C=async()=>{T.value.open||await f({t_type:2}),await f({t_type:3,limit_addr:T.value.limit_addr+"\n127.0.0.1"}),h()};return n((()=>{P(),h()})),(e,a)=>{const n=y,d=g,_=v,f=t;return s(),i(f,null,{"public-exam":o((()=>[r(k)&&r($)?(s(),i(_,{key:0,type:"warning",class:"mb-16px"},{default:o((()=>[l(c(e.$t("Account.Settings.index_17",[r(j).version]))+" "+c(e.$t("Account.Settings.index_19"))+c(r(j).uptime)+" ",1),u(n,{type:"primary",onClick:V,class:"ml-6"},{default:o((()=>[l(c(e.$t("Public.Btn.Update")),1)])),_:1}),u(d,{placement:"bottom",trigger:"hover"},{trigger:o((()=>[u(n,{size:"small",text:"",type:"primary",class:"ml-6"},{default:o((()=>[l(c(e.$t("Account.Settings.index_20")),1)])),_:1})])),default:o((()=>[p("div",{class:"large-text",innerHTML:r(j).updateMsg},null,8,x)])),_:1})])),_:1})):m("",!0),!r(U)&&r(k)?(s(),i(_,{key:1,type:"warning",class:"mb-16px"},{default:o((()=>[p("span",null,c(e.$t("Account.Account.account_533924-11")),1),u(n,{type:"primary",onClick:C,class:"ml-6"},{default:o((()=>[l(c(e.$t("Account.Account.account_533924-12")),1)])),_:1})])),_:1})):m("",!0),!r(I)&&r(k)?(s(),i(_,{key:2,type:"warning",class:"mb-16px"},{default:o((()=>[a[0]||(a[0]=p("span",null,"The current sub-panel version number is lower than 1.0.9, can not use the automatic parse function, please update the sub-panel and in the settings to enable the API and drop 127.0.0.1 to the whitelist!",-1)),u(n,{type:"primary",onClick:V,class:"ml-6"},{default:o((()=>[l(c(e.$t("Public.Btn.Update")),1)])),_:1})])),_:1})):m("",!0)])),_:1})}}});export{b as default};
