import{_ as t}from"./index100.js?v=1744703330658";import{d as a,_ as e,j as n,e as s,f as i,R as o,$ as r,a0 as l,V as c,c as u,a1 as p,P as m,U as d,ap as _}from"./vue.js?v=1744703330658";import{a4 as f,a5 as y,d as g,a6 as b,a7 as w}from"./page_layout.js?v=1744703330658";import{T as x,bZ as v,cq as h}from"./naive.js?v=1744703330658";import"./index101.js?v=1744703330658";import"./public.js?v=1744703330658";import"./common.js?v=1744703330658";import"./__commonjsHelpers__.js?v=1744703330658";const j=["innerHTML"],A=a({__name:"index",setup(a){const{getUpdateVersion:A,getInfo:$}=f(),{version:k,newVersionInfo:I,hasNewVersion:U,isInstall:M,isUserAutoMatic:P}=e(f());function T(t){return parseInt(t.replace(/\./g,""))}const V=n({open:!0,limit_addr:""}),C=s((()=>V.open&&V.limit_addr.includes("127.0.0.1")));async function H(){const{message:t}=await y();g(t)&&(V.open=t.open,V.limit_addr=t.limit_addr)}async function S(){if(!M.value)return;await A();const t=T(I.value.version),a=T(k.value);U.value=t>a}async function B(){await b(),await $(),S()}const L=async()=>{V.open||await w({t_type:2}),await w({t_type:3,limit_addr:V.limit_addr+"\n127.0.0.1"}),H()};return i((()=>{S(),H()})),(a,e)=>{const n=x,s=v,i=h,f=t;return o(),r(f,null,{"public-exam":l((()=>[c(M)&&c(U)?(o(),r(i,{key:0,type:"warning",class:"mb-16px"},{default:l((()=>[u(p(a.$t("Account.Settings.index_17",[c(I).version]))+" "+p(a.$t("Account.Settings.index_19"))+p(c(I).uptime)+" ",1),m(n,{type:"primary",onClick:B,class:"ml-6"},{default:l((()=>[u(p(a.$t("Public.Btn.Update")),1)])),_:1}),m(s,{placement:"bottom",trigger:"hover"},{trigger:l((()=>[m(n,{size:"small",text:"",type:"primary",class:"ml-6"},{default:l((()=>[u(p(a.$t("Account.Settings.index_20")),1)])),_:1})])),default:l((()=>[d("div",{class:"large-text",innerHTML:c(I).updateMsg},null,8,j)])),_:1})])),_:1})):_("",!0),!c(C)&&c(M)?(o(),r(i,{key:1,type:"warning",class:"mb-16px"},{default:l((()=>[d("span",null,p(a.$t("Account.Account.account_533924-11")),1),m(n,{type:"primary",onClick:L,class:"ml-6"},{default:l((()=>[u(p(a.$t("Account.Account.account_533924-12")),1)])),_:1})])),_:1})):_("",!0),!c(P)&&c(M)?(o(),r(i,{key:2,type:"warning",class:"mb-16px"},{default:l((()=>[e[0]||(e[0]=d("span",null,"The current sub-panel version number is lower than 1.0.9, can not use the automatic parse function, please update the sub-panel and in the settings to enable the API and drop 127.0.0.1 to the whitelist!",-1)),m(n,{type:"primary",onClick:B,class:"ml-6"},{default:l((()=>[u(p(a.$t("Public.Btn.Update")),1)])),_:1})])),_:1})):_("",!0)])),_:1})}}});export{A as default};
