System.register(["./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1742891699271","./page_layout-legacy.js?v=1742891699271","./file-legacy.js?v=1742891699271","./public-legacy.js?v=1742891699271","./naive-legacy.js?v=1742891699271","./vue-legacy.js?v=1742891699271","./common-legacy.js?v=1742891699271","./__commonjsHelpers__-legacy.js?v=1742891699271"],(function(e,l){"use strict";var a,t,n,i,s,c,o,u,d,r,p,v,f,m,x,h,y,g,_,k,b,C,w,P,S,j;return{setters:[e=>{a=e._},e=>{t=e._,n=e.b,i=e.W},e=>{s=e.a},e=>{c=e.b,o=e.c},e=>{u=e.a2,d=e.c1,r=e.bR,p=e.cP,v=e.T,f=e.bU},e=>{m=e.d,x=e.O,h=e.r,y=e.P,g=e.R,_=e.S,k=e.a1,b=e.c,C=e.a2,w=e.U,P=e.V,S=e.F,j=e.N},null,null],execute:function(){const l={class:"flex flex-col h-full"},$={class:"flex-1 w-0 truncate"},z={class:"flex flex-1 overflow-hidden"},D={class:"w-160px py-12px overflow-auto"},I=["onClick"],E={class:"flex-1 ml-8px"},R={class:"flex-1","b-l":"1 solid #aaa"};e("default",m({__name:"index",props:{data:{}},setup(e,{expose:m}){const{t:T}=x(),U=e,{path:F,checkedType:H,callback:L}=U.data,O=h([]),A=h([]),K=h(F||"/"),{table:N,columns:V}=c([{key:"checkbox",title:"",width:36,render:e=>H.includes(e.type)?y("div",{onClick:e=>{e.stopPropagation()}},[y(u,{checked:e.filename===A.value[0],onUpdateChecked:l=>{A.value=l?[e.filename]:[]}},null)]):""},{key:"filename",title:T("Component.SelectPath.index_3"),render:e=>y("div",{class:"flex"},[y("div",{class:"flex items-center flex-1 cursor-pointer",onClick:l=>{"dir"===e.type&&(l.preventDefault(),K.value+=`${"/"===K.value?"":"/"}${e.filename}`,J(),l.stopPropagation())}},[y("div",null,["dir"===e.type?y(t,{name:"base-dir",size:"16"},null):"","file"===e.type?y(t,{name:"base-file",size:"16",color:"#666"},null):""]),y("div",{class:"ml-6px flex-1 w-0"},[y(d,null,{default:()=>[e.filename]})])])])},{key:"time",title:T("Component.SelectPath.index_4"),width:146},{key:"permission",title:T("Component.SelectPath.index_5"),width:86},{key:"owner",title:T("Component.SelectPath.index_6"),width:72}]),W=e=>({onClick:()=>{if(H.includes(e.type)){const l=p(A.value,(l=>l===e.filename));A.value=-1!==l?[]:[e.filename]}},onDblclick:()=>{H.includes(e.type)&&(K.value+=`${"/"===K.value?"":"/"}${e.filename}`,J())}}),q=()=>{const e=K.value.substring(0,K.value.lastIndexOf("/"));K.value=""===e?"/":e,J()},{loading:B,setLoading:G}=o(),J=async()=>{try{G(!0),N.data=[],A.value=[];const{message:e}=await s({path:K.value});if(n(e)){const l=[],a=r(e,"DIR",[]),t=r(e,"FILES",[]);a.forEach((e=>{l.push(M(e,"dir"))})),t.forEach((e=>{l.push(M(e,"file"))})),K.value=e.PATH,N.data=l,O.value=r(e,"DISK",[])}}finally{G(!1)}},M=(e,l)=>{const a=e.split(";"),t=a[0],n=i(a[2]),s=a[3],c=a[4];return{path:("/"!==K.value?K.value+"/":"")+t,filename:t,time:n,permission:s,owner:c,type:l}};return J(),m({onConfirm:({hide:e})=>{const l=A.value.length>0?A.value[0]:"",a=("/"!==K.value?K.value+"/":"")+l,t=N.data.find((e=>e.filename===l));L?.(a,t),e()}}),(e,n)=>{const i=v,s=f,c=a;return g(),_("div",l,[y(s,{class:"items-center h-50px px-12px","b-b":"1 solid #aaa"},{default:k((()=>[y(i,{onClick:q},{default:k((()=>[b(C(e.$t("Component.SelectPath.index_1")),1)])),_:1}),w("div",$,C(e.$t("Component.SelectPath.index_2"))+": "+C(P(K)),1)])),_:1}),w("div",z,[w("div",D,[(g(!0),_(S,null,j(P(O),(e=>(g(),_("div",{key:e.path,class:"flex items-center p-8px pl-16px hover:bg-#ececec cursor-pointer transition-colors",onClick:l=>{return a=e.path,K.value=a,void J();var a}},[y(t,{name:"file-disk",size:"18",color:"#666"}),w("div",E,C(e.path)+" "+C(e.size[2]?`(${e.size[2]})`:""),1)],8,I)))),128))]),w("div",R,[y(c,{loading:P(B),"loading-num":10,bordered:!1,"virtual-scroll":!0,"max-height":456,data:P(N).data,columns:P(V),"row-props":W},null,8,["loading","data","columns"])])])])}}}))}}}));
