System.register(["./page_layout-legacy.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1744703330658","./logs-legacy.js?v=1744703330658","./public-legacy.js?v=1744703330658","./vue-legacy.js?v=1744703330658","./index-legacy104.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1744703330658","./naive-legacy.js?v=1744703330658","./index-legacy103.js?v=1744703330658","./index-legacy.js?v=1744703330658","./index-legacy95.js?v=1744703330658","./logs.vue_vue_type_script_setup_true_lang-legacy.js?v=1744703330658","./site-legacy.js?v=1744703330658","./common-legacy.js?v=1744703330658","./__commonjsHelpers__-legacy.js?v=1744703330658","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1744703330658"],(function(e,t){"use strict";var a,l,n,s,i,o,c,r,u,d,p,g,_,y,m,x,b,f,v,h,k,w,C,S,N,j,L,$,P,R,U,T,W,q,I,z,B,F,A,K,D,E,H,M,O,V,G,J,Q,X,Y,Z,ee;return{setters:[e=>{a=e.cw,l=e.d,n=e.a1,s=e.k,i=e.b9,o=e.cx,c=e.j,r=e.m},e=>{u=e._},e=>{d=e.c,p=e.e,g=e.f,_=e.h,y=e.s,m=e.i},e=>{x=e.c,b=e.b,f=e.u,v=e.a},e=>{h=e.d,k=e.r,w=e.j,C=e.R,S=e.S,N=e.P,j=e.V,L=e.U,$=e.$,P=e.ap,R=e.F,U=e.N,T=e.ag,W=e.a1,q=e.M,I=e.O,z=e.w,B=e.a0,F=e.c,A=e.af,K=e.e},e=>{D=e._},e=>{E=e._},e=>{H=e._},e=>{M=e._},e=>{O=e.T,V=e.bU,G=e.bz,J=e.ck},e=>{Q=e._},e=>{X=e._},e=>{Y=e._},e=>{Z=e._},e=>{ee=e.g},null,null,null],execute:function(){var t=document.createElement("style");t.textContent='@charset "UTF-8";.item[data-v-87bf7484]{height:calc(100vh - 230px);overflow:auto;border:1px solid #e9e9e9}.item[data-v-87bf7484]::-webkit-scrollbar{display:none}.item .list[data-v-87bf7484]{padding:10px;cursor:pointer}.item .list[data-v-87bf7484]:not(:last-child){border-bottom:1px solid #e9e9e9}.item .list[data-v-87bf7484]:hover{background:#f5f7fa}.item .list-active[data-v-87bf7484]{--un-bg-opacity:1;background-color:rgb(238 248 240 / var(--un-bg-opacity));--un-text-opacity:1;color:rgb(32 165 58 / var(--un-text-opacity))}[data-v-e3fe61d2] .button-color{--un-text-opacity:1 !important;color:rgb(239 8 8 / var(--un-text-opacity))!important}.box[data-v-7029a0a8]{height:calc(100vh - 190px)}\n',document.head.appendChild(t);const te={class:"w-240px"},ae={class:"item mt-10px"},le=["onClick"],ne=h({__name:"index",setup(e){const t=a(),s=k(),i=w({p:1,limit:999,search:"",type:-1}),o=k([]),{loading:c,setLoading:r}=x(),p=async()=>{try{r(!0);const{message:e}=await d(q(i));l(e)&&(t.setWebsite(e.data[0].name),s.value=e.data[0].name,o.value=e.data)}finally{r(!1)}};return p(),(e,a)=>{const l=u,r=n;return C(),S("div",te,[N(l,{value:j(i).search,"onUpdate:value":a[0]||(a[0]=e=>j(i).search=e),placeholder:e.$t("Logs.Panel.index_4"),onSearch:p},null,8,["value","placeholder"]),L("div",ae,[j(c)?(C(),$(r,{key:0,height:"36px",text:"",repeat:6})):P("",!0),(C(!0),S(R,null,U(j(o),(e=>(C(),S("div",{class:T(["list",{"list-active":j(s)==e.name}]),key:e.id,onClick:a=>{return l=e.name,t.setWebsite(l),void(s.value=l);var l}},W(e.name),11,le)))),128))])])}}}),se=s(ne,[["__scopeId","data-v-87bf7484"]]),ie=h({__name:"index",setup(e,{expose:t}){const n=a(),{t:s}=I(),{keys:o,table:c,columns:r}=b([{key:"username",title:s("Ftp.Analysis.Index_27")},{key:"type",title:s("Logs.Panel.index_6")},{key:"log",title:s("Public.Btn.Details")},{key:"addtime",align:"right",title:s("Logs.Panel.index_7")}]),u=w({search:n.websiteName,p:1,limit:10,stype:"Site manager"}),{loading:d,setLoading:g}=x(),_=async()=>{try{g(!0);const{message:e}=await p(u);l(e)&&(c.data=e.data,c.total=i(e.page))}finally{o.value=[],g(!1)}};z((()=>n.websiteName),(e=>{e&&(u.p=1,u.search=e,_())}));const y=()=>{n.websiteName&&_()};return y(),t({getList:y}),(e,t)=>{const a=O,l=M,n=H,s=E;return C(),$(s,{feedback:!1},{toolsLeft:B((()=>[N(a,{type:"primary",onClick:y},{default:B((()=>[F(W(e.$t("Public.Btn.Refresh")),1)])),_:1})])),table:B((()=>[N(l,{"checked-row-keys":j(o),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>A(o)?o.value=e:null),"row-key":"name",loading:j(d),data:j(c).data,columns:j(r)},null,8,["checked-row-keys","loading","data","columns"])])),pageRight:B((()=>[N(n,{page:j(u).p,"onUpdate:page":t[1]||(t[1]=e=>j(u).p=e),"page-size":j(u).limit,"onUpdate:pageSize":t[2]||(t[2]=e=>j(u).limit=e),"item-count":j(c).total,onRefresh:y},null,8,["page","page-size","item-count"])])),_:1})}}}),oe=h({__name:"index",setup(e,{expose:t}){const n=a(),{loading:s,setLoading:i}=x(),o=k("None"),c=async()=>{i(!0);try{const{message:e}=await g({siteName:n.websiteName});l(e)&&(o.value=e.result?e.result:"None")}finally{i(!1)}};z((()=>n.websiteName),(e=>{e&&c()}));const r=()=>{n.websiteName&&c()};return r(),t({getList:r}),(e,t)=>{const a=O,l=Q,n=V;return C(),$(n,{vertical:"",class:"h-full"},{default:B((()=>[N(a,{class:"self-start",type:"primary",onClick:r},{default:B((()=>[F(W(e.$t("Public.Btn.Refresh")),1)])),_:1}),N(l,{loading:j(s),log:j(o)},null,8,["loading","log"])])),_:1})}}}),ce=h({__name:"index",setup(e,{expose:t}){const n=a(),{loading:s,setLoading:i}=x(),o=k("None"),c=async()=>{i(!0);try{const{message:e}=await _({siteName:n.websiteName});l(e)&&(o.value=e.result?e.result:"None")}finally{i(!1)}};z((()=>n.websiteName),(e=>{e&&c()}));const r=()=>{n.websiteName&&c()};return r(),t({getList:r}),(e,t)=>{const a=O,l=Q,n=V;return C(),$(n,{vertical:"",class:"h-full"},{default:B((()=>[N(a,{class:"self-start",type:"primary",onClick:r},{default:B((()=>[F(W(e.$t("Public.Btn.Refresh")),1)])),_:1}),N(l,{loading:j(s),log:j(o)},null,8,["loading","log"])])),_:1})}}}),re={class:"text-error"},ue={class:"w-400px p-20px"},de={class:"mb-16px"},pe=s(h({__name:"index",setup(e,{expose:t}){const n=a(),s=o(),{t:i}=I(),u=k(!1),d=k(0),{keys:p,table:g,columns:_}=b([{key:"start_time",title:i("Logs.Panel.index_13")},{key:"time",title:i("Public.Unit.Time"),render:e=>Number(e.time).toFixed(2)+" Sec"},{key:"xss",title:i("Site.TableRow.index_4"),render:e=>e.xss>0?N(c,{onClick:()=>{$("xss")}},{default:()=>[e.xss]}):e.xss},{key:"sql",title:i("Site.TableRow.index_5"),render:e=>e.sql>0?N(c,{onClick:()=>{$("sql")}},{default:()=>[e.sql]}):e.sql},{key:"san",title:i("Site.TableRow.index_6"),render:e=>e.san>0?N(c,{class:"button-color",onClick:()=>{$("san")}},{default:()=>[e.san]}):e.san},{key:"php",title:i("Logs.Panel.index_14"),render:e=>e.php>0?N(c,{onClick:()=>{$("php")}},{default:()=>[e.php]}):e.php},{key:"ip",title:i("Logs.Website.index_5"),render:e=>e.ip>0?N(c,{onClick:()=>{$("ip")}},{default:()=>[e.ip]}):e.ip},{key:"url",title:i("Logs.Website.index_1"),render:e=>e.url>0?N(c,{onClick:()=>{$("url")}},{default:()=>[e.url]}):e.url},{key:"log",title:i("Security.Anti.Index_7"),render:e=>e.xss+e.sql+e.san+e.php+e.ip+e.url}]),h=()=>{v({title:i("Site.Config.index_104"),content:i("Logs.Website.index_3",[n.websiteName]),onConfirm:async({hide:e})=>{try{await y({siteName:P.value}),u.value=!0,w()}finally{e()}}})},w=(e=0)=>{let t=setTimeout((async()=>{const{message:e}=await ee({path:P.value});l(e)&&(d.value=e.result,d.value>=100?(r.success(i("Site.Config.index_107")),u.value=!1,d.value=0,q(),clearTimeout(t)):w(1e3))}),e)},$=e=>{f({title:`[${e}] ${i("Site.Config.index_103")}`,data:{type:e,path:P.value},component:Z})},P=K((()=>{let e="";switch(s.webserver){case"nginx":e=".log";break;case"apache":e="-access_log";break;default:e="_ols.access_log"}return`/www/wwwlogs/${n.websiteName}${e}`})),{loading:U,setLoading:T}=x(),q=async()=>{try{T(!0);const{message:e}=await m({siteName:P.value});l(e)&&(g.data=e.is_status?[e]:[])}finally{p.value=[],T(!1)}};return z((()=>n.websiteName),(e=>{e&&q()})),q(),t({init:q}),(e,t)=>{const a=O,l=M,n=E,s=Y,i=G,o=X;return C(),S(R,null,[N(n,{feedback:!1},{toolsLeft:B((()=>[N(a,{type:"primary",onClick:h},{default:B((()=>[F(W(e.$t("Site.Config.index_104")),1)])),_:1})])),table:B((()=>[N(l,{"checked-row-keys":j(p),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>A(p)?p.value=e:null),"row-key":"name","max-height":1e3,loading:j(U),data:j(g).data,columns:j(_)},null,8,["checked-row-keys","loading","data","columns"])])),_:1}),N(s,{class:"mt-16px"},{default:B((()=>[L("li",null,[F(W(e.$t("Site.Config.index_108"))+" ",1),L("span",re,W(e.$t("Site.Config.index_109")),1)]),L("li",null,W(e.$t("Site.Config.index_110")),1),L("li",null,W(e.$t("Site.Config.index_111")),1),L("li",null,W(e.$t("Site.Config.index_112")),1),L("li",null,[N(c,{href:"https://www.aapanel.com/forum/d/3351-nginx-waf-instructions",target:"_blank"},{default:B((()=>[F(W(e.$t("Site.Config.index_113")),1)])),_:1}),F(" "+W(e.$t("Site.Config.index_114")),1)])])),_:1}),N(o,{show:j(u),"onUpdate:show":t[1]||(t[1]=e=>A(u)?u.value=e:null)},{default:B((()=>[L("div",ue,[L("div",de,W(e.$t("Site.Config.index_115")),1),N(i,{type:"line",status:"success",height:24,percentage:j(d),"border-radius":4,"indicator-placement":"inside"},null,8,["percentage"])])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-e3fe61d2"]]),ge=s(h({__name:"index",setup(e){const{t:t}=I(),a=k("operation"),l=[{key:"operation",label:t("Security.Tabs.Index_7"),component:ie},{key:"access",label:t("Logs.Website.index_2"),component:oe},{key:"error",label:t("Logs.Website.index_4"),component:ce},{key:"security",label:t("Site.Config.index_102"),component:pe}];return(e,t)=>{const n=D;return C(),$(n,{class:"box",value:j(a),"onUpdate:value":t[0]||(t[0]=e=>A(a)?a.value=e:null),options:l},null,8,["value"])}}}),[["__scopeId","data-v-7029a0a8"]]);e("default",h({__name:"index",setup(e){const t=o();return(async()=>{await t.getConfig()})(),(e,t)=>{const a=V,l=J;return C(),$(l,{class:"p-16px"},{default:B((()=>[N(a,{class:"flex-nowrap!"},{default:B((()=>[N(se),N(ge)])),_:1})])),_:1})}}}))}}}));
